!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="/",t(0)}([function(e,t){"use strict";function n(e,t){u.innerText=e.title,y.innerText=e.artist+" - "+e.album,"local"===t&&(a.src="/local:/"+e.id),"online"===t&&(a.src="/online:/"+e.url),"drive"===t&&(a.src="/drive:/"+e.id),setTimeout(function(){s.classList.add("now")},500)}function o(){for(x.save(),E=c(),x.clearRect(0,0,g.width,g.height),b=0,M=E.length;M>b;b+=10){q=z[b],0===q.size?q.size=E[b]:q.size<E[b]?(q.size+=Math.floor((E[b]-q.size)/5),q.opacity=q.opacity+.02,q.opacity>1&&(q.opacity=1)):(q.size-=Math.floor((q.size-E[b])/5),0===E[b]?q.opacity=0:(q.opacity=q.opacity-.02,q.opacity<0&&(q.opacity=0,q.x=Math.random()*g.width,q.y=Math.random()*g.height)));var e=q.color.replace("0)",q.opacity+")");x.fillStyle=e,x.beginPath(),x.arc(q.x,q.y,q.size,0,2*Math.PI,!0),x.closePath(),x.fill()}x.restore()}function i(){var e=void 0,t=256,n=g.width,o=g.height,i=L.length;for(e=0;t>e;e++)z[e]={x:Math.random()*n,y:Math.random()*o,color:"rgba("+L[Math.floor(Math.random()*i)]+", 0)",size:0,opacity:Math.random()+.2}}function c(){var e=new Uint8Array(P.frequencyBinCount);return P.getByteFrequencyData(e),e}function r(){return I||T?void C(S):(S=k(r),void o())}var a=document.getElementById("player"),d=document.querySelector(".btn-prev"),l=document.querySelector(".btn-next"),s=document.querySelector(".detail"),u=document.querySelector(".song-title"),y=document.querySelector(".song-album"),w=document.querySelector(".visualization"),h=document.querySelector(".fullscreen"),m=document.querySelector(".controls"),p=[],f=null,v=0;document.addEventListener("DOMContentLoaded",function(){var e=window.location.href.replace(window.location.protocol,"ws:"),t=new WebSocket(e);t.addEventListener("open",function(){console.log("Connected")}),t.addEventListener("close",function(){console.log("Connection lost")}),t.addEventListener("message",function(e){var t=JSON.parse(decodeURIComponent(e.data));switch(t.type){case"init":if(0===t.songs.length)return void window.alert("Please select a song on Enjoy Music Player app then refresh this page");p=t.songs,f=t.playtype,v=t.current,2===t.playmode?a.loop=!0:a.loop=!1;var o=p[v];n(o,f)}}),d.addEventListener("click",function(){s.classList.remove("now"),v>0&&v--,n(p[v],f)},!1),l.addEventListener("click",function(){s.classList.remove("now"),v<p.length-1&&v++,n(p[v],f)},!1)});var g=document.getElementById("visual-canvas"),x=g.getContext("2d"),E=void 0,S=void 0,M=0,b=0,q=void 0,z=[],L=["105, 210, 231","27, 103, 107","190, 242, 2","235, 229, 77","0, 205, 172","22, 147, 165","249, 212, 35","255, 78, 80","231, 32, 78","12, 202, 186","255, 0, 111"];window.onresize=function(){g.width=window.innerWidth,g.height=window.innerHeight},g.width=window.innerWidth,g.height=window.innerHeight;var k=window.requestAnimationFrame,C=window.cancelAnimationFrame,A=window.AudioContext||window.webkitAudioContext,F=new A,P=F.createAnalyser(),B=F.createMediaElementSource(a);P.fftSize=512,B.connect(P),P.connect(F.destination);var I=!1,T=!1;w.addEventListener("click",function(){T=!T,r()},!1),h.addEventListener("click",function(){document.webkitFullscreenElement?document.webkitExitFullscreen():document.body.webkitRequestFullScreen()},!1),i(),a.onplay=function(){C(S),I=!1,r()},a.onpause=function(){I=!0},a.onended=function(){l.click()},m.style.opacity=1,setTimeout(function(){m.style.opacity=""},8e3)}]);