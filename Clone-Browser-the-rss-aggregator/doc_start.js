!function(){function e(){var e=document.body,t="";if(e&&1==e.childElementCount&&(t=e.children[0].tagName),"RSS"==t||"FEED"==t||"RDF"==t)return!0;if("PRE"==t){var a=new DOMParser,r=a.parseFromString(e.textContent,"text/xml");if(n(r))return!0}return!1}function n(e){var n=e.evaluate('//*[local-name()="rss" or local-name()="feed" or local-name()="RDF"]',e,null,0,null);if(!n)return!1;var t=n.iterateNext();return!!t&&(!t.parentElement||"BODY"==t.parentElement.tagName)}function t(e,n){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==t.readyState&&200==t.status&&n(t.responseText)},t.open("GET",o+e,!0),t.send()}var a,r=n(document),o="chrome-extension://"+chrome.i18n.getMessage("@@extension_id")+"/";document.addEventListener("DOMContentLoaded",function(){if(r||e()){if(!document.body)return void chrome.runtime.sendMessage({url:location.href});document.body.style.display="none",document.body.className="loading",document.body.innerHTML="<span id='cometestme'>&amp;</span>",document.head.innerHTML="",t("subscribe.html",function(e){var n=String(e).replace("<!doctype html>","").replace("<html>","").replace("</html>",""),t=document.implementation.createHTMLDocument("");t.body.innerHTML=n,document.body.appendChild(t.getElementById("wrapper")),document.body.appendChild(t.getElementById("loading"));var r=chrome.runtime.sendMessage;r({pleaseInsertCss:"subscribe.css"},function(){document.body.style.display="",r({pleaseInsertJavaScript:"lingua.js"},function(){r({pleaseInsertJavaScript:"jquery-2.0.3.min.js"},function(){window.pleaseSubscribeToThisUrl=a||location.href,r({pleaseInsertJavaScript:"subscribe.js"},function(){})})})})})}},!1)}();