/* Copyright (c) 2016 Armand Grillet.
See the license in the "About" section for further information. */
function CloseButtonManager(){this.head=$("head")[0],this.close=$("#window-close"),this.close.on("click",function(a){chrome.app.window.current().close()}),this.init()}function Localizer(){this.localizedText=$(".localized"),this.init()}function SettingsManager(){this.markdownSyntax=$("#markdown-radio"),this.gfmSyntax=$("#gfm-radio"),this.reset=$("#reset"),this.markdownSyntax.add(this.gfmSyntax).on("click",$.proxy(function(){chrome.storage.local.set({gfm:this.gfmSyntax[0].checked})},this)),this.reset.on("click",$.proxy(function(){this.clean()},this)),this.init()}CloseButtonManager.prototype={constructor:CloseButtonManager,init:function(){var a,b=document.createElement("link");b.setAttribute("rel","stylesheet"),b.setAttribute("type","text/css"),a=navigator.appVersion.indexOf("Mac")>-1?"mac":navigator.appVersion.indexOf("Win")>-1?"windows":"chromeos",b.setAttribute("href","../../css/more/more-frame-"+a+".css"),this.close.attr("class","cta little-icon-"+a.substring(0,3)+"-close"),this.head.appendChild(b)}},Localizer.prototype={constructor:Localizer,init:function(){this.localizedText.each(function(){$(this).html(chrome.i18n.getMessage(this.innerHTML))})}},SettingsManager.prototype={constructor:SettingsManager,clean:function(){chrome.storage.local.clear(function(){chrome.runtime.reload()})},init:function(){chrome.storage.local.get("gfm",$.proxy(function(a){a.gfm?a.gfm===!0?this.gfmSyntax.prop("checked",!0):this.markdownSyntax.prop("checked",!0):(chrome.storage.local.set({gfm:!0}),this.gfmSyntax.prop("checked",!0))},this))}},window.onload=function(){new CloseButtonManager,new Localizer,new SettingsManager};