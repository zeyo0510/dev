var GravitDesigner=function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1286)}({0:function(t,e){function r(){}r.getTypeId=function(t){return"number"==typeof t?t:"function"==typeof t&&t.prototype.hasOwnProperty("__gtype_id__")?t.prototype.__gtype_id__:t&&"number"==typeof t.__gtype_id__?t.__gtype_id__:null},r.getName=function(t){if(t){if("object"==typeof t&&(t=t.constructor),t&&"function"==typeof t){var e=/function (.{1,})\(/,r=e.exec(t.toString());return r&&r.length>1?r[1]:"anonymous"}return t.toString()}return"<null>"},r.inherit=function(t,e){if(t.prototype=Object.create(e.prototype),t.prototype.__gtype_id__=r._internalTypeIdCounter++,t.prototype.constructor=t,delete t.prototype.__gmixins__,e.prototype.__gmixins__){t.prototype.__gmixins__={};for(var n in e.prototype.__gmixins__)t.prototype.__gmixins__[n]=!0}if(e!=r)for(var i in e)i&&i.length>0&&"constructor"!==i&&"__gmixins__"!=i&&"toString"!=i&&"_"!=i.charAt(0)&&!t[i]&&(t[i]=e[i])},r.mix=function(t,e){r.inheritAndMix(t,null,e)},r.inheritAndMix=function(t,e,n){if(e&&this.inherit(t,e),n){t.prototype.__gmixins__||(t.prototype.__gmixins__={});for(var i=0;i<n.length;++i){var _=n[i].prototype;for(var a in _)if(a&&"constructor"!==a&&"toString"!=a&&"__gmixins__"!=a&&"__gtype_id__"!=a&&"hasMixin"!=a){if(a in t.prototype)throw new Error("Mixin "+_+" may not override "+a+" in "+t.prototype);t.prototype[a]=_[a]}if(_.__gtype_id__||(_.__gtype_id__=r._internalTypeIdCounter++),t.prototype.__gmixins__[_.__gtype_id__]=!0,_.__gmixins__)for(var s in _.__gmixins__)t.prototype.__gmixins__[s]=!0;for(var o=Object.getPrototypeOf(_);null!=o&&o!==Object.prototype;o=Object.getPrototypeOf(o))o.__gtype_id__||(o.__gtype_id__=r._internalTypeIdCounter++),t.prototype.__gmixins__[o.__gtype_id__]=!0}}},r._internalTypeIdCounter=0,r.prototype.__gtype_id__=-1,r.prototype.__gmixins__=null,r.prototype.hasMixin=function(t){return!(!this.__gmixins__||!this.__gmixins__[t.prototype.__gtype_id__])},r.prototype.toString=function(){var t=this.constructor.toString().match(/^function ([^\(]*)/);return"[Object "+(t?t[1]:"object")+"]"},t.exports=r},1286:function(t,e,r){function n(t,e,r){var n;try{if(n=t.canvas.$realCanvas.transferToImageBitmap(),t.__persistent&&"2d"===t.__contextType){var i=t.$realCtx.globalCompositeOperation;t.$realCtx.globalCompositeOperation="copy",t.$realCtx.drawImage(n,0,0),t.$realCtx.globalCompositeOperation=i}}catch(t){console.error("Graphics: CANNOT TRANSFER BITMAP. Out of memory?")}finally{postMessage({canvas:n,finished:e,skipped:r},[n])}}function i(t){var e=this._renderJobs[t.getId()];e||(this._renderJobs[t.getId()]=e),t.timeout&&(l(t.timeout),t.timeout=null),t.timeout=p(function(){t.resuming=!0;var e=t.getSave();render(e.ctx,0,t)},s)}function _(t,e){if(e=e||0,a<=e){if(2===e)return void console.error("Offscreen renderer:"+t);if(1===e)return void console.warn("Offscreen enderer:"+t);0===e&&console.log("Offscreen enderer: "+t)}}var a=2,s=0,o=0===s,h=r(87),u=r(782),p=o&&"undefined"!=typeof window&&window.requestAnimationFrame||setTimeout,l=o&&"undefined"!=typeof window&&window.cancelAnimationFrame||clearTimeout;onmessage=function(t){var e=t.data;if(console.log("received"),"d"===e.action)return void h.destroy(e);render(e,0)},_renderJobs=[],_renderParameters=[],workaroundCtx=null,render=function(t,e,r){0===e&&a<2&&console.log(this.dumpCode(t));var s,o,p,E,c=h.getLen(t),f=0,e=e||0,d=[],T=!1,R=r&&r.resuming;if(r||(r=this._renderJobs[t.__contextId],r?null!==r.timeout&&(console.warn("Render worker: rendering already scheduled"),l(r.timeout),r.timeout=null):(r=new u(t,0,this._renderParameters),r.initialRenderables=void 0,this._renderJobs[r.getId()]=r)),R)E=r.popSave(),f=E.execPtr,c=E.len,o=E.op,d=E.params||[],p=E.funcName,s=E.realCtx,r.hasSave()||(r.reset(),R=!1,E=null);else{if(s=h.initializeContext(t),t.canvas.rendering||h.resetExec(t),t.canvas.rendering||e>0&&t.canvas.rendered)return _("Reusing subcanvas 2"),t.canvas.$realCanvas;t.canvas.rendering=!0,f=t.__execPtr,r.addRenderable(t)}for(;f<c;){if(!E){if((o=h.getOp(t))===h.DELETE){f=t.__execPtr,h.clearPrevious(t);continue}if(o===h.FINISH){var A=h.getPtr(t);if(f=t.__execPtr,e>0){if(_("### Finish id = "+e+"; finishSrc rendering? "+A.rendering),A.rendering){h.clearPrevious(t);break}continue}_("### Finish id = 0; finishSrc rendering? "+A.rendering);continue}if(o===h.FLUSHCANVAS){workaroundCtx||(workaroundCtx=new OffscreenCanvas(1,1)),workaroundCtx.getContext("2d").drawImage(s.canvas,0,0);continue}if(o===h.FAKE){_("### fake func");continue}p=h.__ops[o],d=[]}for(;;){var y;if(E)y=E.val,E=null;else try{y=h.getVal(t)}catch(e){return _("Renderer: invalid value in stack",2),h.dispose(t),r.disposeRenderables(),r.exiting=!1,delete this._renderJobs[r.getId()],n(t.canvas.$realCanvas,!0,!0),t.canvas.$realCanvas}if(y===h.EXEC_TYPE){o=h.EXEC;break}if(y===h.MOV_TYPE){o=h.MOV;break}if(y&&y.$type===h.INSTANCE_RENDERERCANVAS){var m=y;if(!y.rendered&&!y.rendering||R){if(_("Rendering subcanvas"),r.parameters.quickRender&&e>0||r.parameters.noWebGL&&"webgl"===y.parent.__contextType?T=!0:y=this.render(y.parent,e+1,r),r.exiting)return r.pushSave({ctx:t,len:c,execPtr:f,realCtx:s,resumeLocation:1,op:o,params:d,funcName:p,val:m}),0===e&&(r.exiting=!1,n(t,!1,T||r.skipped)),t.canvas.$realCanvas}else _("Reusing subcanvas"),y=y.$realCanvas;if("texImage2D"===p&&y instanceof OffscreenCanvas){var g=y.transferToImageBitmap(),C=m.parent.$realCtx,I=C.globalCompositeOperation;C.globalCompositeOperation="copy",C.drawImage(g,0,0),C.globalCompositeOperation=I,y=g}}else y&&y.$type===h.INSTANCE_RENDERABLE&&(_("Rendering renderable"),r.lock(),y=h.Renderable.render(y,this,e+1,r),r.unlock(),void 0===y&&(T=!0));d.push(y)}if("_setWidth"===p)_("setting width:"+d[0]),t.canvas.$realCanvas.width=d[0];else if("_setHeight"===p)_("setting height:"+d[0]),t.canvas.$realCanvas.height=d[0];else if("getProgramParameter"===p||"getShaderParameter"===p){var N=s[p].apply(s,d);if(!N){"getProgramParameter"===p?_("link error: "+s.getProgramInfoLog(d[0]),2):_("shader error: "+s.getShaderInfoLog(parans[0]),2);break}}else if("_flush"===p&&o===h.EXEC);else if(o===h.EXEC)if(_("calling: "+p+" with parameters: "+d.join(",")),T)T=!1,r.skipped=!0;else try{s[p].apply(s,d)}catch(t){_("Calling command failed:"+p+" with parameters:"+d.join(","),1)}else{if(o!==h.MOV){_("Invalid op",2);break}_("setting prop:"+p+" with parameter: "+d[0]),s[p]=d[0]}if(f=t.__execPtr,!R&&r.isExpired()){if(f>=c)continue;if(r.hasSave())throw new Error("Renderer: exiting render loop without reaching save location");return r.pushSave({ctx:t,len:c,realCtx:s,execPtr:f,resumeLocation:2}),i(r),0===e&&n(t,!1,r.skipped),r.exiting=!0,t.canvas.$realCanvas}}return t.canvas.rendering=!1,f>=c&&(t.canvas.rendered=!0),0===e&&(r.disposeRenderables(),r.exiting=!1,delete this._renderJobs[r.getId()],n(t,!0,r.skipped)),h.postInitializeContext(t),t.canvas.$realCanvas};var E,c=0,f=0;dumpCode=function(t,e,r,n){var i=h.getLen(t),a=0;0!==(r=t.canvas.renderingName||t.canvas.renderedName?parseInt((t.canvas.renderingName||t.canvas.renderedName).match(/[0-9]+$/)[0]):null===r?++f:r||0)||t.canvas.rendering||c>0&&(E=!0);var s="canvas"+r,o="context"+r,u="";if(t.canvas.rendering)return u;t.canvas.renderingName||t.canvas.renderedName||"webgl"===t.__contextType&&E||(u="var "+s+" = new OffscreenCanvas(0,0);\n",u+="var "+o+" = "+s+".getContext('"+t.__contextType+"');\n","webgl"===t.__contextType&&(u+=o+".getExtension('OES_texture_float');\n",u+=o+".getExtension('OES_texture_float_linear');\n"),h.resetExec(t)),a=t.__execPtr;var n=n||[0];for(t.canvas.renderingName=s,t.canvas.rendering=!0;a<i;){var p=h.getOp(t),l=h.__ops[p],d=[];if(p!==h.DELETE)if(p!==h.FINISH){for(;;){var T;try{T=h.getVal(t)}catch(t){return _("Renderer: invalid value in stack",1),u}if(T===h.EXEC_TYPE){p=h.EXEC;break}if(T===h.MOV_TYPE){p=h.MOV;break}if("string"==typeof T)T='"'+T+'"';else if(T&&T.$type===h.INSTANCE_RENDERERCANVAS)if(T.renderedName||T.renderingName)if(T.renderingName)if(T.rendering)T=T.renderingName;else{var R=T.renderingName;u+=this.dumpCode(T.parent,!1,null,n),T=R}else if(!T.rendered&&T.renderedName){var R=T.renderedName;T.rendering||(u+=this.dumpCode(T.parent,!1,null,n)),T=R}else T=T.renderedName;else{var A=++f;T=this.dumpCode(T.parent,!1,A,n),u+=T,T="canvas"+A}else if(T instanceof OffscreenCanvas)console.log("############## CANNOT DUMP IMAGE - OFF MAIN THREAD");else if(T&&T.$type===h.INSTANCE_RENDERABLE){var y="pattern"+r+"_"+c;T.$renderedVariable||(u+=h.Renderable.dumpCode(T,o,y,this,r,n),c++),T=h.Renderable.dumpCode(T,o,y,this,r,n)}else if(T instanceof Float32Array)T="new Float32Array(["+T.join(",")+"])";else if(T instanceof Int32Array)T="new Int32Array(["+T.join(",")+"])";else if(T instanceof Float64Array)T="new Float64Array(["+T.join(",")+"])";else{if(T instanceof Array)throw new Error("Array parameter not supported");if(null===T)T="null";else if(void 0===T)T="undefined";else if("webgl"===t.__contextType&&"number"==typeof T){var m=parseInt(T);if(m===T){var g=h.getGLConst(T);g&&(T=o+"."+g)}}}d.push(T)}if("_setWidth"===l)u+=s+".width = "+d[0]+"\n";else if("_setHeight"===l)u+=s+".height = "+d[0]+"\n";else if("_flush"===l&&p===h.EXEC)u+="// FLUSHED\n";else if(p===h.EXEC)"shaderSource"===l&&(d[1]=d[1].replace(/\n/g,"")),u+=o+"."+l+"("+d.join(",")+");\n";else{if(p!==h.MOV)return _("Invalid op",2),u+"<== ERROR ###";u+=o+"."+l+" = "+d[0]+";\n"}a=t.__execPtr}else{var C=h.getPtr(t);if(a=t.__execPtr,r>0){if(_("### Finish id = "+r+"; finishSrc rendering? "+C.rendering),C.rendering)break;continue}_("### Finish id = 0; finishSrc rendering? "+C.rendering)}else a=t.__execPtr}if(0===r)for(var I=0;I<n[0];I++)u+="}";if(0===r&&e){var N=btoa("<!DOCTYPE html><html><body><script type='text/javascript'>"+u+"<\/script></body></html>");u="data:text/html;base64,"+N}return t.canvas.rendering=!1,a>=i&&(t.canvas.renderedName=t.canvas.renderingName,t.canvas.renderingName=null),u}},176:function(t,e,r){function n(t,e,r,i){this.__contextType=t||"2d",this.__contextAttributes=e,this.__persistent=i||!1,this.__contextId=c++,this.name="context"+this.__contextId,this.$type=n.INSTANCE_RENDERERCTX,this.canvas=new n.RendererCanvas(this),this.$realCtx=this.canvas.$realCanvas.getContext(this.__contextType,e),this.__renderer=r}function i(t){var e=null;return 0===t?null:(p.some(function(r){return l[r]===t&&(e=r,!0)}),e)}function _(t,e){return t.map(function(t){if(t instanceof n.RendererCanvas)return t.name;if(t instanceof n)return t.name;if(t instanceof n.Renderable)return t.name;if("string"==typeof t)return'"'+t+'"';if(t instanceof Float32Array)return"new Float32Array(["+t.join(",")+"])";if(t instanceof Int32Array)return"new Int32Array(["+t.join(",")+"])";if(t instanceof Float64Array)return"new Float64Array(["+t.join(",")+"])";if(null===t)return"null";if(void 0===t)return"undefined";if("webgl"===e.__contextType&&"number"==typeof t){if(parseInt(t)===t){var r=i(t);if(r)return e.name+"."+r}}return t})}function a(t){return t.map(function(t){return t instanceof n.RendererCanvas?t.$realCanvas:t instanceof n?t.$realCtx:t instanceof n.Renderable?t.$rendered:t})}function s(t,e,r,n){var i=Array.prototype.slice.call(r||[]),s=_(i,t),o=a(i);"shaderSource"===e&&(s[1]=s[1].replace(/\n/g,"")),!0===n&&(console.time(e+y),f+="console.time('"+e+y+"');\n"),f+=t.name+"."+e+"("+(s?s.join(","):"")+");\n";var h=t.$realCtx[e].apply(t.$realCtx,o);return n&&(console.timeEnd(e+y),f+="console.timeEnd('"+e+y+"');\n",y++),h}function o(t,e,r){var n=[r[0]],i=_(n,t)[0],s=a(n)[0];f+=t.name+"."+e+" = "+i+";\n",t.$realCtx[e]=s}function h(t,e,r,n){var i=Array.prototype.slice.call(e||[]),s=i[0],o=i.slice(1),h=_(o,s),u=a(o);t.name=r+t.__renderableId,t.$rendered=s.$realCtx[n].apply(s.$realCtx,u),f+="var "+t.name+" = "+s.name+"."+n+"("+h.join(",")+");\n"}var u=r(0),p=["DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","COLOR_BUFFER_BIT","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","ZERO","ONE","SRC_COLOR","ONE_MINUS_SRC_COLOR","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","DST_ALPHA","ONE_MINUS_DST_ALPHA","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA_SATURATE","FUNC_ADD","BLEND_EQUATION","BLEND_EQUATION_RGB","BLEND_EQUATION_ALPHA","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","BLEND_DST_RGB","BLEND_SRC_RGB","BLEND_DST_ALPHA","BLEND_SRC_ALPHA","CONSTANT_COLOR","ONE_MINUS_CONSTANT_COLOR","CONSTANT_ALPHA","ONE_MINUS_CONSTANT_ALPHA","BLEND_COLOR","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","ARRAY_BUFFER_BINDING","ELEMENT_ARRAY_BUFFER_BINDING","STREAM_DRAW","STATIC_DRAW","DYNAMIC_DRAW","BUFFER_SIZE","BUFFER_USAGE","CURRENT_VERTEX_ATTRIB","FRONT","BACK","FRONT_AND_BACK","TEXTURE_2D","CULL_FACE","BLEND","DITHER","STENCIL_TEST","DEPTH_TEST","SCISSOR_TEST","POLYGON_OFFSET_FILL","SAMPLE_ALPHA_TO_COVERAGE","SAMPLE_COVERAGE","NO_ERROR","INVALID_ENUM","INVALID_VALUE","INVALID_OPERATION","OUT_OF_MEMORY","CW","CCW","LINE_WIDTH","ALIASED_POINT_SIZE_RANGE","ALIASED_LINE_WIDTH_RANGE","CULL_FACE_MODE","FRONT_FACE","DEPTH_RANGE","DEPTH_WRITEMASK","DEPTH_CLEAR_VALUE","DEPTH_FUNC","STENCIL_CLEAR_VALUE","STENCIL_FUNC","STENCIL_FAIL","STENCIL_PASS_DEPTH_FAIL","STENCIL_PASS_DEPTH_PASS","STENCIL_REF","STENCIL_VALUE_MASK","STENCIL_WRITEMASK","STENCIL_BACK_FUNC","STENCIL_BACK_FAIL","STENCIL_BACK_PASS_DEPTH_FAIL","STENCIL_BACK_PASS_DEPTH_PASS","STENCIL_BACK_REF","STENCIL_BACK_VALUE_MASK","STENCIL_BACK_WRITEMASK","VIEWPORT","SCISSOR_BOX","COLOR_CLEAR_VALUE","COLOR_WRITEMASK","UNPACK_ALIGNMENT","PACK_ALIGNMENT","MAX_TEXTURE_SIZE","MAX_VIEWPORT_DIMS","SUBPIXEL_BITS","RED_BITS","GREEN_BITS","BLUE_BITS","ALPHA_BITS","DEPTH_BITS","STENCIL_BITS","POLYGON_OFFSET_UNITS","POLYGON_OFFSET_FACTOR","TEXTURE_BINDING_2D","SAMPLE_BUFFERS","SAMPLES","SAMPLE_COVERAGE_VALUE","SAMPLE_COVERAGE_INVERT","COMPRESSED_TEXTURE_FORMATS","DONT_CARE","FASTEST","NICEST","GENERATE_MIPMAP_HINT","BYTE","UNSIGNED_BYTE","SHORT","UNSIGNED_SHORT","INT","UNSIGNED_INT","FLOAT","DEPTH_COMPONENT","ALPHA","RGB","RGBA","LUMINANCE","LUMINANCE_ALPHA","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","FRAGMENT_SHADER","VERTEX_SHADER","MAX_VERTEX_ATTRIBS","MAX_VERTEX_UNIFORM_VECTORS","MAX_VARYING_VECTORS","MAX_COMBINED_TEXTURE_IMAGE_UNITS","MAX_VERTEX_TEXTURE_IMAGE_UNITS","MAX_TEXTURE_IMAGE_UNITS","MAX_FRAGMENT_UNIFORM_VECTORS","SHADER_TYPE","DELETE_STATUS","LINK_STATUS","VALIDATE_STATUS","ATTACHED_SHADERS","ACTIVE_UNIFORMS","ACTIVE_ATTRIBUTES","SHADING_LANGUAGE_VERSION","CURRENT_PROGRAM","NEVER","LESS","EQUAL","LEQUAL","GREATER","NOTEQUAL","GEQUAL","ALWAYS","KEEP","REPLACE","INCR","DECR","INVERT","INCR_WRAP","DECR_WRAP","VENDOR","RENDERER","VERSION","NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","TEXTURE","TEXTURE_CUBE_MAP","TEXTURE_BINDING_CUBE_MAP","TEXTURE_CUBE_MAP_POSITIVE_X","TEXTURE_CUBE_MAP_NEGATIVE_X","TEXTURE_CUBE_MAP_POSITIVE_Y","TEXTURE_CUBE_MAP_NEGATIVE_Y","TEXTURE_CUBE_MAP_POSITIVE_Z","TEXTURE_CUBE_MAP_NEGATIVE_Z","MAX_CUBE_MAP_TEXTURE_SIZE","TEXTURE0","TEXTURE1","TEXTURE2","TEXTURE3","TEXTURE4","TEXTURE5","TEXTURE6","TEXTURE7","TEXTURE8","TEXTURE9","TEXTURE10","TEXTURE11","TEXTURE12","TEXTURE13","TEXTURE14","TEXTURE15","TEXTURE16","TEXTURE17","TEXTURE18","TEXTURE19","TEXTURE20","TEXTURE21","TEXTURE22","TEXTURE23","TEXTURE24","TEXTURE25","TEXTURE26","TEXTURE27","TEXTURE28","TEXTURE29","TEXTURE30","TEXTURE31","ACTIVE_TEXTURE","REPEAT","CLAMP_TO_EDGE","MIRRORED_REPEAT","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","INT_VEC2","INT_VEC3","INT_VEC4","BOOL","BOOL_VEC2","BOOL_VEC3","BOOL_VEC4","FLOAT_MAT2","FLOAT_MAT3","FLOAT_MAT4","SAMPLER_2D","SAMPLER_CUBE","VERTEX_ATTRIB_ARRAY_ENABLED","VERTEX_ATTRIB_ARRAY_SIZE","VERTEX_ATTRIB_ARRAY_STRIDE","VERTEX_ATTRIB_ARRAY_TYPE","VERTEX_ATTRIB_ARRAY_NORMALIZED","VERTEX_ATTRIB_ARRAY_POINTER","VERTEX_ATTRIB_ARRAY_BUFFER_BINDING","IMPLEMENTATION_COLOR_READ_TYPE","IMPLEMENTATION_COLOR_READ_FORMAT","COMPILE_STATUS","LOW_FLOAT","MEDIUM_FLOAT","HIGH_FLOAT","LOW_INT","MEDIUM_INT","HIGH_INT","FRAMEBUFFER","RENDERBUFFER","RGBA4","RGB5_A1","RGB565","DEPTH_COMPONENT16","STENCIL_INDEX8","DEPTH_STENCIL","RENDERBUFFER_WIDTH","RENDERBUFFER_HEIGHT","RENDERBUFFER_INTERNAL_FORMAT","RENDERBUFFER_RED_SIZE","RENDERBUFFER_GREEN_SIZE","RENDERBUFFER_BLUE_SIZE","RENDERBUFFER_ALPHA_SIZE","RENDERBUFFER_DEPTH_SIZE","RENDERBUFFER_STENCIL_SIZE","FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE","FRAMEBUFFER_ATTACHMENT_OBJECT_NAME","FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL","FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE","COLOR_ATTACHMENT0","DEPTH_ATTACHMENT","STENCIL_ATTACHMENT","DEPTH_STENCIL_ATTACHMENT","NONE","FRAMEBUFFER_COMPLETE","FRAMEBUFFER_INCOMPLETE_ATTACHMENT","FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT","FRAMEBUFFER_INCOMPLETE_DIMENSIONS","FRAMEBUFFER_UNSUPPORTED","FRAMEBUFFER_BINDING","RENDERBUFFER_BINDING","MAX_RENDERBUFFER_SIZE","INVALID_FRAMEBUFFER_OPERATION","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","CONTEXT_LOST_WEBGL","UNPACK_COLORSPACE_CONVERSION_WEBGL","BROWSER_DEFAULT_WEBGL"],l=[],E={},c=0;n.INSTANCE_RENDERERCTX=1,n.INSTANCE_RENDERABLE=16,n.INSTANCE_RENDERERCANVAS=256,n.RendererCanvas=function(t){this.parent=t,this.$type=n.INSTANCE_RENDERERCANVAS,this.$realCanvas=document.createElement("canvas"),this.name="canvas"+t.__contextId,f+="var "+this.name+' = document.createElement("canvas");\n',f+="var "+t.name+" = "+this.name+'.getContext("'+t.__contextType+'",'+(t.__contextAttributes?JSON.stringify(t.__contextAttributes):"null")+");\n",0===t.__contextId&&(f+="document.body.appendChild("+this.name+");\n")},n.RendererCanvas.prototype.parent=null,n.RendererCanvas.prototype.rendered=!1,n.RendererCanvas.prototype.rendering=!1,n.RendererCanvas.prototype.name=null,n.RendererCanvas.prototype.$realCanvas=null,n.RendererCanvas.prototype.$renderedBitmap=null,n.RendererCanvas.prototype.$type=n.INSTANCE_RENDERERCANVAS;var f="";Object.defineProperties(n.RendererCanvas.prototype,{width:{set:function(t){f+="canvas"+this.parent.__contextId+".width = "+t+"\n",this.$realCanvas.width=t},get:function(){return this.$realCanvas.width}},height:{set:function(t){f+="canvas"+this.parent.__contextId+".height = "+t+"\n",this.$realCanvas.height=t},get:function(){return this.$realCanvas.height}},__realCanvas:{get:function(){return this.$realCanvas}}}),n.RendererCanvas.prototype.getContext=function(t){return this.parent},n.RendererCanvas.prototype.addEventListener=function(t,e){},n.RendererCanvas.prototype.flushCanvas=function(){f+='var workaroundCtx = document.createElement("canvas").getContext("2d");\n\t\t     workaroundCtx.drawImage('+this.name+",0,0);\n";var t=document.createElement("canvas");t.width=t.height=1,workaroundCtx=t.getContext("2d"),workaroundCtx.drawImage(this.$realCanvas,0,0)},n.RendererCanvas.prototype.toDataURL=function(){return this.$realCanvas.toDataURL()};var d=0,T=[],R=0;n.Renderable=function(t){this.ctx=t,this.$type=n.INSTANCE_RENDERABLE,this.$renderable_type=this.RENDERABLE_TYPE,this.__renderableId=R++,this.name="pattern"+this.__renderableId},u.inherit(n.Renderable,u),n.Renderable.inherit=function(t,e){u.inherit(t,e),t.prototype.RENDERABLE_TYPE=++d,T[d]=t.prototype},n.Renderable.prototype.ctx=null,n.Renderable.prototype.__renderableId=0,n.Renderable.prototype.$rendered=void 0,n.Renderable.prototype.name=null,n.Renderable.prototype.$type=n.INSTANCE_RENDERABLE,n.Renderable.prototype.$renderable_type=0,n.prototype.canvas=null,n.prototype.__contextType=0,n.prototype.__renderer=null,n.prototype.__persistent=!1,n.prototype.__contextId=0,n.prototype.name=null,n.prototype.$type=n.INSTANCE_RENDERERCTX,n.initialize=function(t){},n.getLog=function(){return f},n.clearLog=function(){f=""},n.getLen=function(){return 0},Object.defineProperties(n.prototype,{__realCtx:{get:function(){return this.$realCtx}}});var A=0;n.__ops=[],Object.keys(n.prototype).forEach(function(t,e){t.startsWith("__")||t.startsWith("$")||t.match(/^[A-Z0-9\_]+$/)||(n.__ops.push(t),n[t]=A++)}),n.__getters=[];var y=0;n.prototype.arc=function(t,e,r,n,i,_){s(this,"arc",arguments)},n.prototype.beginPath=function(){s(this,"beginPath")},n.prototype.bezierCurveTo=function(t,e,r,n,i,_){s(this,"bezierCurveTo",arguments)},n.prototype.clearRect=function(t,e,r,n){s(this,"clearRect",arguments)},n.prototype.clip=function(t){s(this,"clip",arguments)},n.prototype.closePath=function(){s(this,"closePath",arguments)},n.LinearGradient=function(t,e,r,i,_){n.Renderable.call(t),h(this,arguments,"linearGradient","createLinearGradient")},n.Renderable.inherit(n.LinearGradient,n.Renderable),n.LinearGradient.prototype.addColorStop=function(t,e){this.$rendered.addColorStop(t,e),f+=this.name+".addColorStop("+t+',"'+e+'");\n'},n.RadialGradient=function(t,e,r,n,i,_,a){h(this,arguments,"radialGradient","createRadialGradient")},n.Renderable.inherit(n.RadialGradient,n.Renderable),n.RadialGradient.prototype.addColorStop=function(t,e){this.$rendered.addColorStop(t,e),f+=this.name+".addColorStop("+t+',"'+e+'");\n'},n.Pattern=function(t,e,r){h(this,arguments,"pattern","createPattern")},n.Renderable.inherit(n.Pattern,n.Renderable),n.prototype.createLinearGradient=function(t,e,r,i){return new n.LinearGradient(this,t,e,r,i)},n.prototype.createPattern=function(t,e){return new n.Pattern(this,t,e)},n.prototype.createRadialGradient=function(t,e,r,i,_,a){return new n.RadialGradient(this,t,e,r,i,_,a)},n.prototype.drawImage=function(t,e,r,n,i,_,a,o,h){var u=[t,e,r];void 0!==n&&u.push(n,i),void 0!==_&&u.push(_,a,o,h),s(this,"drawImage",u,"function"==typeof console.time&&!0)},n.prototype.fill=function(t){t?s(this,"fill",arguments):s(this,"fill")},n.prototype.fillRect=function(t,e,r,n){s(this,"fillRect",arguments)},n.prototype.fillText=function(t,e,r){s(this,"fillText",arguments)},n.prototype.getImageData=function(t,e,r,n){return null},n.prototype.flushCanvas=function(){this.canvas.flushCanvas()},n.prototype.putImageData=function(t,e,r){},n.prototype.getLineDash=function(){return this.canvas.$realCanvas.getLineDash()},n.prototype.lineTo=function(t,e){s(this,"lineTo",arguments)},n.prototype.measureText=function(t){return 0},n.prototype.moveTo=function(t,e){s(this,"moveTo",arguments)},n.prototype.quadraticCurveTo=function(t,e,r,n){s(this,"quadraticCurveTo",arguments)},n.prototype.restore=function(){s(this,"restore",arguments)},n.prototype.rotate=function(t){s(this,"rotate",arguments)},n.prototype.save=function(){s(this,"save",arguments)},n.prototype.scale=function(t,e){s(this,"scale",arguments)},n.prototype.setLineDash=function(t){s(this,"setLineDash",arguments)},n.prototype.setTransform=function(t,e,r,n,i,_){s(this,"setTransform",arguments)},n.prototype.stroke=function(){s(this,"stroke",arguments)},n.prototype.strokeRect=function(t,e,r,n){s(this,"strokeRect",arguments)},n.prototype.strokeText=function(t,e,r){s(this,"strokeText",arguments)},n.prototype.transform=function(t,e,r,n,i,_){s(this,"transform",arguments)},n.prototype.translate=function(t,e){s(this,"translate",arguments)};Object.defineProperties(n.prototype,{fillStyle:{get:function(){return this.$realCtx.fillStyle},set:function(t){o(this,"fillStyle",arguments)},enumerable:!0},filter:{get:function(){return this.$realCtx.filter},set:function(t){o(this,"filter",arguments)},enumerable:!0},globalAlpha:{get:function(){return this.$realCtx.globalAlpha},set:function(t){o(this,"globalAlpha",arguments)},enumerable:!0},globalCompositeOperation:{get:function(){return this.$realCtx.globalCompositeOperation},set:function(t){o(this,"globalCompositeOperation",arguments)},enumerable:!0},lineDashOffset:{get:function(){return this.$realCtx.lineDashOffset},set:function(t){o(this,"lineDashOffset",arguments)},enumerable:!0},lineWidth:{get:function(){return this.$realCtx.lineWidth},set:function(t){o(this,"lineWidth",arguments)},enumerable:!0},lineCap:{get:function(){return this.$realCtx.lineCap},set:function(t){o(this,"lineCap",arguments)},enumerable:!0},lineJoin:{get:function(){return this.$realCtx.lineJoin},set:function(t){o(this,"lineJoin",arguments)},enumerable:!0},miterLimit:{get:function(){return this.$realCtx.miterLimit},set:function(t){o(this,"miterLimit",arguments)},enumerable:!0},strokeStyle:{get:function(){return this.$realCtx.strokeStyle},set:function(t){o(this,"strokeStyle",arguments)},enumerable:!0},font:{get:function(){return this.$realCtx.font},set:function(t){o(this,"font",arguments)},enumerable:!0},textBaseline:{get:function(){return this.$realCtx.textBaseline},set:function(t){o(this,"textBaseline",arguments)},enumerable:!0},textAlign:{get:function(){return this.$realCtx.textAlign},set:function(t){o(this,"textAlign",arguments)},enumerable:!0},imageRendering:{get:function(){return 1},set:function(t){},enumerable:!0},imageSmoothingEnabled:{get:function(){return this.$realCtx.imageSmoothingEnabled},set:function(t){o(this,"imageSmoothingEnabled",arguments)},enumerable:!0},imageSmoothingQuality:{get:function(){return this.$realCtx.imageSmoothingQuality},set:function(t){o(this,"imageSmoothingQuality",arguments)},enumerable:!0}});for(var m=0;m<p.length;m++){var g=p[m];E[g]={get:function(t){return function(){return l[t]}}(g),set:function(){},enumerable:!0}}Object.defineProperties(n.prototype,E),n.WebGLBuffer=function(t){n.Renderable.call(this,t),h(this,arguments,"webGLBuffer","createBuffer")},n.Renderable.inherit(n.WebGLBuffer,n.Renderable),n.WebGLFramebuffer=function(t){n.Renderable.call(this,t),h(this,arguments,"frameBuffer","createFramebuffer")},n.Renderable.inherit(n.WebGLFramebuffer,n.Renderable),n.WebGLRenderbuffer=function(t){n.Renderable.call(this,t),h(this,arguments,"renderBuffer","createRenderbuffer")},n.Renderable.inherit(n.WebGLRenderbuffer,n.Renderable),n.WebGLProgram=function(t){n.Renderable.call(this,t),h(this,arguments,"program","createProgram")},n.Renderable.inherit(n.WebGLProgram,n.Renderable),n.WebGLShader=function(t,e){n.Renderable.call(this,t),h(this,arguments,"shader","createShader")},n.Renderable.inherit(n.WebGLShader,n.Renderable),n.WebGLTexture=function(t){n.Renderable.call(this,t),h(this,arguments,"texture","createTexture")},n.Renderable.inherit(n.WebGLTexture,n.Renderable),n.WebGLTexture.prototype.isInitialized=function(){return!!this.$rendered},n.UniformLocation=function(t,e,r){n.Renderable.call(this,t),h(this,arguments,"uniformLocation","getUniformLocation")},n.Renderable.inherit(n.UniformLocation,n.Renderable),n.AttribLocation=function(t,e,r){n.Renderable.call(this,t),h(this,arguments,"attribLocation","getAttribLocation")},n.Renderable.inherit(n.AttribLocation,n.Renderable),n.prototype.activeTexture=function(t){s(this,"activeTexture",arguments)},n.prototype.bindAttribLocation=function(t,e,r){s(this,"bindAttribLocation",arguments)},n.prototype.bindBuffer=function(t,e){s(this,"bindBuffer",arguments)},n.prototype.bindFramebuffer=function(t,e){s(this,"bindFramebuffer",arguments)},n.prototype.bindRenderbuffer=function(t,e){s(this,"bindRenderbuffer",arguments)},n.prototype.bindTexture=function(t,e){s(this,"bindTexture",arguments)},n.prototype.blendColor=function(t,e,r,n){s(this,"blendColor",arguments)},n.prototype.blendEquation=function(t){s(this,"blendEquation",arguments)},n.prototype.blendEquationSeparate=function(t,e){s(this,"blendEquationSeparate",arguments)},n.prototype.blendFunc=function(t,e){s(this,"blendFunc",arguments)},n.prototype.blendFuncSeparate=function(t,e,r,n){s(this,"blendFuncSeparate",arguments)},n.prototype.bufferData=function(t,e,r){s(this,"bufferData",arguments)},n.prototype.clear=function(t){s(this,"clear",arguments)},n.prototype.clearColor=function(t,e,r,n){s(this,"clearColor",arguments)},n.prototype.clearDepth=function(t){s(this,"clearDepth",arguments)},n.prototype.clearStencil=function(t){s(this,"clearStencil",arguments)},n.prototype.colorMask=function(t,e,r,n){s(this,"colorMask",arguments)},n.prototype.copyTexImage2D=function(t,e,r,n,i,_,a,o){s(this,"copyTexImage2D",arguments)},n.prototype.createBuffer=function(){return new n.WebGLBuffer(this)},n.prototype.createFramebuffer=function(){return new n.WebGLFramebuffer(this)},n.prototype.createRenderbuffer=function(){return new n.WebGLRenderbuffer(this)},n.prototype.createShader=function(t){return new n.WebGLShader(this,t)},n.prototype.createTexture=function(){return new n.WebGLTexture(this)},n.prototype.deleteBuffer=function(t){s(this,"deleteBuffer",arguments)},n.prototype.deleteFramebuffer=function(t){s(this,"deleteFramebuffer",arguments)},n.prototype.deleteRenderbuffer=function(t){s(this,"deleteRenderbuffer",arguments)},n.prototype.deleteShader=function(t){s(this,"deleteShader",arguments)},n.prototype.deleteTexture=function(t){s(this,"deleteTexture",arguments)},n.prototype.deleteProgram=function(t){s(this,"deleteProgram",arguments)},n.prototype.disable=function(t){s(this,"disable",arguments)},n.prototype.drawArrays=function(t,e,r){s(this,"drawArrays",arguments)},n.prototype.drawElements=function(t,e,r,n){s(this,"drawElements",arguments)},n.prototype.enable=function(t){s(this,"enable",arguments)},n.prototype.enableVertexAttribArray=function(t){s(this,"enableVertexAttribArray",arguments)},n.prototype.finish=function(){},n.prototype.flush=function(){},n.prototype.framebufferRenderbuffer=function(t,e,r,n){s(this,"framebufferRenderbuffer",arguments)},n.prototype.framebufferTexture2D=function(t,e,r,n,i){s(this,"framebufferTexture2D",arguments)},n.prototype.getAttribLocation=function(t,e){return new n.AttribLocation(this,t,e)},n.prototype.getUniformLocation=function(t,e){return new n.UniformLocation(this,t,e)},n.prototype.getExtension=function(t,e){return s(this,"getExtension",arguments)},n.prototype.getParameter=function(t){s(this,"getParameter",arguments)},n.prototype.getProgramInfoLog=function(t){return s(this,"getProgramInfoLog",arguments)},n.prototype.getShaderInfoLog=function(t){return s(this,"getShaderInfoLog",arguments)},n.prototype.getSupportedExtensions=function(){return s(this,"getProgramParameter",arguments)},n.prototype.createProgram=function(){return new n.WebGLProgram(this)},n.prototype.readPixels=function(t,e,r,n,i,_,a){},n.prototype.compileShader=function(t){s(this,"compileShader",arguments)},n.prototype.linkProgram=function(t){s(this,"linkProgram",arguments)},n.prototype.attachShader=function(t,e){s(this,"attachShader",arguments)},n.prototype.getProgramParameter=function(t,e){return s(this,"getProgramParameter",arguments)},n.prototype.getShaderParameter=function(t,e){return s(this,"getShaderParameter",arguments)},n.prototype.scissor=function(t,e,r,n){s(this,"scissor",arguments)},n.prototype.shaderSource=function(t,e){s(this,"shaderSource",arguments)},n.prototype.texParameterf=function(t,e,r){s(this,"texParameterf",arguments)},n.prototype.texParameteri=function(t,e,r){s(this,"texParameteri",arguments)},n.prototype.texImage2D=function(){s(this,"texImage2D",arguments,!0)},n.prototype.uniform1f=function(t,e){s(this,"uniform1f",arguments)},n.prototype.uniform1fv=function(t,e){s(this,"uniform1fv",arguments)},n.prototype.uniform1i=function(t,e){s(this,"uniform1i",arguments)},n.prototype.uniform2f=function(t,e,r){s(this,"uniform2f",arguments)},n.prototype.uniform2fv=function(t,e){s(this,"uniform2fv",arguments)},n.prototype.uniform2i=function(t,e,r){s(this,"uniform2i",arguments)},n.prototype.uniform2iv=function(t,e){s(this,"uniform2iv",arguments)},n.prototype.uniform3f=function(t,e,r,n){s(this,"uniform3f",arguments)},n.prototype.uniform3fv=function(t,e){s(this,"uniform3fv",arguments)},n.prototype.uniform3i=function(t,e,r,n){s(this,"uniform3i",arguments)},n.prototype.uniform3iv=function(t,e){s(this,"uniform3iv",arguments)},n.prototype.uniform4f=function(t,e,r,n,i){s(this,"uniform4f",arguments)},n.prototype.uniform4fv=function(t,e){s(this,"uniform4fv",arguments)},n.prototype.uniform4i=function(t,e,r,n,i){s(this,"uniform4i",arguments)},n.prototype.uniform4iv=function(t,e){s(this,"uniform4iv",arguments)},n.prototype.uniformMatrix2fv=function(t,e,r){s(this,"uniformMatrix2fv",arguments)},n.prototype.uniformMatrix3fv=function(t,e,r){s(this,"uniformMatrix3fv",arguments)},n.prototype.uniformMatrix4fv=function(t,e,r){s(this,"uniformMatrix4fv",arguments)},n.prototype.useProgram=function(t){s(this,"useProgram",arguments)},n.prototype.vertexAttribPointer=function(t,e,r,n,i,_){s(this,"vertexAttribPointer",arguments)},n.prototype.viewport=function(t,e,r,n){s(this,"viewport",arguments)};var C;if("undefined"!=typeof document?C=document.createElement("canvas"):"undefined"!=typeof OffscreenCanvas&&(C=new OffscreenCanvas(1,1)),C){var I=C.getContext("webgl")||C.getContext("experimental-webgl");if(function(t){function e(){}function r(t){return void 0===t.$OES_texture_float_linear$&&Object.defineProperty(t,"$OES_texture_float_linear$",{enumerable:!1,configurable:!1,writable:!1,value:new e}),t.$OES_texture_float_linear$}function n(t){return"OES_texture_float_linear"===t?r(this):_.call(this,t)}function i(){var t=a.call(this);return-1===t.indexOf("OES_texture_float_linear")&&t.push("OES_texture_float_linear"),t}if(t&&-1===t.getSupportedExtensions().indexOf("OES_texture_float_linear")&&function(t){if(!t.getExtension("OES_texture_float"))return!1;var e=t.createFramebuffer(),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);var n=[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,2,2,0,t.RGBA,t.FLOAT,new Float32Array(n));var _=t.createProgram(),a=t.createShader(t.VERTEX_SHADER),s=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(a,"\t      attribute vec2 vertex;\t      void main() {\t        gl_Position = vec4(vertex, 0.0, 1.0);\t      }\t    "),t.shaderSource(s,"\t      uniform highp sampler2D texture;\t      void main() {\t        gl_FragColor = texture2D(texture, vec2(0.5));\t      }\t    "),t.compileShader(a),t.compileShader(s),t.attachShader(_,a),t.attachShader(_,s),t.linkProgram(_);var o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0]),t.STREAM_DRAW),t.enableVertexAttribArray(0),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,0);var h=new Uint8Array(4);return t.useProgram(_),t.viewport(0,0,1,1),t.bindTexture(t.TEXTURE_2D,i),t.drawArrays(t.POINTS,0,1),t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,h),127===h[0]||128===h[0]}(t)){var _=WebGLRenderingContext.prototype.getExtension,a=WebGLRenderingContext.prototype.getSupportedExtensions;WebGLRenderingContext.prototype.getExtension=n,WebGLRenderingContext.prototype.getSupportedExtensions=i}}(I),I)for(var m=0;m<p.length;m++){var g=p[m];l[g]=I[g]}I=null,C=null}t.exports=n},782:function(t,e,r){function n(t,e,r){this._jobId=t.__contextId,this._renderables=[],this._jobStart=Date.now(),this._expired=!1,this._locked=0,this._renderables=[],this.resuming=!1,this.exiting=!1,this.timeout=null,this.skipped=!1,this.data=[],this.parameters=r?Object.keys(r).reduce(function(t,e){return((t[e]=r[e])||1)&&t},{}):{},this._timeLimit=e||_}var i=r(87),_=Number.Infinity;n.prototype._jobId=0,n.prototype._renderables,n.prototype._expired,n.prototype._renderables,n.prototype._timeLimit,n.prototype._locked,n.prototype.resuming,n.prototype.exiting,n.prototype.timeout,n.prototype.data,n.prototype.skipped,n.prototype.parameters,n.prototype.initialRenderables,n.prototype.isExpired=function(){return!this._locked&&(!!this._expired||Date.now()-this._jobStart>this._timeLimit&&(this._expired=!0,!0))},n.prototype.lock=function(){this._locked++},n.prototype.unlock=function(){if(--this._locked<0)throw new Error("GRenderJob: invalid lock")},n.prototype.reset=function(){this._jobStart=Date.now(),this._expired=!1,this._locked=0,this.resuming=!1,this.exiting=!1,null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.data=[]},n.prototype.addRenderable=function(t){this._renderables.indexOf(t)<0&&this._renderables.push(t)},n.prototype.pushSave=function(t){this.data.push(t)},n.prototype.popSave=function(){return this.data.pop()},n.prototype.getSave=function(){return this.hasSave()?this.data[this.data.length-1]:null},n.prototype.hasSave=function(){return this.data.length>0},n.prototype.getId=function(){return this._jobId},n.prototype.disposeRenderables=function(){if(this.skipped){var t=this;this.initialRenderables.forEach(function(e){t.addRenderable(e)}),i.getPreservedContexts().forEach(function(e){t.addRenderable(e)})}this._renderables.forEach(function(t){t.canvas&&(t.__len>0&&!i.finished(t)?t.canvas.renderingSkipped=!0:t.__len>0?t.canvas.renderingSkipped=!1:t.canvas.rendered&&(t.canvas.renderingSkipped=!1),t.__persistent||(t.canvas.rendered=!1),t.canvas.rendering=!1,t.canvas.rendered=!1,t.canvas.renderingName=null),i.dispose(t)}),this._renderables=[]},t.exports=n},789:function(t,e,r){r(0);t.exports=function(t){function e(){if(t.DEBUG&&"function"==typeof gdb_loaddesign){var e=Array.prototype.slice.call(arguments).map(function(t){return"object"==typeof t?Array.prototype.slice.call(t):t});console.log("RenderCtx2D:"+e)}}var n=t.SMALL_SIZE;t.MAX_SIZE;t.prototype.arc=function(e,r,n,i,_,a){this.__pushByte(t.arc),this.__pushFlt(e),this.__pushFlt(r),this.__pushFlt(n),this.__pushFlt(i),this.__pushFlt(_),this.__pushByte(a?1:0),this.__call()},t.prototype.__pathStart=null,t.prototype.__pathStartArr=new Float64Array(2),t.prototype.beginPath=function(){this.__pathStart=null,this.__pushByte(t.beginPath),this.__call()},t.prototype.bezierCurveTo=function(e,r,n,i,_,a){this.__pushByte(t.bezierCurveTo),this.__pushFlt(e),this.__pushFlt(r),this.__pushFlt(n),this.__pushFlt(i),this.__pushFlt(_),this.__pushFlt(a),this.__call()},t.prototype.clearRect=function(r,n,i,_){e("clearRect :",arguments),this.__pushByte(t.clearRect),this.__pushFlt(r),this.__pushFlt(n),this.__pushFlt(i),this.__pushFlt(_),this.__call()},t.prototype.clip=function(e){this.__pushByte(t.clip),void 0!==e&&this.__pushPtr(e),this.__call()},t.prototype.closePath=function(e){e||"round"===this.$lineJoin&&"round"===this.$lineCap?this.__pathStart?this.lineTo(this.__pathStart[0],this.__pathStart[1]):this.lineTo(0,0):(this.__pushByte(t.closePath),this.__call()),this.__pathStart=null},t.LinearGradient=function(e,r,i,_,a){var s=void 0;this.ctx=new t(n,s,s,s,s,s,s,e.__multiThreaded,e.__persistent),this.ctx.__pushFltT(r),this.ctx.__pushFltT(i),this.ctx.__pushFltT(_),this.ctx.__pushFltT(a),this.ctx.__pushPtrT(e,!0),t.Renderable.call(this,this.ctx,!0)},t.Renderable.inherit(t.LinearGradient,t.Renderable),t.LinearGradient.prototype.addColorStop=function(t,e){this.ctx.__pushFltT(t),this.ctx.__pushPtrT(e)},t.LinearGradient.prototype._render=function(){t.resetExec(this.ctx);for(var e=t.getFlt(this.ctx),r=t.getFlt(this.ctx),n=t.getFlt(this.ctx),i=t.getFlt(this.ctx),_=t.getPtr(this.ctx),a=_.$realCtx.createLinearGradient(e,r,n,i);this.ctx.__execPtr<this.ctx.__len;){var s=t.getFlt(this.ctx),o=t.getPtr(this.ctx);a.addColorStop(s,o)}return a},t.LinearGradient.prototype._dumpCode=function(e,r){t.resetExec(this.ctx);for(var n=[t.getFlt(this.ctx),t.getFlt(this.ctx),t.getFlt(this.ctx),t.getFlt(this.ctx)],i=(t.getPtr(this.ctx),"var "+r+" = "+e+".createLinearGradient("+n.join(", ")+");\n");this.ctx.__execPtr<this.ctx.__len;){i+=r+".addColorStop("+t.getFlt(this.ctx)+',"'+t.getPtr(this.ctx)+'");\n'}return i},t.RadialGradient=function(e,r,i,_,a,s,o){var h=void 0;this.ctx=new t(n,h,h,h,h,h,h,e.__multiThreaded,e.__persistent),this.ctx.__pushFltT(r),this.ctx.__pushFltT(i),this.ctx.__pushFltT(_),this.ctx.__pushFltT(a),this.ctx.__pushFltT(s),this.ctx.__pushFltT(o),this.ctx.__pushPtrT(e,!0),t.Renderable.call(this,this.ctx,!0)},t.Renderable.inherit(t.RadialGradient,t.Renderable),t.RadialGradient.prototype.addColorStop=function(t,e){this.ctx.__pushFltT(t),this.ctx.__pushPtrT(e)},t.RadialGradient.prototype._render=function(){t.resetExec(this.ctx);for(var e=t.getFlt(this.ctx),r=t.getFlt(this.ctx),n=t.getFlt(this.ctx),i=t.getFlt(this.ctx),_=t.getFlt(this.ctx),a=t.getFlt(this.ctx),s=t.getPtr(this.ctx),o=s.$realCtx.createRadialGradient(e,r,n,i,_,a);this.ctx.__execPtr<this.ctx.__len;){var h=t.getFlt(this.ctx),u=t.getPtr(this.ctx);o.addColorStop(h,u)}return o},t.RadialGradient.prototype._dumpCode=function(e,r){t.resetExec(this.ctx);for(var n=[t.getFlt(this.ctx),t.getFlt(this.ctx),t.getFlt(this.ctx),t.getFlt(this.ctx),t.getFlt(this.ctx),t.getFlt(this.ctx)],i=(t.getPtr(this.ctx),"var "+r+" = "+e+".createRadialGradient("+n.join(", ")+");\n");this.ctx.__execPtr<this.ctx.__len;){i+=r+".addColorStop("+t.getFlt(this.ctx)+',"'+t.getPtr(this.ctx)+'");\n'}return i},t.Pattern=function(e,r,i){var _=void 0;this.ctx=new t(n,_,_,_,_,_,_,e.__multiThreaded,e.__persistent),this.ctx.__pushPtrT(r),this.ctx.__pushPtrT(i),this.ctx.__pushPtrT(e,!0),t.Renderable.call(this,this.ctx)},t.Renderable.inherit(t.Pattern,t.Renderable),t.Pattern.prototype._render=function(e,r,n){t.resetExec(this.ctx);var i=t.getPtr(this.ctx),_=t.getPtr(this.ctx),a=t.getPtr(this.ctx);i.$type===t.INSTANCE_RENDERERCANVAS&&(i=e.render(i.parent,r,null,n));var s=void 0;return i&&(s=a.$realCtx.createPattern(i,_)),s},t.Pattern.prototype._dumpCode=function(e,n,i,_,a){t.resetExec(this.ctx);var s=r(94).DUMP_IMAGES,o=t.getPtr(this.ctx),h=t.getPtr(this.ctx),u=(t.getPtr(this.ctx),"");if(o.$type===t.INSTANCE_RENDERERCANVAS)u+=i.dumpCode(o.parent,!1,null),o=o.renderingName||o.renderedName;else if(s&&(o instanceof HTMLCanvasElement||o instanceof HTMLImageElement||o instanceof Image)){var p="tmp"+a[0];if(o instanceof HTMLImageElement||o instanceof Image){var l=document.createElement("canvas");l.width=o.naturalWidth,l.height=o.naturalHeight,l.getContext("2d").drawImage(o,0,0),o=l}u+="var "+p+" = new Image();\n",u+=p+'.src = "'+o.toDataURL()+'";\n',u+=p+".onload=()=>{\n",o=p,a[0]++}return u+="var "+n+" = "+e+".createPattern("+o+',"'+h+'");\n'},t.ImageDataUint8Array=function(e,r){t.Renderable.call(this,e),this.parentImgData=r},t.Renderable.inherit(t.ImageDataUint8Array,t.Renderable),t.ImageDataUint8Array.prototype.parentImgData=null,t.ImageDataUint8Array.prototype._render=function(){return new Uint8Array(this.parentImgData.render().data.buffer)},t.ImageDataUint8Array.prototype._dumpCode=function(t,e){return"console.log('computing uint8array imgdata.data here');"},t.ImageDataArray=function(e,r){t.Renderable.call(this,e),this.parentImgData=r},t.Renderable.inherit(t.ImageDataArray,t.Renderable),t.ImageDataArray.prototype.parentImgData=null,t.ImageDataArray.prototype.$data=null,Object.defineProperties(t.ImageDataArray.prototype,{uint8Array:{get:function(){return this.$data||(this.$data=new t.ImageDataUint8Array(this.ctx,this.parentImgData)),this.$data}}}),t.ImageDataArray.prototype._render=function(){return this.parentImgData.render().data},t.ImageDataArray.prototype._dumpCode=function(t,e){return"console.log('computing imgdata.data here');"},t.ImageData=function(e,r,n,i,_){t.Renderable.call(this,e),this.sx=r,this.sy=n,this.sw=i,this.sh=_},t.Renderable.inherit(t.ImageData,t.Renderable),t.ImageData.prototype.sx=0,t.ImageData.prototype.sy=0,t.ImageData.prototype.sw=0,t.ImageData.prototype.sh=0,t.ImageData.prototype.$data=null,Object.defineProperties(t.ImageData.prototype,{data:{get:function(){return this.$data||(this.$data=new t.ImageDataArray(this.ctx,this)),this.$data}}}),t.ImageData.prototype.imgCtx=null,t.ImageData.prototype._render=function(){var e=this.ctx.$realCtx.getImageData(this.sx,this.sy,this.sw,this.sh);if(this.imgCtx)for(t.resetExec(this.imgCtx);this.imgCtx.__execPtr<this.imgCtx.__len;){var r=t.getPtr(this.imgCtx),n=t.getFlt(this.imgCtx),i=t.getFlt(this.imgCtx),_=t.getPtr(this.imgCtx);r(e.data,n,i,_)}return e},t.ImageData.prototype.runModifier=function(e,r,i,_){this.imgCtx||(this.imgCtx=new t(n)),this.imgCtx.__pushPtrT(e),this.imgCtx.__pushFltT(r),this.imgCtx.__pushFltT(i),this.imgCtx.__pushPtrT(_)},t.ImageData.prototype._dumpCode=function(e,r){var n="var "+r+" = "+e+".getImageData("+this.sx+","+this.sy+","+this.sw+","+this.sh+");\n";return this.imgCtx&&(t.resetExec(this.ctx),this.imgCtx.__execPtr<this.imgCtx.__len&&(n+="// some modifier executed on data.\n")),n},t.prototype.createLinearGradient=function(e,r,n,i){return new t.LinearGradient(this,e,r,n,i)},t.prototype.createPattern=function(e,r){var n=new t.Pattern(this,e,r);return e.$type===t.INSTANCE_RENDERERCANVAS&&e.parent!==this&&(e.parent._flush(this),e.parent.__finish(this)),n},t.prototype.createRadialGradient=function(e,r,n,i,_,a){return new t.RadialGradient(this,e,r,n,i,_,a)},t.prototype.drawImage=function(e,r,n,i,_,a,s,o,h){this.__pushByte(t.drawImage),this.__pushPtr(e),this.__pushFlt(r),this.__pushFlt(n),void 0!==i&&(this.__pushPtr(i),this.__pushPtr(_)),void 0!==a&&(this.__pushPtr(a),this.__pushPtr(s),this.__pushPtr(o),this.__pushPtr(h)),this.__call(),e.$type===t.INSTANCE_RENDERERCANVAS&&e.parent!==this&&(e.parent._flush(this),e.parent.__finish(this))},t.prototype.fill=function(e){this.__pathStart=null,this.__pushByte(t.fill),this.__pushPtr(e),this.__call()},t.prototype.fillRect=function(e,r,n,i){this.__pushByte(t.fillRect),this.__pushFlt(e),this.__pushFlt(r),this.__pushFlt(n),this.__pushFlt(i),this.__call()},t.prototype.fillText=function(e,r,n){this.__pushByte(t.fillText),this.__pushPtr(e),this.__pushFlt(r),this.__pushFlt(n),this.__call()},t.prototype.getImageData=function(e,r,n,i){return console.warn("Warning: using slow function getImageData"),new t.ImageData(this,e,r,n,i)},t.prototype.flushCanvas=function(){console.warn("Warning: using slow flush function"),this.__pushByte(t.getImageData),this.__pushFlt(0),this.__pushFlt(0),this.__pushFlt(1),this.__pushFlt(1),this.__call()},t.prototype.putImageData=function(e,r,n){this.__pushByte(t.putImageData),this.__pushPtr(e),this.__pushFlt(r),this.__pushFlt(n),this.__call()},t.prototype.getLineDash=function(){return this.$lineDash},t.prototype.lineTo=function(e,r){this.__pushByte(t.lineTo),this.__pushFlt(e),this.__pushFlt(r),this.__call()},t.prototype.measureText=function(t){var e=this.__realCtx;return e?e.measureText(t):0},t.prototype.moveTo=function(e,r){this.__pathStart||(this.__pathStart=this.__pathStartArr,this.__pathStart[0]=e,this.__pathStart[1]=r),this.__pushByte(t.moveTo),this.__pushFlt(e),this.__pushFlt(r),this.__call()},t.prototype.quadraticCurveTo=function(e,r,n,i){this.__pushByte(t.quadraticCurveTo),this.__pushFlt(e),this.__pushFlt(r),this.__pushFlt(n),this.__pushFlt(i),this.__call()},t.prototype.restore=function(){this.__pushByte(t.restore),this.__call();var e=this.$savedProperties;if(e)for(var r=t.propertiesToSync["2d"],n=0;n<r.length;n++)this["$"+r[n]]=e[n]},t.prototype.rotate=function(e){this.__pushByte(t.rotate),this.__pushFlt(e),this.__call()},t.prototype.save=function(){this.__pushByte(t.save),this.__call();var e=t.propertiesToSync["2d"];this.$savedProperties=new Array(e.length);for(var r=0;r<e.length;r++)this.$savedProperties[r]=this[e[r]]},t.prototype.scale=function(r,n){e("scale:",arguments),this.__pushByte(t.scale),this.__pushFlt(r),this.__pushFlt(n),this.__call()},t.prototype.setLineDash=function(e){this.__pushByte(t.setLineDash),this.__pushPtr(e),this.__call(),this.$lineDash=e},t.prototype.setTransform=function(e,r,n,i,_,a){this.__pushByte(t.setTransform),this.__pushFlt(e),this.__pushFlt(r),this.__pushFlt(n),this.__pushFlt(i),this.__pushFlt(_),this.__pushFlt(a),this.__call()},t.prototype.stroke=function(){this.__pathStart=null,this.__pushByte(t.stroke),this.__call()},t.prototype.strokeRect=function(e,r,n,i){this.__pushByte(t.strokeRect),this.__pushFlt(e),this.__pushFlt(r),this.__pushFlt(n),this.__pushFlt(i),this.__call()},t.prototype.strokeText=function(e,r,n){this.__pushByte(t.strokeText),this.__pushPtr(e),this.__pushFlt(r),this.__pushFlt(n),this.__call()},t.prototype.transform=function(e,r,n,i,_,a){this.__pushByte(t.transform),this.__pushFlt(e),this.__pushFlt(r),this.__pushFlt(n),this.__pushFlt(i),this.__pushFlt(_),this.__pushFlt(a),this.__call()},t.prototype.translate=function(e,r){this.__pushByte(t.translate),this.__pushFlt(e),this.__pushFlt(r),this.__call()},t.prototype.$realCtx=null,t.prototype.$fillStyle="#000",t.prototype.$filter="none",t.prototype.$globalAlpha=1,t.prototype.$globalCompositeOperation="source-over",t.prototype.$lineDashOffset=0,t.prototype.$lineWidth=1,t.prototype.$lineCap="butt",t.prototype.$lineJoin="miter",t.prototype.$miterLimit=10,t.prototype.$strokeStyle="#000",t.prototype.$textAlign="start",t.prototype.$imageSmoothingEnabled=!0,t.prototype.$imageSmoothingQuality="high",t.prototype.$textBaseline="alphabetic",t.prototype.$font="10px sans-serif",t.prototype.$savedProperties=null;var i=["lighter","xor","copy","destination-out","destination-in","destination-atop","destination-over","source-out","source-in","source-atop","source-over","luminosity","color","saturation","hue","exclusion","difference","soft-light","hard-light","color-burn","color-dodge","lighten","darken","overlay","screen","multiply","normal"];Object.defineProperties(t.prototype,{fillStyle:{get:function(){return this.$fillStyle},set:function(r){e("setting fillStyle:",r),this.$fillStyle=r,this.__pushByte(t.fillStyle),this.__pushPtr(r),this.__mov()},enumerable:!0},filter:{get:function(){return this.$filter},set:function(r){e("setting filter:",r),this.$filter=r,this.__pushByte(t.filter),this.__pushPtr(r),this.__mov()},enumerable:!0},globalAlpha:{get:function(){return this.$globalAlpha},set:function(r){e("setting globalAlpha:",r),this.$globalAlpha=r,this.__pushByte(t.globalAlpha),this.__pushFlt(r),this.__mov()},enumerable:!0},globalCompositeOperation:{get:function(){return this.$globalCompositeOperation},set:function(r){e("setting globalCompositeOperation:",r),i.indexOf(r)<0||(this.$globalCompositeOperation=r,this.__pushByte(t.globalCompositeOperation),this.__pushPtr(r),this.__mov())},enumerable:!0},lineDashOffset:{get:function(){return this.$lineDashOffset},set:function(e){this.$lineDashOffset=e,this.__pushByte(t.lineDashOffset),this.__pushFlt(e),this.__mov()},enumerable:!0},lineWidth:{get:function(){return this.$lineWidth},set:function(r){e("setting lineWidth:",r),this.$lineWidth=r,this.__pushByte(t.lineWidth),this.__pushFlt(r),this.__mov()},enumerable:!0},lineCap:{get:function(){return this.$lineCap},set:function(e){this.$lineCap=e,this.__pushByte(t.lineCap),this.__pushPtr(e),this.__mov()},enumerable:!0},lineJoin:{get:function(){return this.$lineJoin},set:function(e){this.$lineJoin=e,this.__pushByte(t.lineJoin),this.__pushPtr(e),this.__mov()},enumerable:!0},miterLimit:{get:function(){return this.$miterLimit},set:function(e){this.$miterLimit=e,this.__pushByte(t.miterLimit),this.__pushFlt(e),this.__mov()},enumerable:!0},strokeStyle:{get:function(){return this.$strokeStyle},set:function(e){this.$strokeStyle=e,this.__pushByte(t.strokeStyle),this.__pushPtr(e),this.__mov()},enumerable:!0},font:{get:function(){return this.$font},set:function(e){this.$font=e,this.__pushByte(t.font),this.__pushPtr(e),this.__mov()},enumerable:!0},textBaseline:{get:function(){return this.$textBaseline},set:function(e){this.$textBaseline=e,this.__pushByte(t.textBaseline),this.__pushPtr(e),this.__mov()},enumerable:!0},textAlign:{get:function(){return this.$textAlign},set:function(r){e("setting textAlign:",r),this.$textAlign=r,this.__pushByte(t.textAlign),this.__pushPtr(r),this.__mov()},enumerable:!0},imageRendering:{get:function(){return 1},set:function(t){e("setting imageRendering:",t)},enumerable:!0},imageSmoothingEnabled:{get:function(){return this.$imageSmoothingEnabled},set:function(r){e("setting imageSmoothingEnabled: ",r),this.$imageSmoothingEnabled=r,this.__pushByte(t.imageSmoothingEnabled),this.__pushPtr(r),this.__mov()},enumerable:!0},imageSmoothingQuality:{get:function(){return this.$imageSmoothingQuality},set:function(r){e("setting imageSmoothQuality:",r),this.$imageSmoothingQuality=r,this.__pushByte(t.imageSmoothingQuality),this.__pushPtr(r),this.__mov()},enumerable:!0}}),t.propertiesToSync["2d"]=["imageSmoothingQuality","imageSmoothingEnabled","textAlign","textBaseline","font","strokeStyle","miterLimit","fillStyle","filter","lineJoin","lineCap","lineWidth","lineDashOffset","globalAlpha","globalCompositeOperation"]}},790:function(t,e,r){var n=(r(0),["DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","COLOR_BUFFER_BIT","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","ZERO","ONE","SRC_COLOR","ONE_MINUS_SRC_COLOR","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","DST_ALPHA","ONE_MINUS_DST_ALPHA","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA_SATURATE","FUNC_ADD","BLEND_EQUATION","BLEND_EQUATION_RGB","BLEND_EQUATION_ALPHA","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","BLEND_DST_RGB","BLEND_SRC_RGB","BLEND_DST_ALPHA","BLEND_SRC_ALPHA","CONSTANT_COLOR","ONE_MINUS_CONSTANT_COLOR","CONSTANT_ALPHA","ONE_MINUS_CONSTANT_ALPHA","BLEND_COLOR","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","ARRAY_BUFFER_BINDING","ELEMENT_ARRAY_BUFFER_BINDING","STREAM_DRAW","STATIC_DRAW","DYNAMIC_DRAW","BUFFER_SIZE","BUFFER_USAGE","CURRENT_VERTEX_ATTRIB","FRONT","BACK","FRONT_AND_BACK","TEXTURE_2D","CULL_FACE","BLEND","DITHER","STENCIL_TEST","DEPTH_TEST","SCISSOR_TEST","POLYGON_OFFSET_FILL","SAMPLE_ALPHA_TO_COVERAGE","SAMPLE_COVERAGE","NO_ERROR","INVALID_ENUM","INVALID_VALUE","INVALID_OPERATION","OUT_OF_MEMORY","CW","CCW","LINE_WIDTH","ALIASED_POINT_SIZE_RANGE","ALIASED_LINE_WIDTH_RANGE","CULL_FACE_MODE","FRONT_FACE","DEPTH_RANGE","DEPTH_WRITEMASK","DEPTH_CLEAR_VALUE","DEPTH_FUNC","STENCIL_CLEAR_VALUE","STENCIL_FUNC","STENCIL_FAIL","STENCIL_PASS_DEPTH_FAIL","STENCIL_PASS_DEPTH_PASS","STENCIL_REF","STENCIL_VALUE_MASK","STENCIL_WRITEMASK","STENCIL_BACK_FUNC","STENCIL_BACK_FAIL","STENCIL_BACK_PASS_DEPTH_FAIL","STENCIL_BACK_PASS_DEPTH_PASS","STENCIL_BACK_REF","STENCIL_BACK_VALUE_MASK","STENCIL_BACK_WRITEMASK","VIEWPORT","SCISSOR_BOX","COLOR_CLEAR_VALUE","COLOR_WRITEMASK","UNPACK_ALIGNMENT","PACK_ALIGNMENT","MAX_TEXTURE_SIZE","MAX_VIEWPORT_DIMS","SUBPIXEL_BITS","RED_BITS","GREEN_BITS","BLUE_BITS","ALPHA_BITS","DEPTH_BITS","STENCIL_BITS","POLYGON_OFFSET_UNITS","POLYGON_OFFSET_FACTOR","TEXTURE_BINDING_2D","SAMPLE_BUFFERS","SAMPLES","SAMPLE_COVERAGE_VALUE","SAMPLE_COVERAGE_INVERT","COMPRESSED_TEXTURE_FORMATS","DONT_CARE","FASTEST","NICEST","GENERATE_MIPMAP_HINT","BYTE","UNSIGNED_BYTE","SHORT","UNSIGNED_SHORT","INT","UNSIGNED_INT","FLOAT","DEPTH_COMPONENT","ALPHA","RGB","RGBA","LUMINANCE","LUMINANCE_ALPHA","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","FRAGMENT_SHADER","VERTEX_SHADER","MAX_VERTEX_ATTRIBS","MAX_VERTEX_UNIFORM_VECTORS","MAX_VARYING_VECTORS","MAX_COMBINED_TEXTURE_IMAGE_UNITS","MAX_VERTEX_TEXTURE_IMAGE_UNITS","MAX_TEXTURE_IMAGE_UNITS","MAX_FRAGMENT_UNIFORM_VECTORS","SHADER_TYPE","DELETE_STATUS","LINK_STATUS","VALIDATE_STATUS","ATTACHED_SHADERS","ACTIVE_UNIFORMS","ACTIVE_ATTRIBUTES","SHADING_LANGUAGE_VERSION","CURRENT_PROGRAM","NEVER","LESS","EQUAL","LEQUAL","GREATER","NOTEQUAL","GEQUAL","ALWAYS","KEEP","REPLACE","INCR","DECR","INVERT","INCR_WRAP","DECR_WRAP","VENDOR","RENDERER","VERSION","NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","TEXTURE","TEXTURE_CUBE_MAP","TEXTURE_BINDING_CUBE_MAP","TEXTURE_CUBE_MAP_POSITIVE_X","TEXTURE_CUBE_MAP_NEGATIVE_X","TEXTURE_CUBE_MAP_POSITIVE_Y","TEXTURE_CUBE_MAP_NEGATIVE_Y","TEXTURE_CUBE_MAP_POSITIVE_Z","TEXTURE_CUBE_MAP_NEGATIVE_Z","MAX_CUBE_MAP_TEXTURE_SIZE","TEXTURE0","TEXTURE1","TEXTURE2","TEXTURE3","TEXTURE4","TEXTURE5","TEXTURE6","TEXTURE7","TEXTURE8","TEXTURE9","TEXTURE10","TEXTURE11","TEXTURE12","TEXTURE13","TEXTURE14","TEXTURE15","TEXTURE16","TEXTURE17","TEXTURE18","TEXTURE19","TEXTURE20","TEXTURE21","TEXTURE22","TEXTURE23","TEXTURE24","TEXTURE25","TEXTURE26","TEXTURE27","TEXTURE28","TEXTURE29","TEXTURE30","TEXTURE31","ACTIVE_TEXTURE","REPEAT","CLAMP_TO_EDGE","MIRRORED_REPEAT","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","INT_VEC2","INT_VEC3","INT_VEC4","BOOL","BOOL_VEC2","BOOL_VEC3","BOOL_VEC4","FLOAT_MAT2","FLOAT_MAT3","FLOAT_MAT4","SAMPLER_2D","SAMPLER_CUBE","VERTEX_ATTRIB_ARRAY_ENABLED","VERTEX_ATTRIB_ARRAY_SIZE","VERTEX_ATTRIB_ARRAY_STRIDE","VERTEX_ATTRIB_ARRAY_TYPE","VERTEX_ATTRIB_ARRAY_NORMALIZED","VERTEX_ATTRIB_ARRAY_POINTER","VERTEX_ATTRIB_ARRAY_BUFFER_BINDING","IMPLEMENTATION_COLOR_READ_TYPE","IMPLEMENTATION_COLOR_READ_FORMAT","COMPILE_STATUS","LOW_FLOAT","MEDIUM_FLOAT","HIGH_FLOAT","LOW_INT","MEDIUM_INT","HIGH_INT","FRAMEBUFFER","RENDERBUFFER","RGBA4","RGB5_A1","RGB565","DEPTH_COMPONENT16","STENCIL_INDEX8","DEPTH_STENCIL","RENDERBUFFER_WIDTH","RENDERBUFFER_HEIGHT","RENDERBUFFER_INTERNAL_FORMAT","RENDERBUFFER_RED_SIZE","RENDERBUFFER_GREEN_SIZE","RENDERBUFFER_BLUE_SIZE","RENDERBUFFER_ALPHA_SIZE","RENDERBUFFER_DEPTH_SIZE","RENDERBUFFER_STENCIL_SIZE","FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE","FRAMEBUFFER_ATTACHMENT_OBJECT_NAME","FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL","FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE","COLOR_ATTACHMENT0","DEPTH_ATTACHMENT","STENCIL_ATTACHMENT","DEPTH_STENCIL_ATTACHMENT","NONE","FRAMEBUFFER_COMPLETE","FRAMEBUFFER_INCOMPLETE_ATTACHMENT","FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT","FRAMEBUFFER_INCOMPLETE_DIMENSIONS","FRAMEBUFFER_UNSUPPORTED","FRAMEBUFFER_BINDING","RENDERBUFFER_BINDING","MAX_RENDERBUFFER_SIZE","INVALID_FRAMEBUFFER_OPERATION","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","CONTEXT_LOST_WEBGL","UNPACK_COLORSPACE_CONVERSION_WEBGL","BROWSER_DEFAULT_WEBGL"]),i=[];t.exports=function(t){for(var e={},r=[],_=0;_<n.length;_++){var a=n[_];e[a]={get:function(t){return function(){return i[t]}}(a),set:function(){},enumerable:!0}}Object.defineProperties(t.prototype,e),t.WebGLBuffer=function(e){t.Renderable.call(this,e)},t.Renderable.inherit(t.WebGLBuffer,t.Renderable),t.WebGLBuffer.prototype._render=function(){return this.ctx.$realCtx.createBuffer()},t.WebGLBuffer.prototype._dumpCode=function(t,e){var r="";return r+="var "+e+" = "+t+".createBuffer();\n"},t.WebGLFramebuffer=function(e){t.Renderable.call(this,e)},t.Renderable.inherit(t.WebGLFramebuffer,t.Renderable),t.WebGLFramebuffer.prototype._render=function(){return this.ctx.$realCtx.createFramebuffer()},t.WebGLFramebuffer.prototype._dumpCode=function(t,e){var r="";return r+="var "+e+" = "+t+".createFramebuffer();\n"},t.WebGLRenderbuffer=function(e){t.Renderable.call(this,e)},t.Renderable.inherit(t.WebGLRenderbuffer,t.Renderable),t.WebGLRenderbuffer.prototype._render=function(){return this.ctx.$realCtx.createRenderbuffer()},t.WebGLRenderbuffer.prototype._dumpCode=function(t,e){var r="";return r+="var "+e+" = "+t+".createRenderbuffer();\n"},t.WebGLProgram=function(e){t.Renderable.call(this,e)},t.Renderable.inherit(t.WebGLProgram,t.Renderable),t.WebGLProgram.prototype._render=function(){return this.ctx.$realCtx.createProgram()},t.WebGLProgram.prototype._dumpCode=function(t,e){var r="";return r+="var "+e+" = "+t+".createProgram();\n"},t.WebGLShader=function(e,r){t.Renderable.call(this,e),this.type=r},t.Renderable.inherit(t.WebGLShader,t.Renderable),t.WebGLShader.prototype.type=null,t.WebGLShader.prototype._render=function(){return this.ctx.$realCtx.createShader(this.type)},t.WebGLShader.prototype._dumpCode=function(t,e){var r="";return r+="var "+e+" = "+t+".createShader("+this.type+");\n"},t.WebGLTexture=function(e){t.Renderable.call(this,e)},t.Renderable.inherit(t.WebGLTexture,t.Renderable),t.WebGLTexture.prototype.isInitialized=function(){return!!this.$rendered||!!this.ctx.__isScheduledForRender(this)},t.WebGLTexture.prototype._render=function(){if(!this.ctx.$realCtx)throw new Error("WebGL renderer: context not initialized");return this.ctx.$realCtx.createTexture()},t.WebGLTexture.prototype._dumpCode=function(t,e){var r="";return r+="var "+e+" = "+t+".createTexture();\n"},t.UniformLocation=function(e,r,n){t.Renderable.call(this,e),this.program=r,this.name=n},t.Renderable.inherit(t.UniformLocation,t.Renderable),t.UniformLocation.prototype.program=null,t.UniformLocation.prototype.name=null,t.UniformLocation.prototype._render=function(){var e=this.program.$type===t.INSTANCE_RENDERABLE?t.Renderable.render(this.program):this.program;return this.ctx.$realCtx.getUniformLocation(e,this.name)},t.UniformLocation.prototype._dumpCode=function(e,r){return"var "+r+" = "+e+".getUniformLocation("+t.Renderable.dumpCode(this.program,e,"uniform_"+r)+',"'+this.name+'");\n'},t.AttribLocation=function(e,r,n){t.Renderable.call(this,e),this.program=r,this.name=n},t.Renderable.inherit(t.AttribLocation,t.Renderable),t.AttribLocation.prototype.program=null,t.AttribLocation.prototype.name=null,t.AttribLocation.prototype._render=function(){var e=this.program.$type===t.INSTANCE_RENDERABLE?t.Renderable.render(this.program):this.program;return this.ctx.$realCtx.getAttribLocation(e,this.name)},t.AttribLocation.prototype._dumpCode=function(e,r){return"var "+r+" = "+e+".getAttribLocation("+t.Renderable.dumpCode(this.program,e,"attrib_"+r)+',"'+this.name+'");\n'},t.getGLConst=function(t){var e=null;return 0===t?null:(n.some(function(r){return i[r]===t&&(e=r,!0)}),e)},t.prototype.activeTexture=function(e){this.__pushByte(t.activeTexture),this.__pushUint(e),this.__call()},t.prototype.bindAttribLocation=function(e,r,n){this.__pushByte(t.bindAttribLocation),this.__pushPtr(e),this.__pushPtr(r),this.__pushPtr(n),this.__call()},t.prototype.bindBuffer=function(e,r){this.__pushByte(t.bindBuffer),this.__pushUint(e),this.__pushPtr(r),this.__call()},t.prototype.bindFramebuffer=function(e,r){this.__pushByte(t.bindFramebuffer),this.__pushUint(e),this.__pushPtr(r),this.__call()},t.prototype.bindRenderbuffer=function(e,r){this.__pushByte(t.bindRenderbuffer),this.__pushUint(e),this.__pushPtr(r),this.__call()},t.prototype.bindTexture=function(e,r){this.__pushByte(t.bindTexture),this.__pushUint(e),this.__pushPtr(r),this.__call()},t.prototype.blendColor=function(e,r,n,i){this.__pushByte(t.blendColor),this.__pushFlt(e),this.__pushFlt(r),this.__pushFlt(n),this.__pushFlt(i),this.__call()},t.prototype.blendEquation=function(e){this.__pushByte(t.blendEquation),this.__pushUint(e),this.__call()},t.prototype.blendEquationSeparate=function(e,r){this.__pushByte(t.blendEquationSeparate),this.__pushUint(e),this.__pushUint(r),this.__call()},t.prototype.blendFunc=function(e,r){this.__pushByte(t.blendFunc),this.__pushUint(e),this.__pushUint(r),this.__call()},t.prototype.blendFuncSeparate=function(e,r,n,i){this.__pushByte(t.blendFuncSeparate),this.__pushUint(e),this.__pushUint(r),this.__pushUint(n),this.__pushUint(i),this.__call()},t.prototype.bufferData=function(e,r,n){this.__pushByte(t.bufferData),this.__pushUint(e),"number"==typeof r?this.__pushUint(r):this.__pushPtr(r),this.__pushUint(n||0),this.__call()},t.prototype.clear=function(e){this.__pushByte(t.clear),this.__pushUint(e),this.__call()},t.prototype.clearColor=function(e,r,n,i){this.__pushByte(t.clearColor),this.__pushFlt(e),this.__pushFlt(r),this.__pushFlt(n),this.__pushFlt(i),this.__call()},t.prototype.clearDepth=function(e){this.__pushByte(t.clearDepth),this.__pushFlt(e),this.__call()},t.prototype.clearStencil=function(e){this.__pushByte(t.clearStencil),this.__pushInt(e),this.__call()},t.prototype.colorMask=function(e,r,n,i){this.__pushByte(t.colorMask),this.__pushBool(e),this.__pushBool(r),this.__pushBool(n),this.__pushBool(i),this.__call()},t.prototype.copyTexImage2D=function(e,r,n,i,_,a,s,o){this.__pushByte(t.copyTexImage2D),this.__pushUint(e),this.__pushInt(r),this.__pushInt(n),this.__pushInt(i),this.__pushInt(_),this.__pushInt(a),this.__pushInt(s),this.__pushInt(o),this.__call()},t.prototype.createBuffer=function(){return new t.WebGLBuffer(this)},t.prototype.createFramebuffer=function(){return new t.WebGLFramebuffer(this)},t.prototype.createRenderbuffer=function(){return new t.WebGLRenderbuffer(this)},t.prototype.createShader=function(e){return new t.WebGLShader(this,e)},t.prototype.createTexture=function(){var e=new t.WebGLTexture(this);return r[e.__renderableId]=e,e},t.prototype.deleteBuffer=function(e){this.__pushByte(t.deleteBuffer),this.__pushPtr(e),this.__call()},t.prototype.deleteFramebuffer=function(e){this.__pushByte(t.deleteFramebuffer),this.__pushPtr(buffer),this.__call()},t.prototype.deleteRenderbuffer=function(e){this.__pushByte(t.deleteRenderbuffer),this.__pushPtr(e),this.__call()},t.prototype.deleteShader=function(e){this.__pushByte(t.deleteShader),this.__pushPtr(e),this.__call()},t.prototype.deleteTexture=function(e){this.__pushByte(t.deleteTexture),this.__pushPtr(e),this.__call()},t.prototype.deleteProgram=function(e){this.__pushByte(t.deleteProgram),this.__pushPtr(e),this.__call()},t.prototype.disable=function(e){this.__pushByte(t.disable),this.__pushUint(e),this.__call()},t.prototype.drawArrays=function(e,r,n){this.__pushByte(t.drawArrays),this.__pushUint(e),this.__pushInt(r),this.__pushInt(n),this.__call()},t.prototype.drawElements=function(e,r,n,i){this.__pushByte(t.drawElements),this.__pushUint(e),this.__pushInt(first),this.__pushUint(r),this.__pushInt(i),this.__call()},t.prototype.enable=function(e){this.__pushByte(t.enable),this.__pushUint(e),this.__call()},t.prototype.enableVertexAttribArray=function(e){this.__pushByte(t.enableVertexAttribArray),this.__pushPtr(e),this.__call()},t.prototype.finish=function(){this.__pushByte(t.finish),this.__call()},t.prototype.flush=function(){this.__pushByte(t.flush),this.__call()},t.prototype.framebufferRenderbuffer=function(e,r,n,i){this.__pushByte(t.framebufferRenderbuffer),this.__pushUint(e),this.__pushUint(r),this.__pushUint(n),this.__pushPtr(i),this.__call()},t.prototype.framebufferTexture2D=function(e,r,n,i,_){this.__pushByte(t.framebufferTexture2D),this.__pushUint(e),this.__pushUint(r),this.__pushUint(n),this.__pushPtr(i),this.__pushInt(0),this.__call()},t.prototype.getAttribLocation=function(e,r){return new t.AttribLocation(this,e,r)},t.prototype.getUniformLocation=function(e,r){return new t.UniformLocation(this,e,r)},t.prototype.getExtension=function(e,r){if(r&&!this.__multiThreaded){var n=this.__realCtx;return n?n.getExtension(e):null}this.__pushByte(t.getExtension),this.__pushPtr(e),this.__call()},t.prototype.getParameter=function(t){if(t===this.GL_VIEWPORT)return this.$viewport;throw new Error("not implemented: getParameter")},t.prototype.getProgramInfoLog=function(e){var r=e.$type===t.INSTANCE_RENDERABLE?t.Renderable.render(e):e;return this.$realCtx.getProgramInfoLog(r)},t.prototype.getShaderInfoLog=function(e){var r=e.$type===t.INSTANCE_RENDERABLE?t.Renderable.render(e):e;return this.$realCtx.getShaderInfoLog(r)},t.prototype.getSupportedExtensions=function(){return this.$realCtx.getSupportedExtensions()},t.prototype.createProgram=function(){return new t.WebGLProgram(this)},t.prototype.readPixels=function(e,r,n,i,_,a,s){this.__pushByte(t.readPixels),this.__pushInt(e),this.__pushInt(r),this.__pushInt(n),this.__pushInt(i),this.__pushUint(_),this.__pushUint(a),this.__pushPtr(s),this.__call(),s.ctx._flush(this),s.ctx.__finish(this)},t.prototype.compileShader=function(e){this.__pushByte(t.compileShader),this.__pushPtr(e),this.__call()},t.prototype.linkProgram=function(e){this.__pushByte(t.linkProgram),this.__pushPtr(e),this.__call()},t.prototype.attachShader=function(e,r){this.__pushByte(t.attachShader),this.__pushPtr(e),this.__pushPtr(r),this.__call()},t.prototype.getProgramParameter=function(e,r){return this.__pushByte(t.getProgramParameter),this.__pushPtr(e),this.__pushInt(r),this.__call(),!0},t.prototype.getShaderParameter=function(e,r){return this.__pushByte(t.getShaderParameter),this.__pushPtr(e),this.__pushInt(r),this.__call(),!0},t.prototype.scissor=function(e,r,n,i){this.__pushByte(t.scissor),this.__pushInt(e),this.__pushInt(r),this.__pushInt(n),this.__pushInt(i),this.__call()},t.prototype.shaderSource=function(e,r){this.__pushByte(t.shaderSource),this.__pushPtr(e),this.__pushPtr(r),this.__call()},t.prototype.texParameterf=function(e,r,n){this.__pushByte(t.texParameterf),this.__pushUint(e),this.__pushUint(r),this.__pushFlt(n),this.__call()},t.prototype.texParameteri=function(e,r,n){this.__pushByte(t.texParameteri),this.__pushUint(e),this.__pushUint(r),this.__pushInt(n),this.__call()},t.prototype.texImage2D=function(){var e=-1;this.__pushByte(t.texImage2D),this.__pushUint(arguments[0]),this.__pushInt(arguments[1]),this.__pushInt(arguments[2]),6===arguments.length?(this.__pushUint(arguments[3]),this.__pushUint(arguments[4]),this.__pushPtr(arguments[5]),arguments[5]&&arguments[5].$type===t.INSTANCE_RENDERERCANVAS&&arguments[5].parent!==this&&(e=5)):9===arguments.length&&(this.__pushInt(arguments[3]),this.__pushInt(arguments[4]),this.__pushInt(arguments[5]),this.__pushUint(arguments[6]),this.__pushUint(arguments[7]),this.__pushPtr(arguments[8]),arguments[8]&&arguments[8].$type===t.INSTANCE_RENDERERCANVAS&&arguments[8].parent!==this?e=8:arguments[8]&&arguments[8].$type===t.INSTANCE_RENDERABLE&&arguments[8].ctx!==this&&(e=9)),this.__call(),e>=0&&(9===e?(arguments[8].ctx._flush(this),arguments[8].ctx.__finish(this)):(arguments[e].parent._flush(this),arguments[e].parent.__finish(this)))},t.prototype.uniform1f=function(e,r){this.__pushByte(t.uniform1f),this.__pushPtr(e),this.__pushFlt(r),this.__call()},t.prototype.uniform1fv=function(e,r){this.__pushByte(t.uniform1fv),this.__pushPtr(e),this.__pushPtr(r.slice()),this.__call()},t.prototype.uniform1i=function(e,r){this.__pushByte(t.uniform1i),this.__pushPtr(e),this.__pushInt(r),this.__call()},t.prototype.uniform2f=function(e,r,n){this.__pushByte(t.uniform2f),this.__pushPtr(e),this.__pushFlt(r),this.__pushFlt(n),this.__call()},t.prototype.uniform2fv=function(e,r){this.__pushByte(t.uniform2fv),this.__pushPtr(e),this.__pushPtr(r.slice()),this.__call()},t.prototype.uniform2i=function(e,r,n){this.__pushByte(t.uniform2i),this.__pushPtr(e),this.__pushInt(r),this.__pushInt(n),this.__call()},t.prototype.uniform2iv=function(e,r){this.__pushByte(t.uniform2iv),this.__pushPtr(e),this.__pushPtr(r.slice()),this.__call()},t.prototype.uniform3f=function(e,r,n,i){this.__pushByte(t.uniform3f),this.__pushPtr(e),this.__pushFlt(r),this.__pushFlt(n),this.__pushFlt(i),this.__call()},t.prototype.uniform3fv=function(e,r){this.__pushByte(t.uniform3fv),this.__pushPtr(e),this.__pushPtr(r.slice()),this.__call()},t.prototype.uniform3i=function(e,r,n,i){this.__pushByte(t.uniform3i),this.__pushPtr(e),this.__pushInt(r),this.__pushInt(n),this.__pushInt(i),this.__call()},t.prototype.uniform3iv=function(e,r){this.__pushByte(t.uniform3iv),this.__pushPtr(e),this.__pushPtr(r.slice()),this.__call()},t.prototype.uniform4f=function(e,r,n,i,_){this.__pushByte(t.uniform4f),this.__pushPtr(e),this.__pushFlt(r),this.__pushFlt(n),this.__pushFlt(i),this.__pushFlt(_),this.__call()},t.prototype.uniform4fv=function(e,r){this.__pushByte(t.uniform4fv),this.__pushPtr(e),this.__pushPtr(r.slice()),this.__call()},t.prototype.uniform4i=function(e,r,n,i,_){this.__pushByte(t.uniform4i),this.__pushPtr(e),this.__pushInt(r),this.__pushInt(n),this.__pushInt(i),this.__pushInt(_),this.__call()},t.prototype.uniform4iv=function(e,r){this.__pushByte(t.uniform4iv),this.__pushPtr(e),this.__pushPtr(r.slice()),this.__call()},t.prototype.uniformMatrix2fv=function(e,r,n){this.__pushByte(t.uniformMatrix2fv),this.__pushPtr(e),this.__pushBool(!1),this.__pushPtr(n),this.__call()},t.prototype.uniformMatrix3fv=function(e,r,n){this.__pushByte(t.uniformMatrix3fv),this.__pushPtr(e),this.__pushBool(!1),this.__pushPtr(n),this.__call()},t.prototype.uniformMatrix4fv=function(e,r,n){this.__pushByte(t.uniformMatrix4fv),this.__pushPtr(e),this.__pushBool(!1),this.__pushPtr(n),this.__call()},t.prototype.useProgram=function(e){this.__pushByte(t.useProgram),this.__pushPtr(e),this.__call()},t.prototype.vertexAttribPointer=function(e,r,n,i,_,a){this.__pushByte(t.vertexAttribPointer),this.__pushPtr(e),this.__pushInt(r),this.__pushUint(n),this.__pushBool(i),this.__pushInt(_),this.__pushInt(a),this.__call()},t.prototype.viewport=function(e,r,n,i){this.$viewport=new Float64Array(4),this.$viewport[0]=e,this.$viewport[1]=r,this.$viewport[2]=n,this.$viewport[3]=i,this.__pushByte(t.viewport),this.__pushInt(e),this.__pushInt(r),this.__pushUint(n),this.__pushUint(i),this.__call()},t.prototype.__isScheduledForRender=function(t){var e=t.__renderableId;return!!r[e]},t.prototype.__clearScheduled=function(t){this.__multiThreaded&&(t&&t.quickRender||t.noWebGL||Object.values(r).forEach(function(t){t.$rendered={}})),r=[]},t.propertiesToSync.webgl=[]};var _;if("undefined"!=typeof document?_=document.createElement("canvas"):"undefined"!=typeof OffscreenCanvas&&(_=new OffscreenCanvas(1,1)),_){var a=_.getContext("webgl")||_.getContext("experimental-webgl");if(function(t){function e(){}function r(t){return void 0===t.$OES_texture_float_linear$&&Object.defineProperty(t,"$OES_texture_float_linear$",{enumerable:!1,configurable:!1,writable:!1,value:new e}),t.$OES_texture_float_linear$}function n(t){return"OES_texture_float_linear"===t?r(this):o.call(this,t)}function i(){var t=h.call(this);return-1===t.indexOf("OES_texture_float_linear")&&t.push("OES_texture_float_linear"),t}function _(e,r,n,i,_,o,h){if(!s){var p=!1;try{u.call(this,e,r,n,i,_,o,h)}catch(t){p=!0}p||a||(p=this.getError()!==t.NO_ERROR,a=!0),p&&(s=!0)}if(s)try{var l=h.length,E=new Float32Array(l);u.call(this,e,r,n,i,_,t.FLOAT,E);for(var c=0;c<l;c++)h[c]=255*E[c]}catch(t){console.warn("Cannot read pixel data:"+t.message)}}var a=!1,s=!1;if(t&&-1===t.getSupportedExtensions().indexOf("OES_texture_float_linear")&&function(t){if(!t.getExtension("OES_texture_float"))return!1;var e=t.createFramebuffer(),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);var n=[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,2,2,0,t.RGBA,t.FLOAT,new Float32Array(n));var _=t.createProgram(),a=t.createShader(t.VERTEX_SHADER),s=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(a,"\t      attribute vec2 vertex;\t      void main() {\t        gl_Position = vec4(vertex, 0.0, 1.0);\t      }\t    "),t.shaderSource(s,"\t      uniform highp sampler2D texture;\t      void main() {\t        gl_FragColor = texture2D(texture, vec2(0.5));\t      }\t    "),t.compileShader(a),t.compileShader(s),t.attachShader(_,a),t.attachShader(_,s),t.linkProgram(_);var o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0]),t.STREAM_DRAW),t.enableVertexAttribArray(0),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,0);var h=new Uint8Array(4);return t.useProgram(_),t.viewport(0,0,1,1),t.bindTexture(t.TEXTURE_2D,i),t.drawArrays(t.POINTS,0,1),t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,h),127===h[0]||128===h[0]}(t)){var o=WebGLRenderingContext.prototype.getExtension,h=WebGLRenderingContext.prototype.getSupportedExtensions;WebGLRenderingContext.prototype.getExtension=n,WebGLRenderingContext.prototype.getSupportedExtensions=i}if(t){var u=WebGLRenderingContext.prototype.readPixels;WebGLRenderingContext.prototype.readPixels=_}}(a),a)for(var s=0;s<n.length;s++){var o=n[s];i[o]=a[o]}a=null,_=null}},87:function(t,e,r){function n(t,e,r,i,a,o,u,p,l){t=t||s,this.__buffer=e?e.slice():_(t),this.__intOps=new Int32Array(this.__buffer),this.__uintOps=new Uint32Array(this.__buffer),this.__fltOps=new Float64Array(this.__buffer),this.__byteOps=new Uint8Array(this.__buffer),this.__mem=r?r.slice():[],this.__memPtr=0,this.__contextType=a||"2d",this.__contextAttributes=o,this.__execPtr=0,this.__maxSize=s,this.__resetPoint=0,this.__persistent=l||!1,this.__isRoot=!1,this.__lastFlush=-1,this.__contextId=h++;for(var E=0;E<this.__mem.length;E++){var c=this.__mem[E];c&&c.$type===n.INSTANCE_RENDERERCTX&&(this.__mem[E]=this.__mem[E].clone())}this.__len=i||0,this.$type=n.INSTANCE_RENDERERCTX,u?(this.canvas=new n.RendererCanvas(this),this.__multiThreaded=p||!1,this.__renderer=u,u.preInitializeContext(this)):(this.__renderer=null,this.__multiThreaded=p,this.canvas=null)}function i(t,e){if("2d"!==e)return document.createElement("canvas");var r=null;if(t)(r=c.shift())||(r=new OffscreenCanvas(0,0));else if(r=E.shift()){var i=r.getContext("2d");i.clearRect(0,0,r.width,r.height),n.propertiesToSync["2d"].forEach(function(t){i[t]=n.prototype["$"+t]})}else r=document.createElement("canvas");return r}function _(t){for(var e=null,r=-1,n=Number.POSITIVE_INFINITY,i=0;i<f.length;i++){var _=f[i].byteLength-t;if(_>=0&&_<n&&(r=i,n=_,0===_))break}return r>=0&&(e=f[r],f.splice(r,1)),e||(e=new ArrayBuffer(t)),e}function a(){if(n.DEBUG&&"function"==typeof gdb_loaddesign){var t=Array.prototype.slice.call(arguments).map(function(t){return"object"==typeof t?Array.prototype.slice.call(t):t});console.log("RenderCtx:"+t)}}var s=32768,o=r(0),h=1,u=1,p=[],l=[],E=[],c=[],f=[];n.SMALL_SIZE=512,n.MAX_SIZE=s,n.DEBUG=void 0,n.INSTANCE_RENDERERCTX=1,n.INSTANCE_RENDERABLE=16,n.INSTANCE_RENDERERCANVAS=256,n.RendererCanvas=function(t){this.parent=t,this.$type=n.INSTANCE_RENDERERCANVAS},n.RendererCanvas.prototype.parent=null,n.RendererCanvas.prototype.rendered=!1,n.RendererCanvas.prototype.rendering=!1,n.RendererCanvas.prototype.renderingSkipped=!1,n.RendererCanvas.prototype.renderedName=null,n.RendererCanvas.prototype.renderingName=null,n.RendererCanvas.prototype._w=0,n.RendererCanvas.prototype._h=0,n.RendererCanvas.prototype.$realCanvas=null,n.RendererCanvas.prototype.$renderedBitmap=null,n.RendererCanvas.prototype.$type=n.INSTANCE_RENDERERCANVAS,Object.defineProperties(n.RendererCanvas.prototype,{width:{set:function(t){this._w=t,this.parent._setWidth(t),this.rendered=!1},get:function(){return this._w}},height:{set:function(t){this._h=t,this.parent._setHeight(t),this.rendered=!1},get:function(){return this._h}},__realCanvas:{get:function(){return this.$realCanvas||(this.parent.__multiThreaded?this.$realCanvas=i(!0,this.parent.__contextType):this.$realCanvas=i(!1,this.parent.__contextType)),this.parent.__multiThreaded?this.$renderedBitmap:this.$realCanvas},set:function(){}}}),n.RendererCanvas.prototype.getContext=function(t){return this.parent},n.RendererCanvas.prototype.addEventListener=function(t,e){this.parent.__multiThreaded||this.__realCanvas.addEventListener(t,e)},n.RendererCanvas.prototype.flushCanvas=function(){this.parent.__flushCanvas()},n.RendererCanvas.prototype.isRendered=function(){return!!this.parent&&(!!this.parent.$realCtx&&(0===this.parent.__len?!this.renderingSkipped:!!n.finished(this.parent)))},n.RendererCanvas.prototype.toDataURL=function(){return this.rendered?this.__realCanvas.toDataURL():(console.warn("Renderer: Canvas is not rendered!"),null)};var d=0,T=[];n.Renderable=function(t,e){this.ctx=t,this.$type=n.INSTANCE_RENDERABLE,this.$renderable_type=this.RENDERABLE_TYPE,t.__persistent&&!e&&(this.__renderableId=u++)},o.inherit(n.Renderable,o),n.Renderable.inherit=function(t,e){o.inherit(t,e),t.prototype.RENDERABLE_TYPE=++d,T[d]=t.prototype},n.Renderable.render=function(t,e,r,n){if(void 0===t.$rendered){if(t.ctx.__multiThreaded&&t.__renderableId){var i=l[t.__renderableId];if(i)return t.$rendered=i.$rendered,i.$rendered}t.$rendered=T[t.$renderable_type]._render.call(t,e,r,n),void 0!==t.$rendered&&t.__renderableId&&(l[t.__renderableId]=t)}return t.$rendered},n.Renderable.dumpCode=function(t,e,r,n,i,_){if(!t.$renderedVariable){if(t.$renderedVariable=r,t.ctx.__multiThreaded&&t.ctx.__persistent){var a=l[t.__renderableId];if(a)return t.$renderedVariable=a.$renderedVariable,a.$renderedVariable}return T[t.$renderable_type]._dumpCode.call(t,e,r,n,i,_)}return t.$renderedVariable},n.Renderable.prototype.ctx=null,n.Renderable.prototype.__renderableId=0,n.Renderable.prototype.$rendered=void 0,n.Renderable.prototype.$renderedVariable=null,n.Renderable.prototype.$type=n.INSTANCE_RENDERABLE,n.Renderable.prototype.$renderable_type=0,n.Renderable.prototype._render=function(t,e,r){return null},n.Renderable.prototype.render=function(t,e,r){return this.$rendered||(this.$rendered=this._render(t,e,r)),this.$rendered},n.Renderable.prototype._dumpCode=function(t,e,r,n,i){},n.Renderable.prototype.dumpCode=function(t,e,r,n,i){return this.$renderedVariable?this.$renderedVariable:(this.$renderedVariable=e,this._dumpCode(t,e,r,n,i))},n.prototype.canvas=null,n.prototype.__contextType=0,n.prototype.__intOps=null,n.prototype.__fltOps=null,n.prototype.__uintOps=null,n.prototype.__byteOps=null,n.prototype.__len=0,n.prototype.__mem=null,n.prototype.__execPtr=0,n.prototype.__resetPoint=0,n.prototype.__memPtr=0,n.prototype.__maxSize=s,n.prototype.__renderer=null,n.prototype.__multiThreaded=!1,n.prototype.__persistent=!1,n.prototype.__contextId=0,n.prototype.__lastFlush=-1,n.prototype.__isRoot=!1,n.prototype.$type=n.INSTANCE_RENDERERCTX,n.clone=function(t){return new n(t.__maxSize,t.__buffer,t.__mem,t.__len,t.__contextType,t.__renderer,t.__multiThreaded,t.__persistent)},n.prototype.__clone=function(){return new n(this.__maxSize,this.__buffer,this.__mem,this.__len,this.__contextType,this.__renderer,this.__multiThreaded,this.__persistent)},n.prototype.__realloc=function(t){var e=_(t);this.__maxSize=e.byteLength,new Uint8Array(e).set(this.__byteOps),this.__fltOps=new Float64Array(e),this.__intOps=new Int32Array(e),this.__uintOps=new Uint32Array(e),this.__byteOps=new Uint8Array(e)},n.prototype.__pushByte=function(t){var e=this.__len+1;e>=this.__maxSize&&this.__realloc(this.__maxSize<<1),this.__byteOps[this.__len]=t,this.__len=e},n.prototype.__pushBool=function(t){this.__pushByte(n.TYPE_BOOL),this.__pushByte(t?1:0)},n.prototype.__pushInt=function(t){this.__pushByte(n.TYPE_INT);var e=this.__len+4;e>=this.__maxSize&&this.__realloc(this.__maxSize<<1),g[0]=t,this.__byteOps[this.__len]=C[0],this.__byteOps[this.__len+1]=C[1],this.__byteOps[this.__len+2]=C[2],this.__byteOps[this.__len+3]=C[3],this.__len=e},n.prototype.__pushUint=function(t){this.__pushByte(n.TYPE_UINT),this.__pushUintT(t)},n.prototype.__pushUintT=function(t){var e=this.__len+4;e>=this.__maxSize&&this.__realloc(this.__maxSize<<1),m[0]=t,this.__byteOps[this.__len]=C[0],this.__byteOps[this.__len+1]=C[1],this.__byteOps[this.__len+2]=C[2],this.__byteOps[this.__len+3]=C[3],this.__len=e},n.prototype.__pushFlt=function(t){this.__pushByte(n.TYPE_FLT),this.__pushFltT(t)},n.prototype.__pushFltT=function(t){var e=this.__len+8;e>=this.__maxSize&&this.__realloc(this.__maxSize<<1),y[0]=t,this.__byteOps[this.__len]=C[0],this.__byteOps[this.__len+1]=C[1],this.__byteOps[this.__len+2]=C[2],this.__byteOps[this.__len+3]=C[3],this.__byteOps[this.__len+4]=C[4],this.__byteOps[this.__len+5]=C[5],this.__byteOps[this.__len+6]=C[6],this.__byteOps[this.__len+7]=C[7],this.__len=e},n.prototype.__pushPtr=function(t){this.__pushByte(n.TYPE_PTR),this.__pushPtrT(t)},n.prototype.__pushPtrT=function(t,e){t&&t.$type===n.INSTANCE_RENDERERCTX&&!e&&(t=t.__clone()),this.__pushUintT(this.__mem.length),this.__mem.push(t)},n.prototype.__finish=function(t){this.__lastFlush=this.__len,this.__pushByte(n.FINISH),this.__pushPtrT(t.canvas)},n.prototype.__delete=function(){},n.prototype.__fakeFunction=function(){this.__pushByte(n.FAKE)},n.prototype.__call=function(){this.__pushByte(n.EXEC)},n.prototype.__mov=function(){this.__pushByte(n.MOV)},n.prototype._setWidth=function(t){a("set width:",t),this.__pushByte(n._setWidth),this.__pushInt(t),this.__call()},n.prototype._setHeight=function(t){a("set height:",t),this.__pushByte(n._setHeight),this.__pushInt(t),this.__call()},n.prototype._flush=function(t){a("flush context: ",t.__contextType),t.__finish(this),this.__pushByte(n._flush),this.__pushPtr(t.canvas),this.__call()},n.prototype.__flushCanvas=function(){this.__pushByte(n.FLUSHCANVAS)},n.getLen=function(t){return t.__len},n.getOp=function(t){return t.__byteOps[t.__execPtr++]},n.getVal=function(t){var e,r=n.getOp(t);try{e=n.__getters[r](t)}catch(t){e=n.ERROR_TYPE}return e},n.clearPrevious=function(t){t.__resetPoint=t.__execPtr},n.resetExec=function(t){t.__execPtr=t.__resetPoint},n.reset=function(t){t.__len=0},n.finished=function(t){return t.__execPtr>=t.__len||t.__lastFlush>=0&&t.__execPtr>=t.__lastFlush},n.dispose=function(t,e){t.__buffer&&(t.__mem=[],t.__execPtr=0,t.__len=0,t.__resetPoint=0,"webgl"===t.__contextType&&t instanceof n&&t.__clearScheduled(e),t.__persistent||(t.__isRoot||t.canvas&&t.canvas.$realCanvas&&"webgl"!==t.__contextType&&(t.__multiThreaded?c.push(t.canvas.$realCanvas):E.push(t.canvas.$realCanvas),t.canvas.$realCanvas=null),f.push(t.__buffer),t.__buffer=null,t.__byteOps=null,t.__intOps=null,t.__fltOps=null,t.__uintOps=null))},n.freeMemory=function(){p=[],f=[],E=[],c=[]},n.destroy=function(t){if(t&&(t instanceof n.RendererCanvas&&(t=t.parent),t instanceof n)){var e=p[t.__contextId];e&&(e.canvas.$realCanvas&&"function"==typeof e.canvas.$realCanvas.close&&(e.canvas.$realCanvas.close(),e.canvas.$realCanvas=null),delete p[t.__contextId],t.__persistent=!1,n.dispose(t))}},n.initialize=function(t){t.__multiThreaded||t.canvas.__realCanvas,t.__renderer=null},n.initializeContext=function(t,e){if(t.__multiThreaded&&t.__persistent){var r=p[t.__contextId];r&&(t.canvas.$realCanvas=r.canvas.$realCanvas,t.$realCtx=r.$realCtx)}t.__isRoot=t.__isRoot||e;var n=t.$realCtx;return n||(t.canvas.$realCanvas||(t.__multiThreaded?t.canvas.$realCanvas=i(!0,t.__contextType):t.canvas.$realCanvas=i(!1,t.__contextType)),t.$realCtx=t.canvas.$realCanvas.getContext(t.__contextType,t.__contextAttributes),t.$realCtx)},n.postInitializeContext=function(t){t.__persistent&&(p[t.__contextId]=t)},n.getPreservedContexts=function(){return Object.values(p)},n.syncContext=function(t){t.__persistent&&t.$realCtx&&(t.canvas&&t.canvas.$realCanvas&&(t.canvas._w=t.canvas.$realCanvas.width,t.canvas._h=t.canvas.$realCanvas.height),n.propertiesToSync[t.__contextType].forEach(function(e){t["$"+e]=t.$realCtx[e]}))},n.propertiesToSync={},r(789)(n),r(790)(n),Object.defineProperties(n.prototype,{__realCtx:{get:function(){return this.$realCtx?this.$realCtx:this.__multiThreaded?null:(this.$realCtx=this.canvas.__realCanvas.getContext(this.__contextType,this.__contextAttributes),this.$realCtx)}}});var R=0;n.__ops=[],Object.keys(n.prototype).forEach(function(t,e){t.startsWith("__")||t.startsWith("$")||t.match(/^[A-Z0-9\_]+$/)||(n.__ops.push(t),n[t]=R++)}),n.EXEC=R++,n.MOV=R++,n.DELETE=R++,n.FINISH=R++,n.FLUSHCANVAS=R++,n.FAKE=R++,n.TYPE_FLT=R++,n.TYPE_INT=R++,n.TYPE_UINT=R++,n.TYPE_PTR=R++,n.TYPE_BOOL=R++;var A=new ArrayBuffer(8),y=new Float64Array(A),m=new Uint32Array(A),g=new Int32Array(A),C=new Uint8Array(A);n.getFlt=function(t){var e=t.__byteOps,r=t.__execPtr;return C[0]=e[r],C[1]=e[r+1],C[2]=e[r+2],C[3]=e[r+3],C[4]=e[r+4],C[5]=e[r+5],C[6]=e[r+6],C[7]=e[r+7],t.__execPtr+=8,y[0]},n.getUint=function(t){var e=t.__byteOps,r=t.__execPtr;return C[0]=e[r],C[1]=e[r+1],C[2]=e[r+2],C[3]=e[r+3],t.__execPtr+=4,m[0]},n.getInt=function(t){var e=t.__byteOps,r=t.__execPtr;return C[0]=e[r],C[1]=e[r+1],C[2]=e[r+2],C[3]=e[r+3],t.__execPtr+=4,g[0]},n.getBool=function(t){var e=t.__byteOps[t.__execPtr];return t.__execPtr++,!!e},n.getPtr=function(t){var e=n.getUint(t);return t.__mem[e]},n.getExec=function(t){return n.EXEC_TYPE},n.getMov=function(t){return n.MOV_TYPE},n.getDelete=function(t){return n.DELETE_TYPE},n.getFinish=function(t){return n.FINISH_TYPE},n.EXEC_TYPE={},n.MOV_TYPE={},n.DELETE_TYPE={},n.FINISH_TYPE={},n.ERROR_TYPE={},n.__getters=[],n.__getters[n.TYPE_FLT]=n.getFlt,n.__getters[n.TYPE_UINT]=n.getUint,n.__getters[n.TYPE_INT]=n.getInt,n.__getters[n.TYPE_PTR]=n.getPtr,n.__getters[n.EXEC]=n.getExec,n.__getters[n.MOV]=n.getMov,n.__getters[n.DELETE]=n.getDelete,n.__getters[n.FINISH]=n.getFinish,n.__getters[n.TYPE_BOOL]=n.getBool,t.exports=n},94:function(t,e,r){function n(){}function i(t){var e=document.createElement("canvas");e.width=e.height=1,e.getContext("2d").drawImage(t,0,0)}function _(t,e){if(e=e||0,"function"==typeof gdb_loaddesign&&s<=e){if(2===e)return void console.error("Renderer:"+t);if(1===e)return void console.warn("Renderer:"+t);0===e&&console.log("Renderer: "+t)}}var a,s=2,o=r(87),h=r(176),u=r(782);"undefined"!=typeof OffscreenCanvas&&(a=new Worker("./render.worker.js"));var p="undefined"!=typeof window&&window.requestAnimationFrame||setTimeout,l="undefined"!=typeof window&&window.cancelAnimationFrame||clearTimeout;n._enabled=!0,n._debugEnabled=!1,n._debugPhase=!1,n._multiThreading=!1,n.DUMP_IMAGES=!0,n._renderPhase=!1,n._toInitialize=[],n._renderParameters={},n._renderJobs=[],n._scheduledRenderings=null,n.begin=function(t){o.getPreservedContexts().forEach(function(t){o.syncContext(t)}),this._renderPhase=!0,this._debugEnabled?this._debugPhase=!0:t&&"undefined"!=typeof OffscreenCanvas?this._multiThreading=!!t:this._multiThreading=!1},n.finish=function(){this._renderPhase=!1,this._debugPhase=!1,this._multiThreading=!1},n.tryRunRendering=function(t,e,r,i,_){if(!this.isRenderPhase()&&!this._renderJobs.some(function(){return!0}))return void function(){n.begin(i,_),e(),n.finish();var a=n._renderParameters;n._renderParameters={},n.render(t.getRendererContext(),0,function(e,n,i){n&&r(t)}),n._renderParameters=a}();this._scheduledRenderings||(this._scheduledRenderings=[]),this._scheduledRenderings.push({paintCanvas:t,renderFunc:e,callback:r,multithreading:i})},n.resetRenderJobs=function(){this._renderJobs.forEach(function(t){null!==t.timeout&&console.log("SOMETHING ACTUALLY STOPPED!"),t.disposeRenderables(),t.reset()})},n.init=function(t,e){this._enabled=!1!==t,this._debugEnabled=!0===e},n.isEnabled=function(){return this._enabled},n.isRenderPhase=function(){return this._enabled&&this._renderPhase},n.isDebug=function(){return s<2},n.isMultiThreaded=function(t){return t?t.__multiThreaded:this._multiThreading},n.setRenderParameters=function(t){for(var e in t)this._renderParameters[e]=t[e]},n.preInitializeContext=function(t){this._toInitialize.push(t)},n.getRenderer=function(t,e,r,n,i){return this._enabled&&this._debugEnabled&&(this._debugPhase||t)?new h(e,r,this,n):this._enabled&&(this._renderPhase||t)?new o(null,null,null,null,e,r,this,this.isMultiThreaded()||i,n):document.createElement("canvas").getContext(e||"2d",r)},n.render=function(t,e,r,s){var h,E,c,f,d,T,R,A=o.getLen(t),y=0,e=e||0,m=new Array(15),g=!1,C=!0,I=s&&s.resuming;if(!this._enabled){var N=t.$type===o.INSTANCE_RENDERERCTX?t.canvas.__realCanvas:t;return r(N,!0,!1),N}if(this._debugPhase)return r(t.canvas.$realCanvas,!0,!1),t.canvas.$realCanvas;if(0!==e||I||this.isDebug()&&(this._toInitialize.forEach(function(t){o.initialize(t)}),t.__multiThreaded),t.__multiThreaded){if(I)return null;var S=[];return t.canvas.$realCanvas&&(t.canvas.$realCanvas=null),t.canvas.$renderedBitmap&&(t.canvas.$renderedBitmap.close(),t.canvas.$renderedBitmap=null),t.renderParameters=this._renderParameters,a.postMessage(t,S),this._toInitialize.forEach(function(e){o.dispose(e,t.renderParameters)}),a.onmessage=function(e){if(t.canvas.$renderedBitmap=e.data.canvas,r(e.data.canvas,e.data.finished,e.data.skipped),e.data.finished&&n._scheduledRenderings&&n._scheduledRenderings.length){var i=n._scheduledRenderings.pop();p(function(){n.tryRunRendering(i.paintCanvas,i.renderFunc,i.callback,i.multithreading)})}},null}if(0===e&&(R=this._toInitialize,this._toInitialize=[]),!s)if(s=this._renderJobs[t.__contextId])null!==s.timeout&&(console.warn("Rendering already scheduled thing"),l(s.timeout),s.timeout=null);else{var v={};for(var b in this._renderParameters)v[b]=this._renderParameters[b];s=new u(t,100,v),s.initialRenderables=R,this._renderJobs[s.getId()]=s}if(I)d=s.popSave(),y=d.execPtr,A=d.len,E=d.op,m=d.params||new Array(15),c=d.funcName,f=d.funcOp,h=d.realCtx,T=d.numParams,s.hasSave()||(s.reset(),I=!1,d=null);else{if(!(h=o.initializeContext(t,0===e)))return 0===e?(s.exiting=!1,delete this._renderJobs[s.getId()],r&&r(t.canvas.$realCanvas,!0),t.canvas.$realCanvas):null;if(t.canvas.rendering||o.resetExec(t),t.canvas.rendering||e>0&&t.canvas.rendered)return _("Reusing subcanvas 2"),t.canvas.$realCanvas;t.canvas.rendering=!0,y=t.__execPtr,s.addRenderable(t)}for(;y<A;){if(!d){if((E=o.getOp(t))===o.DELETE){y=t.__execPtr,o.clearPrevious(t);continue}if(E===o.FINISH){var P=o.getPtr(t);if(y=t.__execPtr,e>0){if(P.rendering){o.clearPrevious(t);break}continue}continue}if(E===o.FLUSHCANVAS){i(h.canvas);continue}if(E===o.FAKE)continue;c=o.__ops[E],f=E,T=0}for(;;){var x;if(d)x=d.val,d=null;else if((x=o.getVal(t))===o.ERROR_TYPE)return _("Renderer: invalid value in stack",2),s.exiting=!1,void 0!==h.restore&&h.restore(),0===e&&r&&r(t.canvas.$realCanvas,!0,!0),t.canvas.$realCanvas;if("number"==typeof x);else{if(x===o.EXEC_TYPE){E=o.EXEC;break}if(x===o.MOV_TYPE){E=o.MOV;break}if(x&&x.$type===o.INSTANCE_RENDERERCANVAS){var L=x;if(!x.rendered&&!x.rendering||I){if(s.parameters.quickRender&&e>0||s.parameters.noWebGL&&"webgl"===x.parent.__contextType?g=!0:(x=this.render(x.parent,e+1,null,s))||"_flush"===c||(g=!0,C=!1),s.exiting)return y=t.__execPtr,o.clearPrevious(t),s.pushSave({ctx:t,callback:r,len:A,execPtr:y,realCtx:h,resumeLocation:1,op:E,params:m,numParams:T,funcName:c,funcOp:f,val:L}),0===e&&(s.exiting=!1,r&&r(t.canvas.$realCanvas,!1,g||s.skipped)),null}else(x=x.$realCanvas)||"_flush"===c||(g=!0,C=!1,_("Error: canvas is null",2))}else x&&x.$type===o.INSTANCE_RENDERABLE&&(s.lock(),x=x.render(this,e+1,s),s.unlock(),void 0===x&&(g=!0))}m[T++]=x}if(E===o.EXEC)if(f===o._setWidth)t.canvas.$realCanvas.width=m[0];else if(f===o._setHeight)t.canvas.$realCanvas.height=m[0];else if(f===o.getProgramParameter||f===o.getShaderParameter){var F=h[c].call(h,m[0],m[1]);if(!F){"getProgramParameter"===c?_("link error: "+h.getProgramInfoLog(m[0]),2):_("shader error: "+h.getShaderInfoLog(m[0]),2);break}}else f===o._flush?E!==o.EXEC&&_("erroneous flush",2):g?(g=!1,C?s.skipped=!0:C=!0):2===T?h[c].call(h,m[0],m[1]):4===T?h[c].call(h,m[0],m[1],m[2],m[3]):6===T?h[c].call(h,m[0],m[1],m[2],m[3],m[4],m[5]):0===T?h[c].call(h):1===T?h[c].call(h,m[0]):3===T?h[c].call(h,m[0],m[1],m[2]):5===T?h[c].call(h,m[0],m[1],m[2],m[3],m[4]):7===T?h[c].call(h,m[0],m[1],m[2],m[3],m[4],m[5],m[6]):8===T?h[c].call(h,m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7]):9===T?h[c].call(h,m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8]):10===T?h[c].call(h,m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9]):11===T?h[c].call(h,m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10]):12===T?h[c].call(h,m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11]):13===T?h[c].call(h,m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12]):14===T?h[c].call(h,m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13]):15===T&&h[c].call(h,m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14]);else{if(E!==o.MOV)break;h[c]=m[0]}if(y=t.__execPtr,!I&&s.isExpired()){if(o.finished(t))continue;return o.clearPrevious(t),s.hasSave()&&_("Renderer: exiting render loop without reaching save location",2),s.pushSave({ctx:t,callback:r,len:A,realCtx:h,execPtr:y,resumeLocation:2}),n._scheduleRender(s),0===e&&r&&r(t.canvas.$realCanvas,!1,s.skipped),s.exiting=!0,null}}t.canvas.rendering=!1;var U=t.canvas.$realCanvas;if(o.finished(t)?(t.canvas.rendered=!0,o.dispose(t)):o.clearPrevious(t),0===e&&(s.disposeRenderables(),s.exiting=!1,delete this._renderJobs[s.getId()],r&&(r(t.canvas.$realCanvas,!0,s.skipped),n._scheduledRenderings&&n._scheduledRenderings.length))){var O=n._scheduledRenderings.pop();p(function(){n.tryRunRendering(O.paintCanvas,O.renderFunc,O.callback,O.multithreading)})}return o.postInitializeContext(t),U},n._scheduleRender=function(t){var e=this._renderJobs[t.getId()];e||(this._renderJobs[t.getId()]=e),t.timeout&&(l(t.timeout),t.timeout=null),t.timeout=p(function(){t.resuming=!0;var e=t.getSave();n.render(e.ctx,0,e.callback,t)},0)};var E,c=0,f=0;n.dumpCode=function(t,e,r,i){var a=o.getLen(t),s=0;0!==(r=t.canvas.renderingName||t.canvas.renderedName?parseInt((t.canvas.renderingName||t.canvas.renderedName).match(/[0-9]+$/)[0]):null===r?++f:r||0)||t.canvas.rendering||c>0&&(E=!0);var h="canvas"+r,u="context"+r,p="";if(t.canvas.rendering)return p;if(!t.canvas.renderingName&&!t.canvas.renderedName)if("webgl"===t.__contextType&&E);else{if(p="var "+h+" = document.createElement('canvas');\n",p+="var "+u+" = "+h+".getContext('"+t.__contextType+"', "+JSON.stringify(t.__contextAttributes)+");\n",p+=h+".width="+t.canvas.$realCanvas.width+";\n",p+=h+".height="+t.canvas.$realCanvas.height+";\n",0===r){var l=t.canvas.$realCanvas.width,d=t.canvas.$realCanvas.height;l/=window.devicePixelRatio,d/=window.devicePixelRatio,p+=h+'.style.width="'+l+'px";\n',p+=h+'.style.height="'+d+'px";\n',p+="document.body.appendChild("+h+");\n"}"webgl"===t.__contextType&&(p+=u+".getExtension('OES_texture_float');\n",p+=u+".getExtension('OES_texture_float_linear');\n"),o.resetExec(t)}s=t.__execPtr;var i=i||[0];for(t.canvas.renderingName=h,t.canvas.rendering=!0;s<a;){var T=o.getOp(t),R=o.__ops[T],A=[];if(T!==o.DELETE)if(T!==o.FINISH)if(T!==o.FLUSHCANVAS)if(T!==o.FAKE){for(;;){var y;try{y=o.getVal(t)}catch(t){return _("Renderer: invalid value in stack",1),p}if(y===o.EXEC_TYPE){T=o.EXEC;break}if(y===o.MOV_TYPE){T=o.MOV;break}if("string"==typeof y)y='"'+y+'"';else if(y&&y.$type===o.INSTANCE_RENDERERCANVAS)if(y.renderedName||y.renderingName)if(y.renderingName)if(y.rendering)y=y.renderingName;else{var m=y.renderingName;p+=this.dumpCode(y.parent,!1,null,i),y=m}else if(!y.rendered&&y.renderedName){var m=y.renderedName;y.rendering||(p+=this.dumpCode(y.parent,!1,null,i)),y=m}else y=y.renderedName;else{var g=++f;y=this.dumpCode(y.parent,!1,g,i),p+=y,y="canvas"+g}else if(y instanceof HTMLCanvasElement&&n.DUMP_IMAGES){var C="tmp"+i[0];p+="var "+C+" = new Image();\n",p+=C+'.src = "'+y.toDataURL()+'";\n',p+=C+".onload=()=>{\n",y=C,i[0]++}else if(y&&y.$type===o.INSTANCE_RENDERABLE){var I="pattern"+r+"_"+c;y.$renderedVariable||(p+=y.dumpCode(u,I,this,r,i),c++),y=y.dumpCode(u,I,this,r,i)}else if(y instanceof Float32Array)y="new Float32Array(["+y.join(",")+"])";else if(y instanceof Int32Array)y="new Int32Array(["+y.join(",")+"])";else if(y instanceof Float64Array)y="new Float64Array(["+y.join(",")+"])";else{if(y instanceof Array)throw new Error("Array parameter not supported");if(null===y)y="null";else if(void 0===y)y="undefined";else if("webgl"===t.__contextType&&"number"==typeof y){var N=parseInt(y);if(N===y){var S=o.getGLConst(y);S&&(y=u+"."+S)}}}A.push(y)}if("_setWidth"===R)p+=h+".width = "+A[0]+"\n";else if("_setHeight"===R)p+=h+".height = "+A[0]+"\n";else if("_flush"===R&&T===o.EXEC)p+="//           .\n",p+="//          / \\\n",p+="// flushed /| |\\\n";else if(T===o.EXEC)"shaderSource"===R&&(A[1]=A[1].replace(/\n/g,"")),p+=u+"."+R+"("+A.join(",")+");\n";else{if(T!==o.MOV)return _("Invalid op",2),p+"<== ERROR ###";p+=u+"."+R+" = "+A[0]+";\n"}s=t.__execPtr}else p+="// <= DUMP DEBUG PLACE";else p+='var workaroundCtx = document.createElement("canvas").getContext("2d");\n\t\t\t\t\t workaroundCtx.drawImage('+h+",0,0);\n";else{var v=o.getPtr(t);if(s=t.__execPtr,r>0){if(_("### Finish id = "+r+"; finishSrc rendering? "+v.rendering),v.rendering)break;continue}_("### Finish id = 0; finishSrc rendering? "+v.rendering)}else s=t.__execPtr}if(0===r)for(var b=0;b<i[0];b++)p+="}";if(0===r&&e){var P=btoa("<!DOCTYPE html><html><body><script type='text/javascript'>"+p+"<\/script></body></html>");p="data:text/html;base64,"+P}return t.canvas.rendering=!1,o.finished(t)&&(t.canvas.renderedName=t.canvas.renderingName,t.canvas.renderingName=null),p},n.destroy=function(t){t&&t.__multiThreaded?a&&a.postMessage({__contextId:t.__contextId,action:"d"}):o.destroy(t)},o.DEBUG=n.isDebug(),t.exports=n}});