!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){!function(a,c,d){"undefined"!=typeof b&&b.exports?b.exports=d():"function"==typeof define&&define.amd?define(c,d):a[c]=d()}(this,"bowser",function(){function a(a){function b(b){var c=a.match(b);return c&&c.length>1&&c[1]||""}function c(b){var c=a.match(b);return c&&c.length>1&&c[2]||""}function d(a){switch(a){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return void 0}}var e,f=b(/(ipod|iphone|ipad)/i).toLowerCase(),h=/like android/i.test(a),i=!h&&/android/i.test(a),j=/nexus\s*[0-6]\s*/i.test(a),k=!j&&/nexus\s*[0-9]+/i.test(a),l=/CrOS/.test(a),m=/silk/i.test(a),n=/sailfish/i.test(a),o=/tizen/i.test(a),p=/(web|hpw)os/i.test(a),q=/windows phone/i.test(a),r=(/SamsungBrowser/i.test(a),!q&&/windows/i.test(a)),s=!f&&!m&&/macintosh/i.test(a),t=!i&&!n&&!o&&!p&&/linux/i.test(a),u=c(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),v=b(/version\/(\d+(\.\d+)?)/i),w=/tablet/i.test(a)&&!/tablet pc/i.test(a),x=!w&&/[^-]mobi/i.test(a),y=/xbox/i.test(a);/opera/i.test(a)?e={name:"Opera",opera:g,version:v||b(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(a)?e={name:"Opera",opera:g,version:b(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||v}:/SamsungBrowser/i.test(a)?e={name:"Samsung Internet for Android",samsungBrowser:g,version:v||b(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(a)?e={name:"Opera Coast",coast:g,version:v||b(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(a)?e={name:"Yandex Browser",yandexbrowser:g,version:v||b(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(a)?e={name:"UC Browser",ucbrowser:g,version:b(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(a)?e={name:"Maxthon",maxthon:g,version:b(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(a)?e={name:"Epiphany",epiphany:g,version:b(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(a)?e={name:"Puffin",puffin:g,version:b(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(a)?e={name:"Sleipnir",sleipnir:g,version:b(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(a)?e={name:"K-Meleon",kMeleon:g,version:b(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:q?(e={name:"Windows Phone",osname:"Windows Phone",windowsphone:g},u?(e.msedge=g,e.version=u):(e.msie=g,e.version=b(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(a)?e={name:"Internet Explorer",msie:g,version:b(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:l?e={name:"Chrome",osname:"Chrome OS",chromeos:g,chromeBook:g,chrome:g,version:b(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(a)?e={name:"Microsoft Edge",msedge:g,version:u}:/vivaldi/i.test(a)?e={name:"Vivaldi",vivaldi:g,version:b(/vivaldi\/(\d+(\.\d+)?)/i)||v}:n?e={name:"Sailfish",osname:"Sailfish OS",sailfish:g,version:b(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(a)?e={name:"SeaMonkey",seamonkey:g,version:b(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(a)?(e={name:"Firefox",firefox:g,version:b(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(a)&&(e.firefoxos=g,e.osname="Firefox OS")):m?e={name:"Amazon Silk",silk:g,version:b(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(a)?e={name:"PhantomJS",phantom:g,version:b(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(a)?e={name:"SlimerJS",slimer:g,version:b(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(a)||/rim\stablet/i.test(a)?e={name:"BlackBerry",osname:"BlackBerry OS",blackberry:g,version:v||b(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:p?(e={name:"WebOS",osname:"WebOS",webos:g,version:v||b(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(a)&&(e.touchpad=g)):/bada/i.test(a)?e={name:"Bada",osname:"Bada",bada:g,version:b(/dolfin\/(\d+(\.\d+)?)/i)}:o?e={name:"Tizen",osname:"Tizen",tizen:g,version:b(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||v}:/qupzilla/i.test(a)?e={name:"QupZilla",qupzilla:g,version:b(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||v}:/chromium/i.test(a)?e={name:"Chromium",chromium:g,version:b(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||v}:/chrome|crios|crmo/i.test(a)?e={name:"Chrome",chrome:g,version:b(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:i?e={name:"Android",version:v}:/safari|applewebkit/i.test(a)?(e={name:"Safari",safari:g},v&&(e.version=v)):f?(e={name:"iphone"==f?"iPhone":"ipad"==f?"iPad":"iPod"},v&&(e.version=v)):e=/googlebot/i.test(a)?{name:"Googlebot",googlebot:g,version:b(/googlebot\/(\d+(\.\d+))/i)||v}:{name:b(/^(.*)\/(.*) /),version:c(/^(.*)\/(.*) /)},!e.msedge&&/(apple)?webkit/i.test(a)?(/(apple)?webkit\/537\.36/i.test(a)?(e.name=e.name||"Blink",e.blink=g):(e.name=e.name||"Webkit",e.webkit=g),!e.version&&v&&(e.version=v)):!e.opera&&/gecko\//i.test(a)&&(e.name=e.name||"Gecko",e.gecko=g,e.version=e.version||b(/gecko\/(\d+(\.\d+)?)/i)),e.windowsphone||!i&&!e.silk?!e.windowsphone&&f?(e[f]=g,e.ios=g,e.osname="iOS"):s?(e.mac=g,e.osname="macOS"):y?(e.xbox=g,e.osname="Xbox"):r?(e.windows=g,e.osname="Windows"):t&&(e.linux=g,e.osname="Linux"):(e.android=g,e.osname="Android");var z="";e.windows?z=d(b(/Windows ((NT|XP)( \d\d?.\d)?)/i)):e.windowsphone?z=b(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):e.mac?(z=b(/Mac OS X (\d+([_\.\s]\d+)*)/i),z=z.replace(/[_\s]/g,".")):f?(z=b(/os (\d+([_\s]\d+)*) like mac os x/i),z=z.replace(/[_\s]/g,".")):i?z=b(/android[ \/-](\d+(\.\d+)*)/i):e.webos?z=b(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):e.blackberry?z=b(/rim\stablet\sos\s(\d+(\.\d+)*)/i):e.bada?z=b(/bada\/(\d+(\.\d+)*)/i):e.tizen&&(z=b(/tizen[\/\s](\d+(\.\d+)*)/i)),z&&(e.osversion=z);var A=!e.windows&&z.split(".")[0];return w||k||"ipad"==f||i&&(3==A||A>=4&&!x)||e.silk?e.tablet=g:(x||"iphone"==f||"ipod"==f||i||j||e.blackberry||e.webos||e.bada)&&(e.mobile=g),e.msedge||e.msie&&e.version>=10||e.yandexbrowser&&e.version>=15||e.vivaldi&&e.version>=1||e.chrome&&e.version>=20||e.samsungBrowser&&e.version>=4||e.firefox&&e.version>=20||e.safari&&e.version>=6||e.opera&&e.version>=10||e.ios&&e.osversion&&e.osversion.split(".")[0]>=6||e.blackberry&&e.version>=10.1||e.chromium&&e.version>=20?e.a=g:e.msie&&e.version<10||e.chrome&&e.version<20||e.firefox&&e.version<20||e.safari&&e.version<6||e.opera&&e.version<10||e.ios&&e.osversion&&e.osversion.split(".")[0]<6||e.chromium&&e.version<20?e.c=g:e.x=g,e}function b(a){return a.split(".").length}function c(a,b){var c,d=[];if(Array.prototype.map)return Array.prototype.map.call(a,b);for(c=0;c<a.length;c++)d.push(b(a[c]));return d}function d(a){for(var d=Math.max(b(a[0]),b(a[1])),e=c(a,function(a){var e=d-b(a);return a+=new Array(e+1).join(".0"),c(a.split("."),function(a){return new Array(20-a.length).join("0")+a}).reverse()});--d>=0;){if(e[0][d]>e[1][d])return 1;if(e[0][d]!==e[1][d])return-1;if(0===d)return 0}}function e(b,c,e){var f=h;"string"==typeof c&&(e=c,c=void 0),void 0===c&&(c=!1),e&&(f=a(e));var g=""+f.version;for(var i in b)if(b.hasOwnProperty(i)&&f[i]){if("string"!=typeof b[i])throw new Error("Browser version in the minVersion map should be a string: "+i+": "+String(b));return d([g,b[i]])<0}return c}function f(a,b,c){return!e(a,b,c)}var g=!0,h=a("undefined"!=typeof navigator?navigator.userAgent||"":"");return h.test=function(a){for(var b=0;b<a.length;++b){var c=a[b];if("string"==typeof c&&c in h)return!0}return!1},h.isUnsupportedBrowser=e,h.compareVersions=d,h.check=f,h._detect=a,h})},{}],2:[function(a,b){var c=function(){function a(a,b){if(!e[a]){e[a]={};for(var c=0;c<a.length;c++)e[a][a.charAt(c)]=c}return e[a][b]}var b=String.fromCharCode,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",e={},f={compressToBase64:function(a){if(null==a)return"";var b=f._compress(a,6,function(a){return c.charAt(a)});switch(b.length%4){default:case 0:return b;case 1:return b+"===";case 2:return b+"==";case 3:return b+"="}},decompressFromBase64:function(b){return null==b?"":""==b?null:f._decompress(b.length,32,function(d){return a(c,b.charAt(d))})},compressToUTF16:function(a){return null==a?"":f._compress(a,15,function(a){return b(a+32)})+" "},decompressFromUTF16:function(a){return null==a?"":""==a?null:f._decompress(a.length,16384,function(b){return a.charCodeAt(b)-32})},compressToUint8Array:function(a){for(var b=f.compress(a),c=new Uint8Array(2*b.length),d=0,e=b.length;e>d;d++){var g=b.charCodeAt(d);c[2*d]=g>>>8,c[2*d+1]=g%256}return c},decompressFromUint8Array:function(a){if(null===a||void 0===a)return f.decompress(a);for(var c=new Array(a.length/2),d=0,e=c.length;e>d;d++)c[d]=256*a[2*d]+a[2*d+1];var g=[];return c.forEach(function(a){g.push(b(a))}),f.decompress(g.join(""))},compressToEncodedURIComponent:function(a){return null==a?"":f._compress(a,6,function(a){return d.charAt(a)})},decompressFromEncodedURIComponent:function(b){return null==b?"":""==b?null:(b=b.replace(/ /g,"+"),f._decompress(b.length,32,function(c){return a(d,b.charAt(c))}))},compress:function(a){return f._compress(a,16,function(a){return b(a)})},_compress:function(a,b,c){if(null==a)return"";var d,e,f,g={},h={},i="",j="",k="",l=2,m=3,n=2,o=[],p=0,q=0;for(f=0;f<a.length;f+=1)if(i=a.charAt(f),Object.prototype.hasOwnProperty.call(g,i)||(g[i]=m++,h[i]=!0),j=k+i,Object.prototype.hasOwnProperty.call(g,j))k=j;else{if(Object.prototype.hasOwnProperty.call(h,k)){if(k.charCodeAt(0)<256){for(d=0;n>d;d++)p<<=1,q==b-1?(q=0,o.push(c(p)),p=0):q++;for(e=k.charCodeAt(0),d=0;8>d;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1}else{for(e=1,d=0;n>d;d++)p=p<<1|e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e=0;for(e=k.charCodeAt(0),d=0;16>d;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1}l--,0==l&&(l=Math.pow(2,n),n++),delete h[k]}else for(e=g[k],d=0;n>d;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1;l--,0==l&&(l=Math.pow(2,n),n++),g[j]=m++,k=String(i)}if(""!==k){if(Object.prototype.hasOwnProperty.call(h,k)){if(k.charCodeAt(0)<256){for(d=0;n>d;d++)p<<=1,q==b-1?(q=0,o.push(c(p)),p=0):q++;for(e=k.charCodeAt(0),d=0;8>d;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1}else{for(e=1,d=0;n>d;d++)p=p<<1|e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e=0;for(e=k.charCodeAt(0),d=0;16>d;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1}l--,0==l&&(l=Math.pow(2,n),n++),delete h[k]}else for(e=g[k],d=0;n>d;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1;l--,0==l&&(l=Math.pow(2,n),n++)}for(e=2,d=0;n>d;d++)p=p<<1|1&e,q==b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1;for(;;){if(p<<=1,q==b-1){o.push(c(p));break}q++}return o.join("")},decompress:function(a){return null==a?"":""==a?null:f._decompress(a.length,32768,function(b){return a.charCodeAt(b)})},_decompress:function(a,c,d){var e,f,g,h,i,j,k,l,m=[],n=4,o=4,p=3,q="",r=[],s={val:d(0),position:c,index:1};for(f=0;3>f;f+=1)m[f]=f;for(h=0,j=Math.pow(2,2),k=1;k!=j;)i=s.val&s.position,s.position>>=1,0==s.position&&(s.position=c,s.val=d(s.index++)),h|=(i>0?1:0)*k,k<<=1;switch(e=h){case 0:for(h=0,j=Math.pow(2,8),k=1;k!=j;)i=s.val&s.position,s.position>>=1,0==s.position&&(s.position=c,s.val=d(s.index++)),h|=(i>0?1:0)*k,k<<=1;l=b(h);break;case 1:for(h=0,j=Math.pow(2,16),k=1;k!=j;)i=s.val&s.position,s.position>>=1,0==s.position&&(s.position=c,s.val=d(s.index++)),h|=(i>0?1:0)*k,k<<=1;l=b(h);break;case 2:return""}for(m[3]=l,g=l,r.push(l);;){if(s.index>a)return"";for(h=0,j=Math.pow(2,p),k=1;k!=j;)i=s.val&s.position,s.position>>=1,0==s.position&&(s.position=c,s.val=d(s.index++)),h|=(i>0?1:0)*k,k<<=1;switch(l=h){case 0:for(h=0,j=Math.pow(2,8),k=1;k!=j;)i=s.val&s.position,s.position>>=1,0==s.position&&(s.position=c,s.val=d(s.index++)),h|=(i>0?1:0)*k,k<<=1;m[o++]=b(h),l=o-1,n--;break;case 1:for(h=0,j=Math.pow(2,16),k=1;k!=j;)i=s.val&s.position,s.position>>=1,0==s.position&&(s.position=c,s.val=d(s.index++)),h|=(i>0?1:0)*k,k<<=1;m[o++]=b(h),l=o-1,n--;break;case 2:return r.join("")}if(0==n&&(n=Math.pow(2,p),p++),m[l])q=m[l];else{if(l!==o)return null;q=g+g.charAt(0)}r.push(q),m[o++]=g+q.charAt(0),n--,g=q,0==n&&(n=Math.pow(2,p),p++)}}};return f}();"function"==typeof define&&define.amd?define(function(){return c}):"undefined"!=typeof b&&null!=b&&(b.exports=c)},{}],3:[function(a,b){function c(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function e(a){if(k===setTimeout)return setTimeout(a,0);if((k===c||!k)&&setTimeout)return k=setTimeout,setTimeout(a,0);try{return k(a,0)}catch(b){try{return k.call(null,a,0)}catch(b){return k.call(this,a,0)}}}function f(a){if(l===clearTimeout)return clearTimeout(a);if((l===d||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(a);try{return l(a)}catch(b){try{return l.call(null,a)}catch(b){return l.call(this,a)}}}function g(){p&&n&&(p=!1,n.length?o=n.concat(o):q=-1,o.length&&h())}function h(){if(!p){var a=e(g);p=!0;for(var b=o.length;b;){for(n=o,o=[];++q<b;)n&&n[q].run();q=-1,b=o.length}n=null,p=!1,f(a)}}function i(a,b){this.fun=a,this.array=b}function j(){}var k,l,m=b.exports={};!function(){try{k="function"==typeof setTimeout?setTimeout:c}catch(a){k=c}try{l="function"==typeof clearTimeout?clearTimeout:d}catch(a){l=d}}();var n,o=[],p=!1,q=-1;m.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];o.push(new i(a,b)),1!==o.length||p||e(h)},i.prototype.run=function(){this.fun.apply(null,this.array)},m.title="browser",m.browser=!0,m.env={},m.argv=[],m.version="",m.versions={},m.on=j,m.addListener=j,m.once=j,m.off=j,m.removeListener=j,m.removeAllListeners=j,m.emit=j,m.prependListener=j,m.prependOnceListener=j,m.listeners=function(){return[]},m.binding=function(){throw new Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(){throw new Error("process.chdir is not supported")},m.umask=function(){return 0}},{}],4:[function(a,b,c){!function(a,d){"use strict";var e={};a.PubSub=e,d(e),"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof c&&(void 0!==b&&b.exports&&(c=b.exports=e),c.PubSub=e,b.exports=c=e)}("object"==typeof window&&window||this,function(a){"use strict";function b(a){var b;for(b in a)if(a.hasOwnProperty(b))return!0;return!1}function c(a){return function(){throw a}}function d(a,b,d){try{a(b,d)}catch(e){setTimeout(c(e),0)}}function e(a,b,c){a(b,c)}function f(a,b,c,f){var g,h=j[b],i=f?e:d;if(j.hasOwnProperty(b))for(g in h)h.hasOwnProperty(g)&&i(h[g],a,c)}function g(a,b,c){return function(){var d=String(a),e=d.lastIndexOf(".");for(f(a,a,b,c);-1!==e;)d=d.substr(0,e),e=d.lastIndexOf("."),f(a,d,b,c)}}function h(a){for(var c=String(a),d=Boolean(j.hasOwnProperty(c)&&b(j[c])),e=c.lastIndexOf(".");!d&&-1!==e;)c=c.substr(0,e),e=c.lastIndexOf("."),d=Boolean(j.hasOwnProperty(c)&&b(j[c]));return d}function i(a,b,c,d){var e=g(a,b,d),f=h(a);return f?(c===!0?e():setTimeout(e,0),!0):!1}var j={},k=-1;a.publish=function(b,c){return i(b,c,!1,a.immediateExceptions)},a.publishSync=function(b,c){return i(b,c,!0,a.immediateExceptions)},a.subscribe=function(a,b){if("function"!=typeof b)return!1;j.hasOwnProperty(a)||(j[a]={});var c="uid_"+String(++k);return j[a][c]=b,c},a.clearAllSubscriptions=function(){j={}},a.clearSubscriptions=function(a){var b;for(b in j)j.hasOwnProperty(b)&&0===b.indexOf(a)&&delete j[b]},a.unsubscribe=function(b){var c,d,e,f=function(a){var b;for(b in j)if(j.hasOwnProperty(b)&&0===b.indexOf(a))return!0;return!1},g="string"==typeof b&&(j.hasOwnProperty(b)||f(b)),h=!g&&"string"==typeof b,i="function"==typeof b,k=!1;if(g)return a.clearSubscriptions(b),void 0;for(c in j)if(j.hasOwnProperty(c)){if(d=j[c],h&&d[b]){delete d[b],k=b;break}if(i)for(e in d)d.hasOwnProperty(e)&&d[e]===b&&(delete d[e],k=!0)}return k}})},{}],5:[function(a,b,c){(function(a){!function(a){"use strict";if("function"==typeof bootstrap)bootstrap("promise",a);else if("object"==typeof c&&"object"==typeof b)b.exports=a();else if("function"==typeof define&&define.amd)define(a);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=a}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var d="undefined"!=typeof window?window:self,e=d.Q;d.Q=a(),d.Q.noConflict=function(){return d.Q=e,this}}}(function(){"use strict";function b(a){return function(){return X.apply(a,arguments)}}function c(a){return a===Object(a)}function d(a){return"[object StopIteration]"===ea(a)||a instanceof T}function e(a,b){if(Q&&b.stack&&"object"==typeof a&&null!==a&&a.stack){for(var c=[],d=b;d;d=d.source)d.stack&&(!a.__minimumStackCounter__||a.__minimumStackCounter__>d.stackCounter)&&(ba(a,"__minimumStackCounter__",{value:d.stackCounter,configurable:!0}),c.unshift(d.stack));c.unshift(a.stack);var e=c.join("\n"+fa+"\n"),g=f(e);ba(a,"stack",{value:g,configurable:!0})}}function f(a){for(var b=a.split("\n"),c=[],d=0;d<b.length;++d){var e=b[d];i(e)||g(e)||!e||c.push(e)}return c.join("\n")}function g(a){return-1!==a.indexOf("(module.js:")||-1!==a.indexOf("(node.js:")}function h(a){var b=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(a);if(b)return[b[1],Number(b[2])];var c=/at ([^ ]+):(\d+):(?:\d+)$/.exec(a);if(c)return[c[1],Number(c[2])];var d=/.*@(.+):(\d+)$/.exec(a);return d?[d[1],Number(d[2])]:void 0}function i(a){var b=h(a);if(!b)return!1;var c=b[0],d=b[1];return c===S&&d>=U&&la>=d}function j(){if(Q)try{throw new Error}catch(a){var b=a.stack.split("\n"),c=b[0].indexOf("@")>0?b[1]:b[2],d=h(c);if(!d)return;return S=d[0],d[1]}}function k(a,b,c){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&void 0,a.apply(a,arguments)}}function l(a){return a instanceof p?a:t(a)?C(a):B(a)}function m(){function a(a){b=a,l.longStackSupport&&Q&&(f.source=a),Z(c,function(b,c){l.nextTick(function(){a.promiseDispatch.apply(a,c)})},void 0),c=void 0,d=void 0}var b,c=[],d=[],e=aa(m.prototype),f=aa(p.prototype);if(f.promiseDispatch=function(a,e,f){var g=Y(arguments);c?(c.push(g),"when"===e&&f[1]&&d.push(f[1])):l.nextTick(function(){b.promiseDispatch.apply(b,g)})},f.valueOf=function(){if(c)return f;var a=r(b);return s(a)&&(b=a),a},f.inspect=function(){return b?b.inspect():{state:"pending"}},l.longStackSupport&&Q)try{throw new Error}catch(g){f.stack=g.stack.substring(g.stack.indexOf("\n")+1),f.stackCounter=ga++}return e.promise=f,e.resolve=function(c){b||a(l(c))},e.fulfill=function(c){b||a(B(c))},e.reject=function(c){b||a(A(c))},e.notify=function(a){b||Z(d,function(b,c){l.nextTick(function(){c(a)})},void 0)},e}function n(a){if("function"!=typeof a)throw new TypeError("resolver must be a function.");var b=m();try{a(b.resolve,b.reject,b.notify)}catch(c){b.reject(c)}return b.promise}function o(a){return n(function(b,c){for(var d=0,e=a.length;e>d;d++)l(a[d]).then(b,c)})}function p(a,b,c){void 0===b&&(b=function(a){return A(new Error("Promise does not support operation: "+a))}),void 0===c&&(c=function(){return{state:"unknown"}});var d=aa(p.prototype);if(d.promiseDispatch=function(c,e,f){var g;try{g=a[e]?a[e].apply(d,f):b.call(d,e,f)}catch(h){g=A(h)}c&&c(g)},d.inspect=c,c){var e=c();"rejected"===e.state&&(d.exception=e.reason),d.valueOf=function(){var a=c();return"pending"===a.state||"rejected"===a.state?d:a.value}}return d}function q(a,b,c,d){return l(a).then(b,c,d)}function r(a){if(s(a)){var b=a.inspect();if("fulfilled"===b.state)return b.value}return a}function s(a){return a instanceof p}function t(a){return c(a)&&"function"==typeof a.then}function u(a){return s(a)&&"pending"===a.inspect().state}function v(a){return!s(a)||"fulfilled"===a.inspect().state}function w(a){return s(a)&&"rejected"===a.inspect().state}function x(){ha.length=0,ia.length=0,ka||(ka=!0)}function y(b,c){ka&&("object"==typeof a&&"function"==typeof a.emit&&l.nextTick.runAfter(function(){-1!==$(ia,b)&&(a.emit("unhandledRejection",c,b),ja.push(b))}),ia.push(b),ha.push(c&&"undefined"!=typeof c.stack?c.stack:"(no stack) "+c))}function z(b){if(ka){var c=$(ia,b);-1!==c&&("object"==typeof a&&"function"==typeof a.emit&&l.nextTick.runAfter(function(){var d=$(ja,b);-1!==d&&(a.emit("rejectionHandled",ha[c],b),ja.splice(d,1))}),ia.splice(c,1),ha.splice(c,1))}}function A(a){var b=p({when:function(b){return b&&z(this),b?b(a):this}},function(){return this},function(){return{state:"rejected",reason:a}});return y(b,a),b}function B(a){return p({when:function(){return a},get:function(b){return a[b]},set:function(b,c){a[b]=c},"delete":function(b){delete a[b]},post:function(b,c){return null===b||void 0===b?a.apply(void 0,c):a[b].apply(a,c)},apply:function(b,c){return a.apply(b,c)},keys:function(){return da(a)}},void 0,function(){return{state:"fulfilled",value:a}})}function C(a){var b=m();return l.nextTick(function(){try{a.then(b.resolve,b.reject,b.notify)}catch(c){b.reject(c)}}),b.promise}function D(a){return p({isDef:function(){}},function(b,c){return J(a,b,c)},function(){return l(a).inspect()})}function E(a,b,c){return l(a).spread(b,c)}function F(a){return function(){function b(a,b){var g;if("undefined"==typeof StopIteration){try{g=c[a](b)}catch(h){return A(h)}return g.done?l(g.value):q(g.value,e,f)}try{g=c[a](b)}catch(h){return d(h)?l(h.value):A(h)}return q(g,e,f)}var c=a.apply(this,arguments),e=b.bind(b,"next"),f=b.bind(b,"throw");return e()}}function G(a){l.done(l.async(a)())}function H(a){throw new T(a)}function I(a){return function(){return E([this,K(arguments)],function(b,c){return a.apply(b,c)})}}function J(a,b,c){return l(a).dispatch(b,c)}function K(a){return q(a,function(a){var b=0,c=m();return Z(a,function(d,e,f){var g;s(e)&&"fulfilled"===(g=e.inspect()).state?a[f]=g.value:(++b,q(e,function(d){a[f]=d,0===--b&&c.resolve(a)},c.reject,function(a){c.notify({index:f,value:a})}))},void 0),0===b&&c.resolve(a),c.promise})}function L(a){if(0===a.length)return l.resolve();var b=l.defer(),c=0;return Z(a,function(d,e,f){function g(a){b.resolve(a)}function h(a){if(c--,0===c){var d=a||new Error(""+a);d.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+d.message,b.reject(d)}}function i(a){b.notify({index:f,value:a})}var j=a[f];c++,q(j,g,h,i)},void 0),b.promise}function M(a){return q(a,function(a){return a=_(a,l),q(K(_(a,function(a){return q(a,V,V)})),function(){return a})})}function N(a){return l(a).allSettled()}function O(a,b){return l(a).then(void 0,void 0,b)}function P(a,b){return l(a).nodeify(b)}var Q=!1;try{throw new Error}catch(R){Q=!!R.stack}var S,T,U=j(),V=function(){},W=function(){function b(){for(var a,b;d.next;)d=d.next,a=d.task,d.task=void 0,b=d.domain,b&&(d.domain=void 0,b.enter()),c(a,b);for(;i.length;)a=i.pop(),c(a);f=!1}function c(a,c){try{a()}catch(d){if(h)throw c&&c.exit(),setTimeout(b,0),c&&c.enter(),d;setTimeout(function(){throw d},0)}c&&c.exit()}var d={task:void 0,next:null},e=d,f=!1,g=void 0,h=!1,i=[];if(W=function(b){e=e.next={task:b,domain:h&&a.domain,next:null},f||(f=!0,g())},"object"==typeof a&&"[object process]"===a.toString()&&a.nextTick)h=!0,g=function(){a.nextTick(b)};else if("function"==typeof setImmediate)g="undefined"!=typeof window?setImmediate.bind(window,b):function(){setImmediate(b)};else if("undefined"!=typeof MessageChannel){var j=new MessageChannel;j.port1.onmessage=function(){g=k,j.port1.onmessage=b,b()};var k=function(){j.port2.postMessage(0)};g=function(){setTimeout(b,0),k()}}else g=function(){setTimeout(b,0)};return W.runAfter=function(a){i.push(a),f||(f=!0,g())},W}(),X=Function.call,Y=b(Array.prototype.slice),Z=b(Array.prototype.reduce||function(a,b){var c=0,d=this.length;if(1===arguments.length)for(;;){if(c in this){b=this[c++];break}if(++c>=d)throw new TypeError}for(;d>c;c++)c in this&&(b=a(b,this[c],c));return b}),$=b(Array.prototype.indexOf||function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1}),_=b(Array.prototype.map||function(a,b){var c=this,d=[];return Z(c,function(e,f,g){d.push(a.call(b,f,g,c))},void 0),d}),aa=Object.create||function(a){function b(){}return b.prototype=a,new b},ba=Object.defineProperty||function(a,b,c){return a[b]=c.value,a},ca=b(Object.prototype.hasOwnProperty),da=Object.keys||function(a){var b=[];for(var c in a)ca(a,c)&&b.push(c);return b},ea=b(Object.prototype.toString);T="undefined"!=typeof ReturnValue?ReturnValue:function(a){this.value=a};var fa="From previous event:";l.resolve=l,l.nextTick=W,l.longStackSupport=!1;var ga=1;"object"==typeof a&&a&&a.env&&a.env.Q_DEBUG&&(l.longStackSupport=!0),l.defer=m,m.prototype.makeNodeResolver=function(){var a=this;return function(b,c){b?a.reject(b):a.resolve(arguments.length>2?Y(arguments,1):c)}},l.Promise=n,l.promise=n,n.race=o,n.all=K,n.reject=A,n.resolve=l,l.passByCopy=function(a){return a},p.prototype.passByCopy=function(){return this},l.join=function(a,b){return l(a).join(b)},p.prototype.join=function(a){return l([this,a]).spread(function(a,b){if(a===b)return a;throw new Error("Q can't join: not the same: "+a+" "+b)})},l.race=o,p.prototype.race=function(){return this.then(l.race)},l.makePromise=p,p.prototype.toString=function(){return"[object Promise]"},p.prototype.then=function(a,b,c){function d(b){try{return"function"==typeof a?a(b):b}catch(c){return A(c)}}function f(a){if("function"==typeof b){e(a,h);try{return b(a)}catch(c){return A(c)}}return A(a)}function g(a){return"function"==typeof c?c(a):a}var h=this,i=m(),j=!1;return l.nextTick(function(){h.promiseDispatch(function(a){j||(j=!0,i.resolve(d(a)))},"when",[function(a){j||(j=!0,i.resolve(f(a)))}])}),h.promiseDispatch(void 0,"when",[void 0,function(a){var b,c=!1;try{b=g(a)}catch(d){if(c=!0,!l.onerror)throw d;l.onerror(d)}c||i.notify(b)}]),i.promise},l.tap=function(a,b){return l(a).tap(b)},p.prototype.tap=function(a){return a=l(a),this.then(function(b){return a.fcall(b).thenResolve(b)})},l.when=q,p.prototype.thenResolve=function(a){return this.then(function(){return a})},l.thenResolve=function(a,b){return l(a).thenResolve(b)},p.prototype.thenReject=function(a){return this.then(function(){throw a})},l.thenReject=function(a,b){return l(a).thenReject(b)},l.nearer=r,l.isPromise=s,l.isPromiseAlike=t,l.isPending=u,p.prototype.isPending=function(){return"pending"===this.inspect().state},l.isFulfilled=v,p.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},l.isRejected=w,p.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ha=[],ia=[],ja=[],ka=!0;l.resetUnhandledRejections=x,l.getUnhandledReasons=function(){return ha.slice()},l.stopUnhandledRejectionTracking=function(){x(),ka=!1},x(),l.reject=A,l.fulfill=B,l.master=D,l.spread=E,p.prototype.spread=function(a,b){return this.all().then(function(b){return a.apply(void 0,b)},b)},l.async=F,l.spawn=G,l.return=H,l.promised=I,l.dispatch=J,p.prototype.dispatch=function(a,b){var c=this,d=m();return l.nextTick(function(){c.promiseDispatch(d.resolve,a,b)}),d.promise},l.get=function(a,b){return l(a).dispatch("get",[b])},p.prototype.get=function(a){return this.dispatch("get",[a])},l.set=function(a,b,c){return l(a).dispatch("set",[b,c])},p.prototype.set=function(a,b){return this.dispatch("set",[a,b])},l.del=l.delete=function(a,b){return l(a).dispatch("delete",[b])},p.prototype.del=p.prototype.delete=function(a){return this.dispatch("delete",[a])},l.mapply=l.post=function(a,b,c){return l(a).dispatch("post",[b,c])},p.prototype.mapply=p.prototype.post=function(a,b){return this.dispatch("post",[a,b])},l.send=l.mcall=l.invoke=function(a,b){return l(a).dispatch("post",[b,Y(arguments,2)])},p.prototype.send=p.prototype.mcall=p.prototype.invoke=function(a){return this.dispatch("post",[a,Y(arguments,1)])},l.fapply=function(a,b){return l(a).dispatch("apply",[void 0,b])},p.prototype.fapply=function(a){return this.dispatch("apply",[void 0,a])},l.try=l.fcall=function(a){return l(a).dispatch("apply",[void 0,Y(arguments,1)])},p.prototype.fcall=function(){return this.dispatch("apply",[void 0,Y(arguments)])},l.fbind=function(a){var b=l(a),c=Y(arguments,1);return function(){return b.dispatch("apply",[this,c.concat(Y(arguments))])}},p.prototype.fbind=function(){var a=this,b=Y(arguments);return function(){return a.dispatch("apply",[this,b.concat(Y(arguments))])}},l.keys=function(a){return l(a).dispatch("keys",[])},p.prototype.keys=function(){return this.dispatch("keys",[])},l.all=K,p.prototype.all=function(){return K(this)},l.any=L,p.prototype.any=function(){return L(this)},l.allResolved=k(M,"allResolved","allSettled"),p.prototype.allResolved=function(){return M(this)},l.allSettled=N,p.prototype.allSettled=function(){return this.then(function(a){return K(_(a,function(a){function b(){return a.inspect()}return a=l(a),a.then(b,b)}))})},l.fail=l.catch=function(a,b){return l(a).then(void 0,b)},p.prototype.fail=p.prototype.catch=function(a){return this.then(void 0,a)},l.progress=O,p.prototype.progress=function(a){return this.then(void 0,void 0,a)},l.fin=l.finally=function(a,b){return l(a).finally(b)},p.prototype.fin=p.prototype.finally=function(a){if(!a||"function"!=typeof a.apply)throw new Error("Q can't apply finally callback");return a=l(a),this.then(function(b){return a.fcall().then(function(){return b})},function(b){return a.fcall().then(function(){throw b})})},l.done=function(a,b,c,d){return l(a).done(b,c,d)},p.prototype.done=function(b,c,d){var f=function(a){l.nextTick(function(){if(e(a,g),!l.onerror)throw a;l.onerror(a)})},g=b||c||d?this.then(b,c,d):this;"object"==typeof a&&a&&a.domain&&(f=a.domain.bind(f)),g.then(void 0,f)},l.timeout=function(a,b,c){return l(a).timeout(b,c)},p.prototype.timeout=function(a,b){var c=m(),d=setTimeout(function(){b&&"string"!=typeof b||(b=new Error(b||"Timed out after "+a+" ms"),b.code="ETIMEDOUT"),c.reject(b)},a);return this.then(function(a){clearTimeout(d),c.resolve(a)},function(a){clearTimeout(d),c.reject(a)},c.notify),c.promise},l.delay=function(a,b){return void 0===b&&(b=a,a=void 0),l(a).delay(b)},p.prototype.delay=function(a){return this.then(function(b){var c=m();return setTimeout(function(){c.resolve(b)},a),c.promise})},l.nfapply=function(a,b){return l(a).nfapply(b)},p.prototype.nfapply=function(a){var b=m(),c=Y(a);return c.push(b.makeNodeResolver()),this.fapply(c).fail(b.reject),b.promise},l.nfcall=function(a){var b=Y(arguments,1);return l(a).nfapply(b)},p.prototype.nfcall=function(){var a=Y(arguments),b=m();return a.push(b.makeNodeResolver()),this.fapply(a).fail(b.reject),b.promise},l.nfbind=l.denodeify=function(a){if(void 0===a)throw new Error("Q can't wrap an undefined function");var b=Y(arguments,1);return function(){var c=b.concat(Y(arguments)),d=m();return c.push(d.makeNodeResolver()),l(a).fapply(c).fail(d.reject),d.promise}},p.prototype.nfbind=p.prototype.denodeify=function(){var a=Y(arguments);return a.unshift(this),l.denodeify.apply(void 0,a)},l.nbind=function(a,b){var c=Y(arguments,2);return function(){function d(){return a.apply(b,arguments)}var e=c.concat(Y(arguments)),f=m();return e.push(f.makeNodeResolver()),l(d).fapply(e).fail(f.reject),f.promise}},p.prototype.nbind=function(){var a=Y(arguments,0);return a.unshift(this),l.nbind.apply(void 0,a)},l.nmapply=l.npost=function(a,b,c){return l(a).npost(b,c)},p.prototype.nmapply=p.prototype.npost=function(a,b){var c=Y(b||[]),d=m();return c.push(d.makeNodeResolver()),this.dispatch("post",[a,c]).fail(d.reject),d.promise},l.nsend=l.nmcall=l.ninvoke=function(a,b){var c=Y(arguments,2),d=m();return c.push(d.makeNodeResolver()),l(a).dispatch("post",[b,c]).fail(d.reject),d.promise},p.prototype.nsend=p.prototype.nmcall=p.prototype.ninvoke=function(a){var b=Y(arguments,1),c=m();return b.push(c.makeNodeResolver()),this.dispatch("post",[a,b]).fail(c.reject),c.promise},l.nodeify=P,p.prototype.nodeify=function(a){return a?(this.then(function(b){l.nextTick(function(){a(null,b)})},function(b){
l.nextTick(function(){a(b)})}),void 0):this},l.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var la=j();return l})}).call(this,a("_process"))},{_process:3}],6:[function(a,b){b.exports=a("./qajax")(a("q"),window.XMLHttpRequest,window.FormData)},{"./qajax":7,q:5}],7:[function(a,b,c){!function(a,d){"object"==typeof c?b.exports=d:"function"==typeof define&&define.amd?define(["q"],function(b){return d(b,a.XMLHttpRequest,a.FormData)}):a.Qajax=d(a.Q,a.XMLHttpRequest,a.FormData)}(this,function(a,b,c){"use strict";function d(){}function e(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&void 0!==a[b]&&c.push(encodeURIComponent(b)+"="+encodeURIComponent(a[b]));return c.join("&")}function f(a){return-1===a.indexOf("?")}function g(a){var b={};if(a)for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function h(b,d){if(0===arguments.length)throw new Error("Qajax: settings are required");var h;if("string"==typeof b)h="object"==typeof d&&d||{},h.url=b;else{if("object"!=typeof b)throw new Error("Qajax: settings must be an object");h=b}if(!h.url)throw new Error("Qajax: settings.url is required");if("cancellation"in h&&!a.isPromiseAlike(h.cancellation))throw new Error("cancellation must be a Promise.");this.headers=g(this.headers),this.params={};for(var i in h)this[i]=h[i];var k=this.params,l=this.cache;l&&(k[l===!0?"_":l]=(new Date).getTime());var m=this.base+this.url,n=e(k);n&&(m=m+(f(m)?"?":"&")+n),this.url=m;var o=this.data,p=this.headers;null===o||"object"!=typeof o||c&&o instanceof c||(j in p||(p[j]="application/json"),this.data=JSON.stringify(o));var q=this._send,r=this;this.send=function(){return a.fcall(function(){return q.call(r)})}}function i(a,b){return new h(a,b).send()}var j="Content-Type",k=a.defer().promise;return h.prototype={log:d,timeout:6e4,cache:"undefined"==typeof window?!1:!!(window.ActiveXObject||"ActiveXObject"in window),method:"GET",base:"",withCredentials:!1,cancellation:k,_send:function(){var c=new b,d=a.defer(),e=this.log,f=this.method,g=this.url;c.onreadystatechange=function(){if(4===c.readyState)try{e(f+" "+g+" => "+c.status),c.status?d.resolve(c):d.reject(c)}catch(a){d.reject(c)}},c.onprogress=function(a){d.notify(a)},c.open(f,g,!0),this.responseType&&(c.responseType=this.responseType);var h=this.headers;for(var i in h)h.hasOwnProperty(i)&&c.setRequestHeader(i,h[i]);this.withCredentials&&(c.withCredentials=!0);var j=this.data;return void 0!==j&&null!==j?c.send(j):c.send(),this.cancellation.fin(function(){d.promise.isFulfilled()||(e("Qajax cancellation reached."),c.abort())}),this.timeout?d.promise.timeout(this.timeout).fail(function(a){throw a instanceof Error&&(e("Qajax request delay reach in "+f+" "+g),c.abort()),c}):d.promise}},i.defaults=h.prototype,i.Builder=h,i.filterStatus=function(b){var c,d,e=this.log;if(d=typeof b,"function"===d)c=b;else{if("number"!==d)throw"validStatus type "+d+" unsupported";c=function(a){return a===b}}return function(b){var d=0;try{d=b.status}catch(f){e("Qajax: failed to read xhr.status")}return 1223===d&&(d=204),c(d)?a.resolve(b):a.reject(b)}},i.filterSuccess=i.filterStatus(function(a){return a>=200&&300>a||304===a}),i.toJSON=function(b){return a.fcall(function(){return JSON.parse(b.responseText)})},i.getJSON=function(a){return i({url:a,method:"GET"}).then(i.filterSuccess).then(i.toJSON)},i.serialize=e,i})},{}],8:[function(a,b){var c=function(a,b){var c=b||{},d=c.bufferLen||4096;this.context=a.context,this.node=(this.context.createScriptProcessor||this.context.createJavaScriptNode).call(this.context,d,2,2);var e=new Worker(window.URL.createObjectURL(new Blob(["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nvar recLength = 0,\n  recBuffersL = [],\n  recBuffersR = [],\n  sampleRate;\n\n\nself.onmessage = function(e) {\n  switch(e.data.command){\n    case 'init':\n      init(e.data.config);\n      break;\n    case 'record':\n      record(e.data.buffer);\n      break;\n    case 'exportWAV':\n      exportWAV(e.data.type);\n      break;\n    case 'getBuffer':\n      getBuffer();\n      break;\n    case 'clear':\n      clear();\n      break;\n  }\n};\n\nfunction init(config){\n  sampleRate = config.sampleRate;\n}\n\nfunction record(inputBuffer){\n  recBuffersL.push(inputBuffer[0]);\n  recBuffersR.push(inputBuffer[1]);\n  recLength += inputBuffer[0].length;\n}\n\nfunction exportWAV(type){\n  var bufferL = mergeBuffers(recBuffersL, recLength);\n  var bufferR = mergeBuffers(recBuffersR, recLength);\n  var interleaved = interleave(bufferL, bufferR);\n  var dataview = encodeWAV(interleaved);\n  var audioBlob = new Blob([dataview], { type: type });\n\n  self.postMessage(audioBlob);\n}\n\nfunction getBuffer() {\n  var buffers = [];\n  buffers.push( mergeBuffers(recBuffersL, recLength) );\n  buffers.push( mergeBuffers(recBuffersR, recLength) );\n  self.postMessage(buffers);\n}\n\nfunction clear(){\n  recLength = 0;\n  recBuffersL = [];\n  recBuffersR = [];\n}\n\nfunction mergeBuffers(recBuffers, recLength){\n  var result = new Float32Array(recLength);\n  var offset = 0;\n  for (var i = 0; i < recBuffers.length; i++){\n    result.set(recBuffers[i], offset);\n    offset += recBuffers[i].length;\n  }\n  return result;\n}\n\nfunction interleave(inputL, inputR){\n  var length = inputL.length + inputR.length;\n  var result = new Float32Array(length);\n\n  var index = 0,\n    inputIndex = 0;\n\n  while (index < length){\n    result[index++] = inputL[inputIndex];\n    result[index++] = inputR[inputIndex];\n    inputIndex++;\n  }\n  return result;\n}\n\nfunction floatTo16BitPCM(output, offset, input){\n  for (var i = 0; i < input.length; i++, offset+=2){\n    var s = Math.max(-1, Math.min(1, input[i]));\n    output.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7FFF, true);\n  }\n}\n\nfunction writeString(view, offset, string){\n  for (var i = 0; i < string.length; i++){\n    view.setUint8(offset + i, string.charCodeAt(i));\n  }\n}\n\nfunction encodeWAV(samples){\n  var buffer = new ArrayBuffer(44 + samples.length * 2);\n  var view = new DataView(buffer);\n\n  /* RIFF identifier */\n  writeString(view, 0, 'RIFF');\n  /* RIFF chunk length */\n  view.setUint32(4, 36 + samples.length * 2, true);\n  /* RIFF type */\n  writeString(view, 8, 'WAVE');\n  /* format chunk identifier */\n  writeString(view, 12, 'fmt ');\n  /* format chunk length */\n  view.setUint32(16, 16, true);\n  /* sample format (raw) */\n  view.setUint16(20, 1, true);\n  /* channel count */\n  view.setUint16(22, 2, true);\n  /* sample rate */\n  view.setUint32(24, sampleRate, true);\n  /* byte rate (sample rate * block align) */\n  view.setUint32(28, sampleRate * 4, true);\n  /* block align (channel count * bytes per sample) */\n  view.setUint16(32, 4, true);\n  /* bits per sample */\n  view.setUint16(34, 16, true);\n  /* data chunk identifier */\n  writeString(view, 36, 'data');\n  /* data chunk length */\n  view.setUint32(40, samples.length * 2, true);\n\n  floatTo16BitPCM(view, 44, samples);\n\n  return view;\n}\n\n},{}]},{},[1])"],{type:"text/javascript"})));e.onmessage=function(a){var b=a.data;f(b)},e.postMessage({command:"init",config:{sampleRate:this.context.sampleRate}});var f,g=!1;this.node.onaudioprocess=function(a){g&&e.postMessage({command:"record",buffer:[a.inputBuffer.getChannelData(0),a.inputBuffer.getChannelData(1)]})},this.configure=function(a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])},this.record=function(){g=!0},this.stop=function(){g=!1},this.clear=function(){e.postMessage({command:"clear"})},this.getBuffer=function(a){f=a||c.callback,e.postMessage({command:"getBuffer"})},this.exportWAV=function(a,b){if(f=a||c.callback,b=b||c.type||"audio/wav",!f)throw new Error("Callback not set");e.postMessage({command:"exportWAV",type:b})},a.connect(this.node),this.node.connect(this.context.destination)};c.forceDownload=function(a,b){var c=(window.URL||window.webkitURL).createObjectURL(a),d=window.document.createElement("a");d.href=c,d.download=b||"output.wav";var e=document.createEvent("Event");e.initEvent("click",!0,!0),d.dispatchEvent(e)},b.exports=c},{}],9:[function(a,b){!function(){"use strict";function a(a,b,c){return a.splice(b,!c||1+c-b+(!(0>c^b>=0)&&(0>c||-1)*a.length)),a.length}var c=function(){var b,c,d=[],e=-1,f=0,g=!1;return c=function(a,b){return a&&"function"==typeof a[b]?(g=!0,a[b](),g=!1,this):this},{add:function(c){return g?this:(d.splice(e+1,d.length-e),d.push(c),f&&d.length>f&&a(d,0,-(f+1)),e=d.length-1,b&&b(),this)},setCallback:function(a){b=a},undo:function(){var a=d[e];return a?(c(a,"undo"),e-=1,b&&b(),this):this},redo:function(){var a=d[e+1];return a?(c(a,"redo"),e+=1,b&&b(),this):this},clear:function(){var a=d.length;d=[],e=-1,b&&a>0&&b()},hasUndo:function(){return-1!==e},hasRedo:function(){return e<d.length-1},getCommands:function(){return d},getIndex:function(){return e},setLimit:function(a){f=a}}};"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return c}):"undefined"!=typeof b&&b.exports?b.exports=c:window.UndoManager=c}()},{}],10:[function(a,b){function c(a,b){this.input=a.createGain(),this.output=a.createGain(),this._bandpass=a.createBiquadFilter(),this._bpWet=a.createGain(),this._bpDry=a.createGain(),this._ws=a.createWaveShaper(),this._lowpass=a.createBiquadFilter(),this.input.connect(this._bandpass),this._bandpass.connect(this._bpWet),this._bandpass.connect(this._bpDry),this._bpWet.connect(this._ws),this._bpDry.connect(this._ws),this._ws.connect(this._lowpass),this._lowpass.connect(this.output);var c=this.meta.params;b=b||{},this._bandpass.frequency.value=b.color||c.color.defaultValue,this._bpWet.gain.value=b.preBand||c.preBand.defaultValue,this._lowpass.frequency.value=b.postCut||c.postCut.defaultValue,this.drive=b.drive||c.drive.defaultValue,this._bpDry.gain.value=b.preBand?1-b.preBand:1-c.preBand.defaultValue}c.prototype=Object.create(null,{connect:{value:function(a){this.output.connect(a.input?a.input:a)}},disconnect:{value:function(){this.output.disconnect()}},meta:{value:{name:"Overdrive",params:{preBand:{min:0,max:1,defaultValue:.5,type:"float"},color:{min:0,max:22050,defaultValue:800,type:"float"},drive:{min:0,max:1,defaultValue:.5,type:"float"},postCut:{min:0,max:22050,defaultValue:3e3,type:"float"}}}},preBand:{enumerable:!0,get:function(){return this._bpWet.gain.value},set:function(a){this._bpWet.gain.setValueAtTime(a,0),this._bpDry.gain.setValueAtTime(1-a,0)}},color:{enumerable:!0,get:function(){return this._bandpass.frequency.value},set:function(a){this._bandpass.frequency.setValueAtTime(a,0)}},drive:{enumerable:!0,get:function(){return this._drive},set:function(a){var b=100*a,c=22050,d=new Float32Array(c),e=Math.PI/180;this._drive=a;for(var f=0;c>f;f++){var g=2*f/c-1;d[f]=(3+b)*g*20*e/(Math.PI+b*Math.abs(g))}this._ws.curve=d}},postCut:{enumerable:!0,get:function(){return this._lowpass.frequency.value},set:function(a){this._lowpass.frequency.setValueAtTime(a,0)}}}),b.exports=c},{}],11:[function(a,b){"use strict";function c(a,b,c,d){var f=void 0;if(f="number"==typeof a?{width:a,height:b,animate:c,fps:d}:"object"===("undefined"==typeof a?"undefined":e(a))?a:{},a="number"==typeof f.width?f.width:300,b="number"==typeof f.height?f.height:300,0>=a||0>=b)throw new Error("cannot construct a zCanvas without valid dimensions");this.DEBUG="boolean"==typeof f.debug?f.debug:!1,this._fps="number"==typeof f.fps?f.fps:60,this._renderInterval=1e3/this._fps,this._animate="boolean"==typeof f.animate?f.animate:!1,this._smoothing=!0,this._stretchToFit="boolean"==typeof f.stretchToFit?f.stretchToFit:!1,this._updateHandler="function"==typeof f.onUpdate?f.onUpdate:null,this._renderHandler=this.render.bind(this),this._lastRender=0,this._renderId=0,this._renderPending=!1,this._disposed=!1,this._children=[],this._element=document.createElement("canvas"),this._canvasContext=this._element.getContext("2d");var g=window.devicePixelRatio||1,h=this._canvasContext.webkitBackingStorePixelRatio||this._canvasContext.mozBackingStorePixelRatio||this._canvasContext.msBackingStorePixelRatio||this._canvasContext.oBackingStorePixelRatio||this._canvasContext.backingStorePixelRatio||1,i=g/h;this._HDPIscaleRatio=g!==h?i:1,this.setDimensions(a,b,!0,!0),"boolean"==typeof f.smoothing&&this.setSmoothing(f.smoothing),this.preventEventBubbling(!1),this.addListeners(),this._stretchToFit&&this.stretchToFit(!0),this._animate&&this.render()}function d(a){var b=a._HDPIscaleRatio,c=a._enqueuedSize.width,d=a._enqueuedSize.height;a._enqueuedSize=null,a._width=c,a._height=d,a._element.width=c*b,a._element.height=d*b,a._element.style.width=c+"px",a._element.style.height=d+"px",a._canvasContext.scale(b,b),a._smoothing===!1&&a.setSmoothing(a._smoothing)}var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=a("./utils/EventHandler"),g=a("./utils/Environment"),h=a("./utils/OOP");b.exports=c,c.extend=function(a){h.extend(a,c)},c.prototype.insertInPage=function(a){if(this._element.parentNode)throw new Error("Canvas already present in DOM");a.appendChild(this._element)},c.prototype.getElement=function(){return this._element},c.prototype.preventEventBubbling=function(a){this._preventDefaults=a},c.prototype.addChild=function(a){if(this.contains(a))return this;var b=this._children.length;return b>0&&(a.last=this._children[b-1],a.last.next=a),a.next=null,a.setCanvas(this),a.setParent(this),this._children.push(a),this.invalidate(),this},c.prototype.removeChild=function(a){a.setParent(null),a.setCanvas(null);var b=this._children.indexOf(a);-1!==b&&this._children.splice(b,1);var c=a.last,d=a.next;return c&&(c.next=d),d&&(d.last=c),a.last=a.next=null,this.invalidate(),a},c.prototype.getChildAt=function(a){return this._children[a]},c.prototype.removeChildAt=function(a){return this.removeChild(this.getChildAt(a))},c.prototype.numChildren=function(){return this._children.length},c.prototype.getChildren=function(){return this._children},c.prototype.contains=function(a){return this._children.indexOf(a)>-1},c.prototype.invalidate=function(){this._animate||this._renderPending||(this._renderPending=!0,this._renderId=window.requestAnimationFrame(this._renderHandler))},c.prototype.getFrameRate=function(){return this._fps},c.prototype.getRenderInterval=function(){return this._renderInterval},c.prototype.setSmoothing=function(a){var b=["imageSmoothingEnabled","mozImageSmoothingEnabled","oImageSmoothingEnabled","webkitImageSmoothingEnabled"],c=this._canvasContext;this._smoothing=a,window.requestAnimationFrame(function(){b.forEach(function(b){void 0!==c[b]&&(c[b]=a)})})},c.prototype.getWidth=function(){return this._enqueuedSize?this._enqueuedSize.width:this._width},c.prototype.getHeight=function(){return this._enqueuedSize?this._enqueuedSize.height:this._height},c.prototype.setDimensions=function(a,b,c,e){this._enqueuedSize={width:a,height:b},c!==!1&&(this._preferredWidth=a,this._preferredHeight=b),e===!0&&d(this),this.invalidate()},c.prototype.setBackgroundColor=function(a){this._bgColor=a},c.prototype.setAnimatable=function(a){var b=this._animate;this._animate=a,!a||b||this._renderPending||this._renderHandler()},c.prototype.isAnimatable=function(){return this._animate},c.prototype.drawImage=function(a,b,c,d,e,f,g,h,i){if(b=.5+b<<0,c=.5+c<<0,d=.5+d<<0,e=.5+e<<0,!(0>=d||0>=e))if("number"==typeof f){d=Math.min(this._canvasContext.canvas.width,d),e=Math.min(this._canvasContext.canvas.height,e);var j=d/h,k=e/i;f+h>a.width&&(d-=j*(f+h-a.width),h-=f+h-a.width),g+i>a.height&&(e-=k*(g+i-a.height),i-=g+i-a.height),this._canvasContext.drawImage(a,f,g,h,i,b,c,d,e)}else this._canvasContext.drawImage(a,b,c,d,e)},c.prototype.stretchToFit=function(a){var b=this._preferredWidth,c=this._preferredHeight,d=document.documentElement.clientWidth,e=document.documentElement.clientHeight,f=void 0,g=void 0;if(e>d){var h=a===!0?Math.round(e/d*b):c;this.setDimensions(b,h,!1),f=d/b,g=e/h}else{var i=a===!0?Math.round(d/e*c):b;this.setDimensions(i,c,!1),f=d/i,g=e/c}var j=this.getElement(),k="scale("+f+", "+g+")";j.style["-webkit-transform-origin"]=j.style["transform-origin"]="0 0",j.style["-webkit-transform"]=j.style.transform=a===!0?k:""},c.prototype.dispose=function(){if(!this._disposed){this._disposed=!0,this.removeListeners(),this._animate=!1,window.cancelAnimationFrame(this._renderId);for(var a=this.numChildren();a--;)this._children[a].dispose();this._children=[]}},c.prototype.handleInteraction=function(a){var b=this._children.length,c=0,d=0,e=void 0,f=void 0,g=void 0;if(b>0)switch(e=this._children[b-1],a.type){default:if(f=a.touches.length>0?a.touches:a.changedTouches,f.length>0){var h=this.getCoordinate();c=f[0].pageX-h.x,d=f[0].pageY-h.y}for(;e;)e.handleInteraction(c,d,a),e=e.last;break;case"mousedown":case"mousemove":case"mouseup":for(;e&&(g=e.handleInteraction(a.offsetX,a.offsetY,a),!g);)e=e.last}this._preventDefaults&&(a.stopPropagation(),a.preventDefault()),this.invalidate()},c.prototype.render=function(){var a=Date.now(),b=a-this._lastRender;this._renderPending=!1,this._lastRender=a-b%this._renderInterval,this._enqueuedSize&&d(this);var c=this._canvasContext,e=void 0;if(c){this._bgColor?(c.fillStyle=this._bgColor,c.fillRect(0,0,this._width,this._height)):c.clearRect(0,0,this._width,this._height);var f="function"==typeof this._updateHandler;if(f&&this._updateHandler(a),this._children.length>0)for(e=this._children[0];e;)f||e.update(a),e.draw(c),e=e.next}this._disposed||!this._animate||this._renderPending||(this._renderPending=!0,this._renderId=window.requestAnimationFrame(this._renderHandler))},c.prototype.addListeners=function(){var a=this;this._eventHandler||(this._eventHandler=new f);var b=this.handleInteraction.bind(this);g.hasTouchEvents()&&(this._eventHandler.addEventListener(this._element,"touchstart",b),this._eventHandler.addEventListener(this._element,"touchmove",b),this._eventHandler.addEventListener(this._element,"touchend",b)),g.isMobile()||(this._eventHandler.addEventListener(this._element,"mousedown",b),this._eventHandler.addEventListener(this._element,"mousemove",b),this._eventHandler.addEventListener(window,"mouseup",b)),this._stretchToFit&&!function(){var b=a,c=window.msMatchMedia||window.MozMatchMedia||window.WebkitMatchMedia||window.matchMedia;if(g.isMobile()&&"undefined"!=typeof c)window.matchMedia("(orientation: portrait)").addListener(function(){return b.stretchToFit(!0)});else{var d="onorientationchange"in window?"orientationchange":"resize";a._eventHandler.addEventListener(window,d,function(){return b.stretchToFit(!0)})}}()},c.prototype.removeListeners=function(){this._eventHandler&&this._eventHandler.dispose(),this._eventHandler=null},c.prototype.getCoordinate=function(){for(var a=0,b=0,c=this._element;c.offsetParent;)a+=c.offsetLeft,b+=c.offsetTop,c=c.offsetParent;return a+=c.offsetLeft,b+=c.offsetTop,{x:a,y:b}}},{"./utils/Environment":15,"./utils/EventHandler":16,"./utils/OOP":17}],12:[function(a,b){"use strict";var c=document.createElement("canvas"),d=c.getContext("2d"),e=b.exports={pixelCollision:function(a,b,c){var d=a.getIntersection(b);if(null===d)return!1;var f=e.getPixelArray(a,d),g=e.getPixelArray(b,d),h=0;if(c===!0)for(var i=0;i<d.height;++i)for(var j=0;j<d.width;++j){if(0!==f[h]&&0!==g[h])return{x:j,y:i};++h}else for(h;h<f.length;++h)if(0!==f[h]&&0!==g[h])return!0;return!1},getPixelArray:function(a,b){var e=a.getBitmap(),f=a.getBounds(),g=parseInt(b.left-f.left),h=parseInt(b.top-f.top),i=parseInt(b.width),j=parseInt(b.height);0===i&&(i=1),0===j&&(j=1);var k=!(e instanceof window.HTMLCanvasElement),l=k?c:e,m=k?d:e.getContext("2d");k&&(l.width=f.width,l.height=f.height,m.clearRect(0,0,c.width,c.height),m.drawImage(e,0,0,f.width,f.height));for(var n=m.getImageData(g,h,i,j),o=n.data,p=new Array(parseInt(i*j)),q=0,r=0;j>r;++r)for(var s=0;i>s;++s){var t=4*(r*i+s);p[q]=o[t+3]<<24|o[t]<<16|o[t+1]<<8|o[t+2],++q}return p},getChildrenUnderPoint:function(a,b,c,d,e,f){for(var g=[],h=a.length,i=void 0,j=void 0,k=void 0,l=void 0,m=void 0;h--;)i=a[h],j=i.getX(),k=i.getY(),l=i.getWidth(),m=i.getHeight(),b+d>j&&j+l>b&&c+e>k&&k+m>c&&(!f||f&&i.collidable)&&g.push(i);return g}}},{}],13:[function(a,b){"use strict";function c(a,b){f(a)||(b.crossOrigin="Anonymous")}function d(a){var b=("string"==typeof a?a:a.src).substr(0,5);return"data:"===b||"blob:"===b}function e(a){return{width:a.width||a.naturalWidth,height:a.height||a.naturalHeight}}function f(a){if("./"===a.substr(0,2)||0===a.indexOf(window.location.protocol+"//"+window.location.host))return!0;var b=a.split("#")[0].split("?")[0];if(b.indexOf(".html")>-1){var c=b.split("/"),d=c.length;b=b.split(c[d-1]).join("")}if(b){var e=b.match(/^http[s]?:/);if(Array.isArray(e)&&e.length>0)return!1}return!0}function g(a){var b={image:a,size:null};return a instanceof window.HTMLImageElement&&(b.size=e(a)),b}var h=a("./utils/EventHandler"),i=b.exports={loadImage:function(a,b,e){if(e instanceof window.Image&&i.isReady(e))return b(g(e)),void 0;var f=e instanceof window.Image?e:new window.Image,j=d(a),k=new h,l=function(a){k.dispose(),b(g(f),new Error(a.type))},m=function(){k.dispose(),i.onReady(f,function(){return b(g(f))})},n=/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent);(!j||n)&&(j||c(a,f),k.addEventListener(f,"load",m),k.addEventListener(f,"error",l)),f.src=a,j&&b(g(f))},isReady:function(a){return"boolean"!=typeof a.complete||a.complete?!("undefined"!=typeof a.naturalWidth&&0===a.naturalWidth):!1},onReady:function(a,b,c){function d(){i.isReady(a)?b():++f===e?("function"==typeof c&&c(),void 0):window.requestAnimationFrame(d)}var e=60,f=0;d()}}},{"./utils/EventHandler":16}],14:[function(a,b){"use strict";function c(a,b,e,f,g,h,i){var j=void 0;if("number"==typeof a)j={x:a,y:b,width:e,height:f,bitmap:g,collidable:h,mask:i};else{if("object"!==("undefined"==typeof a?"undefined":d(a)))throw new Error("Sprite must either be constructed using a definitions Object {} or x, y, width, height, bitmap (optional), collidable (optional), mask (optional)");j=a}if("number"!=typeof j.width||"number"!=typeof j.height)throw new Error("cannot construct a zSprite without valid dimensions");if("number"!=typeof j.x&&(j.x=0),"number"!=typeof j.y&&(j.y=0),this._children=[],this._disposed=!1,this.collidable="boolean"==typeof j.collidable?j.collidable:!1,this.hover=!1,this._mask="boolean"==typeof j.mask?j.mask:!1,this._bounds={left:0,top:0,width:j.width,height:j.height},this._parent=null,this.last=null,this.next=null,c.prototype.canvas=null,this._bitmap,this._bitmapReady=!1,this._draggable=!1,this._interactive=!1,this._keepInBounds=!1,this.isDragging=!1,this.setX(j.x),this.setY(j.y),j.bitmap&&this.setBitmap(j.bitmap),Array.isArray(j.sheet)&&j.sheet.length>0){if(!j.bitmap)throw new Error("cannot use a spritesheet without a valid Bitmap");this.setSheet(j.sheet,j.sheetTileWidth,j.sheetTileHeight)}}var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e=a("./utils/OOP"),f=a("./Loader");b.exports=c,c.extend=function(a){e.extend(a,c)},c.prototype.getDraggable=function(){return this._draggable},c.prototype.setDraggable=function(a,b){this._draggable=a,this._keepInBounds=b||!1,a&&!this._interactive&&this.setInteractive(!0)},c.prototype.getX=function(){return this._bounds.left},c.prototype.setX=function(a){var b=a-this._bounds.left;if(this._bounds.left=this._constraint?a+this._constraint.left:a,this._children.length>0)for(var c=this._children[0];c;)c.isDragging||c.setX(c._bounds.left+b),c=c.next},c.prototype.getY=function(){return this._bounds.top},c.prototype.setY=function(a){var b=a-this._bounds.top;if(this._bounds.top=this._constraint?a+this._constraint.top:a,this._children.length>0)for(var c=this._children[0];c;)c.isDragging||c.setY(c._bounds.top+b),c=c.next},c.prototype.getWidth=function(){return this._bounds.width},c.prototype.setWidth=function(a){var b=this._bounds.width||0;this._bounds.width=a,0!==b&&(this._bounds.left-=.5*a-.5*b)},c.prototype.getHeight=function(){return this._bounds.height},c.prototype.setHeight=function(a){var b=this._bounds.height||0;this._bounds.height=a,0!==b&&(this._bounds.top-=.5*a-.5*b)},c.prototype.setBounds=function(a,b,c,d){if("number"!=typeof a&&(a=this._bounds.left),"number"!=typeof b&&(b=this._bounds.top),this._constraint)a-=this._constraint.left,b-=this._constraint.top;else if(!this.canvas)throw new Error("cannot update position of a Sprite that has no constraint or is not added to a canvas");"number"==typeof c&&(this._bounds.width=c),"number"==typeof d&&(this._bounds.height=d);var e=this._bounds.width,f=this._bounds.height,g=this._constraint?this._constraint.width:this.canvas.width,h=this._constraint?this._constraint.height:this.canvas.height;if(this._keepInBounds){var i=Math.min(0,-(e-g)),j=Math.min(0,-(f-h)),k=g-e,l=h-f;a=Math.min(k,Math.max(a,i)),b=Math.min(l,Math.max(b,j))}else a>g&&(a+=.5*e),b>h&&(b+=.5*f);this.setX(a),this.setY(b)},c.prototype.getBounds=function(){return this._bounds},c.prototype.getInteractive=function(){return this._interactive},c.prototype.setInteractive=function(a){this._interactive=a},c.prototype.update=function(a){if(this._children.length>0)for(var b=this._children[0];b;)b.update(a),b=b.next;this._animation&&this.updateAnimation()},c.prototype.draw=function(a){if(this.canvas){if(a.save(),this._mask&&(a.globalCompositeOperation="destination-in"),this._bitmapReady){var b=this._bounds,c=this._animation;if(c){var d=c.tileWidth?c.tileWidth:.5+b.width<<0,e=c.tileHeight?c.tileHeight:.5+b.height<<0;a.drawImage(this._bitmap,c.col*d,c.type.row*e,d,e,.5+b.left<<0,.5+b.top<<0,.5+b.width<<0,.5+b.height<<0)}else a.drawImage(this._bitmap,.5+b.left<<0,.5+b.top<<0,.5+b.width<<0,.5+b.height<<0)}if(this._children.length>0)for(var f=this._children[0];f;)f.draw(a),f=f.next;this._mask&&(a.globalCompositeOperation="source-over"),a.restore(),this.canvas.DEBUG&&this.drawOutline(a)}},c.prototype.collidesWith=function(a){if(a===this)return!1;var b=this._bounds,c=a.getBounds();return!(b.top+b.height<c.top||b.top>c.top+c.height||b.left+b.width<c.left||b.left>c.left+c.width)},c.prototype.getIntersection=function(a){if(this.collidesWith(a)){var b=this._bounds,c=a.getBounds(),d=Math.max(b.left,c.left),e=Math.max(b.top,c.top),f=Math.min(b.left+b.width,c.width+c.height)-d,g=Math.min(b.top+b.height,c.top+c.height)-e;return{left:d,top:e,width:f,height:g}}return null},c.prototype.collidesWithEdge=function(a,b){if(a===this)return!1;if(isNaN(b)||0>b||b>3)throw new Error("invalid argument for edge");switch(b){case 0:return this.getX()<=a.getX()+a.getWidth();case 1:return this.getY()<=a.getY()+a.getHeight();case 2:return this.getX()+this.getWidth()<=a.getX();case 3:return this.getY()+this.getHeight()>=a.getY()}return!1},c.prototype.getBitmap=function(){return this._bitmap},c.prototype.setBitmap=function(a,b,c){var d=this;if(this._bitmap!==a&&(this._bitmapReady=!1),!a)return this._bitmap=null,void 0;var e="number"==typeof b,g="number"==typeof c;if(e&&this.setWidth(b),g&&this.setHeight(c),this._keepInBounds&&this.canvas&&(e||g)){var h=-(this._bounds.width-this.canvas.getWidth()),i=-(this._bounds.height-this.canvas.getHeight());this._bounds.left>0?this._bounds.left=0:this._bounds.left<h&&(this._bounds.left=h),this._bounds.top>0?this._bounds.top=0:this._bounds.top<i&&(this._bounds.top=i)}if(a instanceof window.HTMLCanvasElement)this._bitmap=a,this._bitmapReady=!0;else{if(!(a instanceof window.HTMLImageElement||"string"==typeof a))throw new Error("expected HTMLImageElement, HTMLCanvasElement or String for Image source, got "+a+" instead");!function(){var b=d;f.loadImage(a,function(a,c){c instanceof Error?void 0:(b._bitmap=a.image,b._bitmapReady=!0,d._bitmapWidth=a.size.width,d._bitmapHeight=a.size.height)})}()}},c.prototype.setSheet=function(a,b,c){return this._sheet=a,a?(this._animation={type:null,col:0,maxCol:0,fpt:0,counter:0},"number"==typeof b&&(this._animation.tileWidth=b),"number"==typeof c&&(this._animation.tileHeight=c),this.switchAnimation(0),void 0):(this._animation=null,void 0)},c.prototype.switchAnimation=function(a){var b=this._animation,c=this._sheet[a];b.type=c,b.fpt=c.fpt,b.maxCol=c.col+(c.amount-1),b.col=c.col,b.counter=0,b.onComplete=c.onComplete},c.prototype.setParent=function(a){this._parent=a},c.prototype.getParent=function(){return this._parent},c.prototype.setCanvas=function(a){this.canvas=a},c.prototype.setConstraint=function(a,b,c,d){return this._constraint={left:a,top:b,width:c,height:d},this._bounds.left=Math.max(a,this._bounds.left),this._bounds.top=Math.max(b,this._bounds.top),this._keepInBounds=!0,this._constraint},c.prototype.getConstraint=function(){return this._constraint},c.prototype.addChild=function(a){if(this.contains(a))return this;var b=this._children.length;return b>0&&(a.last=this._children[b-1],a.last.next=a,a.next=null),a.setCanvas(this.canvas),a.setParent(this),this._children.push(a),this.canvas&&this.canvas.invalidate(),this},c.prototype.removeChild=function(a){a.setParent(null),a.setCanvas(null);var b=this._children.indexOf(a);-1!==b&&this._children.splice(b,1);var c=a.last,d=a.next;return c&&(c.next=d),d&&(d.last=c),a.last=a.next=null,this.canvas&&this.canvas.invalidate(),a},c.prototype.getChildAt=function(a){return this._children[a]},c.prototype.removeChildAt=function(a){return this.removeChild(this.getChildAt(a))},c.prototype.numChildren=function(){return this._children.length},c.prototype.contains=function(a){return this._children.indexOf(a)>-1},c.prototype.dispose=function(){if(!this._disposed){this._disposed=!0,this._parent&&this._parent.removeChild(this);for(var a=this._children.length;a--;){var b=this._children[a];b.dispose(),b.next=b.last=null}this._children=[]}},c.prototype.handlePress=function(){},c.prototype.handleRelease=function(){},c.prototype.handleClick=function(){},c.prototype.handleMove=function(a,b){var c=this._dragStartOffset.x+(a-this._dragStartEventCoordinates.x),d=this._dragStartOffset.y+(b-this._dragStartEventCoordinates.y);this.setBounds(c,d)},c.prototype.handleInteraction=function(a,b,c){var d=!1,e=void 0,f=this.getX(),g=this.getY(),h=this._children.length;if(h>0)for(e=this._children[h-1];e;){if(d=e.handleInteraction(a,b,c),d)return!0;e=e.last}if(!this._interactive)return!1;if(this.isDragging&&("touchend"===c.type||"mouseup"===c.type))return this.isDragging=!1,Date.now()-this._dragStartTime<250&&this.handleClick(),this.handleRelease(a,b),!0;var i=this._bounds;if(a>=f&&a<=f+i.width&&b>=g&&b<=g+i.height){if(this.hover=!0,!this.isDragging&&("touchstart"===c.type||"mousedown"===c.type))return this.isDragging=!0,this._dragStartTime=Date.now(),this._dragStartOffset={x:this._bounds.left,y:this._bounds.top},this._dragStartEventCoordinates={x:a,y:b},this.handlePress(a,b),!0}else this.hover=!1;return this._draggable&&this.isDragging?(this.handleMove(a,b),!0):!1},c.prototype.updateAnimation=function(){var a=this._animation;++a.counter===a.fpt&&(++a.col,a.counter=0),a.col>a.maxCol&&(a.col=a.type.col,"function"==typeof a.onComplete&&a.onComplete(this))},c.prototype.drawOutline=function(a){a.lineWidth=1,a.strokeStyle="#FF0000",a.strokeRect(this.getX(),this.getY(),this.getWidth(),this.getHeight())}},{"./Loader":13,"./utils/OOP":17}],15:[function(a,b){"use strict";b.exports={hasTouchEvents:function(){return!!("ontouchstart"in window)},isMobile:function(){var a=!1;return function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0);

}(window.navigator.userAgent||window.navigator.vendor||window.opera),a}}},{}],16:[function(a,b){"use strict";function c(){this._eventMappings=[],this._disposed=!1}b.exports=c,c.prototype.addEventListener=function(a,b,c){if(!this.hasEventListener(a,b)){if(a.addEventListener)a.addEventListener(b,c,!1);else{if(!a.attachEvent)return!1;a.attachEvent("on"+b,c)}return this._eventMappings.push({element:a,type:b,listener:c}),!0}return!1},c.prototype.hasEventListener=function(a,b){for(var c=this._eventMappings.length;c--;){var d=this._eventMappings[c];if(d.element===a&&d.type==b)return!0}return!1},c.prototype.removeEventListener=function(a,b){for(var c=this._eventMappings.length;c--;){var d=this._eventMappings[c];if(d.element===a&&d.type===b){if(a.removeEventListener)a.removeEventListener(b,d.listener,!1);else{if(!a.detachEvent)return!1;a.detachEvent("on"+b,d.listener)}return this._eventMappings.splice(c,1),!0}}return!1},c.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;for(var a=this._eventMappings.length;a--;){var b=this._eventMappings[a];this.removeEventListener(b.element,b.type)}this._eventMappings=null}}},{}],17:[function(a,b){"use strict";var c=b.exports={extend:function(a,b){function d(){}d.prototype=b.prototype,a.superClass_=b.prototype,a.prototype=new d,a.prototype.constructor=a,a.super=function(a,c){for(var d=new Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)},a.extend=function(b){c.extend(b,a)}}}},{}],18:[function(a,b){"use strict";var c=a("./Canvas"),d=a("./Sprite"),e=a("./Loader"),f=a("./Collision");b.exports={canvas:c,sprite:d,loader:e,collision:f}},{"./Canvas":11,"./Collision":12,"./Loader":13,"./Sprite":14}],19:[function(a,b){{var c=a("./Style");b.exports={addClass:function(a,b){a.classList.add(b)},removeClass:function(a,b,c){if(c)for(var d=arguments.length;d--;)a.classList.remove(arguments[d]);else a.classList.remove(b)},hasClass:function(a,b){return a.classList.contains(b)},getElementCoordinates:function(a,b){var c=a,d=0,e=0;if(b)for(;c.offsetParent;)d+=c.offsetLeft,e+=c.offsetTop,c=c.offsetParent;return d+=c.offsetLeft,e+=c.offsetTop,{x:d,y:e}},getElementSize:function(a){function b(a){return{width:a.offsetWidth,height:a.offsetHeight}}if("none"!==c.getStyle(a,"display"))return b(a);var d=a.style,e=d.display,f=d.visibility,g=d.position;d.visibility="hidden",d.position="absolute",d.display="inline";var h=b(a);return d.display=e,d.position=g,d.visibility=f,h},getAvailableViewportX:function(){return!window.navigator.userAgent.indexOf("MSIE")>-1?window.innerWidth:document.documentElement.clientWidth},getAvailableViewportY:function(){return!window.navigator.userAgent.indexOf("MSIE")>-1?window.innerHeight:document.documentElement.clientHeight}}}},{"./Style":26}],20:[function(a,b){function c(){}b.exports=c,c.prototype._disposed=!1,c.prototype.dispose=function(){this._disposed||(this.disposeInternal(),this._disposed=!0)},c.prototype.disposeInternal=function(){}},{}],21:[function(a,b){function c(a,b){this.type=a,this.value=b}b.exports=c,c.prototype.type,c.prototype.value,c.prototype.target,c.prototype.currentTarget,c.prototype.srcEvent,c.DOM_EVENTS=["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","selectstart","keypress","keydown","keyup","blur","focus","deactivate","change","select","submit","input","propertychange","dragstart","drag","dragenter","dragover","dragleave","drop","dragend","touchstart","touchmove","touchend","touchcancel","beforeunload","contextmenu","error","help","load","losecapture","readystatechange","resize","scroll","unload","hashchange","pagehide","pageshow","popstate","online","offline","message","connect"]},{}],22:[function(a,b){function c(){this._eventMap=[]}b.exports=c;{var d=a("./Inheritance"),e=a("./Disposable");a("./Event")}d.extend(c,e),c.prototype._eventMap,c.prototype.addEventListener=function(a,b){this.hasEventListener(a)||this._eventMap.push({name:a,callback:b})},c.prototype.removeEventListener=function(a){return this.hasEventListener(a)?(this._eventMap.splice(this._findListenerByType(a),1),!0):!1},c.prototype.hasEventListener=function(a){return this._findListenerByType(a)>-1},c.prototype.dispatchEvent=function(a){a.target?a.currentTarget=this:a.target=this;var b=this._findListenerByType(a.type);b>-1&&this._eventMap[b].callback(a)},c.prototype._findListenerByType=function(a){if(!(this._eventMap instanceof Array))throw new Error("EventDispatcher has nog event map (forgot Inheritance.super() in constructor?)");for(var b=this._eventMap.length;b--;)if(this._eventMap[b].name===a)return b;return-1}},{"./Disposable":20,"./Event":21,"./Inheritance":24}],23:[function(a,b){function c(){this._mappedEvents=[]}b.exports=c;var d=a("./Inheritance"),e=a("./Disposable");d.extend(c,e),c.prototype._mappedEvents,c.prototype.addEventListener=function(a,b,c){if(!this.hasEventListener(a,b)){if(a.addEventListener)a.addEventListener(b,c,!1);else{if(!a.attachEvent)return!1;a.attachEvent("on"+b,c)}return this._mappedEvents.push({element:a,type:b,listener:c}),!0}return!1},c.prototype.removeEventListener=function(a,b){for(var c=this._mappedEvents.length;c--;){var d=this._mappedEvents[c];if(d.element===a&&d.type===b){if(a.removeEventListener)a.removeEventListener(b,d.listener,!1);else{if(!a.detachEvent)return!1;a.detachEvent("on"+b,d.listener)}return this._mappedEvents.splice(c,1),!0}}return!1},c.prototype.hasEventListener=function(a,b){for(var c=this._mappedEvents.length;c--;){var d=this._mappedEvents[c];if(d.element===a&&d.type===b)return!0}return!1},c.prototype.disposeInternal=function(){for(var a=this._mappedEvents.length;a--;){var b=this._mappedEvents[a];this.removeEventListener(b.element,b.type)}this._mappedEvents=null}},{"./Disposable":20,"./Inheritance":24}],24:[function(a,b){b.exports={extend:function(a,b){function c(){}c.prototype=b.prototype,a.super=b.prototype,a.prototype=new c,a.prototype.constructor=a},"super":function(a,b){var c=arguments.callee.caller;if(c.super)return c.super.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var d=Array.prototype.slice.call(arguments,2),e=!1,f=a.constructor;f;f=f.super&&f.super.constructor)if(f.prototype[b]===c)e=!0;else if(e)return f.prototype[b].apply(a,d)}}},{}],25:[function(a,b){function c(a,b,c){b=b||{};var e="div";a&&"object"!=typeof a&&(e=a),this._element=a&&"string"!=typeof a?a:document.createElement(e),Object.keys(b).forEach(function(a){this._element.setAttribute(a,b[a])}.bind(this)),c&&this.setContent(c),this._children=[],d.super(this),this._eventHandler=new g}b.exports=c;var d=a("./Inheritance"),e=a("./Event"),f=a("./EventDispatcher"),g=a("./EventHandler"),h=a("./DOM"),i=a("./Style"),j=a("./utils/ArrayUtil");d.extend(c,f),c.INITIALIZED,c.ADDED_TO_STAGE,c.REMOVED_FROM_STAGE,c.prototype._children,c.prototype._parent,c.prototype._useEventBubbling=!1,c.prototype.initialized=!1,c.prototype._element,c.prototype._eventHandler,c.prototype._proxiedHandlers,c.prototype.addEventListener=function(a,b){if(this.isDOMEvent(a)){var c=this,f=function(d){var f=new e(a);f.target=c,f.srcEvent=d,b(f)};null==this._proxiedHandlers&&(this._proxiedHandlers=[]),this._proxiedHandlers.push({type:a,fn:f,orgfn:b}),this._eventHandler.addEventListener(this._element,a,f)}else d.super(this,"addEventListener",a,b)},c.prototype.removeEventListener=function(a,b){if(this.isDOMEvent(a)&&this._proxiedHandlers)for(var c=this._proxiedHandlers.length;c--;){var e=this._proxiedHandlers[c];if(e.type===a&&e.orgfn===b)return this._eventHandler.removeEventListener(this._element,a),this._proxiedHandlers.splice(c,1),void 0}else d.super(this,"removeEventListener",a)},c.prototype.dispatchEvent=function(a){d.super(this,"dispatchEvent",a),this._useEventBubbling&&this._parent&&this._parent.dispatchEvent(a)},c.prototype.isDOMEvent=function(a){for(var b=e.DOM_EVENTS,c=b.length;c--;)if(b[c]===a)return!0;return!1},c.prototype.getElement=function(){return this._element},c.prototype.setContent=function(a){this._element.innerHTML=a},c.prototype.getAttribute=function(a){return this._element.getAttribute(a)},c.prototype.setAttribute=function(a,b){this._element.setAttribute(a,b)},c.prototype.removeAttribute=function(a){this._element.removeAttribute(a)},c.prototype.getDataAttribute=function(a){return this.getAttribute("data-"+a)},c.prototype.setDataAttribute=function(a,b){this._element.setAttribute("data-"+a,b)},c.prototype.setParent=function(a,b){this._parent=a,b&&this.setEventBubbling(b)},c.prototype.getParent=function(){return this._parent},c.prototype.getChildAt=function(a){return this._children[a]},c.prototype.removeChildAt=function(a){return this.removeChild(this.getChildAt(a))},c.prototype.getChildIndex=function(a){return j.getItemIndex(this._children,a)},c.prototype.swapChildren=function(a,b){this.getChildIndex(a)>this.getChildIndex(b)?this.addChildBefore(a,b):this.addChildBefore(b,a)},c.prototype.numChildren=function(){return this._children.length},c.prototype.getChildren=function(){return this._children},c.prototype.contains=function(a){for(var b=this.numChildren();b--;)if(this._children[b]==a)return!0;return!1},c.prototype.addElement=function(a){return this._element.appendChild(a),this},c.prototype.removeElement=function(a){return this._element.removeChild(a),this},c.prototype.addChild=function(a){if(this._element.appendChild(a.getElement()),a.setParent(this,this._useEventBubbling),this._children.push(a),a.onAddedToStage(),this._useEventBubbling)for(var b=a.numChildren();b--;){var c=a.getChildAt(b);c.setEventBubbling(!0)}return this},c.prototype.addChildAt=function(a,b){var c=this._element;return c.insertBefore(a.getElement(),c.childNodes[b]),a.setParent(this,this._useEventBubbling),this._children.splice(b,0,a),a.onAddedToStage(),this},c.prototype.addChildBefore=function(a,b){var c=this.getChildIndex(b);return this.addChildAt(a,c)},c.prototype.prependChild=function(a){var b=this._element;return b.insertBefore(a.getElement(),b.childNodes[0]),a.setParent(this,this._useEventBubbling),this._children.unshift(a),a.onAddedToStage(),this},c.prototype.removeChild=function(a){a.setParent(null),a.getElement().parentNode===this._element&&(this._element.removeChild(a.getElement()),a.onRemovedFromStage());for(var b,c=this._children.length;c--;)if(b=this._children[c],b===a){this._children.splice(c,1);break}return a},c.prototype.hasChild=function(a){return-1!==this._children.indexOf(a)},c.prototype.select=function(a){return this._element.querySelector(a)},c.prototype.selectAll=function(a){return this._element.querySelectorAll(a)},c.prototype.getCoordinate=function(){return h.getElementCoordinates(this._element,!0)},c.prototype.getRectangle=function(){var a=this.getCoordinate(),b=this.getDimensions();return{x:a.x,y:a.y,width:b.width,height:b.height}},c.prototype.getDimensions=function(){return h.getElementSize(this._element)},c.prototype.getStyle=function(a){return i.getStyle(this._element,a)},c.prototype.setStyle=function(a,b){i.setStyle(this._element,a,b)},c.prototype.setStyles=function(a){for(var b in a)a.hasOwnProperty(b)&&this.setStyle(b,a[b])},c.prototype.addClass=function(a){h.addClass(this._element,a)},c.prototype.removeClass=function(a,b){if(b)for(var c=arguments.length;c--;)this._element.classList.remove(arguments[c]);else this._element.classList.remove(a)},c.prototype.hasClass=function(a){return h.hasClass(this._element,a)},c.prototype.show=function(a){var b="display";"string"!=typeof a&&(a="block"),this._element&&this.setStyle(b,a)},c.prototype.hide=function(){var a="display";this._element&&this.setStyle(a,"none")},c.prototype.setEventBubbling=function(a){this._useEventBubbling=a},c.prototype.onAddedToStage=function(){this.initialized||this.init();for(var a=this._children.length;a--;)this._children[a].onAddedToStage();this.dispatchEvent(new e(c.ADDED_TO_STAGE))},c.prototype.onRemovedFromStage=function(){for(var a=this._children.length;a--;)this._children[a].onRemovedFromStage();this.dispatchEvent(new e(c.REMOVED_FROM_STAGE))},c.prototype.clone=function(a){for(var b="boolean"==typeof a?a:!1,d=new c(this._element.cloneNode(b)),e=0;e<this.numChildren();++e){var f=this.getChildAt(e);if(f instanceof c){var g=f.clone(b);d.addChild(g)}}return d},c.prototype.init=function(){this.initializationComplete()},c.prototype.initializationComplete=function(){this.initialized=!0,this.dispatchEvent(new e(c.INITIALIZED))},c.prototype.disposeInternal=function(){this._eventHandler.dispose(),this._parent&&this._parent.removeChild(this);for(var a=this.numChildren();a--;){var b=this._children[a];this.removeChild(b),b.dispose()}this._children=[],this.initialized=!1,d.super(this,"disposeInternal")}},{"./DOM":19,"./Event":21,"./EventDispatcher":22,"./EventHandler":23,"./Inheritance":24,"./Style":26,"./utils/ArrayUtil":29}],26:[function(a,b){var c=a("./utils/StringUtil");b.exports={getStyle:function(a,b){var c=window.getComputedStyle(a,null);return c?c[b]||c.getPropertyValue(b)||"":""},setStyle:function(a,b,d){a.style[c.camelCase(b)]=d}}},{"./utils/StringUtil":31}],27:[function(a,b){var c=a("../EventHandler");b.exports={load:function(a,b,d){var e=d||new Image,f=function(){g.dispose(),"function"==typeof b&&b(e)},g=new c;return g.addEventListener(e,"load",f),e.src=a,e}}},{"../EventHandler":23}],28:[function(a,b){b.exports={load:function(a,b,c){if(document.getElementsByTagName&&document.createElement){var d=document.createElement("script");d.setAttribute("type","text/javascript"),d.setAttribute("async","true"),d.setAttribute("src",a),d.readyState?d.onreadystatechange=function(){("loaded"==d.readyState||"complete"==d.readyState)&&(d.onreadystatechange=null,"function"==typeof b&&b())}:(d.onload=b,d.onerror=c),document.getElementsByTagName("head")[0].appendChild(d)}}}},{}],29:[function(a,b){var c=a("../Disposable"),d=a("./StringUtil"),e=b.exports={hasLength:function(a){return null!==a&&a.length>0},hasItem:function(a,b){return e.getItemIndex(a,b)>-1},equals:function(a,b){if(null==a&&null==b)return!0;if(null==a||null==b)return!1;if(a.length!=b.length)return!1;for(var c=0,d=a.length;d>c;++c){var e=a[c];if("equals"in e){if(!e.equals(b[c]))return!1}else if(e!=b[c])return!1}return!0},containSameItems:function(){var a=arguments.length>1;if(a){var b=arguments[0];if(!(b instanceof Array))return!1;for(var c=1;c<arguments.length;c++){var d=arguments[c].slice();if(!(d instanceof Array))return!1;if(a=b.length==d.length,a)for(var e=b.slice();a&&e.length>0&&d.length>0;){var f=d.pop(),g=e.indexOf(f);if(-1==g?a=!1:e.splice(g,1),!a)for(var h=0;h<e.length;h++){var i=e[h],j=!1;try{j=i.equals(f)}catch(k){j=!1}if(j){e.splice(h,1),a=!0;break}}if(!a)break}if(!a)break}}return a},copy:function(a){var b=[];return a&&a.length>0&&(b=b.concat(a)),b},clone:function(a){var b=null;if(null!=a){b=[];for(var c=0,d=a.length;d>c;++c){var e=a[c];b.push("clone"in e?e.clone():e)}}return b},concat:function(){for(var a=[],b=0,c=arguments.length;c>b;++b){var d=arguments[b];if(null!=d)for(var e=d.length,f=0;e>f;f++)a.push(d[f])}return a},concatNoDuplicates:function(){for(var a=[],b=0,c=arguments.length;c>b;++b){var d=arguments[b];if(null!=d)for(var f=d.length,g=0;f>g;g++)-1==e.getItemIndex(a,d[g])&&a.push(d[g])}return a},getItemIndex:function(a,b){for(var c=0,d=a.length;d>c;++c)if(a[c]==b)return c;return-1},setItemAtIndex:function(a,b,c){if(a.length>c){var d=a.splice(c);a[c]=b,a.push.apply(a,d)}else a[c]=b},setItemIfNotPresent:function(a,b){return e.hasItem(a,b)?!1:(a.push(b),!0)},removeItem:function(a,b){for(var c=a.length;c--;)if(a[c]==b)return e.removeItemAt(a,c),!0;return!1},removeItemAt:function(a,b){return a.length>=b+1?(a.splice(b,1),!0):!1},assertArray:function(a){return a instanceof Array||(a=[a]),a},allItemsOfType:function(a,b){if(e.hasLength(a)){for(var c=0,d=a.length;d>c;++c)if(!(a[c]instanceof b))return!1;return!0}return!0},clearAndDisposeItems:function(a){for(var b=a.length;b--;){var d=a[b];d instanceof c&&d.dispose(),a.splice(b,1)}},sort:function(a,b,c){return a.sort(c?function(a,c){return a[b]<c[b]}:function(a,c){return a[b]>c[b]})},randomItemFrom:function(a){return a[Math.floor(Math.random()*a.length)]},convert:{fromDelimitedStringToNumbers:function(a,b,c){var e=[];if(d.hasText(a)){var f=b||",",g=c||!1,h=a.split(f);if(1==h.length)e.push(a);else for(;h.length>0;){var i=h.shift(),j=parseFloat(i);isNaN(j)&&g||e.push(j)}}return e}}}},{"../Disposable":20,"./StringUtil":31}],30:[function(a,b){var c=a("../DOM"),d=a("../Sprite"),e=b.exports={isSupported:function(){var a=document.documentElement;return a.requestFullscreen||a.webkitRequestFullScreen||a.mozRequestFullScreen},getFullscreen:function(){return e.isSupported()?document.fullScreenElement&&null!==document.fullScreenElement||document.mozFullScreen||document.webkitIsFullScreen:!1},setFullscreen:function(a){a=a||document.documentElement,e.isSupported()&&!e.getFullscreen()&&(a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullScreen?a.webkitRequestFullScreen():a.mozRequestFullScreen&&a.mozRequestFullScreen(),c.addClass(document.body,"is-fullscreen"))},unsetFullscreen:function(){document.cancelFullScreen?document.cancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen&&document.mozCancelFullScreen(),c.removeClass(document.body,"is-fullscreen")},createButton:function(){if(e.isSupported()){var a=new d("a",{"class":"fullscreen-btn",href:"javascript:void(0)"},'<i class="icon-fullscreen"></i>');return a.addEventListener("click",function(){e.getFullscreen()?e.unsetFullscreen():e.setFullscreen()}),a}return null}}},{"../DOM":19,"../Sprite":25}],31:[function(a,b){var c=b.exports={capitalizeFirst:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},isString:function(a){return"[object String]"==Object.prototype.toString.call(a)},hasText:function(a){return null!=a&&c.trim(a).length>0},contains:function(a,b){return!c.hasText(a)&&c.hasText(b)?!1:a.indexOf(b)>-1},stringToBoolean:function(a){return"string"!=typeof a?!1:"true"==a.toLowerCase()||"1"==a.toLowerCase()},trim:function(a){return c.ltrim(c.rtrim(a))},ltrim:function(a){for(var b=a.length,c=0;b>c;c++)if(a.charCodeAt(c)>32)return a.substring(c);return""},rtrim:function(a){for(var b=a.length,c=b;c>0;c--)if(a.charCodeAt(c-1)>32)return a.substring(0,c);return""},isUpperCase:function(a){if(1===a.length)return a==a.toUpperCase();for(var b=a.length;b--;){var c=a.charAt(b);if(c!=c.toUpperCase())return!1}return!0},truncate:function(a,b,c){return c=c||"...",b-=c.length,a.length>b?a.substring(0,b-c.length)+c:a},numberToFixedString:function(a,b,c){for(var d=a.toString(),e=d.indexOf(".")>-1?d.split(".")[0]:d,f=d.indexOf(".")>-1?d.split(".")[1]:"";e.length<b;)e="0"+e;return e+(""!=f?".":"")+f},camelCase:function(a){return String(a).replace(/\-([a-z])/g,function(a,b){return b.toUpperCase()})}}},{}],32:[function(a,b){b.exports={Disposable:a("./src/Disposable"),DOM:a("./src/DOM"),Event:a("./src/Event"),EventDispatcher:a("./src/EventDispatcher"),EventHandler:a("./src/EventHandler"),Inheritance:a("./src/Inheritance"),Sprite:a("./src/Sprite"),Style:a("./src/Style"),loaders:{ImageLoader:a("./src/loaders/ImageLoader"),ScriptLoader:a("./src/loaders/ScriptLoader")},utils:{ArrayUtil:a("./src/utils/ArrayUtil"),FullscreenUtil:a("./src/utils/FullscreenUtil"),StringUtil:a("./src/utils/StringUtil")}}},{"./src/DOM":19,"./src/Disposable":20,"./src/Event":21,"./src/EventDispatcher":22,"./src/EventHandler":23,"./src/Inheritance":24,"./src/Sprite":25,"./src/Style":26,"./src/loaders/ImageLoader":27,"./src/loaders/ScriptLoader":28,"./src/utils/ArrayUtil":29,"./src/utils/FullscreenUtil":30,"./src/utils/StringUtil":31}],33:[function(a,b){!function(a,c){"undefined"!=typeof b?b.exports=c():"function"==typeof define&&"object"==typeof define.amd?define(a,[],function(){return c()}):this[a]=c}("MIDINotes",function(){var a={getPitchByNoteNumber:function(b){return{note:a.noteTable[b%12],octave:Math.floor(b/12)-1,frequency:440*Math.pow(2,(b-69)/12)}},noteTable:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]};return a})},{}],34:[function(a,b){!function(a,c){"undefined"!=typeof b?b.exports=c():"function"==typeof define&&"object"==typeof define.amd?define(a,[],function(){return c()}):this[a]=c}("SysexBuffer",function(){"use strict";var a=function(){};return a.prototype.processing=!1,a.prototype.completed=!1,a.prototype._buffer,a.prototype.getMessage=function(){if(!this.completed||null===this._buffer)throw new Error("SysexBuffer empty or message broadcast incomplete");return this._buffer},a.prototype.process=function(a,b){for(var c=b;c<a.length;){if(247==a[c])return this.append(a.subarray(b,++c)),this.processing=!1,this.completed=!0,c;++c}return this.append(a.subarray(b,c)),this.processing=!0,c},a.prototype.reset=function(){this._buffer=null,this.completed=this.processing=!1},a.prototype.append=function(a){var b=null!==this._buffer?this._buffer.length:0,c=new Uint8Array(b+a.length);null!==this._buffer&&c.set(this._buffer),c.set(a,b),this._buffer=c},a})},{}],35:[function(a,b){var c,d;"undefined"!=typeof b&&(c=a("./zMIDIEvent"),d=a("./SysexBuffer")),function(a,e){"undefined"!=typeof b?b.exports=e():"function"==typeof define&&"object"==typeof define.amd?define(a,["zMIDIEvent","SysexBuffer"],function(a,b){return c=a,d=b,e()}):this[a]=e}("zMIDI",function(){var a={connect:function(b,c,d){if(!a.isSupported())return c("zMIDI not supported by browser"),void 0;var e=void 0;d&&(e={sysex:!0}),navigator.requestMIDIAccess(e).then(function(c){a._interface=c,b()},c)},isSupported:function(){return"requestMIDIAccess"in navigator},isConnected:function(){return null!==a._interface},addMessageListener:function(b,e){var f=new d,g=function(a){var d,g,h=a.data,i=!1,j=h[0]>>4,k=15&h[0],l=h[1],m=h.length>2?h[2]:0;if(8==j||9==j&&0===m)d=c.NOTE_OFF,g=l;else if(9==j)d=c.NOTE_ON,g=l;else if(11==j)d=c.CONTROL_CHANGE,g=m;else{for(var n=0,o=0;o<h.length;o+=n)if(f.processing){if(o=f.process(h,o),247!=h[o-1])return;i=!0}else switch(i=!1,240&h[o]){case 160:d=c.AFTERTOUCH,n=3;break;case 224:d=c.CHANNEL_MODE,n=3;break;case 192:d=c.PROGRAM_CHANGE,n=2;break;case 208:d=c.CHANNEL_AFTERTOUCH,n=2;break;case 240:switch(h[o]){case 240:if(o=f.process(h,o),247!=h[o-1])return;i=!0;break;case 241:d=c.QUARTER_FRAME,n=2;break;case 243:d=c.SONG_SELECT,n=2;break;case 242:d=c.SONG_POSITION,n=3;break;default:n=1}}g=i&&f.completed?f.getMessage():new Uint8Array(h.subarray(o,n+o))}var p=new c(d,g,m,k,b,i);e(p),i&&f.completed&&f.reset()};a._listenerMap[b]=g;var h=a.getInChannels()[b];h.addEventListener("midimessage",g,!0),h.open()},removeMessageListener:function(b){var c,d=a._listenerMap[b];d&&(c=a.getInChannels()[b],c.close(),c.removeEventListener("midimessage",d,!0),delete a._listenerMap[b])},sendMessage:function(b,c,d){a.getOutChannels()[b].send(c,d)},getInChannels:function(){if(a.isConnected()){var b=[],c=a._interface;if("function"==typeof c.inputs)b=c.inputs();else for(var d=c.inputs.values(),e=d.next();!e.done;e=d.next())b.push(e.value);return b}return a._handleConnectionFailure(),null},getOutChannels:function(){if(a.isConnected()){var b=[],c=a._interface;if("function"==typeof c.outputs)b=c.outputs();else for(var d=c.outputs.values(),e=d.next();!e.done;e=d.next())b.push(e.value);return b}return a._handleConnectionFailure(),null},getCurrentTime:function(){return window.performance.now()},_interface:null,_listenerMap:{},_handleConnectionFailure:function(){throw new Error("zMIDI unavailable, WebMIDI either unsupported orzMIDI hasn't established a connection yet")}};return a})},{"./SysexBuffer":34,"./zMIDIEvent":36}],36:[function(a,b){!function(a,c){"undefined"!=typeof b?b.exports=c():"function"==typeof define&&"object"==typeof define.amd?define(a,[],function(){return c()}):this[a]=c}("zMIDIEvent",function(){"use strict";var a=function(a,b,c,d,e,f){this.type=a,this.velocity=c,this.channel=d,this.port=e,this.sysex=f?f:!1,this.sysex?this.sysexValue=b:this.value=b};return a.NOTE_ON=0,a.NOTE_OFF=1,a.AFTERTOUCH=2,a.CONTROL_CHANGE=3,a.CHANNEL_MODE=4,a.PROGRAM_CHANGE=5,a.CHANNEL_AFTERTOUCH=6,a.SYSEX=7,a.QUARTER_FRAME=8,a.SONG_SELECT=9,a.SONG_POSITION=10,a.prototype.type,a.prototype.value,a.prototype.velocity,a.prototype.channel,a.prototype.port,a.prototype.sysex,a.prototype.sysexValue,a})},{}],37:[function(a,b){b.exports={zMIDI:a("./src/zMIDI"),zMIDIEvent:a("./src/zMIDIEvent"),MIDINotes:a("./src/MIDINotes")}},{"./src/MIDINotes":33,"./src/zMIDI":35,"./src/zMIDIEvent":36}],38:[function(a,b){"use strict";var c=a("../utils/AudioUtil");b.exports={enabled:!1,restore:!1,countIn:!1,countInComplete:!1,play:function(a,b,d,e,f){if(!(1===a&&b%(d/8)||2==a&&b%(d/4))){var g=220;b%d?b%(d/4)&&(g=880):g=440,c.beep(f,g,e,.05)}}}},{"../utils/AudioUtil":103}],39:[function(a,b){"use strict";function c(a,b,d){c.super(this,"constructor",0,0,a,b),this.setDraggable(!0),this.table=[],this.updateHandler=d,this.interactionCache={x:-1,y:-1},this.updateRequested=!1}var d=a("../config/Config"),e=a("zCanvas");e.sprite.extend(c),b.exports=c,c.prototype.setTable=function(a){this.table=a,this.canvas&&this.canvas.invalidate()},c.prototype.generateAndSetTable=function(a){var b=d.WAVE_TABLE_SIZE,c=new Array(b),e=Math.round(b/2),f=void 0;switch(a){case"TRIANGLE":for(f=0;b>f;++f)c[f]=(e-Math.abs(f%(2*e)-e))*(1/(e/2))-1;break;case"SAW":var g=0,h=1/b;for(f=0;b>f;++f)c[f]=0>g?g-Math.round(g-1):g-Math.round(g),c[f]*=1/(e/2)-2,g+=h;break;case"SQUARE":for(f=0;b>f;++f)c[f]=e>f?-1:1;break;case"NOISE":for(f=0;b>f;++f)c[f]=2*Math.random()-1}this.setTable(c)},c.prototype.draw=function(a){a.strokeStyle="#CC0000",a.lineWidth=5,a.beginPath();for(var b=this._bounds.height,c=this._bounds.left,d=this._bounds.top+b,e=this.table.length,f=this._bounds.width/(e-1),g=e,h=void 0;g--;)h=.5*(this.table[g]+1),a.lineTo(c+g*f,d-h*b);a.stroke(),a.closePath()},c.prototype.handleInteraction=function(a,b,c){if(this.isDragging){if("touchend"===c.type||"mouseup"===c.type)return this.isDragging=!1,!0;var d=Math.round(a/this._bounds.width*this.table.length);d=Math.min(this.table.length-1,d);var e=1-b/this._bounds.height*2;this.table[d]=e;var f=this.interactionCache;if(a=Math.round(a),b=Math.round(b),f.x>-1)for(var g=a-f.x,h=b-f.y,i=g/Math.abs(g),j=h/Math.abs(g),k=0,l=this._bounds.width,m=this._bounds.height,n=this.table.length;f.x!==a;)d=Math.round(f.x/l*n),d=Math.min(n-1,d),e=1-Math.floor(j*k+f.y)/m*2,this.table[d]=e,f.x+=i,++k;if(f.x=a,f.y=b,c.preventDefault(),!this.updateRequested){this.updateRequested=!0;var o=this;requestAnimationFrame(function(){o.updateHandler(o.table),o.updateRequested=!1})}}else if("touchstart"===c.type||"mousedown"===c.type)return this.isDragging=!0,!0;return!1}},{"../config/Config":40,zCanvas:18}],40:[function(a,b){"use strict";var c=a("bowser");b.exports={LOCAL_STORAGE_SONGS:"effluxData",LOCAL_STORAGE_INSTRUMENTS:"effluxInstruments",LOCAL_STORAGE_SETTINGS:"effluxSettings",INSTRUMENT_AMOUNT:8,WAVE_TABLE_SIZE:512,MAX_PATTERN_AMOUNT:128,MAX_OCTAVE:8,SONG_FILE_EXTENSION:".xtk",INSTRUMENT_FILE_EXTENSION:".xit",MIN_EQ_GAIN:-40,DEFAULT_FILTER_FREQ:880,DEFAULT_FILTER_Q:5,MAX_FILTER_FREQ:24e3,MAX_FILTER_Q:40,DEFAULT_FILTER_LFO_SPEED:.5,DEFAULT_FILTER_LFO_DEPTH:50,MAX_FILTER_LFO_SPEED:25,MAX_FILTER_LFO_DEPTH:100,DEFAULT_DELAY_MIX:.65,DEFAULT_DELAY_FEEDBACK:.01,DEFAULT_DELAY_TIME:.33,DEFAULT_DELAY_CUT_OFF:1500,MAX_DELAY_TIME:2,MAX_DELAY_FEEDBACK:1,MAX_DELAY_CUTOFF:22050,MAX_DELAY_OFFSET:1,getBasePath:function(){return"string"==typeof window.effluxPath?window.effluxPath:window.location.origin+window.location.pathname},isDevMode:function(){return"localhost"===window.location.hostname||"3000"===window.location.port},isChromeApp:function(){return window.chrome&&window.chrome.runtime&&window.chrome.runtime.id},canHover:function(){return!c.ios}}},{bowser:1}],41:[function(a,b){"use strict";function c(a,b){switch(a){case h.OPEN_ADVANCED_PATTERN_EDITOR:d();break;case h.CLOSE_OVERLAYS:b!==v&&e()}}function d(){l.publishSync(h.CLOSE_OVERLAYS,v),l.publish(h.SHOW_BLIND);var a=o.activeSong,b=a.patterns.length;q.setAttribute("max",b),r.setAttribute("max",b),u.setAttribute("max",b),q.value=r.value=o.EditorModel.activePattern+1,s.value=1,t.value=a.instruments.length,u.value=b,k.focus(q),p.setBlockDefaults(!1),p.setListener(v),n.parentNode||m.appendChild(n)}function e(){n.parentNode&&(l.publishSync(h.HIDE_BLIND),p.reset(),n.parentNode.removeChild(n))}function f(){var a=o.activeSong,b=a.patterns,c=b.length-1,d=a.instruments.length-1,f=Math.min(c,g(q)),k=Math.min(c,g(r)),m=Math.min(d,g(s)),n=Math.min(d,g(t)),p=Math.min(c,g(u))+1,v=b.slice(f,k+1),w=a.patterns,x=b.splice(p),y=[];v.forEach(function(a){for(var b=i.createEmptyPattern(a.steps),c=m;n>=c;++c)b.channels[c]=j.clone(a.channels[c]);y.push(b)}),a.patterns=w.concat(y,x);for(var z=function(b){a.patterns[b].channels.forEach(function(a){a.forEach(function(a){if(a&&a.seq){var c=a.seq.startMeasure,d=a.seq.endMeasure,e=isNaN(d)?1:d-c;a.seq.startMeasure=b,a.seq.endMeasure=a.seq.startMeasure+e}})})},A=p;A<a.patterns.length;++A)z(A);l.publish(h.CREATE_LINKED_LISTS),l.publish(h.REFRESH_SONG),l.publish(h.PATTERN_AMOUNT_UPDATED),e()}function g(a){return parseInt(a.value,10)-1}var h=a("../definitions/Messages"),i=a("../model/factory/PatternFactory"),j=a("../utils/ObjectUtil"),k=a("../utils/Form"),l=a("pubsub-js"),m=void 0,n=void 0,o=void 0,p=void 0,q=void 0,r=void 0,s=void 0,t=void 0,u=void 0,v=b.exports={init:function(a,b,d){m=a,o=b,p=d,o.TemplateService.renderAsElement("advancedPatternEditor").then(function(a){n=a,q=n.querySelector("#apeFirstPattern"),r=n.querySelector("#apeLastPattern"),s=n.querySelector("#apeFirstChannel"),t=n.querySelector("#apeLastChannel"),u=n.querySelector("#apePastePattern"),n.querySelector(".close-button").addEventListener("click",e),n.querySelector(".confirm-button").addEventListener("click",f)}),[h.OPEN_ADVANCED_PATTERN_EDITOR,h.CLOSE_OVERLAYS].forEach(function(a){return l.subscribe(a,c)})},handleKey:function(a,b){if("down"===a)switch(b){case 27:e();break;case 13:f()}}}},{"../definitions/Messages":65,"../model/factory/PatternFactory":81,"../utils/Form":106,"../utils/ObjectUtil":112,"pubsub-js":4}],42:[function(a,b){"use strict";function c(a,b){switch(a){case q.PLAYBACK_STARTED:E=!0,f(),i();break;case q.APPLY_INSTRUMENT_MODULES:f();break;case q.PLAYBACK_STOPPED:E=!1,J.reset(),F&&G&&(G.stop(),G.exportWAV());break;case q.TOGGLE_OUTPUT_RECORDING:F=!F,i();break;case q.SONG_LOADED:J.reset(),g(b.instruments);break;case q.SET_CUSTOM_WAVEFORM:var c=h(b[0],b[1],b[2]);o.adjustEventWaveForms(I[b[0]],b[1],c);break;case q.ADJUST_OSCILLATOR_WAVEFORM:o.adjustEventWaveForms(I[b[0]],b[1],C[b[2].waveform]);break;case q.ADJUST_OSCILLATOR_TUNING:o.adjustEventTunings(I[b[0]],b[1],b[2]);break;case q.ADJUST_OSCILLATOR_VOLUME:o.adjustEventVolume(I[b[0]],b[1],b[2]);break;case q.ADJUST_INSTRUMENT_VOLUME:H[b[0]].output.gain.value=b[1];break;case q.UPDATE_FILTER_SETTINGS:l.applyFilterConfiguration(H[b[0]],b[1],z);break;case q.UPDATE_DELAY_SETTINGS:l.applyDelayConfiguration(H[b[0]],b[1],z);break;case q.UPDATE_EQ_SETTINGS:l.applyEQConfiguration(H[b[0]],b[1],z);break;case q.UPDATE_OVERDRIVE_SETTINGS:l.applyODConfiguration(H[b[0]],b[1],z);break;case q.NOTE_ON:J.noteOn(b[0],b[1]);break;case q.NOTE_OFF:J.noteOff(b[0],b[1])}}function d(){z=k.createGainNode(y),A=y.createBiquadFilter(),A.type="highpass",A.frequency.value=30,B=y.createDynamicsCompressor(),z.connect(A),A.connect(B),B.connect(y.destination)}function e(){var a=void 0,b=void 0;if(H&&H.length>0)for(a=H.length;a--;)b=H[a],b.output.disconnect(),b.filter.filter.disconnect();for(H=new Array(p.INSTRUMENT_AMOUNT),a=0;a<p.INSTRUMENT_AMOUNT;++a)b=H[a]={output:k.createGainNode(y),overdrive:l.createOverdrive(y),eq:l.createEQ(y),filter:l.createFilter(y),delay:l.createDelay(y)},n.applyRouting(b,z)}function f(){var a=void 0;x.activeSong.instruments.forEach(function(b,c){a=H[c],a.output.gain.value=b.volume,w.publishSync(q.UPDATE_FILTER_SETTINGS,[b.id,b.filter]),w.publishSync(q.UPDATE_DELAY_SETTINGS,[b.id,b.delay]),w.publishSync(q.UPDATE_EQ_SETTINGS,[b.id,b.eq]),w.publishSync(q.UPDATE_OVERDRIVE_SETTINGS,[b.id,b.overdrive])})}function g(a){a.forEach(function(a,b){C.CUSTOM[b]=new Array(a.oscillators.length),
a.oscillators.forEach(function(a,c){a.table&&(C.CUSTOM[b][c]=h(b,c,a.table))})})}function h(a,b,c){return C.CUSTOM[a][b]=m.createWaveTableFromGraph(y,c)}function i(){F?(G||(G=new v(z,{callback:j})),E&&G.record()):G&&(G.stop(),G.exportWAV())}function j(a){var b=document.createElement("a");b.setAttribute("href",window.URL.createObjectURL(a)),b.setAttribute("target","_blank"),b.setAttribute("download","efflux-output.wav"),b.click(),G.clear(),G=null,F=!1,window.URL.revokeObjectURL(a),w.publish(q.SHOW_FEEDBACK,t.get("RECORDING_SAVED"))}var k=a("../model/factory/AudioFactory"),l=a("../model/factory/ModuleFactory"),m=a("../utils/AudioUtil"),n=a("../utils/ModuleUtil"),o=a("../utils/InstrumentUtil"),p=a("../config/Config"),q=a("../definitions/Messages"),r=a("../definitions/Pitch"),s=a("../definitions/WaveTables"),t=a("../i18n/Copy"),u=a("../modules/ADSR"),v=a("recorderjs"),w=a("pubsub-js"),x=void 0,y=void 0,z=void 0,A=void 0,B=void 0,C=void 0,D=0,E=!1,F=!1,G=void 0,H=void 0,I=[],J=b.exports={isSupported:function(){return"undefined"!=typeof AudioContext||"undefined"!=typeof webkitAudioContext},init:function(a,b){if("undefined"!=typeof AudioContext)y=new AudioContext;else{if("undefined"==typeof webkitAudioContext)throw new Error("WebAudio API not supported (try 'isSupported()' prior to invoking)");y=new webkitAudioContext}x=a,m.iOSinit(y),d(),C={SAW:y.createPeriodicWave(new Float32Array(s.SAW.real),new Float32Array(s.SAW.imag)),TRIANGLE:y.createPeriodicWave(new Float32Array(s.TRIANGLE.real),new Float32Array(s.TRIANGLE.imag)),SQUARE:y.createPeriodicWave(new Float32Array(s.SQUARE.real),new Float32Array(s.SQUARE.imag)),NOISE:y.createBuffer(1,y.sampleRate/10,y.sampleRate),CUSTOM:[]};for(var e=C.NOISE.getChannelData(0),f=0,h=e.length;h>f;++f)e[f]=2*Math.random()-1;J.reset(),g(b),[q.SONG_LOADED,q.PLAYBACK_STARTED,q.PLAYBACK_STOPPED,q.APPLY_INSTRUMENT_MODULES,q.TOGGLE_OUTPUT_RECORDING,q.SET_CUSTOM_WAVEFORM,q.ADJUST_OSCILLATOR_TUNING,q.ADJUST_OSCILLATOR_VOLUME,q.ADJUST_OSCILLATOR_WAVEFORM,q.ADJUST_INSTRUMENT_VOLUME,q.UPDATE_FILTER_SETTINGS,q.UPDATE_DELAY_SETTINGS,q.UPDATE_EQ_SETTINGS,q.UPDATE_OVERDRIVE_SETTINGS,q.NOTE_ON,q.NOTE_OFF].forEach(function(a){return w.subscribe(a,c)})},reset:function(){I.forEach(function(a){for(var b=a.length,c=void 0;b--;)c=a[b],c&&c.forEach(function(a){return k.stopOscillation(a.generator)})}),I=new Array(p.INSTRUMENT_AMOUNT);for(var a=0;a<p.INSTRUMENT_AMOUNT;++a)I[a]=[];e(),D=0},getContext:function(){return y},noteOn:function(a,b,c){if(1===a.action){a.id=++D;var d=r.getFrequency(a.note,a.octave);"number"!=typeof c&&(c=y.currentTime);var e=[],f=void 0,g=H[b.id];b.oscillators.forEach(function(a,h){if(a.enabled){f=b.oscillators[h];var i=void 0;if("NOISE"===a.waveform)i=y.createBufferSource(),i.buffer=C.NOISE,i.loop=!0,i.playbackRate.value=o.tuneBufferPlayback(f);else{i=y.createOscillator();var j=void 0;if(j="CUSTOM"!==a.waveform?C[a.waveform]:C.CUSTOM[b.id][h],!j)return;i.setPeriodicWave(j),i.frequency.value=o.tuneToOscillator(d,f)}var l=k.createGainNode(y);u.applyAmpEnvelope(a.adsr,l,c),u.applyPitchEnvelope(a.pitch,i,c);var m=k.createGainNode(y);m.gain.value=a.volume,i.connect(m),m.connect(l),l.connect(g.output),k.startOscillation(i,c),e.push({generator:i,vo:a,frequency:d,gain:m,outputNode:l,gliding:!1})}}),I[b.id][a.id]=e}a.mp&&n.applyModuleParamChange(a,H[b.id],x.activeSong.instruments[b.id],I[b.id],c||y.currentTime,z)},noteOff:function(a,b){var c=I[b.id][a.id];if(c){var d=H[b.id];c.forEach(function(a){var b=a.generator,c=a.outputNode,e=a.vo.adsr;u.applyAmpRelease(e,c,y.currentTime),u.applyPitchRelease(a.vo.pitch,b,y.currentTime),m.createTimer(y,y.currentTime+e.release,function(){k.stopOscillation(this,y.currentTime),this.disconnect(),c.disconnect(d.output)}.bind(b))})}delete I[b.id][a.id]}}},{"../config/Config":40,"../definitions/Messages":65,"../definitions/Pitch":66,"../definitions/WaveTables":68,"../i18n/Copy":69,"../model/factory/AudioFactory":77,"../model/factory/ModuleFactory":80,"../modules/ADSR":93,"../utils/AudioUtil":103,"../utils/InstrumentUtil":107,"../utils/ModuleUtil":110,"pubsub-js":4,recorderjs:8}],43:[function(a,b){"use strict";function c(a,b){switch(a){case h.SHOW_DIALOG:case h.CONFIRM:j.publishSync(h.SHOW_BLIND),m.innerHTML=b.title||i.get("CONFIRM_TITLE"),n.innerHTML=b.message,q=b.confirm,r=b.cancel,a===h.CONFIRM?f(p):g(p),k.appendChild(l);break;case h.CLOSE_OVERLAYS:l.parentNode&&k.removeChild(l),j.publishSync(h.HIDE_BLIND)}}function d(){j.publishSync(h.CLOSE_OVERLAYS),"function"==typeof q&&q()}function e(){j.publishSync(h.CLOSE_OVERLAYS),"function"==typeof r&&r()}function f(a){a.style.display="inline"}function g(a){a.style.display="none"}var h=a("../definitions/Messages"),i=a("../i18n/Copy"),j=a("pubsub-js"),k=void 0,l=void 0,m=void 0,n=void 0,o=void 0,p=void 0,q=void 0,r=void 0;b.exports={init:function(a,b){k=a,b.TemplateService.renderAsElement("dialogWindow",{title:"",message:"",confirm:i.get("BUTTON_OK"),cancel:i.get("BUTTON_CANCEL")}).then(function(a){l=a,m=l.querySelector("h4"),n=l.querySelector(".message"),o=l.querySelector(".confirm-button"),p=l.querySelector(".cancel-button"),o.addEventListener("click",d),p.addEventListener("click",e)}),[h.SHOW_DIALOG,h.CONFIRM,h.CLOSE_OVERLAYS].forEach(function(a){return j.subscribe(a,c)})}}},{"../definitions/Messages":65,"../i18n/Copy":69,"pubsub-js":4}],44:[function(a,b){"use strict";function c(a,b){switch(a){case e.DISPLAY_HELP:if(i!==b){var c=Date.now();c-k>j&&g.TemplateService.render(b,h,b,!1,!1).then(function(a){a.length>0&&(h.innerHTML=a),i=b,d.publishSync(e.HELP_SECTION_UPDATED)}),k=c}}}{var d=a("pubsub-js"),e=a("../definitions/Messages"),f=void 0,g=void 0,h=void 0,i=void 0,j=1e3,k=0;b.exports={init:function(a,b){f=a,g=b,g.TemplateService.render("helpView",f,null,!0).then(function(){h=f.querySelector(".content"),d.publish(e.DISPLAY_HELP,"helpTopicGeneral")}),d.subscribe(e.DISPLAY_HELP,c)}}}},{"../definitions/Messages":65,"pubsub-js":4}],45:[function(a,b){"use strict";function c(a,b){switch(a){case l.TOGGLE_INSTRUMENT_EDITOR:p.publishSync(l.CLOSE_OVERLAYS,u),p.publishSync(l.SHOW_BLIND),p.publishSync(l.OVERLAY_OPENED),n.inject(q),s.instrumentId=b,u.update();break;case l.CLOSE_OVERLAYS:b!==u&&n.remove();break;case l.WINDOW_RESIZED:n.updateWaveformSize();break;case l.SONG_LOADED:j(),s.activeOscillatorIndex=0}}function d(a,b){switch(a){case n.EVENTS.READY:j();break;case n.EVENTS.SET_OSC:s.activeOscillatorIndex=b,u.update();break;case n.EVENTS.CACHE_OSC:i(s.instrumentRef.oscillators[s.activeOscillatorIndex]);break;case n.EVENTS.SELECT_PRESET:f(b);break;case n.EVENTS.SELECT_INSTRUMENT:s.instrumentId=b,u.update();break;case n.EVENTS.SAVE_PRESET:var c=b;0===c.trim().length?p.publish(l.SHOW_ERROR,k.get("ERROR_NO_INS_NAME")):(s.instrumentRef.presetName=c,s.saveInstrument(o.clone(s.instrumentRef))&&(p.publish(l.SHOW_FEEDBACK,k.get("INSTRUMENT_SAVED",c)),j()));break;case n.EVENTS.SET_TUNING:g(b.type,b.value);break;case n.EVENTS.CLOSE:e()}}function e(){p.publishSync(l.CLOSE_OVERLAYS)}function f(a){if(a!==t&&s.instrumentRef&&s.instrumentRef.presetName!==a){var b=s.getInstrumentByPresetName(a);if(b){var c=m.loadPreset(b,s.instrumentId,s.instrumentRef.name);s.instrumentRef=r.activeSong.instruments[s.instrumentId]=c,s.activeOscillatorIndex=0,u.update(),h(),p.publishSync(l.APPLY_INSTRUMENT_MODULES)}}}function g(a,b){var c=s.instrumentRef.oscillators[s.activeOscillatorIndex];switch(a){case"detune":c.detune=b;break;case"octave":c.octaveShift=b;break;case"fine":c.fineShift=b}p.publishSync(l.ADJUST_OSCILLATOR_TUNING,[s.instrumentId,s.activeOscillatorIndex,c])}function h(){s.instrumentRef.oscillators.forEach(function(a){i(a)})}function i(a){a.enabled&&"CUSTOM"===a.waveform?p.publishSync(l.SET_CUSTOM_WAVEFORM,[s.instrumentId,s.activeOscillatorIndex,a.table]):p.publishSync(l.ADJUST_OSCILLATOR_WAVEFORM,[s.instrumentId,s.activeOscillatorIndex,a])}function j(){var a=r.activeSong.instruments[s.instrumentId],b=s.getInstruments(),c=[];c.push({title:k.get("INPUT_PRESET"),value:t}),b.forEach(function(a){c.push({title:a.presetName,value:a.presetName})}),b.sort(function(a,b){return a.presetName<b.presetName?-1:a.presetName>b.presetName?1:0}),n.setPresets(c,a.presetName)}var k=a("../i18n/Copy"),l=a("../definitions/Messages"),m=a("../model/factory/InstrumentFactory"),n=a("../view/InstrumentView"),o=a("../utils/ObjectUtil"),p=a("pubsub-js"),q=void 0,r=void 0,s=void 0,t="null",u=b.exports={visible:!1,init:function(a,b,e){q=a,r=b,s=r.InstrumentModel,n.init(r,e,d),[l.CLOSE_OVERLAYS,l.TOGGLE_INSTRUMENT_EDITOR,l.SONG_LOADED,l.WINDOW_RESIZED].forEach(function(a){return p.subscribe(a,c)})},update:function(){var a=r.activeSong.instruments,b=a.length;for(s.instrumentRef=null;b--;)if(a[b].id==s.instrumentId){s.instrumentRef=a[b];break}s.instrumentRef&&(n.update(s.instrumentRef,s.activeOscillatorIndex),j())}}},{"../definitions/Messages":65,"../i18n/Copy":69,"../model/factory/InstrumentFactory":79,"../utils/ObjectUtil":112,"../view/InstrumentView":117,"pubsub-js":4}],46:[function(a,b){"use strict";function c(a){switch(a){case q.HIGHLIGHTED_SLOT_CHANGED:k()}}function d(a){if(!A){var b=a.keyCode,c=v.activeStep,d=v.activeInstrument;if(D=!!a.shiftKey,B&&G.indexOf(b)>-1&&a.preventDefault(),z&&z.handleKey)z.handleKey("down",b,a);else{var f=L.hasOption(a);switch(f||D||g(b),b){case 27:u.publishSync(q.CLOSE_OVERLAYS);break;case 32:u.publishSync(q.TOGGLE_SEQUENCER_PLAYSTATE);break;case 224:case 17:case 91:case 93:C=!0;break;case 38:--v.activeStep<0&&(v.activeStep=0),a&&D?(h(),y.handleVerticalKeySelectAction(b,v.activeInstrument,c,v.activeStep)):y.clearSelection(),j();break;case 40:var m=efflux.activeSong.patterns[v.activePattern].steps-1;++v.activeStep>m&&(v.activeStep=m),a&&D?(h(),y.handleVerticalKeySelectAction(b,v.activeInstrument,c,v.activeStep)):y.clearSelection(),j();break;case 39:f?u.publishSync(q.PATTERN_JUMP_NEXT):(h(v.activeSlot+1)&&++v.activeInstrument>H&&(v.activePattern<efflux.activeSong.patterns.length-1?(++v.activePattern,v.activeInstrument=0,u.publishSync(q.REFRESH_PATTERN_VIEW)):v.activeInstrument=H,u.publishSync(q.PATTERN_SWITCH,v.activePattern)),D?y.handleHorizontalKeySelectAction(b,d,v.activeStep):y.clearSelection(),j());break;case 37:f?u.publishSync(q.PATTERN_JUMP_PREV):(h(v.activeSlot-1)&&--v.activeInstrument<0&&(v.activePattern>0?(--v.activePattern,v.activeInstrument=H,u.publishSync(q.REFRESH_PATTERN_VIEW)):v.activeInstrument=0,u.publishSync(q.PATTERN_SWITCH,v.activePattern)),k(),D?(E=Math.max(--F,0),y.handleHorizontalKeySelectAction(b,d,v.activeStep)):y.clearSelection(),j());break;case 8:i(),e({keyCode:38,preventDefault:function(){}});break;case 13:u.publishSync(f?q.EDIT_NOTE_FOR_STEP:q.EDIT_MOD_PARAMS_FOR_STEP);break;case 46:i(),e({keyCode:40,preventDefault:function(){}});break;case 67:f&&(y.hasSelection()||(y.setSelectionChannelRange(v.activeInstrument),y.setSelection(v.activeStep)),y.copySelection(efflux.activeSong,v.activePattern),y.clearSelection());break;case 71:f&&u.publishSync(q.GLIDE_PARAM_AUTOMATIONS);break;case 75:u.publishSync(q.ADD_OFF_AT_POSITION);break;case 76:f&&(u.publishSync(q.TOGGLE_SEQUENCER_LOOP),a.preventDefault());break;case 82:f&&(u.publishSync(q.TOGGLE_INPUT_RECORDING),a.preventDefault());break;case 83:f&&(u.publishSync(q.SAVE_SONG),a.preventDefault());break;case 86:f&&u.publishSync(q.SAVE_STATE,s.getAction(r.PASTE_SELECTION,{efflux:efflux,updateHandler:function(){return u.publishSync(q.REFRESH_PATTERN_VIEW)}}));break;case 88:f&&u.publishSync(q.SAVE_STATE,s.getAction(r.CUT_SELECTION,{efflux:efflux,updateHandler:function(){return u.publishSync(q.REFRESH_PATTERN_VIEW)}}));break;case 90:if(f){var n=void 0;n=D?x.redo():x.undo(),n&&(u.publishSync(q.REFRESH_PATTERN_VIEW),t.linkEvents(efflux.activeSong.patterns,efflux.eventList))}break;case 189:v.higherKeyboardOctave=Math.max(v.higherKeyboardOctave-1,1);break;case 187:v.higherKeyboardOctave=Math.min(v.higherKeyboardOctave+1,l.MAX_OCTAVE);break;case 219:v.lowerKeyboardOctave=Math.max(v.lowerKeyboardOctave-1,1);break;case 221:v.lowerKeyboardOctave=Math.min(v.lowerKeyboardOctave+1,l.MAX_OCTAVE)}}}}function e(a){if(D=!1,C)switch(a.keyCode){case 224:case 17:case 91:case 93:C=!1;break;case 16:y.actionCache.stepOnSelection=-1}A||(z&&z.handleKey?z.handleKey("up",a.keyCode,a):L.hasOption(a)||a.shiftKey||K===J.NOTE_INPUT&&m.createNoteOffEvent(a.keyCode))}function f(){D=C=!1}function g(a){switch(K){case J.NOTE_INPUT:m.createNoteOnEvent(a);break;case J.INSTRUMENT_SELECT:n.setInstrument(a);break;case J.PARAM_SELECT:o.handleParam(a);break;case J.PARAM_VALUE:p.handleParam(a)}}function h(a){var b=a;return a>I?b=0:0>a&&(b=I),D&&(b=-1),v.activeSlot=b,k(),b!==a}function i(){switch(K){default:u.publishSync(q.REMOVE_NOTE_AT_POSITION);break;case J.PARAM_VALUE:case J.PARAM_SELECT:u.publishSync(q.REMOVE_PARAM_AUTOMATION_AT_POSITION)}}function j(){u.publishSync(q.HIGHLIGHT_ACTIVE_STEP),u.publishSync(q.HANDLE_KEYBOARD_MOVEMENT)}function k(){switch(v.activeSlot){default:K=J.NOTE_INPUT;break;case 1:K=J.INSTRUMENT_SELECT;break;case 2:K=J.PARAM_SELECT;break;case 3:K=J.PARAM_VALUE}}var l=a("../config/Config"),m=a("./keyboard/NoteInputHandler"),n=a("./keyboard/InstrumentSelectionHandler"),o=a("./keyboard/ModuleParamHandler"),p=a("./keyboard/ModuleValueHandler"),q=a("../definitions/Messages"),r=a("../definitions/States"),s=a("../model/factory/StateFactory"),t=a("../utils/EventUtil"),u=a("pubsub-js"),v=void 0,w=void 0,x=void 0,y=void 0,z=void 0,A=!1,B=!0,C=!1,D=!1,E=0,F=0,G=[8,32,37,38,39,40],H=l.INSTRUMENT_AMOUNT-1,I=3,J={NOTE_INPUT:0,INSTRUMENT_SELECT:1,PARAM_SELECT:2,PARAM_VALUE:3},K=J.NOTE_INPUT,L=b.exports={init:function(a,b){v=a.EditorModel,x=a.StateModel,y=a.SelectionModel,w=b,window.addEventListener("keydown",d),window.addEventListener("keyup",e),window.addEventListener("focus",f),m.init(a,b),n.init(a),o.init(a),p.init(a),[q.HIGHLIGHTED_SLOT_CHANGED].forEach(function(a){return u.subscribe(a,c)})},hasOption:function(a){return C===!0||a.ctrlKey},hasShift:function(){return D===!0},setListener:function(a){z=a},setSuspended:function(a){A=a},setBlockDefaults:function(a){B=a},reset:function(){L.setListener(null),L.setSuspended(!1),L.setBlockDefaults(!0)}}},{"../config/Config":40,"../definitions/Messages":65,"../definitions/States":67,"../model/factory/StateFactory":83,"../utils/EventUtil":104,"./keyboard/InstrumentSelectionHandler":60,"./keyboard/ModuleParamHandler":61,"./keyboard/ModuleValueHandler":62,"./keyboard/NoteInputHandler":63,"pubsub-js":4}],47:[function(a,b){"use strict";function c(a,b){switch(a){case l.MIDI_CONNECT_TO_INTERFACE:d();break;case l.MIDI_ADD_LISTENER_TO_DEVICE:e(b)}}function d(){n.connect(f,g)}function e(a){for(var b=n.getInChannels().length;b--;)n.removeMessageListener(b);n.addMessageListener(a,h),t=a;var c=n.getInChannels()[a];k.publish(l.MIDI_DEVICE_CONNECTED,a),k.publish(l.SHOW_FEEDBACK,i.get("MIDI_ENABLED",c.manufacturer+" "+c.name))}function f(){return 0===n.getInChannels().length?g(""):(k.publish(l.SHOW_FEEDBACK,i.get("MIDI_CONNECTED")),k.publish(l.MIDI_RECEIVED_INPUT_DEVICES,n.getInChannels()),void 0)}function g(){k.publish(l.SHOW_ERROR,i.get("MIDI_FAILURE"))}function h(a){var b=a.value,c=p.getPitchByNoteNumber(b),d=q.EditorModel;switch(a.type){case o.NOTE_ON:var e=q.EditorModel.activeInstrument,f=q.activeSong.instruments[e];j.noteOn(c,f,d.recordingInput,s);break;case o.NOTE_OFF:j.noteOff(c,s)}}{var i=a("../i18n/Copy"),j=(a("../utils/Time"),a("../utils/InstrumentUtil")),k=(a("../utils/EventUtil"),a("../utils/SongUtil"),a("pubsub-js")),l=a("../definitions/Messages"),m=a("zmidi"),n=m.zMIDI,o=m.zMIDIEvent,p=m.MIDINotes,q=void 0,r=void 0,s=void 0,t=-1;b.exports={init:function(a,b,d){q=a,r=b,s=d,[l.MIDI_CONNECT_TO_INTERFACE,l.MIDI_ADD_LISTENER_TO_DEVICE].forEach(function(a){return k.subscribe(a,c)})}}}},{"../definitions/Messages":65,"../i18n/Copy":69,"../utils/EventUtil":104,"../utils/InstrumentUtil":107,"../utils/SongUtil":114,"../utils/Time":116,"pubsub-js":4,zmidi:37}],48:[function(a,b){"use strict";function c(){y=!y,y?(u.classList.add("opened"),t.classList.add("expanded"),document.body.style.overflow="hidden"):(u.classList.remove("opened"),t.classList.remove("expanded"),document.body.style.overflow="auto")}function d(a,b){switch(a){case q.WINDOW_RESIZED:case q.CLOSE_OVERLAYS:y&&c(null);break;case q.SAVE_SONG:g(null);break;case q.VALIDATE_AND_GET_SONG:j(w.activeSong)&&"function"==typeof b&&b(w.activeSong)}}function e(){p.publish(q.DISPLAY_HELP,"helpTopicMenu")}function f(){p.publish(q.CLOSE_OVERLAYS,z),p.publish(q.OPEN_SONG_BROWSER)}function g(){var a=w.activeSong;j(a)&&(w.SongModel.saveSong(a),p.publish(q.SHOW_FEEDBACK,m.get("SONG_SAVED",a.meta.title)))}function h(){p.publish(q.CONFIRM,{message:m.get("WARNING_SONG_RESET"),confirm:function(){w.activeSong=w.SongModel.createSong();var a=w.EditorModel;a.activeInstrument=a.activePattern=a.activeStep=0,a.amountOfSteps=w.activeSong.patterns[0].steps,p.publish(q.SONG_LOADED,w.activeSong)}})}function i(){p.publish(q.CLOSE_OVERLAYS,z),p.publish(q.OPEN_SETTINGS_PANEL)}function j(a){var b=o.hasContent(a);return b?((0===a.meta.author.length||0===a.meta.title.length)&&(b=!1),b||p.publish(q.SHOW_ERROR,m.get("ERROR_NO_META")),b):(p.publish(q.SHOW_ERROR,m.get("ERROR_EMPTY_SONG")),!1)}function k(){p.publish(q.TOGGLE_OUTPUT_RECORDING),p.publish(q.SHOW_FEEDBACK,m.get("RECORDING_ENABLED"))}var l=a("../config/Config"),m=a("../i18n/Copy"),n=(a("../utils/Time"),a("../utils/ExportUtil")),o=a("../utils/SongUtil"),p=a("pubsub-js"),q=a("../definitions/Messages"),r=a("../definitions/Manual"),s=a("../ui/Fullscreen"),t=void 0,u=void 0,v=void 0,w=void 0,x=void 0,y=!1,z=b.exports={init:function(a,b,m){w=b,x=m;var o="undefined"!=typeof window.btoa&&"undefined"!=typeof window.FileReader,y=s.isSupported(),z=window.navigator.userAgent,A="Blob"in window&&!z.match(/(iPad|iPhone|iPod)/g)&&z.match(/(Chrome)/g);w.TemplateService.render("menuView",a,{addExport:o,addSave:A,addFullscreen:y}).then(function(){a.querySelector("#songLoad").addEventListener("click",f),a.querySelector("#songSave").addEventListener("click",g),a.querySelector("#songReset").addEventListener("click",h),a.querySelector("#settingsBtn").addEventListener("click",i),o&&(a.querySelector("#songImport").addEventListener("click",n.importSong),a.querySelector("#songExport").addEventListener("click",function(){var a=w.activeSong;j(a)&&n.exportSong(a)}),a.querySelector("#instrumentImport").addEventListener("click",n.importInstrument),a.querySelector("#instrumentExport").addEventListener("click",function(){n.exportInstruments(w.InstrumentModel.getInstruments())})),A&&a.querySelector("#audioRecord").addEventListener("click",k),y&&s.setToggleButton(a.querySelector("#fullscreenBtn")),a.querySelector("#helpBtn").addEventListener("click",function(){window.open(r.ONLINE_MANUAL)}),u=document.getElementById("menu"),t=document.getElementById("header"),v=u.querySelector(".toggle"),v.addEventListener("click",c),l.canHover()&&u.addEventListener("mouseover",e),p.publish(q.MENU_INITIALIZED)}),[q.WINDOW_RESIZED,q.CLOSE_OVERLAYS,q.SAVE_SONG,q.VALIDATE_AND_GET_SONG].forEach(function(a){return p.subscribe(a,d)})}}},{"../config/Config":40,"../definitions/Manual":64,"../definitions/Messages":65,"../i18n/Copy":69,"../ui/Fullscreen":98,"../utils/ExportUtil":105,"../utils/SongUtil":114,"../utils/Time":116,"pubsub-js":4}],49:[function(a,b){"use strict";function c(a){switch(a){case j.SONG_LOADED:s.update()}}function d(){var a=m.activeSong.meta;a.title=p.value,a.author=q.value}function e(){n.setSuspended(!0)}function f(){n.setSuspended(!1)}function g(){k.publishSync(j.TOGGLE_INSTRUMENT_EDITOR,o.activeInstrument)}function h(){k.publish(j.DISPLAY_HELP,"helpTopicMeta")}var i=a("../config/Config"),j=(a("../utils/SongUtil"),a("../definitions/Messages")),k=a("pubsub-js"),l=void 0,m=void 0,n=void 0,o=void 0,p=void 0,q=void 0,r=void 0,s=b.exports={init:function(a,b,t){l=a,m=b,o=m.EditorModel,n=t,m.TemplateService.render("metaView",l,null,!0).then(function(){p=l.querySelector("#songTitle"),q=l.querySelector("#songAuthor"),r=l.querySelector("#instrumentEditBtn"),s.update(),[p,q].forEach(function(a){a.addEventListener("change",d),a.addEventListener("focus",e),a.addEventListener("blur",f)}),r.addEventListener("click",g),i.canHover()&&l.addEventListener("mouseover",h)}),k.subscribe(j.SONG_LOADED,c)},update:function(){var a=m.activeSong.meta;p.value=a.title,q.value=a.author}}},{"../config/Config":40,"../definitions/Messages":65,"../utils/SongUtil":114,"pubsub-js":4}],50:[function(a,b){"use strict";function c(a,b){switch(a){case l.MIDI_CONNECT_TO_INTERFACE:d();break;case l.MIDI_ADD_LISTENER_TO_DEVICE:e(b)}}function d(){n.connect(f,g)}function e(a){for(var b=n.getInChannels().length;b--;)n.removeMessageListener(b);n.addMessageListener(a,h),t=a;var c=n.getInChannels()[a];k.publish(l.MIDI_DEVICE_CONNECTED,a),k.publish(l.SHOW_FEEDBACK,i.get("MIDI_ENABLED",c.manufacturer+" "+c.name))}function f(){return 0===n.getInChannels().length?g(""):(k.publish(l.SHOW_FEEDBACK,i.get("MIDI_CONNECTED")),k.publish(l.MIDI_RECEIVED_INPUT_DEVICES,n.getInChannels()),void 0)}function g(){k.publish(l.SHOW_ERROR,i.get("MIDI_FAILURE"))}function h(a){var b=a.value,c=p.getPitchByNoteNumber(b),d=q.EditorModel;switch(a.type){case o.NOTE_ON:var e=q.EditorModel.activeInstrument,f=q.activeSong.instruments[e];j.noteOn(c,f,d.recordingInput,s);break;case o.NOTE_OFF:j.noteOff(c,s)}}{var i=a("../i18n/Copy"),j=(a("../utils/Time"),a("../utils/InstrumentUtil")),k=(a("../utils/EventUtil"),a("../utils/SongUtil"),a("pubsub-js")),l=a("../definitions/Messages"),m=a("zmidi"),n=m.zMIDI,o=m.zMIDIEvent,p=m.MIDINotes,q=void 0,r=void 0,s=void 0,t=-1;b.exports={init:function(a,b,d){q=a,r=b,s=d,[l.MIDI_CONNECT_TO_INTERFACE,l.MIDI_ADD_LISTENER_TO_DEVICE].forEach(function(a){return k.subscribe(a,c)})}}}},{"../definitions/Messages":65,"../i18n/Copy":69,"../utils/EventUtil":104,"../utils/InstrumentUtil":107,"../utils/SongUtil":114,"../utils/Time":116,"pubsub-js":4,zmidi:37}],51:[function(a,b){"use strict";function c(a,b){switch(a){case k.OPEN_MODULE_PARAM_PANEL:e(b);break;case k.CLOSE_OVERLAYS:b!==v&&f()}}function d(a){switch(a){case i.EVENTS.READY:g();break;case i.EVENTS.CLOSE:f()}}function e(a){var b=n.EditorModel,c=b.activePattern,d=n.activeSong.patterns[c],e=b.activeInstrument,f=d.channels[e],g=f[b.activeStep];p={instrument:g?g.instrument:b.activeInstrument,module:g&&g.mp?g.mp.module:r,glide:g&&g.mp?g.mp.glide:!1,value:g&&g.mp?g.mp.value:50,patternIndex:g?g.seq.startMeasure:c,channelIndex:e,step:b.activeStep},l.publishSync(k.CLOSE_OVERLAYS,v),l.publish(k.SHOW_BLIND),u=a,q=p.module,o.setBlockDefaults(!1),o.setListener(v),q=p.module,i.setSelectedValueInList(i.moduleList,p.module),i.setGlide(p.glide),i.setValue(p.value),i.inject(m)}function f(){"function"==typeof u&&u(null),i.remove(),l.publishSync(k.HIDE_BLIND),o.reset(),u=null}function g(){p.module=r=i.getSelectedValueFromList(i.moduleList),p.value=i.getValue(),p.glide=i.hasGlide();var a=n.activeSong.patterns[p.patternIndex],b=a.channels[p.channelIndex],c=b[p.step],d=!c;d&&(c=h.createAudioEvent()),c.mp=p,c.instrument=p.instrument,l.publish(k.ADD_EVENT_AT_POSITION,[c,{patternIndex:p.patternIndex,channelIndex:p.channelIndex,step:p.step,newEvent:d}]),f()}var h=a("../model/factory/EventFactory"),i=a("../view/ModuleParamView"),j=a("./keyboard/ModuleParamHandler"),k=a("../definitions/Messages"),l=(a("../model/SettingsModel"),a("pubsub-js")),m=void 0,n=void 0,o=void 0,p=void 0,q=void 0,r=void 0,s=0,t=0,u=void 0,v=b.exports={init:function(a,b,e){m=a,n=b,o=e,i.init(n,d).then(function(){r=i.getValue()}),[k.OPEN_MODULE_PARAM_PANEL,k.CLOSE_OVERLAYS].forEach(function(a){return l.subscribe(a,c)})},handleKey:function(a,b){if("down"===a)switch(b){case 27:f();break;case 13:g();break;case 68:case 70:case 80:case 86:q=j.getNextSelectedModule(b,q),i.setSelectedValueInList(i.moduleList,q);break;case 71:i.toggleGlide();break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:var c=Date.now(),d=parseFloat(String.fromCharCode(b)),e=10*d;500>c-s&&(e=parseFloat(""+t+d)),i.setValue(e),s=c,t=d}}}},{"../definitions/Messages":65,"../model/SettingsModel":74,"../model/factory/EventFactory":78,"../view/ModuleParamView":118,"./keyboard/ModuleParamHandler":61,"pubsub-js":4}],52:[function(a,b){"use strict";function c(a,b){switch(a){case q.OPEN_NOTE_ENTRY_PANEL:d(b);break;case q.CLOSE_OVERLAYS:b!==D&&e()}}function d(a){var b=u.EditorModel,c=b.activePattern,d=u.activeSong.patterns[c],e=b.activeInstrument,f=d.channels[e],g=f[b.activeStep],h=l.getFirstEventBeforeStep(f,b.activeStep),i=h?h.instrument:b.activeInstrument;z={instrument:g?g.instrument:i,note:g?g.note:"C",octave:g?g.octave:3,patternIndex:g?g.seq.startMeasure:c,channelIndex:e,step:b.activeStep},r.publishSync(q.CLOSE_OVERLAYS,D),r.publish(q.SHOW_BLIND),A=a,v.setBlockDefaults(!1),v.setListener(D),j(x,z.note),j(y,z.octave),B=z.note,C=z.octave,o.setSelectedOption(w,z.instrument),t.parentNode||s.appendChild(t)}function e(){"function"==typeof A&&A(),r.publishSync(q.HIDE_BLIND),v.reset(),t.parentNode&&t.parentNode.removeChild(t),A=null}function f(){window.open(p.NOTE_ENTRY_HELP,"_blank")}function g(){if(z.instrument=parseFloat(o.getSelectedOption(w)),z.note=k(x),z.octave=parseFloat(k(y)),n.hasContent(z)){var a=u.activeSong.patterns[z.patternIndex],b=a.channels[z.channelIndex],c=b[z.step],d=!c;d&&(c=m.createAudioEvent()),c.action=1,c.instrument=z.instrument,c.note=z.note,c.octave=z.octave,r.publish(q.ADD_EVENT_AT_POSITION,[c,{patternIndex:z.patternIndex,channelIndex:z.channelIndex,step:z.step,newEvent:d}])}e()}function h(a){var b=a.target;"LI"===b.nodeName&&(B=b.getAttribute("data-value"),j(x,B))}function i(a){var b=a.target;"LI"===b.nodeName&&(C=b.getAttribute("data-value"),j(y,C))}function j(a,b){b=b.toString();for(var c=a.length,d=void 0;c--;)d=a[c],d.getAttribute("data-value")===b?d.classList.add("selected"):d.classList.remove("selected")}function k(a){for(var b=a.length,c=void 0;b--;)if(c=a[b],c.classList.contains("selected"))return c.getAttribute("data-value");return null}var l=a("../utils/EventUtil"),m=a("../model/factory/EventFactory"),n=a("../model/validators/EventValidator"),o=a("../utils/Form"),p=a("../definitions/Manual"),q=a("../definitions/Messages"),r=(a("../definitions/Pitch"),a("pubsub-js")),s=void 0,t=void 0,u=void 0,v=void 0,w=void 0,x=void 0,y=void 0,z=void 0,A=void 0,B=void 0,C=void 0,D=b.exports={init:function(a,b,d){s=a,u=b,v=d,u.TemplateService.renderAsElement("noteEntry").then(function(a){t=a,w=t.querySelector("#instrument");var b=t.querySelector("#keyboardNotes");x=b.querySelectorAll("li"),b.addEventListener("click",h);var c=t.querySelector("#octaves");y=c.querySelectorAll("li"),c.addEventListener("click",i),t.querySelector(".close-button").addEventListener("click",e),t.querySelector(".help-button").addEventListener("click",f),t.querySelector(".confirm-button").addEventListener("click",g)}),[q.OPEN_NOTE_ENTRY_PANEL,q.CLOSE_OVERLAYS].forEach(function(a){return r.subscribe(a,c)})},handleKey:function(a,b){if("down"===a)switch(b){case 27:e();break;case 13:g();break;case 67:B="C"===B?"C#":"C",j(x,B);break;case 68:B="D"===B?"D#":"D",j(x,B);break;case 69:j(x,B="E");break;case 70:B="F"===B?"F#":"F",j(x,B);break;case 71:B="G"===B?"G#":"G",j(x,B);break;case 65:B="A"===B?"A#":"A",j(x,B);break;case 66:j(x,B="B");break;case 49:j(y,1);break;case 50:j(y,2);break;case 51:j(y,3);break;case 52:j(y,4);break;case 53:j(y,5);break;case 54:j(y,6);break;case 55:j(y,7);break;case 56:j(y,8)}}}},{"../definitions/Manual":64,"../definitions/Messages":65,"../definitions/Pitch":66,"../model/factory/EventFactory":78,"../model/validators/EventValidator":89,"../utils/EventUtil":104,"../utils/Form":106,"pubsub-js":4}],53:[function(a,b){"use strict";function c(a,b){switch(a){case g.SONG_LOADED:d(e.get("SONG_LOADED_TITLE"),e.get("SONG_LOADED",b.meta.title));break;case g.SHOW_ERROR:d(e.get("ERROR_TITLE"),b);break;case g.SHOW_FEEDBACK:d(e.get("SUCCESS_TITLE"),b)}}function d(a,b){var c=document.createElement("div");c.className="notificationWindow",efflux.TemplateService.render("notificationView",c,{title:a,content:b}),h.appendChild(c),c.classList.add("visible");var d=function e(){c.removeEventListener("click",e),c.classList.remove("visible"),setTimeout(function(){c.parentNode&&h.removeChild(c)},1e3)};c.addEventListener("click",d),setTimeout(d,5e3)}{var e=a("../i18n/Copy"),f=a("pubsub-js"),g=a("../definitions/Messages"),h=void 0;b.exports={init:function(a){h=document.createElement("div"),h.setAttribute("id","notifications"),a.appendChild(h),[g.SONG_LOADED,g.SHOW_ERROR,g.SHOW_FEEDBACK].forEach(function(a){return f.subscribe(a,c)})}}}},{"../definitions/Messages":65,"../i18n/Copy":69,"pubsub-js":4}],54:[function(a,b){"use strict";function c(a,b){switch(a){case k.WINDOW_SCROLLED:var c=window.scrollY;if(c!==t){var d=s=s||l.getElementCoordinates(m,!0).y-46;c>d?m.classList.add("fixed"):m.classList.remove("fixed"),t=c}break;case k.WINDOW_RESIZED:s=0;break;case k.PATTERN_STEPS_UPDATED:i(b);break;case k.SONG_LOADED:i(n.EditorModel.amountOfSteps);break;case k.STEP_POSITION_REACHED:if(r)return;r=!0,requestAnimationFrame(function(){r=!1;var a=b[0],c=b[1],d=c/q;a%d===0&&j.publish(k.HIGHLIGHT_ACTIVE_STEP,a/d)})}}function d(){j.publish(k.EDIT_NOTE_AT_POSITION)}function e(){j.publish(k.ADD_OFF_AT_POSITION)}function f(){j.publish(k.REMOVE_NOTE_AT_POSITION)}function g(){j.publish(k.OPEN_MODULE_PARAM_PANEL)}function h(){j.publish(k.GLIDE_PARAM_AUTOMATIONS)}function i(a){q=a}var j=a("pubsub-js"),k=a("../definitions/Messages"),l=(a("../utils/EventUtil"),a("zjslib").DOM),m=void 0,n=void 0,o=void 0,p=void 0,q=0,r=!1,s=0,t=0;b.exports={init:function(a,b){m=a,n=b,p=m.querySelector(".controls"),o=m.querySelector(".indices"),m.querySelector(".addNote").addEventListener("click",d),m.querySelector(".addOff").addEventListener("click",e),m.querySelector(".removeNote").addEventListener("click",f),m.querySelector(".moduleParams").addEventListener("click",g),m.querySelector(".moduleGlide").addEventListener("click",h),[k.WINDOW_SCROLLED,k.WINDOW_RESIZED,k.PATTERN_STEPS_UPDATED,k.STEP_POSITION_REACHED,k.SONG_LOADED].forEach(function(a){return j.subscribe(a,c)}),i(16)}}},{"../definitions/Messages":65,"../utils/EventUtil":104,"pubsub-js":4,zjslib:32}],55:[function(a,b){"use strict";function c(a,b){switch(a){case v.REFRESH_SONG:case v.SONG_LOADED:a!==v.REFRESH_SONG&&(J.activePattern=0,J.activeStep=0,J.activeInstrument=0,N.clearSelection()),Q.update(),G.focus();break;case v.PATTERN_SWITCH:N.clearSelection(),J.activeSlot=-1,Q.update();break;case v.HIGHLIGHT_ACTIVE_STEP:"number"==typeof b&&(L.style.top=32*b+"px"),F.highlightActiveStep();break;case v.REFRESH_PATTERN_VIEW:Q.update();break;case v.EDIT_NOTE_AT_POSITION:case v.EDIT_NOTE_FOR_STEP:Q.editNoteForStep();break;case v.ADD_EVENT_AT_POSITION:r.apply(this,b);break;case v.ADD_OFF_AT_POSITION:i();break;case v.REMOVE_NOTE_AT_POSITION:d();break;case v.REMOVE_PARAM_AUTOMATION_AT_POSITION:e();break;case v.GLIDE_PARAM_AUTOMATIONS:f();break;case v.EDIT_MOD_PARAMS_FOR_STEP:h();break;case v.HANDLE_KEYBOARD_MOVEMENT:F.focusActiveStep(H)}}function d(){s.publishSync(v.SAVE_STATE,z.getAction(w.DELETE_EVENT,{efflux:I,addHandler:r,updateHandler:Q.update}))}function e(){var a=I.activeSong.patterns[J.activePattern].channels[J.activeInstrument][J.activeStep];a&&a.mp&&s.publishSync(v.SAVE_STATE,z.getAction(w.DELETE_MODULE_AUTOMATION,{event:a,updateHandler:Q.update}))}function f(){var a=I.EditorModel.activePattern,b=I.EditorModel.activeInstrument,c=I.activeSong.patterns[a].channels[b],d=C.getFirstEventBeforeStep(c,I.EditorModel.activeStep,function(a){return!!a.mp}),e=null,f=function(){var f=c.indexOf(d);e=C.glideModuleParams(I.activeSong,a,b,f,I.eventList),e&&s.publish(v.REFRESH_PATTERN_VIEW)};d&&f(),e?s.publish(v.SAVE_STATE,{undo:function(){e.forEach(function(a){""===a.note?C.clearEventByReference(I.activeSong,a,I.eventList):a.mp=null}),s.publish(v.REFRESH_PATTERN_VIEW)},redo:f}):s.publish(v.SHOW_ERROR,u.get("ERROR_PARAM_GLIDE"))}function g(a){return"touchstart"===a.type?(M.offset=window.scrollY,M.time=Date.now(),void 0):("LI"===a.target.nodeName&&F.handleSlotClick(a,K,Q),
s.publish(v.DISPLAY_HELP,"helpTopicTracker"),void 0)}function h(){s.publish(v.OPEN_MODULE_PARAM_PANEL,function(){K.setListener(Q)})}function i(){var a=x.createAudioEvent();a.action=2,r(a)}function j(){I.activeSong.patterns[J.activePattern]=y.createEmptyPattern(J.amountOfSteps),N.clearSelection(),Q.update(),s.publishSync(v.CREATE_LINKED_LISTS)}function k(){O=D.clone(I.activeSong.patterns[J.activePattern])}function l(){O&&(y.mergePatterns(I.activeSong.patterns[J.activePattern],O,J.activePattern),Q.update(),s.publishSync(v.CREATE_LINKED_LISTS))}function m(){var a=I.activeSong,b=a.patterns;return b.length===t.MAX_PATTERN_AMOUNT?(s.publish(v.SHOW_ERROR,u.get("ERROR_MAX_PATTERNS",t.MAX_PATTERN_AMOUNT)),void 0):(a.patterns=E.addEmptyPatternAtIndex(b,J.activePattern+1,J.amountOfSteps),s.publish(v.PATTERN_AMOUNT_UPDATED),s.publish(v.PATTERN_SWITCH,++J.activePattern),void 0)}function n(a){var b=I.activeSong,c=b.patterns;1===c.length?j(a):(b.patterns=E.removePatternAtIndex(c,J.activePattern),J.activePattern>0?s.publish(v.PATTERN_SWITCH,--J.activePattern):Q.update(),s.publish(v.PATTERN_AMOUNT_UPDATED))}function o(){s.publish(v.OPEN_ADVANCED_PATTERN_EDITOR)}function p(){var a=I.activeSong,b=a.patterns[J.activePattern],c=b.steps,d=parseInt(A.getSelectedOption(P),10);b.steps=J.amountOfSteps=d,b.channels.forEach(function(a,e){var f=new Array(d),g=void 0,h=void 0,i=void 0;if(c>d)for(i=c/d,g=0,h=0;d>g;++g,h+=i)f[g]=a[h];else for(i=d/c,g=0,h=0;c>g;++g,h+=i)f[h]=a[g];b.channels[e]=f}),s.publish(v.PATTERN_STEPS_UPDATED,d),Q.update()}function q(){s.publish(v.DISPLAY_HELP,"helpTopicPattern")}function r(a,b,c){c="boolean"==typeof c?c:!0;var d=z.getAction(w.ADD_EVENT,{efflux:I,event:a,optEventData:b,updateHandler:function(a){if(c&&a===!0){var b=I.activeSong.patterns[J.activePattern].steps-1;++J.activeStep>b&&(J.activeStep=b),N.clearSelection(),F.highlightActiveStep()}Q.update()}});c&&s.publishSync(v.SAVE_STATE,d)}var s=a("pubsub-js"),t=a("../config/Config"),u=a("../i18n/Copy"),v=a("../definitions/Messages"),w=a("../definitions/States"),x=a("../model/factory/EventFactory"),y=a("../model/factory/PatternFactory"),z=a("../model/factory/StateFactory"),A=a("../utils/Form"),B=a("../utils/ListenerUtil"),C=a("../utils/EventUtil"),D=a("../utils/ObjectUtil"),E=a("../utils/PatternUtil"),F=a("../view/PatternTrackListView"),G=void 0,H=void 0,I=void 0,J=void 0,K=void 0,L=void 0,M={},N=void 0,O=void 0,P=void 0,Q=b.exports={init:function(a,b,d){if(I=b,J=I.EditorModel,K=d,H=a,G=a.querySelector(".wrapper"),P=document.querySelector("#patternSteps"),L=a.querySelector(".highlight"),F.init(b,G),N=I.SelectionModel,Q.update(),G.addEventListener("click",g),G.addEventListener("dblclick",g),B.listen(G,"touchstart",g),B.listen(G,"touchend",g),document.querySelector("#patternClear").addEventListener("click",j),document.querySelector("#patternCopy").addEventListener("click",k),document.querySelector("#patternPaste").addEventListener("click",l),document.querySelector("#patternAdd").addEventListener("click",m),document.querySelector("#patternDelete").addEventListener("click",n),document.querySelector("#patternAdvanced").addEventListener("click",o),P.addEventListener("change",p),t.canHover()){var e=document.querySelector("#patternSection");e.addEventListener("mouseover",q)}[v.SONG_LOADED,v.REFRESH_SONG,v.REFRESH_PATTERN_VIEW,v.PATTERN_SWITCH,v.HIGHLIGHT_ACTIVE_STEP,v.EDIT_NOTE_AT_POSITION,v.ADD_EVENT_AT_POSITION,v.ADD_OFF_AT_POSITION,v.REMOVE_NOTE_AT_POSITION,v.REMOVE_PARAM_AUTOMATION_AT_POSITION,v.GLIDE_PARAM_AUTOMATIONS,v.EDIT_MOD_PARAMS_FOR_STEP,v.EDIT_NOTE_FOR_STEP,v.HANDLE_KEYBOARD_MOVEMENT].forEach(function(a){return s.subscribe(a,c)})},update:function(){var a=J.activePattern;a>=I.activeSong.patterns.length&&(a=I.activeSong.patterns.length-1);var b={x:H.scrollLeft,y:H.scrollTop},c=I.activeSong.patterns[a];F.render(c),A.setSelectedOption(P,c.steps),H.scrollLeft=b.x,H.scrollTop=b.y},editNoteForStep:function(){s.publish(v.OPEN_NOTE_ENTRY_PANEL,function(){K.setListener(Q)})}}},{"../config/Config":40,"../definitions/Messages":65,"../definitions/States":67,"../i18n/Copy":69,"../model/factory/EventFactory":78,"../model/factory/PatternFactory":81,"../model/factory/StateFactory":83,"../utils/EventUtil":104,"../utils/Form":106,"../utils/ListenerUtil":109,"../utils/ObjectUtil":112,"../utils/PatternUtil":113,"../view/PatternTrackListView":119,"pubsub-js":4}],56:[function(a,b){"use strict";function c(a,b){switch(a){case y.TOGGLE_SEQUENCER_PLAYSTATE:da.setPlaying(!R);break;case y.TOGGLE_INPUT_RECORDING:f();break;case y.SET_SEQUENCER_POSITION:da.setPosition(b);break;case y.PATTERN_AMOUNT_UPDATED:case y.PATTERN_SWITCH:da.update();break;case y.PATTERN_JUMP_PREV:j(null);break;case y.PATTERN_JUMP_NEXT:k(null);break;case y.TOGGLE_SEQUENCER_LOOP:e(null);break;case y.SONG_LOADED:S&&e(null),da.setPlaying(!1),da.update();break;case y.MIDI_DEVICE_CONNECTED:K.classList.remove("disabled")}}function d(){da.setPlaying(!R)}function e(){(S=!S)?J.classList.add("active"):J.classList.remove("active")}function f(){var a=T;if((T=!a)?K.classList.add("active"):K.classList.remove("active"),a){var b=C.activeSong.patterns,c=void 0,d=void 0;b.forEach(function(a){a.channels.forEach(function(a){for(d=a.length;d--;)c=a[d],c&&(c.recording=!1)})})}C.EditorModel.recordingInput=T}function g(){var a=!z.enabled;a?P.classList.add("active"):P.classList.remove("active"),z.enabled=a}function h(a){var b=document.body,c="settings-mode",d=!b.classList.contains(c);d?a.target.classList.add("active"):a.target.classList.remove("active"),b.classList.toggle(c)}function i(a){var b=a.target;switch(a.type){case"focus":E.setSuspended(!0);break;case"blur":E.setSuspended(!1);break;case"change":var c=Math.min(parseInt(b.value,10),C.activeSong.patterns.length);isNaN(c)&&(c=Z+1),b.value=c,--c,c!==Z&&(Z=H.activePattern=c,B.publish(y.PATTERN_SWITCH,c)),u.blur(b)}}function j(){H.activePattern>0&&o(H.activePattern-1)}function k(){var a=C.activeSong.patterns.length-1;H.activePattern<a&&o(H.activePattern+1)}function l(a){var b=C.activeSong.meta,c=b.tempo,d=parseFloat(a.target.value);b.tempo=d,w.updateEventOffsets(C.activeSong.patterns,c/d),B.publishSync(y.TEMPO_UPDATED,[c,d]),da.update()}function m(){for(var a=!(T&&z.countIn&&!z.countInComplete),b=void 0,c=void 0,d=void 0,e=void 0,f=void 0;ba<F.currentTime+U;){if(a)for(f=ba-$,b=ca.length;b--;)for(d=ca[b],c=d.length;c--;)e=d[c],e&&!e.seq.playing&&!e.recording&&e.seq.startMeasure===Z&&f>=e.seq.startMeasureOffset&&f<e.seq.startMeasureOffset+e.seq.length&&p(e,ba,Z,b);z.enabled&&z.play(2,aa,V,ba,F),n()}}function n(){var a=C.activeSong,b=a.patterns.length;if(ba+=60/a.meta.tempo*4/V,++aa===V){if(aa=0,!S&&++Z===b&&(Z=0,T&&!C.EditorModel.loopedRecording))return da.setPlaying(!1),B.publishSync(y.RECORDING_COMPLETE),void 0;da.setPosition(Z,ba),T&&z.countIn&&!z.countInComplete&&(z.enabled=z.restore,z.countInComplete=!0,Z=0,_=F.currentTime),o(Z)}B.publishSync(y.STEP_POSITION_REACHED,[aa,V])}function o(a){if(H.activePattern!==a){Z=H.activePattern=a,B.publishSync(y.PATTERN_SWITCH,a);var b=C.activeSong.patterns[a].steps;H.amountOfSteps!==b&&(H.amountOfSteps=b,B.publish(y.PATTERN_STEPS_UPDATED,b))}}function p(a,b,c,d){a.seq.playing=!0;var e=60/C.activeSong.meta.tempo*W,f=C.activeSong.patterns,g=f[c];g&&(a.seq.mpLength=e/g.steps),D.noteOn(a,C.activeSong.instruments[a.instrument],b);var h=1===a.action,i=Y[d];if(0!==a.action)for(var j=i.head;j;)q(j.data,b),j.remove(),j=i.head;h?i.add(a):q(a,b+a.seq.mpLength)}function q(a,b){if(a.seq.playing){var c=v.createTimer(F,b,function(){a.seq.playing=!1,D.noteOff(a,C.activeSong.instruments[a.instrument]),s(c)});X.push(c)}}function r(){w.resetPlayState(C.activeSong.patterns);for(var a=X.length;a--;)s(X[a]);for(a=0;a<t.INSTRUMENT_AMOUNT;++a)Y[a].flush()}function s(a){a.disconnect(),a.onended=null;var b=X.indexOf(a);-1!==b&&X.splice(b,1)}var t=a("../config/Config"),u=a("../utils/Form"),v=a("../utils/AudioUtil"),w=(a("../utils/EventUtil"),a("../utils/SongUtil")),x=a("../utils/LinkedList"),y=a("../definitions/Messages"),z=a("../components/Metronome"),A=(a("../model/factory/AudioFactory"),a("bowser")),B=a("pubsub-js"),C=void 0,D=void 0,E=void 0,F=void 0,G=void 0,H=void 0,I=void 0,J=void 0,K=void 0,L=void 0,M=void 0,N=void 0,O=void 0,P=void 0,Q=void 0,R=!1,S=!1,T=!1,U=.2,V=64,W=4,X=[],Y=new Array(t.INSTRUMENT_AMOUNT),Z=void 0,$=void 0,_=void 0,aa=void 0,ba=void 0,ca=void 0,da=b.exports={init:function(a,b,n,o){C=b,D=n,E=o,F=n.getContext(),H=C.EditorModel;for(var p=0;p<Y.length;++p)Y[p]=new x;C.TemplateService.render("transport",a,null,!0).then(function(){da.setPosition(0),I=a.querySelector("#playBTN"),J=a.querySelector("#loopBTN"),K=a.querySelector("#recordBTN"),Q=a.querySelector("#songTempoDisplay"),M=a.querySelector("#songTempo"),P=a.querySelector(".icon-metronome"),L=a.querySelector(".icon-settings"),N=document.querySelector("#currentPattern .current"),O=document.querySelector("#currentPattern .total"),I.addEventListener("click",d),J.addEventListener("click",e),K.addEventListener("click",f),M.addEventListener("input",l),P.addEventListener("click",g),L.addEventListener("click",h),N.addEventListener("focus",i),N.addEventListener("change",i),N.addEventListener("blur",i),document.querySelector("#patternBack").addEventListener("click",j),document.querySelector("#patternNext").addEventListener("click",k),A.ios||A.android||K.classList.remove("disabled")}),[y.MIDI_DEVICE_CONNECTED,y.TOGGLE_SEQUENCER_PLAYSTATE,y.TOGGLE_SEQUENCER_LOOP,y.TOGGLE_INPUT_RECORDING,y.SET_SEQUENCER_POSITION,y.PATTERN_AMOUNT_UPDATED,y.PATTERN_SWITCH,y.PATTERN_JUMP_PREV,y.PATTERN_JUMP_NEXT,y.SONG_LOADED].forEach(function(a){return B.subscribe(a,c)}),G=new Worker(window.URL.createObjectURL(new Blob(['(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module \'"+o+"\'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nvar timer, interval = 25, data;\n\n/**\n * SequencerWorker leverages the intervallic polling\n * of the Sequencer events off the main execution thread\n */\nself.addEventListener( "message", function( aEvent )\n{\n    data = aEvent.data;\n\n    if ( data !== undefined )\n    {\n        switch ( data.cmd )\n        {\n            case "start":\n\n                clearInterval( timer );\n\n                timer = setInterval( function() {\n                    postMessage({ cmd: "collect" });\n                }, interval );\n                break;\n\n            case "stop":\n\n                clearInterval( timer );\n                timer = null;\n                break;\n        }\n    }\n}, false );\n\n},{}]},{},[1])'],{type:"text/javascript"}))),G.onmessage=function(a){"collect"===a.data.cmd&&R&&m()}},getPlaying:function(){return R},setPlaying:function(a){R=a;var b=I.classList;R?(T&&z.countIn&&(z.countInComplete=!1,z.enabled=!0),aa=0,da.setPosition(C.EditorModel.activePattern),b.add("icon-stop"),b.remove("icon-play"),G.postMessage({cmd:"start"}),B.publishSync(y.PLAYBACK_STARTED)):(b.add("icon-play"),b.remove("icon-stop"),G.postMessage({cmd:"stop"}),B.publishSync(y.PLAYBACK_STOPPED),T&&f(),r())},setPosition:function(a,b){var c=C.activeSong;a>=c.patterns.length&&(a=c.patterns.length-1),Z!==a&&(aa=0),"number"!=typeof b&&(b=F.currentTime),Z=a,ba=b,$=b,_=b-a*(60/c.meta.tempo)*W,ca=C.activeSong.patterns[Z].channels,0===Z&&Y.forEach(function(a){for(var c=a.head;c;)q(c.data,b),c.remove(),c=a.head})},getPosition:function(){return{measure:Z,step:aa}},update:function(){var a=C.activeSong.meta;requestAnimationFrame(function(){M.value=a.tempo,Q.innerHTML=a.tempo+" BPM",N.value=(H.activePattern+1).toString(),O.innerHTML=C.activeSong.patterns.length.toString()})}}},{"../components/Metronome":38,"../config/Config":40,"../definitions/Messages":65,"../model/factory/AudioFactory":77,"../utils/AudioUtil":103,"../utils/EventUtil":104,"../utils/Form":106,"../utils/LinkedList":108,"../utils/SongUtil":114,bowser:1,"pubsub-js":4}],57:[function(a,b){"use strict";function c(a,b){switch(a){case l.OPEN_SETTINGS_PANEL:d();break;case l.CLOSE_OVERLAYS:e();break;case l.MIDI_RECEIVED_INPUT_DEVICES:i(b)}}function d(){q.classList.add("active"),k.publish(l.SHOW_BLIND);var a=p.SettingsModel.getSetting(m.PROPERTIES.INPUT_FORMAT);null!==a&&j.setSelectedOption(r,a)}function e(){q.classList.remove("active"),k.publishSync(l.HIDE_BLIND)}function f(){p.SettingsModel.saveSetting(m.PROPERTIES.INPUT_FORMAT,j.getSelectedOption(r)),k.publish(l.REFRESH_PATTERN_VIEW)}function g(){k.publish(l.MIDI_CONNECT_TO_INTERFACE)}function h(a){k.publish(l.MIDI_ADD_LISTENER_TO_DEVICE,a.target)}function i(a){for(var b=[],c=void 0,d=void 0,e=0,f=a.length;f>e;++e)d=a[e],c={title:d.manufacturer+" "+d.name,value:e},b.push(c);j.setOptions(s,b),1===b.length&&k.publish(l.MIDI_ADD_LISTENER_TO_DEVICE,0)}{var j=a("../utils/Form"),k=(a("../utils/SongUtil"),a("pubsub-js")),l=a("../definitions/Messages"),m=a("../model/SettingsModel"),n=a("zmidi"),o=n.zMIDI,p=void 0,q=void 0,r=void 0,s=void 0;b.exports={init:function(a,b){p=a,q=document.createElement("div"),q.setAttribute("id","settings"),p.TemplateService.render("settingsView",q).then(function(){b.appendChild(q),r=q.querySelector("#parameterInputFormat"),r.addEventListener("change",f),o.isSupported()&&(q.querySelector("#midiSetup").classList.add("enabled"),q.querySelector("#midiConnect").addEventListener("click",g),s=q.querySelector("#midiDevices"),s.addEventListener("change",h)),q.querySelector(".close-button").addEventListener("click",e)}),[l.OPEN_SETTINGS_PANEL,l.CLOSE_OVERLAYS,l.MIDI_RECEIVED_INPUT_DEVICES].forEach(function(a){return k.subscribe(a,c)})}}}},{"../definitions/Messages":65,"../model/SettingsModel":74,"../utils/Form":106,"../utils/SongUtil":114,"pubsub-js":4,zmidi:37}],58:[function(a,b){"use strict";function c(a,b){switch(a){case k.CLOSE_OVERLAYS:b!==s&&e();break;case k.OPEN_SONG_BROWSER:d()}}function d(){var a=n.SongModel.getSongs(),b=void 0;return p.innerHTML="",0===a.length?(l.publishSync(k.SHOW_ERROR,i.get("ERROR_NO_SONGS")),void 0):(h(),r=new m,a.forEach(function(a){b=document.createElement("li"),b.setAttribute("data-id",a.id),b.innerHTML="<span class='title'>"+a.meta.title+", by "+a.meta.author+"</span><span class='date'>"+j.timestampToDate(a.meta.modified)+"</span><span class='delete'>x</span>",p.appendChild(b),r.addEventListener(b,"click",f),r.addEventListener(b.querySelector(".delete"),"click",g)}),l.publishSync(k.CLOSE_OVERLAYS,s),l.publishSync(k.SHOW_BLIND),o.classList.add("active"),void 0)}function e(){h(),o.classList.remove("active"),l.publishSync(k.HIDE_BLIND)}function f(a){var b=a.target.getAttribute("data-id");l.publishSync(k.LOAD_SONG,b),e()}function g(a){var b=a.target.parentNode.getAttribute("data-id"),c=n.SongModel,d=c.getSongById(b);d&&l.publish(k.CONFIRM,{message:i.get("SONG_DELETE_CONFIRM",d.meta.title),confirm:function(){c.deleteSong(d),l.publishSync(k.OPEN_SONG_BROWSER)},cancel:function(){l.publishSync(k.OPEN_SONG_BROWSER)}})}function h(){r&&(r.dispose(),r=null)}var i=a("../i18n/Copy"),j=a("../utils/Time"),k=a("../definitions/Messages"),l=a("pubsub-js"),m=a("zjslib").EventHandler,n=void 0,o=void 0,p=void 0,q=void 0,r=void 0,s=b.exports={init:function(a,b){n=b,n.TemplateService.renderAsElement("songBrowser").then(function(b){a.appendChild(b),o=a.querySelector("#songBrowser"),p=o.querySelector(".songList"),q=o.querySelector(".close-button"),q.addEventListener("click",e)}),[k.CLOSE_OVERLAYS,k.OPEN_SONG_BROWSER].forEach(function(a){return l.subscribe(a,c)})}}},{"../definitions/Messages":65,"../i18n/Copy":69,"../utils/Time":116,"pubsub-js":4,zjslib:32}],59:[function(a,b){"use strict";function c(a){switch(a){case i.SHOW_BLIND:document.body.classList.add("blind");break;case i.HIDE_BLIND:document.body.classList.remove("blind");break;case i.OVERLAY_OPENED:document.body.classList.add("has-overlay");break;case i.CLOSE_OVERLAYS:document.body.classList.remove("has-overlay"),document.body.classList.remove("blind");break;case i.SHOW_LOADER:1!==++q||o||(k.publish(i.SHOW_BLIND),efflux.TemplateService.renderAsElement("loader").then(function(a){o=a,document.body.appendChild(o)}));break;case i.HIDE_LOADER:q=Math.max(0,q-1),0===q&&o&&(k.publish(i.HIDE_BLIND),o.parentNode.removeChild(o),o=null)}}function d(a){switch(a.type){case"resize":k.publish(i.WINDOW_RESIZED),f();break;case"scroll":p||(p=!0,requestAnimationFrame(function(){k.publish(i.WINDOW_SCROLLED),p=!1}))}}function e(){return h.get("WARNING_UNLOAD")}function f(){r=r||document.querySelector("#properties"),s=s||document.querySelector("#editor"),s.style.width=j.getStyle(r,"width")}var g=a("../config/Config"),h=a("../i18n/Copy"),i=a("../definitions/Messages"),j=a("zjslib").Style,k=a("pubsub-js"),l=a("bowser"),m=a("../utils/ListenerUtil"),n=void 0,o=void 0,p=!1,q=0,r=void 0,s=void 0;b.exports={init:function(){if(n=document.querySelector("#blind"),window.addEventListener("resize",d),m.listen(window,"scroll",d),!g.isDevMode())if(l.ios)window.addEventListener("popstate",e);else if("undefined"!=typeof window.onbeforeunload){var a=window.onbeforeunload;window.onbeforeunload=function(b){return a&&a(b),e(b)}}[i.SHOW_BLIND,i.HIDE_BLIND,i.SHOW_LOADER,i.HIDE_LOADER,i.OVERLAY_OPENED,i.CLOSE_OVERLAYS].forEach(function(a){return k.subscribe(a,c)}),f()}}},{"../config/Config":40,"../definitions/Messages":65,"../i18n/Copy":69,"../utils/ListenerUtil":109,bowser:1,"pubsub-js":4,zjslib:32}],60:[function(a,b){"use strict";var c=a("../../config/Config"),d=a("../../definitions/Messages"),e=a("pubsub-js"),f=void 0,g=void 0,h=48,i=void 0;b.exports={init:function(a){f=a,g=f.EditorModel,i=h+(c.INSTRUMENT_AMOUNT-1)},setInstrument:function(a){if(a>=h&&i>=a){var b=f.activeSong.patterns[g.activePattern].channels[g.activeInstrument][g.activeStep];b&&(b.instrument=a-h,e.publish(d.REFRESH_PATTERN_VIEW))}}}},{"../../config/Config":40,"../../definitions/Messages":65,"pubsub-js":4}],61:[function(a,b){"use strict";function c(a){switch(a){default:case 68:return k;case 70:return l;case 80:return m;case 86:return n}}function d(a){var b=void 0;switch(a.charAt(0)){case"D":b=k;break;case"F":b=l;break;case"P":b=m;break;case"V":b=n}if(b)for(var c=0;c<b.length;++c){var d=b[c],e=d.charAt(0).toUpperCase();if(e+=d.match(/([A-Z]?[^A-Z]*)/g)[1].charAt(0),e.substr(0,2)===a)return d}return p}function e(a){var b=i.activeSong.patterns[j.activePattern].channels[j.activeInstrument][j.activeStep];return b||a!==!0||(b=f.createAudioEvent(),b.instrument=j.activeInstrument,h.publish(g.ADD_EVENT_AT_POSITION,[b,{patternIndex:j.activePattern,channelIndex:j.activeInstrument,step:j.activeStep,newEvent:!0,advanceOnAddition:!1}])),b}var f=a("../../model/factory/EventFactory"),g=a("../../definitions/Messages"),h=a("pubsub-js"),i=void 0,j=void 0,k=["delayEnabled","delayTime","delayFeedback","delayCutoff","delayOffset"],l=["filterEnabled","filterFreq","filterQ","filterLFOEnabled","filterLFOSpeed","filterLFODepth"],m=["pitchUp","pitchDown"],n=["volume"],o=!1,p=void 0,q="",r=0,s=b.exports={init:function(a){i=a,j=i.EditorModel},handleParam:function(a){var b=Date.now(),c=r;r=b;var i=e(),j=!i;!j&&i.mp&&(o=i.mp.glide);var k=String.fromCharCode(a>=96&&105>=a?a-48:a);if(k&&k.match(/^[a-z0-9]+$/i)){var l=500>b-c?q+k:k;if(q=k,2===l.length)p=d(l,p);else switch(a){case 68:case 70:case 80:case 86:p=s.getNextSelectedModule(a,p);break;case 71:i&&i.mp&&(o=i.mp.glide),o=!o;break;default:return}j&&(i=e(!0)),i.mp=f.createModuleParam(!p&&i&&i.mp?i.mp.module:p,i&&i.mp?i.mp.value:50,o),h.publish(g.REFRESH_PATTERN_VIEW)}},getNextSelectedModule:function(a,b){for(var d=c(a),e=0,f=d.length,g=f-1;f>e;++e)if(d[e]===b){if(g>e)return d[e+1];break}return d[0]}}},{"../../definitions/Messages":65,"../../model/factory/EventFactory":78,"pubsub-js":4}],62:[function(a,b){"use strict";function c(a){for(var b=void 0;!b||!b.mp;){if(0>=a)return null;b=g.getFirstEventBeforeStep(k.activeSong.patterns[l.activePattern].channels[l.activeInstrument],a),a=b?a-1:0}return b}function d(a){var b=k.activeSong.patterns[l.activePattern].channels[l.activeInstrument][l.activeStep];return b||a!==!0||(b=f.createAudioEvent(),b.instrument=l.activeInstrument,j.publish(i.ADD_EVENT_AT_POSITION,[b,{patternIndex:l.activePattern,channelIndex:l.activeInstrument,step:l.activeStep,newEvent:!0,advanceOnAddition:!1}])),b}var e=a("../../model/SettingsModel"),f=a("../../model/factory/EventFactory"),g=a("../../utils/EventUtil"),h=a("../../utils/NumberUtil"),i=a("../../definitions/Messages"),j=a("pubsub-js"),k=void 0,l=void 0,m="",n=0;b.exports={init:function(a){k=a,l=k.EditorModel},handleParam:function(a){var b=Date.now(),g=n;n=b;var o=String.fromCharCode(a>=96&&105>=a?a-48:a);if(o&&o.match(/^[a-z0-9]+$/i)){var p=500>b-g?m+o:"0"+o;switch(m=o,k.SettingsModel.getSetting(e.PROPERTIES.INPUT_FORMAT)){default:case"hex":if(!h.isHex(p))return;p=h.fromHex(p);break;case"pct":if(p=parseFloat(p),isNaN(p)||0>p||p>100)return}var q=d(!0);if(!q.mp){var r=c(l.activeStep);q.mp=f.createModuleParam(r&&r.mp?r.mp.module:"volume",50,!1)}q.mp.value=p,j.publish(i.REFRESH_PATTERN_VIEW)}}}},{"../../definitions/Messages":65,"../../model/SettingsModel":74,"../../model/factory/EventFactory":78,"../../utils/EventUtil":104,"../../utils/NumberUtil":111,"pubsub-js":4}],63:[function(a,b){"use strict";function c(a){var b=h.indexOf(a),c=i.indexOf(a),d=void 0,e=void 0;if(b>-1)d=j[b],e=f.higherKeyboardOctave;else{if(!(c>-1))return null;d=j[c],e=f.lowerKeyboardOctave}return{note:d,octave:e}}var d=a("../../utils/InstrumentUtil"),e=void 0,f=void 0,g=void 0,h=[81,50,87,51,69,82,53,84,54,89,55,85,73,57,79,48,80],i=[90,83,88,68,67,86,71,66,72,78,74,77,188,76,190,186,191],j=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C","C#","D","D#","E"];b.exports={init:function(a,b){e=a,f=a.EditorModel,g=b},createNoteOnEvent:function(a){var b=c(a);null!==b&&d.noteOn(b,e.activeSong.instruments[f.activeInstrument],f.recordingInput,g)},createNoteOffEvent:function(a){var b=c(a);null!==b&&d.noteOff(b,g)}}},{"../../utils/InstrumentUtil":107}],64:[function(a,b){"use strict";var c="https://www.igorski.nl/efflux/help";b.exports={ONLINE_MANUAL:c,PARAM_ENTRY_HELP:c+"/automation",NOTE_ENTRY_HELP:c+"/note-entry",INSTRUMENT_EDITOR_HELP:c+"/instrument-editor"}},{}],65:[function(a,b){"use strict";b.exports={SHOW_ERROR:"SYSER",SHOW_FEEDBACK:"SYSFB",SHOW_DIALOG:"SYSDL",CONFIRM:"SYSCF",SHOW_LOADER:"SYSSL",HIDE_LOADER:"SYSHL",SHOW_BLIND:"SYSSB",HIDE_BLIND:"SYSHB",WINDOW_SCROLLED:"SYS:2",WINDOW_RESIZED:"SYS:3",DISPLAY_HELP:"UI:0",CLOSE_OVERLAYS:"UI:1",OVERLAY_OPENED:"UI:2",TOGGLE_INSTRUMENT_EDITOR:"UI:3",SET_CUSTOM_WAVEFORM:"UI:4",OPEN_SONG_BROWSER:"UI:5",OPEN_SETTINGS_PANEL:"UI:6",OPEN_NOTE_ENTRY_PANEL:"UI:7",OPEN_MODULE_PARAM_PANEL:"UI:8",HIGHLIGHT_ACTIVE_STEP:"UI:9",OPEN_ADVANCED_PATTERN_EDITOR:"UI:10",MENU_INITIALIZED:"UI:MI",HELP_SECTION_UPDATED:"UI:11",HIGHLIGHTED_SLOT_CHANGED:"UI:12",HANDLE_KEYBOARD_MOVEMENT:"UI:13",VALIDATE_AND_GET_SONG:"SNGVG",LOAD_SONG:"SNGLD",TRANSFORM_LEGACY_SONG:"SNGTF",SONG_LOADED:"SNG:0",SAVE_SONG:"SNGSV",SONG_IMPORTED:"SNG:1",SONG_EXPORTED:"SNG:2",REFRESH_SONG:"SNG:3",REFRESH_PATTERN_VIEW:"SNG:4",PATTERN_STEPS_UPDATED:"SNG:5",CREATE_LINKED_LISTS:"SNG:6",APPLY_INSTRUMENT_MODULES:"SNG:7",TOGGLE_SEQUENCER_PLAYSTATE:"SEQ:0",TOGGLE_SEQUENCER_LOOP:"SEQ:1",PLAYBACK_STARTED:"SEQ:2",PLAYBACK_STOPPED:"SEQ:3",SET_SEQUENCER_POSITION:"SEQ:4",RECORDING_COMPLETE:"SEQ:5",TEMPO_UPDATED:"SEQ:6",STEP_POSITION_REACHED:"SEQ:7",TOGGLE_OUTPUT_RECORDING:"SEQ:8",TOGGLE_INPUT_RECORDING:"SEQ:9",NOTE_ON:"SEQ:10",NOTE_OFF:"SEQ:11",PATTERN_SWITCH:"SEQ:12",PATTERN_AMOUNT_UPDATED:"SEQ:13",PATTERN_JUMP_PREV:"SEQ:14",PATTERN_JUMP_NEXT:"SEQ:15",ADJUST_OSCILLATOR_TUNING:"ED:0",ADJUST_OSCILLATOR_VOLUME:"ED:1",ADJUST_OSCILLATOR_WAVEFORM:"ED:2",ADJUST_INSTRUMENT_VOLUME:"ED:3",UPDATE_FILTER_SETTINGS:"ED:4",UPDATE_DELAY_SETTINGS:"ED:5",UPDATE_EQ_SETTINGS:"ED:6",UPDATE_OVERDRIVE_SETTINGS:"ED:7",EDIT_NOTE_AT_POSITION:"ED:8",ADD_EVENT_AT_POSITION:"ED:9",ADD_OFF_AT_POSITION:"ED:10",REMOVE_NOTE_AT_POSITION:"ED:11",REMOVE_PARAM_AUTOMATION_AT_POSITION:"ED:12",GLIDE_PARAM_AUTOMATIONS:"ED:13",SAVE_STATE:"ED:14",EDIT_MOD_PARAMS_FOR_STEP:"ED:15",EDIT_NOTE_FOR_STEP:"ED:16",MIDI_CONNECT_TO_INTERFACE:"MID:0",MIDI_ADD_LISTENER_TO_DEVICE:"MID:1",MIDI_RECEIVED_INPUT_DEVICES:"MID:2",MIDI_DEVICE_CONNECTED:"MID:3"}},{}],66:[function(a,b){"use strict";var c=b.exports={OCTAVE_SCALE:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],OCTAVE:[261.626,277.183,293.665,311.127,329.628,349.228,369.994,391.995,415.305,440,466.164,493.883],getFrequency:function(a,b){var d=void 0,e=0,f=a.indexOf("b");if(f>-1&&(a=a.substr(f-1,1),e=-1),f=a.indexOf("#"),f>-1&&(a=a.substr(f-1,1),e=1),d=c.getOctaveIndex(a,e),4===b)return d;var g=b-4,h=Math.abs(g);for(f=0;h>f;++f)d*=g>0?2:.5;return d},getPitchByFrequency:function(a){var b=void 0,c=(Math.log(a)-Math.log(261.626))/Math.log(2)+4,d=0|c,e=1200*(c-d),f="C C#D D#E F F#G G#A A#B",g=50,h=2;if(50>e)b="C ";else if(e>=1150)b="C ",e-=1200,++d;else for(var i=1;11>=i;++i){if(e>=g&&g+100>e){b=f.charAt(h)+f.charAt(h+1),e-=100*i;break}g+=100,h+=2}return{note:b,octave:d,cents:e}},getOctaveIndex:function(a,b){"number"!=typeof b&&(b=0);for(var d=c.OCTAVE,e=c.OCTAVE_SCALE,f=0,g=d.length;g>f;++f)if(e[f]===a){var h=f+b;return h>g?d[0]:0>h?d[d.length-1]:d[h]}return 0/0}}},{}],67:[function(a,b){"use strict";b.exports={ADD_EVENT:"S:0",DELETE_EVENT:"S:1",DELETE_MODULE_AUTOMATION:"S:2",CUT_SELECTION:"S:3",PASTE_SELECTION:"S:4"}},{}],68:[function(a,b){"use strict";b.exports={SAW:{real:[0,0,-.282095,0,-.199471,0,-.162868,0,-.141047,0,-.126157,0,-.115165,0,-.106622,0,-.099736,0,-.094032,0,-.089206,0,-.085055,0,-.081434,0,-.078239,0,-.075393,0,-.072837,0,-.070524,0,-.068418,0,-.06649,0,-.064717,0,-.063078,0,-.061558,0,-.060143,0,-.058821,0,-.057582,0,-.056419,0,-.055323,0,-.054289,0,-.053311,0,-.052384,0,-.051503,0,-.050666,0,-.049868,0,-.049106,0,-.048379,0,-.047683,0,-.047016,0,-.046376,0,-.045762,0,-.045171,0,-.044603,0,-.044056,0,-.043528,0,-.043019,0,-.042527,0,-.042052,0,-.041593,0,-.041148,0,-.040717,0,-.040299,0,-.039894,0,-.039501,0,-.03912,0,-.038749,0,-.038388,0,-.038038,0,-.037697,0,-.037364,0,-.037041,0,-.036726,0,-.036418,0,-.036119,0,-.035826,0,-.035541,0,-.035262,0,-.03499,0,-.034723,0,-.034463,0,-.034209,0,-.03396,0,-.033717,0,-.033478,0,-.033245,0,-.033017,0,-.032793,0,-.032574,0,-.032358,0,-.032148,0,-.031941,0,-.031738,0,-.031539,0,-.031344,0,-.031152,0,-.030964,0,-.030779,0,-.030597,0,-.030419,0,-.030244,0,-.030071,0,-.029902,0,-.029735,0,-.029572,0,-.02941,0,-.029252,0,-.029096,0,-.028942,0,-.028791,0,-.028642,0,-.028496,0,-.028352,0,-.028209,0,-.028069,0,-.027932,0,-.027796,0,-.027662,0,-.02753,0,-.027399,0,-.027271,0,-.027145,0,-.02702,0,-.026897,0,-.026775,0,-.026655,0,-.026537,0,-.026421,0,-.026305,0,-.026192,0,-.02608,0,-.025969,0,-.02586,0,-.025752,0,-.025645,0,-.02554,0,-.025436,0,-.025333,0,-.025231,0,-.025131,0,-.025032,0,-.024934,0,-.024837,0,-.024741,0,-.024647,0,-.024553,0,-.024461,0,-.024369,0,-.024279,0,-.024189,0,-.024101,0,-.024014,0,-.023927,0,-.023841,0,-.023757,0,-.023673,0,-.02359,0,-.023508,0,-.023427,0,-.023346,0,-.023267,0,-.023188,0,-.02311,0,-.023033,0,-.022957,0,-.022881,0,-.022806,0,-.022732,0,-.022658,0,-.022586,0,-.022514,0,-.022442,0,-.022372,0,-.022302,0,-.022232,0,-.022163,0,-.022095,0,-.022028,0,-.021961,0,-.021895,0,-.021829,0,-.021764,0,-.0217,0,-.021636,0,-.021572,0,-.02151,0,-.021447,0,-.021386,0,-.021324,0,-.021264,0,-.021204,0,-.021144,0,-.021085,0,-.021026,0,-.020968,0,-.02091,0,-.020853,0,-.020796,0,-.02074,0,-.020684,0,-.020629,0,-.020574,0,-.020519,0,-.020465,0,-.020412,0,-.020358,0,-.020306,0,-.020253,0,-.020201,0,-.02015,0,-.020098,0,-.020048,0,-.019997,0,-.019947,0,-.019897,0,-.019848,0,-.019799,0,-.019751,0,-.019702,0,-.019654,0,-.019607,0,-.01956,0,-.019513,0,-.019466,0,-.01942,0,-.019374,0,-.019329,0,-.019284,0,-.019239,0,-.019194,0,-.01915,0,-.019106,0,-.019062,0,-.019019,0,-.018976,0,-.018933,0,-.01889,0,-.018848,0,-.018806,0,-.018765,0,-.018723,0,-.018682,0,-.018641,0,-.018601,0,-.01856,0,-.01852,0,-.018481,0,-.018441,0,-.018402,0,-.018363,0,-.018324,0,-.018285,0,-.018247,0,-.018209,0,-.018171,0,-.018134,0,-.018096,0,-.018059,0,-.018022,0,-.017986,0,-.017949,0,-.017913,0,-.017877,0,-.017841,0,-.017806,0,-.01777,0,-.017735,0,-.0177,0,-.017665,0,-.017631,0,-.017597,0,-.017562,0,-.017529,0,-.017495,0,-.017461,0,-.017428,0,-.017395,0,-.017362,0,-.017329,0,-.017296,0,-.017264,0,-.017232,0,-.0172,0,-.017168,0,-.017136,0,-.017105,0,-.017073,0,-.017042,0,-.017011,0,-.01698,0,-.016949,0,-.016919,0,-.016889,0,-.016858,0,-.016828,0,-.016798,0,-.016769,0,-.016739,0,-.01671,0,-.016681,0,-.016652,0,-.016623,0,-.016594,0,-.016565,0,-.016537,0,-.016508,0,-.01648,0,-.016452,0,-.016424,0,-.016396,0,-.016369,0,-.016341,0,-.016314,0,-.016287,0,-.01626,0,-.016233,0,-.016206,0,-.016179,0,-.016153,0,-.016126,0,-.0161,0,-.016074,0,-.016048,0,-.016022,0,-.015996,0,-.01597,0,-.015945,0,-.01592,0,-.015894,0,-.015869,0,-.015844,0,-.015819,0,-.015794,0,-.01577,0,-.015745,0,-.015721,0,-.015696,0,-.015672,0,-.015648,0,-.015624,0,-.0156,0,-.015576,0,-.015552,0,-.015529,0,-.015505,0,-.015482,0,-.015459,0,-.015436,0,-.015412,0,-.01539,0,-.015367,0,-.015344,0,-.015321,0,-.015299,0,-.015276,0,-.015254,0,-.015232,0,-.01521,0,-.015187,0,-.015166,0,-.015144,0,-.015122,0,-.0151,0,-.015079,0,-.015057,0,-.015036,0,-.015014,0,-.014993,0,-.014972,0,-.014951,0,-.01493,0,-.014909,0,-.014888,0,-.014868,0,-.014847,0,-.014827,0,-.014806,0,-.014786,0,-.014766,0,-.014745,0,-.014725,0,-.014705,0,-.014685,0,-.014665,0,-.014646,0,-.014626,0,-.014606,0,-.014587,0,-.014567,0,-.014548,0,-.014529,0,-.014509,0,-.01449,0,-.014471,0,-.014452,0,-.014433,0,-.014414,0,-.014396,0,-.014377,0,-.014358,0,-.01434,0,-.014321,0,-.014303,0,-.014284,0,-.014266,0,-.014248,0,-.01423,0,-.014212,0,-.014194,0,-.014176,0,-.014158,0,-.01414,0,-.014122,0,-.014105,0,-.014087,0,-.01407,0,-.014052,0,-.014035,0,-.014017,0,-.014,0,-.013983,0,-.013966,0,-.013949,0,-.013932,0,-.013915,0,-.013898,0,-.013881,0,-.013864,0,-.013847,0,-.013831,0,-.013814,0,-.013798,0,-.013781,0,-.013765,0,-.013748,0,-.013732,0,-.013716,0,-.0137,0,-.013684,0,-.013668,0,-.013652,0,-.013636,0,-.01362,0,-.013604,0,-.013588,0,-.013572,0,-.013557,0,-.013541,0,-.013525,0,-.01351,0,-.013494,0,-.013479,0,-.013464,0,-.013448,0,-.013433,0,-.013418,0,-.013403,0,-.013388,0,-.013373,0,-.013358,0,-.013343,0,-.013328,0,-.013313,0,-.013298,0,-.013283,0,-.013269,0,-.013254,0,-.013239,0,-.013225,0,-.01321,0,-.013196,0,-.013181,0,-.013167,0,-.013153,0,-.013138,0,-.013124,0,-.01311,0,-.013096,0,-.013082,0,-.013068,0,-.013054,0,-.01304,0,-.013026,0,-.013012,0,-.012998,0,-.012984,0,-.012971,0,-.012957,0,-.012943,0,-.01293,0,-.012916,0,-.012903,0,-.012889,0,-.012876,0,-.012862,0,-.012849,0,-.012836,0,-.012822,0,-.012809,0,-.012796,0,-.012783,0,-.01277,0,-.012757,0,-.012744,0,-.012731,0,-.012718,0,-.012705,0,-.012692,0,-.012679,0,-.012666,0,-.012654,0,-.012641,0,-.012628,0,-.012616,0,-.012603,0,-.012591,0,-.012578,0,-.012566,0,-.012553,0,-.012541,0,-.012528,0,-.012516,0,-.012504,0,-.012491,0,-.012479,0,-.012467,0,-.012455,0,-.012443,0,-.012431,0,-.012419,0,-.012407,0,-.012395,0,-.012383,0,-.012371,0,-.012359,0,-.012347,0,-.012335,0,-.012323,0,-.012312,0,-.0123,0,-.012288,0,-.012277,0,-.012265,0,-.012253,0,-.012242,0,-.01223,0,-.012219,0,-.012207,0,-.012196,0,-.012185,0,-.012173,0,-.012162,0,-.012151,0,-.012139,0,-.012128,0,-.012117,0,-.012106,0,-.012095,0,-.012084,0,-.012073,0,-.012062,0,-.01205,0,-.01204,0,-.012029,0,-.012018,0,-.012007,0,-.011996,0,-.011985,0,-.011974,0,-.011963,0,-.011953,0,-.011942,0,-.011931,0,-.011921,0,-.01191,0,-.011899,0,-.011889,0,-.011878,0,-.011868,0,-.011857,0,-.011847,0,-.011836,0,-.011826,0,-.011816,0,-.011805,0,-.011795,0,-.011785,0,-.011774,0,-.011764,0,-.011754,0,-.011744,0,-.011734,0,-.011723,0,-.011713,0,-.011703,0,-.011693,0,-.011683,0,-.011673,0,-.011663,0,-.011653,0,-.011643,0,-.011633,0,-.011624,0,-.011614,0,-.011604,0,-.011594,0,-.011584,0,-.011574,0,-.011565,0,-.011555,0,-.011545,0,-.011536,0,-.011526,0,-.011516,0,-.011507,0,-.011497,0,-.011488,0,-.011478,0,-.011469,0,-.011459,0,-.01145,0,-.01144,0,-.011431,0,-.011422,0,-.011412,0,-.011403,0,-.011394,0,-.011384,0,-.011375,0,-.011366,0,-.011357,0,-.011348,0,-.011338,0,-.011329,0,-.01132,0,-.011311,0,-.011302,0,-.011293,0,-.011284,0,-.011275,0,-.011266,0,-.011257,0,-.011248,0,-.011239,0,-.01123,0,-.011221,0,-.011212,0,-.011203,0,-.011195,0,-.011186,0,-.011177,0,-.011168,0,-.011159,0,-.011151,0,-.011142,0,-.011133,0,-.011125,0,-.011116,0,-.011107,0,-.011099,0,-.01109,0,-.011082,0,-.011073,0,-.011065,0,-.011056,0,-.011048,0,-.011039,0,-.011031,0,-.011022,0,-.011014,0,-.011006,0,-.010997,0,-.010989,0,-.010981,0,-.010972,0,-.010964,0,-.010956,0,-.010947,0,-.010939,0,-.010931,0,-.010923,0,-.010915,0,-.010906,0,-.010898,0,-.01089,0,-.010882,0,-.010874,0,-.010866,0,-.010858,0,-.01085,0,-.010842,0,-.010834,0,-.010826,0,-.010818,0,-.01081,0,-.010802,0,-.010794,0,-.010786,0,-.010778,0,-.01077,0,-.010763,0,-.010755,0,-.010747,0,-.010739,0,-.010731,0,-.010724,0,-.010716,0,-.010708,0,-.0107,0,-.010693,0,-.010685,0,-.010677,0,-.01067,0,-.010662,0,-.010655,0,-.010647,0,-.010639,0,-.010632,0,-.010624,0,-.010617,0,-.010609,0,-.010602,0,-.010594,0,-.010587,0,-.010579,0,-.010572,0,-.010565,0,-.010557,0,-.01055,0,-.010542,0,-.010535,0,-.010528,0,-.01052,0,-.010513,0,-.010506,0,-.010498,0,-.010491,0,-.010484,0,-.010477,0,-.01047,0,-.010462,0,-.010455,0,-.010448,0,-.010441,0,-.010434,0,-.010427,0,-.010419,0,-.010412,0,-.010405,0,-.010398,0,-.010391,0,-.010384,0,-.010377,0,-.01037,0,-.010363,0,-.010356,0,-.010349,0,-.010342,0,-.010335,0,-.010328,0,-.010321,0,-.010314,0,-.010308,0,-.010301,0,-.010294,0,-.010287,0,-.01028,0,-.010273,0,-.010266,0,-.01026,0,-.010253,0,-.010246,0,-.010239,0,-.010233,0,-.010226,0,-.010219,0,-.010213,0,-.010206,0,-.010199,0,-.010192,0,-.010186,0,-.010179,0,-.010173,0,-.010166,0,-.010159,0,-.010153,0,-.010146,0,-.01014,0,-.010133,0,-.010127,0,-.01012,0,-.010114,0,-.010107,0,-.010101,0,-.010094,0,-.010088,0,-.010081,0,-.010075,0,-.010068,0,-.010062,0,-.010056,0,-.010049,0,-.010043,0,-.010036,0,-.01003,0,-.010024,0,-.010017,0,-.010011,0,-.010005,0,-.009999,0,-.009992,0,-.009986,0,-.00998,0,-.009974,0,-.009967,0,-.009961,0,-.009955,0,-.009949,0,-.009943,0,-.009936,0,-.00993,0,-.009924,0,-.009918,0,-.009912,0,-.009906,0,-.0099,0,-.009893,0,-.009887,0,-.009881,0,-.009875,0,-.009869,0,-.009863,0,-.009857,0,-.009851,0,-.009845,0,-.009839,0,-.009833,0,-.009827,0,-.009821,0,-.009815,0,-.009809,0,-.009803,0,-.009798,0,-.009792,0,-.009786,0,-.00978,0,-.009774,0,-.009768,0,-.009762,0,-.009756,0,-.009751,0,-.009745,0,-.009739,0,-.009733,0,-.009727,0,-.009722,0,-.009716,0,-.00971,0,-.009704,0,-.009699,0,-.009693,0,-.009687,0,-.009681,0,-.009676,0,-.00967,0,-.009664,0,-.009659,0,-.009653,0,-.009647,0,-.009642,0,-.009636,0,-.009631,0,-.009625,0,-.009619,0,-.009614,0,-.009608,0,-.009603,0,-.009597,0,-.009592,0,-.009586,0,-.00958,0,-.009575,0,-.009569,0,-.009564,0,-.009558,0,-.009553,0,-.009547,0,-.009542,0,-.009537,0,-.009531,0,-.009526,0,-.00952,0,-.009515,0,-.009509,0,-.009504,0,-.009499,0,-.009493,0,-.009488,0,-.009483,0,-.009477,0,-.009472,0,-.009466,0,-.009461,0,-.009456,0,-.009451,0,-.009445,0,-.00944,0,-.009435,0,-.009429,0,-.009424,0,-.009419,0,-.009414,0,-.009408,0,-.009403,0,-.009398,0,-.009393,0,-.009388,0,-.009382,0,-.009377,0,-.009372,0,-.009367,0,-.009362,0,-.009356,0,-.009351,0,-.009346,0,-.009341,0,-.009336,0,-.009331,0,-.009326,0,-.009321,0,-.009316,0,-.009311,0,-.009305,0,-.0093,0,-.009295,0,-.00929,0,-.009285,0,-.00928,0,-.009275,0,-.00927,0,-.009265,0,-.00926,0,-.009255,0,-.00925,0,-.009245,0,-.00924,0,-.009235,0,-.00923,0,-.009225,0,-.009221,0,-.009216,0,-.009211,0,-.009206,0,-.009201,0,-.009196,0,-.009191,0,-.009186,0,-.009181,0,-.009177,0,-.009172,0,-.009167,0,-.009162,0,-.009157,0,-.009152,0,-.009148,0,-.009143,0,-.009138,0,-.009133,0,-.009128,0,-.009124,0,-.009119,0,-.009114,0,-.009109,0,-.009105,0,-.0091,0,-.009095,0,-.00909,0,-.009086,0,-.009081,0,-.009076,0,-.009072,0,-.009067,0,-.009062,0,-.009058,0,-.009053,0,-.009048,0,-.009044,0,-.009039,0,-.009034,0,-.00903,0,-.009025,0,-.00902,0,-.009016,0,-.009011,0,-.009007,0,-.009002,0,-.008997,0,-.008993,0,-.008988,0,-.008984,0,-.008979,0,-.008975,0,-.00897,0,-.008966,0,-.008961,0,-.008957,0,-.008952,0,-.008948,0,-.008943,0,-.008939,0,-.008934,0,-.00893,0,-.008925,0,-.008921,0,-.008916,0,-.008912,0,-.008907,0,-.008903,0,-.008898,0,-.008894,0,-.00889,0,-.008885,0,-.008881,0,-.008876,0,-.008872,0,-.008868,0,-.008863,0,-.008859,0,-.008854,0,-.00885,0,-.008846,0,-.008841,0,-.008837,0,-.008833,0,-.008828,0,-.008824,0,-.00882,0],
imag:[0,.398942,-0,.230329,-0,.178412,-0,.150786,-0,.132981,-0,.120286,-0,.110647,-0,.103006,-0,.096758,-0,.091524,-0,.087056,-0,.083185,-0,.079788,-0,.076776,-0,.074082,-0,.071652,-0,.069447,-0,.067434,-0,.065586,-0,.063882,-0,.062304,-0,.060838,-0,.059471,-0,.058192,-0,.056992,-0,.055863,-0,.054799,-0,.053793,-0,.052841,-0,.051938,-0,.051079,-0,.050262,-0,.049483,-0,.048739,-0,.048027,-0,.047346,-0,.046693,-0,.046066,-0,.045464,-0,.044885,-0,.044327,-0,.04379,-0,.043271,-0,.042771,-0,.042288,-0,.041821,-0,.041368,-0,.040931,-0,.040506,-0,.040095,-0,.039696,-0,.039309,-0,.038933,-0,.038567,-0,.038212,-0,.037866,-0,.037529,-0,.037202,-0,.036882,-0,.036571,-0,.036267,-0,.035971,-0,.035682,-0,.0354,-0,.035125,-0,.034856,-0,.034593,-0,.034335,-0,.034084,-0,.033838,-0,.033597,-0,.033361,-0,.03313,-0,.032904,-0,.032683,-0,.032465,-0,.032253,-0,.032044,-0,.031839,-0,.031638,-0,.031441,-0,.031248,-0,.031058,-0,.030871,-0,.030688,-0,.030508,-0,.030331,-0,.030157,-0,.029986,-0,.029818,-0,.029653,-0,.029491,-0,.029331,-0,.029174,-0,.029019,-0,.028866,-0,.028716,-0,.028569,-0,.028423,-0,.02828,-0,.028139,-0,.028,-0,.027863,-0,.027728,-0,.027595,-0,.027464,-0,.027335,-0,.027208,-0,.027082,-0,.026958,-0,.026836,-0,.026715,-0,.026596,-0,.026479,-0,.026363,-0,.026248,-0,.026136,-0,.026024,-0,.025914,-0,.025805,-0,.025698,-0,.025592,-0,.025487,-0,.025384,-0,.025282,-0,.025181,-0,.025081,-0,.024983,-0,.024885,-0,.024789,-0,.024694,-0,.0246,-0,.024507,-0,.024415,-0,.024324,-0,.024234,-0,.024145,-0,.024057,-0,.02397,-0,.023884,-0,.023799,-0,.023715,-0,.023631,-0,.023549,-0,.023467,-0,.023386,-0,.023306,-0,.023227,-0,.023149,-0,.023071,-0,.022995,-0,.022919,-0,.022843,-0,.022769,-0,.022695,-0,.022622,-0,.02255,-0,.022478,-0,.022407,-0,.022336,-0,.022267,-0,.022198,-0,.022129,-0,.022062,-0,.021994,-0,.021928,-0,.021862,-0,.021797,-0,.021732,-0,.021668,-0,.021604,-0,.021541,-0,.021478,-0,.021416,-0,.021355,-0,.021294,-0,.021234,-0,.021174,-0,.021114,-0,.021055,-0,.020997,-0,.020939,-0,.020882,-0,.020825,-0,.020768,-0,.020712,-0,.020656,-0,.020601,-0,.020547,-0,.020492,-0,.020438,-0,.020385,-0,.020332,-0,.020279,-0,.020227,-0,.020175,-0,.020124,-0,.020073,-0,.020022,-0,.019972,-0,.019922,-0,.019873,-0,.019824,-0,.019775,-0,.019726,-0,.019678,-0,.019631,-0,.019583,-0,.019536,-0,.01949,-0,.019443,-0,.019397,-0,.019352,-0,.019306,-0,.019261,-0,.019216,-0,.019172,-0,.019128,-0,.019084,-0,.01904,-0,.018997,-0,.018954,-0,.018912,-0,.018869,-0,.018827,-0,.018785,-0,.018744,-0,.018703,-0,.018662,-0,.018621,-0,.018581,-0,.01854,-0,.018501,-0,.018461,-0,.018421,-0,.018382,-0,.018343,-0,.018305,-0,.018266,-0,.018228,-0,.01819,-0,.018153,-0,.018115,-0,.018078,-0,.018041,-0,.018004,-0,.017967,-0,.017931,-0,.017895,-0,.017859,-0,.017823,-0,.017788,-0,.017753,-0,.017718,-0,.017683,-0,.017648,-0,.017614,-0,.017579,-0,.017545,-0,.017512,-0,.017478,-0,.017445,-0,.017411,-0,.017378,-0,.017345,-0,.017313,-0,.01728,-0,.017248,-0,.017216,-0,.017184,-0,.017152,-0,.01712,-0,.017089,-0,.017058,-0,.017026,-0,.016996,-0,.016965,-0,.016934,-0,.016904,-0,.016873,-0,.016843,-0,.016813,-0,.016784,-0,.016754,-0,.016725,-0,.016695,-0,.016666,-0,.016637,-0,.016608,-0,.016579,-0,.016551,-0,.016523,-0,.016494,-0,.016466,-0,.016438,-0,.01641,-0,.016383,-0,.016355,-0,.016328,-0,.0163,-0,.016273,-0,.016246,-0,.016219,-0,.016193,-0,.016166,-0,.016139,-0,.016113,-0,.016087,-0,.016061,-0,.016035,-0,.016009,-0,.015983,-0,.015958,-0,.015932,-0,.015907,-0,.015882,-0,.015857,-0,.015832,-0,.015807,-0,.015782,-0,.015757,-0,.015733,-0,.015708,-0,.015684,-0,.01566,-0,.015636,-0,.015612,-0,.015588,-0,.015564,-0,.015541,-0,.015517,-0,.015494,-0,.01547,-0,.015447,-0,.015424,-0,.015401,-0,.015378,-0,.015355,-0,.015333,-0,.01531,-0,.015288,-0,.015265,-0,.015243,-0,.015221,-0,.015198,-0,.015176,-0,.015155,-0,.015133,-0,.015111,-0,.015089,-0,.015068,-0,.015046,-0,.015025,-0,.015004,-0,.014983,-0,.014962,-0,.014941,-0,.01492,-0,.014899,-0,.014878,-0,.014857,-0,.014837,-0,.014816,-0,.014796,-0,.014776,-0,.014755,-0,.014735,-0,.014715,-0,.014695,-0,.014675,-0,.014656,-0,.014636,-0,.014616,-0,.014597,-0,.014577,-0,.014558,-0,.014538,-0,.014519,-0,.0145,-0,.014481,-0,.014462,-0,.014443,-0,.014424,-0,.014405,-0,.014386,-0,.014368,-0,.014349,-0,.01433,-0,.014312,-0,.014294,-0,.014275,-0,.014257,-0,.014239,-0,.014221,-0,.014203,-0,.014185,-0,.014167,-0,.014149,-0,.014131,-0,.014114,-0,.014096,-0,.014078,-0,.014061,-0,.014043,-0,.014026,-0,.014009,-0,.013992,-0,.013974,-0,.013957,-0,.01394,-0,.013923,-0,.013906,-0,.013889,-0,.013873,-0,.013856,-0,.013839,-0,.013823,-0,.013806,-0,.013789,-0,.013773,-0,.013757,-0,.01374,-0,.013724,-0,.013708,-0,.013692,-0,.013676,-0,.01366,-0,.013644,-0,.013628,-0,.013612,-0,.013596,-0,.01358,-0,.013564,-0,.013549,-0,.013533,-0,.013518,-0,.013502,-0,.013487,-0,.013471,-0,.013456,-0,.013441,-0,.013425,-0,.01341,-0,.013395,-0,.01338,-0,.013365,-0,.01335,-0,.013335,-0,.01332,-0,.013305,-0,.013291,-0,.013276,-0,.013261,-0,.013247,-0,.013232,-0,.013218,-0,.013203,-0,.013189,-0,.013174,-0,.01316,-0,.013146,-0,.013131,-0,.013117,-0,.013103,-0,.013089,-0,.013075,-0,.013061,-0,.013047,-0,.013033,-0,.013019,-0,.013005,-0,.012991,-0,.012978,-0,.012964,-0,.01295,-0,.012937,-0,.012923,-0,.012909,-0,.012896,-0,.012883,-0,.012869,-0,.012856,-0,.012842,-0,.012829,-0,.012816,-0,.012803,-0,.01279,-0,.012776,-0,.012763,-0,.01275,-0,.012737,-0,.012724,-0,.012711,-0,.012698,-0,.012686,-0,.012673,-0,.01266,-0,.012647,-0,.012635,-0,.012622,-0,.012609,-0,.012597,-0,.012584,-0,.012572,-0,.012559,-0,.012547,-0,.012534,-0,.012522,-0,.01251,-0,.012497,-0,.012485,-0,.012473,-0,.012461,-0,.012449,-0,.012437,-0,.012425,-0,.012413,-0,.012401,-0,.012389,-0,.012377,-0,.012365,-0,.012353,-0,.012341,-0,.012329,-0,.012317,-0,.012306,-0,.012294,-0,.012282,-0,.012271,-0,.012259,-0,.012248,-0,.012236,-0,.012225,-0,.012213,-0,.012202,-0,.01219,-0,.012179,-0,.012168,-0,.012156,-0,.012145,-0,.012134,-0,.012123,-0,.012111,-0,.0121,-0,.012089,-0,.012078,-0,.012067,-0,.012056,-0,.012045,-0,.012034,-0,.012023,-0,.012012,-0,.012001,-0,.01199,-0,.01198,-0,.011969,-0,.011958,-0,.011947,-0,.011937,-0,.011926,-0,.011915,-0,.011905,-0,.011894,-0,.011884,-0,.011873,-0,.011863,-0,.011852,-0,.011842,-0,.011831,-0,.011821,-0,.01181,-0,.0118,-0,.01179,-0,.01178,-0,.011769,-0,.011759,-0,.011749,-0,.011739,-0,.011729,-0,.011718,-0,.011708,-0,.011698,-0,.011688,-0,.011678,-0,.011668,-0,.011658,-0,.011648,-0,.011638,-0,.011628,-0,.011619,-0,.011609,-0,.011599,-0,.011589,-0,.011579,-0,.01157,-0,.01156,-0,.01155,-0,.011541,-0,.011531,-0,.011521,-0,.011512,-0,.011502,-0,.011493,-0,.011483,-0,.011474,-0,.011464,-0,.011455,-0,.011445,-0,.011436,-0,.011426,-0,.011417,-0,.011408,-0,.011398,-0,.011389,-0,.01138,-0,.011371,-0,.011361,-0,.011352,-0,.011343,-0,.011334,-0,.011325,-0,.011316,-0,.011306,-0,.011297,-0,.011288,-0,.011279,-0,.01127,-0,.011261,-0,.011252,-0,.011243,-0,.011234,-0,.011226,-0,.011217,-0,.011208,-0,.011199,-0,.01119,-0,.011181,-0,.011173,-0,.011164,-0,.011155,-0,.011146,-0,.011138,-0,.011129,-0,.01112,-0,.011112,-0,.011103,-0,.011095,-0,.011086,-0,.011077,-0,.011069,-0,.01106,-0,.011052,-0,.011043,-0,.011035,-0,.011027,-0,.011018,-0,.01101,-0,.011001,-0,.010993,-0,.010985,-0,.010976,-0,.010968,-0,.01096,-0,.010952,-0,.010943,-0,.010935,-0,.010927,-0,.010919,-0,.01091,-0,.010902,-0,.010894,-0,.010886,-0,.010878,-0,.01087,-0,.010862,-0,.010854,-0,.010846,-0,.010838,-0,.01083,-0,.010822,-0,.010814,-0,.010806,-0,.010798,-0,.01079,-0,.010782,-0,.010774,-0,.010767,-0,.010759,-0,.010751,-0,.010743,-0,.010735,-0,.010728,-0,.01072,-0,.010712,-0,.010704,-0,.010697,-0,.010689,-0,.010681,-0,.010674,-0,.010666,-0,.010658,-0,.010651,-0,.010643,-0,.010636,-0,.010628,-0,.010621,-0,.010613,-0,.010606,-0,.010598,-0,.010591,-0,.010583,-0,.010576,-0,.010568,-0,.010561,-0,.010553,-0,.010546,-0,.010539,-0,.010531,-0,.010524,-0,.010517,-0,.010509,-0,.010502,-0,.010495,-0,.010488,-0,.01048,-0,.010473,-0,.010466,-0,.010459,-0,.010452,-0,.010444,-0,.010437,-0,.01043,-0,.010423,-0,.010416,-0,.010409,-0,.010402,-0,.010395,-0,.010388,-0,.010381,-0,.010374,-0,.010367,-0,.01036,-0,.010353,-0,.010346,-0,.010339,-0,.010332,-0,.010325,-0,.010318,-0,.010311,-0,.010304,-0,.010297,-0,.01029,-0,.010284,-0,.010277,-0,.01027,-0,.010263,-0,.010256,-0,.01025,-0,.010243,-0,.010236,-0,.010229,-0,.010223,-0,.010216,-0,.010209,-0,.010202,-0,.010196,-0,.010189,-0,.010183,-0,.010176,-0,.010169,-0,.010163,-0,.010156,-0,.01015,-0,.010143,-0,.010136,-0,.01013,-0,.010123,-0,.010117,-0,.01011,-0,.010104,-0,.010097,-0,.010091,-0,.010084,-0,.010078,-0,.010072,-0,.010065,-0,.010059,-0,.010052,-0,.010046,-0,.01004,-0,.010033,-0,.010027,-0,.010021,-0,.010014,-0,.010008,-0,.010002,-0,.009995,-0,.009989,-0,.009983,-0,.009977,-0,.00997,-0,.009964,-0,.009958,-0,.009952,-0,.009946,-0,.009939,-0,.009933,-0,.009927,-0,.009921,-0,.009915,-0,.009909,-0,.009903,-0,.009897,-0,.00989,-0,.009884,-0,.009878,-0,.009872,-0,.009866,-0,.00986,-0,.009854,-0,.009848,-0,.009842,-0,.009836,-0,.00983,-0,.009824,-0,.009818,-0,.009812,-0,.009806,-0,.009801,-0,.009795,-0,.009789,-0,.009783,-0,.009777,-0,.009771,-0,.009765,-0,.009759,-0,.009754,-0,.009748,-0,.009742,-0,.009736,-0,.00973,-0,.009725,-0,.009719,-0,.009713,-0,.009707,-0,.009701,-0,.009696,-0,.00969,-0,.009684,-0,.009679,-0,.009673,-0,.009667,-0,.009662,-0,.009656,-0,.00965,-0,.009645,-0,.009639,-0,.009633,-0,.009628,-0,.009622,-0,.009617,-0,.009611,-0,.009605,-0,.0096,-0,.009594,-0,.009589,-0,.009583,-0,.009578,-0,.009572,-0,.009567,-0,.009561,-0,.009556,-0,.00955,-0,.009545,-0,.009539,-0,.009534,-0,.009528,-0,.009523,-0,.009518,-0,.009512,-0,.009507,-0,.009501,-0,.009496,-0,.009491,-0,.009485,-0,.00948,-0,.009474,-0,.009469,-0,.009464,-0,.009458,-0,.009453,-0,.009448,-0,.009443,-0,.009437,-0,.009432,-0,.009427,-0,.009421,-0,.009416,-0,.009411,-0,.009406,-0,.009401,-0,.009395,-0,.00939,-0,.009385,-0,.00938,-0,.009375,-0,.009369,-0,.009364,-0,.009359,-0,.009354,-0,.009349,-0,.009344,-0,.009339,-0,.009333,-0,.009328,-0,.009323,-0,.009318,-0,.009313,-0,.009308,-0,.009303,-0,.009298,-0,.009293,-0,.009288,-0,.009283,-0,.009278,-0,.009273,-0,.009268,-0,.009263,-0,.009258,-0,.009253,-0,.009248,-0,.009243,-0,.009238,-0,.009233,-0,.009228,-0,.009223,-0,.009218,-0,.009213,-0,.009208,-0,.009203,-0,.009198,-0,.009194,-0,.009189,-0,.009184,-0,.009179,-0,.009174,-0,.009169,-0,.009164,-0,.00916,-0,.009155,-0,.00915,-0,.009145,-0,.00914,-0,.009136,-0,.009131,-0,.009126,-0,.009121,-0,.009116,-0,.009112,-0,.009107,-0,.009102,-0,.009097,-0,.009093,-0,.009088,-0,.009083,-0,.009079,-0,.009074,-0,.009069,-0,.009065,-0,.00906,-0,.009055,-0,.009051,-0,.009046,-0,.009041,-0,.009037,-0,.009032,-0,.009027,-0,.009023,-0,.009018,-0,.009013,-0,.009009,-0,.009004,-0,.009,-0,.008995,-0,.008991,-0,.008986,-0,.008981,-0,.008977,-0,.008972,-0,.008968,-0,.008963,-0,.008959,-0,.008954,-0,.00895,-0,.008945,-0,.008941,-0,.008936,-0,.008932,-0,.008927,-0,.008923,-0,.008918,-0,.008914,-0,.008909,-0,.008905,-0,.008901,-0,.008896,-0,.008892,-0,.008887,-0,.008883,-0,.008879,-0,.008874,-0,.00887,-0,.008865,-0,.008861,-0,.008857,-0,.008852,-0,.008848,-0,.008844,-0,.008839,-0,.008835,-0,.008831,-0,.008826,-0,.008822,-0,.008818]},TRIANGLE:{real:[0,.63662,-0,.212207,-0,.127324,-0,.090946,-0,.070736,-0,.057875,-0,.048971,-0,.042441,-0,.037448,-0,.033506,-0,.030315,-0,.027679,-0,.025465,0,.023579,-0,.021952,-0,.020536,-0,.019292,0,.018189,-0,.017206,-0,.016324,-0,.015527,0,.014805,-0,.014147,-0,.013545,-0,.012992,0,.012483,0,.012012,-0,.011575,-0,.011169,0,.01079,-0,.010436,-0,.010105,-0,.009794,-0,.009502,0,.009226,-0,.008966,-0,.008721,-0,.008488,-0,.008268,-0,.008058,-0,.00786,-0,.00767,0,.00749,-0,.007317,-0,.007153,-0,.006996,-0,.006845,0,.006701,-0,.006563,-0,.006431,0,.006303,-0,.006181,0,.006063,-0,.00595,-0,.005841,0,.005735,-0,.005634,-0,.005536,0,.005441,-0,.00535,-0,.005261,-0,.005176,-0,.005093,0,.005013,-0,.004935,-0,.00486,-0,.004787,-0,.004716,0,.004647,-0,.00458,-0,.004515,0,.004452,-0,.00439,-0,.004331,-0,.004273,-0,.004216,-0,.004161,-0,.004107,-0,.004055,0,.004004,-0,.003954,-0,.003906,-0,.003858,0,.003812,0,.003767,-0,.003723,-0,.00368,-0,.003638,-0,.003597,0,.003557,-0,.003517,-0,.003479,-0,.003441,-0,.003404,0,.003368,-0,.003333,-0,.003299,-0,.003265,-0,.003232,0,.003199,0,.003167,-0,.003136,-0,.003105,-0,.003075,0,.003046,0,.003017,-0,.002989,-0,.002961,-0,.002934,-0,.002907,0,.002881,-0,.002855,-0,.002829,-0,.002804,-0,.00278,0,.002756,0,.002732,-0,.002709,-0,.002686,-0,.002664,-0,.002642,0,.00262,-0,.002598,-0,.002577,-0,.002557,-0,.002536,0,.002516,-0,.002497,-0,.002477,-0,.002458,-0,.002439,0,.002421,-0,.002402,-0,.002384,-0,.002367,-0,.002349,0,.002332,0,.002315,-0,.002298,-0,.002282,-0,.002266,-0,.00225,0,.002234,-0,.002218,-0,.002203,-0,.002188,-0,.002173,0,.002158,-0,.002144,-0,.002129,-0,.002115,-0,.002101,-0,.002087,-0,.002074,-0,.00206,-0,.002047,-0,.002034,-0,.002021,0,.002008,-0,.001996,-0,.001983,-0,.001971,-0,.001959,-0,.001947,-0,.001935,-0,.001923,0,.001912,0,.0019,0,.001889,-0,.001878,-0,.001867,-0,.001856,-0,.001845,-0,.001835,-0,.001824,-0,.001814,-0,.001803,0,.001793,0,.001783,0,.001773,-0,.001763,-0,.001754,-0,.001744,-0,.001735,-0,.001725,-0,.001716,-0,.001707,0,.001698,0,.001689,0,.00168,-0,.001671,-0,.001662,-0,.001654,-0,.001645,-0,.001637,-0,.001628,-0,.00162,-0,.001612,0,.001604,0,.001596,0,.001588,-0,.00158,-0,.001572,-0,.001564,-0,.001557,-0,.001549,-0,.001541,-0,.001534,0,.001527,0,.001519,0,.001512,-0,.001505,-0,.001498,-0,.001491,-0,.001484,-0,.001477,-0,.00147,-0,.001463,-0,.001457,0,.00145,0,.001444,0,.001437,-0,.001431,-0,.001424,-0,.001418,-0,.001412,-0,.001405,-0,.001399,-0,.001393,-0,.001387,0,.001381,0,.001375,0,.001369,-0,.001363,-0,.001357,-0,.001352,-0,.001346,-0,.00134,-0,.001335,-0,.001329,-0,.001324,0,.001318,0,.001313,-0,.001307,-0,.001302,-0,.001297,-0,.001291,-0,.001286,-0,.001281,-0,.001276,-0,.001271,0,.001266,0,.001261,0,.001256,-0,.001251,-0,.001246,-0,.001241,-0,.001236,-0,.001231,-0,.001227,-0,.001222,-0,.001217,0,.001213,0,.001208,-0,.001203,-0,.001199,-0,.001194,-0,.00119,-0,.001186,-0,.001181,-0,.001177,-0,.001172,0,.001168,0,.001164,0,.00116,-0,.001155,-0,.001151,-0,.001147,-0,.001143,-0,.001139,-0,.001135,-0,.001131,-0,.001127,0,.001123,0,.001119,-0,.001115,-0,.001111,-0,.001107,-0,.001103,-0,.0011,-0,.001096,-0,.001092,-0,.001088,-0,.001085,0,.001081,0,.001077,-0,.001074,-0,.00107,-0,.001066,-0,.001063,-0,.001059,-0,.001056,-0,.001052,-0,.001049,-0,.001045,0,.001042,-0,.001039,-0,.001035,-0,.001032,-0,.001028,-0,.001025,-0,.001022,-0,.001019,-0,.001015,-0,.001012,0,.001009,0,.001006,-0,.001003,-0,999e-6,-0,996e-6,-0,993e-6,-0,99e-5,-0,987e-6,-0,984e-6,-0,981e-6,-0,978e-6,-0,975e-6,-0,972e-6,-0,969e-6,-0,966e-6,-0,963e-6,-0,96e-5,0,957e-6,-0,954e-6,0,952e-6,-0,949e-6,0,946e-6,-0,943e-6,-0,94e-5,-0,938e-6,-0,935e-6,-0,932e-6,-0,929e-6,0,927e-6,-0,924e-6,0,921e-6,-0,919e-6,0,916e-6,-0,913e-6,-0,911e-6,-0,908e-6,-0,906e-6,-0,903e-6,-0,9e-4,0,898e-6,-0,895e-6,0,893e-6,-0,89e-5,0,888e-6,-0,885e-6,-0,883e-6,-0,881e-6,-0,878e-6,0,876e-6,-0,873e-6,0,871e-6,-0,869e-6,0,866e-6,-0,864e-6,0,861e-6,-0,859e-6,-0,857e-6,-0,855e-6,-0,852e-6,0,85e-5,-0,848e-6,0,845e-6,-0,843e-6,0,841e-6,-0,839e-6,-0,837e-6,-0,834e-6,-0,832e-6,-0,83e-5,-0,828e-6,0,826e-6,-0,824e-6,0,821e-6,-0,819e-6,0,817e-6,-0,815e-6,-0,813e-6,-0,811e-6,-0,809e-6,-0,807e-6,-0,805e-6,0,803e-6,-0,801e-6,0,799e-6,-0,797e-6,0,795e-6,-0,793e-6,-0,791e-6,-0,789e-6,-0,787e-6,-0,785e-6,-0,783e-6,0,781e-6,-0,779e-6,0,777e-6,-0,775e-6,0,774e-6,-0,772e-6,-0,77e-5,-0,768e-6,-0,766e-6,0,764e-6,-0,762e-6,0,761e-6,-0,759e-6,0,757e-6,-0,755e-6,-0,753e-6,-0,752e-6,-0,75e-5,-0,748e-6,-0,746e-6,0,745e-6,-0,743e-6,0,741e-6,-0,739e-6,0,738e-6,-0,736e-6,-0,734e-6,-0,733e-6,-0,731e-6,-0,729e-6,-0,728e-6,0,726e-6,-0,724e-6,0,723e-6,-0,721e-6,0,719e-6,-0,718e-6,-0,716e-6,-0,715e-6,-0,713e-6,-0,711e-6,-0,71e-5,0,708e-6,-0,707e-6,0,705e-6,-0,703e-6,0,702e-6,-0,7e-4,-0,699e-6,-0,697e-6,-0,696e-6,-0,694e-6,-0,693e-6,0,691e-6,-0,69e-5,0,688e-6,-0,687e-6,0,685e-6,-0,684e-6,-0,682e-6,-0,681e-6,-0,679e-6,-0,678e-6,-0,677e-6,0,675e-6,-0,674e-6,0,672e-6,-0,671e-6,-0,669e-6,-0,668e-6,-0,667e-6,-0,665e-6,-0,664e-6,-0,662e-6,-0,661e-6,0,66e-5,-0,658e-6,0,657e-6,-0,656e-6,-0,654e-6,-0,653e-6,-0,652e-6,-0,65e-5,-0,649e-6,0,648e-6,-0,646e-6,0,645e-6,-0,644e-6,0,642e-6,-0,641e-6,-0,64e-5,-0,639e-6,-0,637e-6,-0,636e-6,-0,635e-6,0,633e-6,-0,632e-6,0,631e-6,-0,63e-5,0,628e-6,-0,627e-6,-0,626e-6,-0,625e-6,-0,624e-6,-0,622e-6,-0,621e-6,0,62e-5,-0,619e-6,0,617e-6,-0,616e-6,-0,615e-6,-0,614e-6,-0,613e-6,-0,612e-6,-0,61e-5,-0,609e-6,-0,608e-6,0,607e-6,-0,606e-6,0,605e-6,-0,603e-6,-0,602e-6,-0,601e-6,-0,6e-4,-0,599e-6,-0,598e-6,-0,597e-6,-0,596e-6,0,594e-6,-0,593e-6,0,592e-6,-0,591e-6,-0,59e-5,-0,589e-6,-0,588e-6,-0,587e-6,-0,586e-6,0,585e-6,-0,584e-6,0,582e-6,-0,581e-6,0,58e-5,-0,579e-6,-0,578e-6,-0,577e-6,-0,576e-6,-0,575e-6,-0,574e-6,0,573e-6,-0,572e-6,0,571e-6,-0,57e-5,-0,569e-6,-0,568e-6,-0,567e-6,-0,566e-6,-0,565e-6,-0,564e-6,-0,563e-6,0,562e-6,-0,561e-6,0,56e-5,-0,559e-6,-0,558e-6,-0,557e-6,-0,556e-6,-0,555e-6,-0,554e-6,-0,553e-6,-0,552e-6,0,551e-6,-0,55e-5,0,549e-6,-0,548e-6,-0,547e-6,-0,546e-6,-0,546e-6,-0,545e-6,-0,544e-6,-0,543e-6,-0,542e-6,0,541e-6,-0,54e-5,0,539e-6,-0,538e-6,-0,537e-6,-0,536e-6,-0,535e-6,-0,535e-6,-0,534e-6,-0,533e-6,-0,532e-6,0,531e-6,-0,53e-5,0,529e-6,-0,528e-6,-0,527e-6,-0,527e-6,-0,526e-6,-0,525e-6,-0,524e-6,-0,523e-6,-0,522e-6,0,521e-6,-0,521e-6,-0,52e-5,-0,519e-6,-0,518e-6,-0,517e-6,-0,516e-6,-0,515e-6,-0,515e-6,0,514e-6,-0,513e-6,0,512e-6,-0,511e-6,-0,511e-6,-0,51e-5,-0,509e-6,-0,508e-6,-0,507e-6,-0,506e-6,-0,506e-6,0,505e-6,-0,504e-6,0,503e-6,-0,502e-6,-0,502e-6,-0,501e-6,-0,5e-4,-0,499e-6,-0,499e-6,-0,498e-6,-0,497e-6,0,496e-6,-0,495e-6,0,495e-6,-0,494e-6,-0,493e-6,-0,492e-6,-0,492e-6,-0,491e-6,-0,49e-5,-0,489e-6,-0,489e-6,-0,488e-6,0,487e-6,-0,486e-6,-0,486e-6,-0,485e-6,0,484e-6,-0,483e-6,-0,483e-6,-0,482e-6,0,481e-6,-0,48e-5,-0,48e-5,0,479e-6,-0,478e-6,-0,478e-6,-0,477e-6,0,476e-6,-0,475e-6,-0,475e-6,-0,474e-6,0,473e-6,-0,473e-6,-0,472e-6,0,471e-6,-0,471e-6,-0,47e-5,-0,469e-6,0,468e-6,-0,468e-6,-0,467e-6,-0,466e-6,0,466e-6,-0,465e-6,-0,464e-6,0,464e-6,-0,463e-6,-0,462e-6,-0,462e-6,0,461e-6,-0,46e-5,-0,46e-5,-0,459e-6,0,458e-6,-0,458e-6,-0,457e-6,0,456e-6,-0,456e-6,-0,455e-6,-0,454e-6,0,454e-6,-0,453e-6,-0,452e-6,-0,452e-6,0,451e-6,-0,451e-6,-0,45e-5,0,449e-6,-0,449e-6,-0,448e-6,-0,447e-6,0,447e-6,-0,446e-6,-0,446e-6,0,445e-6,0,444e-6,-0,444e-6,-0,443e-6,0,442e-6,-0,442e-6,-0,441e-6,-0,441e-6,0,44e-5,-0,439e-6,-0,439e-6,0,438e-6,0,438e-6,-0,437e-6,-0,436e-6,0,436e-6,-0,435e-6,-0,435e-6,-0,434e-6,0,433e-6,-0,433e-6,-0,432e-6,0,432e-6,0,431e-6,-0,43e-5,-0,43e-5,0,429e-6,-0,429e-6,-0,428e-6,-0,428e-6,0,427e-6,-0,426e-6,-0,426e-6,0,425e-6,-0,425e-6,-0,424e-6,-0,424e-6,0,423e-6,-0,422e-6,-0,422e-6,-0,421e-6,0,421e-6,-0,42e-5,-0,42e-5,0,419e-6,-0,419e-6,-0,418e-6,-0,417e-6,0,417e-6,-0,416e-6,-0,416e-6,-0,415e-6,0,415e-6,-0,414e-6,-0,414e-6,0,413e-6,-0,413e-6,-0,412e-6,-0,412e-6,0,411e-6,-0,41e-5,-0,41e-5,-0,409e-6,0,409e-6,-0,408e-6,-0,408e-6,0,407e-6,-0,407e-6,-0,406e-6,-0,406e-6,0,405e-6,-0,405e-6,-0,404e-6,-0,404e-6,0,403e-6,-0,403e-6,-0,402e-6,0,402e-6,-0,401e-6,-0,401e-6,-0,4e-4,0,4e-4,-0,399e-6,-0,399e-6,-0,398e-6,0,398e-6,-0,397e-6,-0,397e-6,0,396e-6,-0,396e-6,-0,395e-6,-0,395e-6,0,394e-6,-0,394e-6,-0,393e-6,-0,393e-6,0,392e-6,-0,392e-6,-0,391e-6,0,391e-6,-0,39e-5,-0,39e-5,-0,389e-6,0,389e-6,-0,388e-6,-0,388e-6,-0,387e-6,0,387e-6,-0,387e-6,-0,386e-6,0,386e-6,-0,385e-6,-0,385e-6,-0,384e-6,0,384e-6,-0,383e-6,-0,383e-6,0,382e-6,0,382e-6,-0,381e-6,-0,381e-6,0,381e-6,-0,38e-5,-0,38e-5,-0,379e-6,0,379e-6,-0,378e-6,-0,378e-6,0,377e-6,-0,377e-6,-0,376e-6,-0,376e-6,0,376e-6,-0,375e-6,-0,375e-6,-0,374e-6,0,374e-6,-0,373e-6,-0,373e-6,0,373e-6,-0,372e-6,-0,372e-6,-0,371e-6,0,371e-6,-0,37e-5,-0,37e-5,-0,369e-6,0,369e-6,-0,369e-6,-0,368e-6,0,368e-6,-0,367e-6,-0,367e-6,-0,367e-6,0,366e-6,-0,366e-6,-0,365e-6,-0,365e-6,0,364e-6,-0,364e-6,-0,364e-6,0,363e-6,-0,363e-6,-0,362e-6,-0,362e-6,0,362e-6,-0,361e-6,-0,361e-6,-0,36e-5,0,36e-5,-0,359e-6,-0,359e-6,0,359e-6,-0,358e-6,-0,358e-6,-0,357e-6,0,357e-6,-0,357e-6,-0,356e-6,-0,356e-6,0,355e-6,-0,355e-6,-0,355e-6,0,354e-6,-0,354e-6,-0,353e-6,-0,353e-6,0,353e-6,-0,352e-6,-0,352e-6,-0,352e-6,0,351e-6,-0,351e-6,-0,35e-5,0,35e-5,-0,35e-5,-0,349e-6,-0,349e-6,0,348e-6,-0,348e-6,-0,348e-6,-0,347e-6,0,347e-6,-0,347e-6,-0,346e-6,0,346e-6,-0,345e-6,-0,345e-6,-0,345e-6,0,344e-6,-0,344e-6,-0,344e-6,-0,343e-6,0,343e-6,-0,342e-6,-0,342e-6,0,342e-6,-0,341e-6,-0,341e-6,-0,341e-6,0,34e-5,-0,34e-5,-0,34e-5,-0,339e-6,-0,339e-6,-0,338e-6,-0,338e-6,0,338e-6,-0,337e-6,-0,337e-6,-0,337e-6,0,336e-6,-0,336e-6,-0,336e-6,-0,335e-6,-0,335e-6,-0,335e-6,-0,334e-6,0,334e-6,-0,333e-6,-0,333e-6,-0,333e-6,0,332e-6,-0,332e-6,-0,332e-6,-0,331e-6,-0,331e-6,-0,331e-6,-0,33e-5,0,33e-5,-0,33e-5,-0,329e-6,-0,329e-6,0,329e-6,-0,328e-6,-0,328e-6,0,328e-6,-0,327e-6,-0,327e-6,-0,327e-6,0,326e-6,-0,326e-6,-0,326e-6,-0,325e-6,0,325e-6,-0,325e-6,-0,324e-6,0,324e-6,-0,324e-6,-0,323e-6,-0,323e-6,0,323e-6,-0,322e-6,-0,322e-6,-0,322e-6,0,321e-6,-0,321e-6,-0,321e-6,0,32e-5,-0,32e-5,-0,32e-5,-0,319e-6,0,319e-6,-0,319e-6,-0,318e-6,-0,318e-6,0,318e-6,-0,318e-6,-0,317e-6,0,317e-6,-0,317e-6,-0,316e-6,-0,316e-6,0,316e-6,-0,315e-6,-0,315e-6,-0,315e-6,0,314e-6,-0,314e-6,-0,314e-6,0,313e-6,-0,313e-6,-0,313e-6,-0,313e-6,0,312e-6,-0,312e-6,-0,312e-6,-0,311e-6,-0,311e-6],imag:[0,-.63662,-0,-.212207,-0,-.127324,-0,-.090946,-0,-.070736,-0,-.057875,-0,-.048971,-0,-.042441,-0,-.037448,-0,-.033506,-0,-.030315,-0,-.027679,-0,-.025465,-0,-.023579,-0,-.021952,-0,-.020536,-0,-.019292,-0,-.018189,-0,-.017206,-0,-.016324,-0,-.015527,-0,-.014805,-0,-.014147,-0,-.013545,-0,-.012992,-0,-.012483,-0,-.012012,-0,-.011575,-0,-.011169,-0,-.01079,-0,-.010436,-0,-.010105,-0,-.009794,-0,-.009502,-0,-.009226,-0,-.008966,-0,-.008721,-0,-.008488,-0,-.008268,-0,-.008058,-0,-.00786,-0,-.00767,-0,-.00749,-0,-.007317,-0,-.007153,-0,-.006996,-0,-.006845,-0,-.006701,-0,-.006563,-0,-.006431,-0,-.006303,-0,-.006181,-0,-.006063,-0,-.00595,-0,-.005841,-0,-.005735,-0,-.005634,-0,-.005536,-0,-.005441,-0,-.00535,-0,-.005261,-0,-.005176,-0,-.005093,-0,-.005013,-0,-.004935,-0,-.00486,-0,-.004787,-0,-.004716,-0,-.004647,-0,-.00458,-0,-.004515,-0,-.004452,-0,-.00439,-0,-.004331,-0,-.004273,-0,-.004216,-0,-.004161,-0,-.004107,-0,-.004055,-0,-.004004,-0,-.003954,-0,-.003906,-0,-.003858,-0,-.003812,-0,-.003767,-0,-.003723,-0,-.00368,-0,-.003638,-0,-.003597,-0,-.003557,-0,-.003517,-0,-.003479,-0,-.003441,-0,-.003404,-0,-.003368,-0,-.003333,-0,-.003299,-0,-.003265,-0,-.003232,-0,-.003199,-0,-.003167,-0,-.003136,-0,-.003105,-0,-.003075,-0,-.003046,-0,-.003017,-0,-.002989,-0,-.002961,-0,-.002934,-0,-.002907,-0,-.002881,-0,-.002855,-0,-.002829,-0,-.002804,-0,-.00278,-0,-.002756,-0,-.002732,-0,-.002709,-0,-.002686,-0,-.002664,-0,-.002642,-0,-.00262,-0,-.002598,-0,-.002577,-0,-.002557,-0,-.002536,-0,-.002516,-0,-.002497,-0,-.002477,-0,-.002458,-0,-.002439,-0,-.002421,-0,-.002402,-0,-.002384,-0,-.002367,-0,-.002349,-0,-.002332,-0,-.002315,-0,-.002298,-0,-.002282,-0,-.002266,-0,-.00225,-0,-.002234,-0,-.002218,-0,-.002203,-0,-.002188,-0,-.002173,-0,-.002158,-0,-.002144,-0,-.002129,-0,-.002115,-0,-.002101,-0,-.002087,-0,-.002074,-0,-.00206,-0,-.002047,-0,-.002034,-0,-.002021,-0,-.002008,-0,-.001996,-0,-.001983,-0,-.001971,-0,-.001959,-0,-.001947,-0,-.001935,-0,-.001923,-0,-.001912,-0,-.0019,-0,-.001889,-0,-.001878,-0,-.001867,-0,-.001856,-0,-.001845,-0,-.001835,-0,-.001824,-0,-.001814,-0,-.001803,-0,-.001793,-0,-.001783,-0,-.001773,-0,-.001763,-0,-.001754,-0,-.001744,-0,-.001735,-0,-.001725,-0,-.001716,-0,-.001707,-0,-.001698,-0,-.001689,-0,-.00168,-0,-.001671,-0,-.001662,-0,-.001654,-0,-.001645,-0,-.001637,-0,-.001628,-0,-.00162,-0,-.001612,-0,-.001604,-0,-.001596,-0,-.001588,-0,-.00158,-0,-.001572,-0,-.001564,-0,-.001557,-0,-.001549,-0,-.001541,-0,-.001534,-0,-.001527,-0,-.001519,-0,-.001512,-0,-.001505,-0,-.001498,-0,-.001491,-0,-.001484,-0,-.001477,-0,-.00147,-0,-.001463,-0,-.001457,-0,-.00145,-0,-.001444,-0,-.001437,-0,-.001431,-0,-.001424,-0,-.001418,-0,-.001412,-0,-.001405,-0,-.001399,-0,-.001393,-0,-.001387,-0,-.001381,-0,-.001375,-0,-.001369,-0,-.001363,-0,-.001357,-0,-.001352,-0,-.001346,-0,-.00134,-0,-.001335,-0,-.001329,-0,-.001324,-0,-.001318,-0,-.001313,-0,-.001307,-0,-.001302,-0,-.001297,-0,-.001291,-0,-.001286,-0,-.001281,-0,-.001276,-0,-.001271,-0,-.001266,-0,-.001261,-0,-.001256,-0,-.001251,-0,-.001246,-0,-.001241,-0,-.001236,-0,-.001231,-0,-.001227,-0,-.001222,-0,-.001217,-0,-.001213,-0,-.001208,-0,-.001203,-0,-.001199,-0,-.001194,-0,-.00119,-0,-.001186,-0,-.001181,-0,-.001177,-0,-.001172,-0,-.001168,-0,-.001164,-0,-.00116,-0,-.001155,-0,-.001151,-0,-.001147,-0,-.001143,-0,-.001139,-0,-.001135,-0,-.001131,-0,-.001127,-0,-.001123,-0,-.001119,-0,-.001115,-0,-.001111,-0,-.001107,-0,-.001103,-0,-.0011,-0,-.001096,-0,-.001092,-0,-.001088,-0,-.001085,-0,-.001081,-0,-.001077,-0,-.001074,-0,-.00107,-0,-.001066,-0,-.001063,-0,-.001059,-0,-.001056,-0,-.001052,-0,-.001049,-0,-.001045,-0,-.001042,-0,-.001039,-0,-.001035,-0,-.001032,-0,-.001028,-0,-.001025,-0,-.001022,-0,-.001019,-0,-.001015,-0,-.001012,-0,-.001009,-0,-.001006,-0,-.001003,-0,-999e-6,-0,-996e-6,-0,-993e-6,-0,-99e-5,-0,-987e-6,-0,-984e-6,-0,-981e-6,-0,-978e-6,-0,-975e-6,-0,-972e-6,-0,-969e-6,-0,-966e-6,-0,-963e-6,-0,-96e-5,-0,-957e-6,-0,-954e-6,-0,-952e-6,-0,-949e-6,-0,-946e-6,-0,-943e-6,-0,-94e-5,-0,-938e-6,-0,-935e-6,-0,-932e-6,-0,-929e-6,-0,-927e-6,-0,-924e-6,-0,-921e-6,-0,-919e-6,-0,-916e-6,-0,-913e-6,-0,-911e-6,-0,-908e-6,-0,-906e-6,-0,-903e-6,-0,-9e-4,-0,-898e-6,-0,-895e-6,-0,-893e-6,-0,-89e-5,-0,-888e-6,-0,-885e-6,-0,-883e-6,-0,-881e-6,-0,-878e-6,-0,-876e-6,-0,-873e-6,-0,-871e-6,-0,-869e-6,-0,-866e-6,-0,-864e-6,-0,-861e-6,-0,-859e-6,-0,-857e-6,-0,-855e-6,-0,-852e-6,-0,-85e-5,-0,-848e-6,-0,-845e-6,-0,-843e-6,-0,-841e-6,-0,-839e-6,-0,-837e-6,-0,-834e-6,-0,-832e-6,-0,-83e-5,-0,-828e-6,-0,-826e-6,-0,-824e-6,-0,-821e-6,-0,-819e-6,-0,-817e-6,-0,-815e-6,-0,-813e-6,-0,-811e-6,-0,-809e-6,-0,-807e-6,-0,-805e-6,-0,-803e-6,-0,-801e-6,-0,-799e-6,-0,-797e-6,-0,-795e-6,-0,-793e-6,-0,-791e-6,-0,-789e-6,-0,-787e-6,-0,-785e-6,-0,-783e-6,-0,-781e-6,-0,-779e-6,-0,-777e-6,-0,-775e-6,-0,-774e-6,-0,-772e-6,-0,-77e-5,-0,-768e-6,-0,-766e-6,-0,-764e-6,-0,-762e-6,-0,-761e-6,-0,-759e-6,-0,-757e-6,-0,-755e-6,-0,-753e-6,-0,-752e-6,-0,-75e-5,-0,-748e-6,-0,-746e-6,-0,-745e-6,-0,-743e-6,-0,-741e-6,-0,-739e-6,-0,-738e-6,-0,-736e-6,-0,-734e-6,-0,-733e-6,-0,-731e-6,-0,-729e-6,-0,-728e-6,-0,-726e-6,-0,-724e-6,-0,-723e-6,-0,-721e-6,-0,-719e-6,-0,-718e-6,-0,-716e-6,-0,-715e-6,-0,-713e-6,-0,-711e-6,-0,-71e-5,-0,-708e-6,-0,-707e-6,-0,-705e-6,-0,-703e-6,-0,-702e-6,-0,-7e-4,-0,-699e-6,-0,-697e-6,-0,-696e-6,-0,-694e-6,-0,-693e-6,-0,-691e-6,-0,-69e-5,-0,-688e-6,-0,-687e-6,-0,-685e-6,-0,-684e-6,-0,-682e-6,-0,-681e-6,-0,-679e-6,-0,-678e-6,-0,-677e-6,-0,-675e-6,-0,-674e-6,-0,-672e-6,-0,-671e-6,-0,-669e-6,-0,-668e-6,-0,-667e-6,-0,-665e-6,-0,-664e-6,-0,-662e-6,-0,-661e-6,-0,-66e-5,-0,-658e-6,-0,-657e-6,-0,-656e-6,-0,-654e-6,-0,-653e-6,-0,-652e-6,-0,-65e-5,-0,-649e-6,-0,-648e-6,-0,-646e-6,-0,-645e-6,-0,-644e-6,-0,-642e-6,-0,-641e-6,-0,-64e-5,-0,-639e-6,-0,-637e-6,-0,-636e-6,-0,-635e-6,-0,-633e-6,-0,-632e-6,-0,-631e-6,-0,-63e-5,-0,-628e-6,-0,-627e-6,-0,-626e-6,-0,-625e-6,-0,-624e-6,-0,-622e-6,-0,-621e-6,-0,-62e-5,-0,-619e-6,-0,-617e-6,-0,-616e-6,-0,-615e-6,-0,-614e-6,-0,-613e-6,-0,-612e-6,-0,-61e-5,-0,-609e-6,-0,-608e-6,-0,-607e-6,-0,-606e-6,-0,-605e-6,-0,-603e-6,-0,-602e-6,-0,-601e-6,-0,-6e-4,-0,-599e-6,-0,-598e-6,-0,-597e-6,-0,-596e-6,-0,-594e-6,-0,-593e-6,-0,-592e-6,-0,-591e-6,-0,-59e-5,-0,-589e-6,-0,-588e-6,-0,-587e-6,-0,-586e-6,-0,-585e-6,-0,-584e-6,-0,-582e-6,-0,-581e-6,-0,-58e-5,-0,-579e-6,-0,-578e-6,-0,-577e-6,-0,-576e-6,-0,-575e-6,-0,-574e-6,-0,-573e-6,-0,-572e-6,-0,-571e-6,-0,-57e-5,-0,-569e-6,-0,-568e-6,-0,-567e-6,-0,-566e-6,-0,-565e-6,-0,-564e-6,-0,-563e-6,-0,-562e-6,-0,-561e-6,-0,-56e-5,-0,-559e-6,-0,-558e-6,-0,-557e-6,-0,-556e-6,-0,-555e-6,-0,-554e-6,-0,-553e-6,-0,-552e-6,-0,-551e-6,-0,-55e-5,-0,-549e-6,-0,-548e-6,-0,-547e-6,-0,-546e-6,-0,-546e-6,-0,-545e-6,-0,-544e-6,-0,-543e-6,-0,-542e-6,-0,-541e-6,-0,-54e-5,-0,-539e-6,-0,-538e-6,-0,-537e-6,-0,-536e-6,-0,-535e-6,-0,-535e-6,-0,-534e-6,-0,-533e-6,-0,-532e-6,-0,-531e-6,-0,-53e-5,-0,-529e-6,-0,-528e-6,-0,-527e-6,-0,-527e-6,-0,-526e-6,-0,-525e-6,-0,-524e-6,-0,-523e-6,-0,-522e-6,-0,-521e-6,-0,-521e-6,-0,-52e-5,-0,-519e-6,-0,-518e-6,-0,-517e-6,-0,-516e-6,-0,-515e-6,-0,-515e-6,-0,-514e-6,-0,-513e-6,-0,-512e-6,-0,-511e-6,-0,-511e-6,-0,-51e-5,-0,-509e-6,-0,-508e-6,-0,-507e-6,-0,-506e-6,-0,-506e-6,-0,-505e-6,-0,-504e-6,-0,-503e-6,-0,-502e-6,-0,-502e-6,-0,-501e-6,-0,-5e-4,-0,-499e-6,-0,-499e-6,-0,-498e-6,-0,-497e-6,-0,-496e-6,-0,-495e-6,-0,-495e-6,-0,-494e-6,-0,-493e-6,-0,-492e-6,-0,-492e-6,-0,-491e-6,-0,-49e-5,-0,-489e-6,-0,-489e-6,-0,-488e-6,-0,-487e-6,-0,-486e-6,-0,-486e-6,-0,-485e-6,-0,-484e-6,-0,-483e-6,-0,-483e-6,-0,-482e-6,-0,-481e-6,-0,-48e-5,-0,-48e-5,-0,-479e-6,-0,-478e-6,-0,-478e-6,-0,-477e-6,-0,-476e-6,-0,-475e-6,-0,-475e-6,-0,-474e-6,-0,-473e-6,-0,-473e-6,-0,-472e-6,-0,-471e-6,-0,-471e-6,-0,-47e-5,-0,-469e-6,-0,-468e-6,-0,-468e-6,-0,-467e-6,-0,-466e-6,-0,-466e-6,-0,-465e-6,-0,-464e-6,-0,-464e-6,-0,-463e-6,-0,-462e-6,-0,-462e-6,-0,-461e-6,-0,-46e-5,-0,-46e-5,-0,-459e-6,-0,-458e-6,-0,-458e-6,-0,-457e-6,-0,-456e-6,-0,-456e-6,-0,-455e-6,-0,-454e-6,-0,-454e-6,-0,-453e-6,-0,-452e-6,-0,-452e-6,-0,-451e-6,-0,-451e-6,-0,-45e-5,-0,-449e-6,-0,-449e-6,-0,-448e-6,-0,-447e-6,-0,-447e-6,-0,-446e-6,-0,-446e-6,-0,-445e-6,-0,-444e-6,-0,-444e-6,-0,-443e-6,-0,-442e-6,-0,-442e-6,-0,-441e-6,-0,-441e-6,-0,-44e-5,-0,-439e-6,-0,-439e-6,-0,-438e-6,-0,-438e-6,-0,-437e-6,-0,-436e-6,-0,-436e-6,-0,-435e-6,-0,-435e-6,-0,-434e-6,-0,-433e-6,-0,-433e-6,-0,-432e-6,-0,-432e-6,-0,-431e-6,-0,-43e-5,-0,-43e-5,-0,-429e-6,-0,-429e-6,-0,-428e-6,-0,-428e-6,-0,-427e-6,-0,-426e-6,-0,-426e-6,-0,-425e-6,-0,-425e-6,-0,-424e-6,-0,-424e-6,-0,-423e-6,-0,-422e-6,-0,-422e-6,-0,-421e-6,-0,-421e-6,-0,-42e-5,-0,-42e-5,-0,-419e-6,-0,-419e-6,-0,-418e-6,-0,-417e-6,-0,-417e-6,-0,-416e-6,-0,-416e-6,-0,-415e-6,-0,-415e-6,-0,-414e-6,-0,-414e-6,-0,-413e-6,-0,-413e-6,-0,-412e-6,-0,-412e-6,-0,-411e-6,-0,-41e-5,-0,-41e-5,-0,-409e-6,-0,-409e-6,-0,-408e-6,-0,-408e-6,-0,-407e-6,-0,-407e-6,-0,-406e-6,-0,-406e-6,-0,-405e-6,-0,-405e-6,-0,-404e-6,-0,-404e-6,-0,-403e-6,-0,-403e-6,-0,-402e-6,-0,-402e-6,-0,-401e-6,-0,-401e-6,-0,-4e-4,-0,-4e-4,-0,-399e-6,-0,-399e-6,-0,-398e-6,-0,-398e-6,-0,-397e-6,-0,-397e-6,-0,-396e-6,-0,-396e-6,-0,-395e-6,-0,-395e-6,-0,-394e-6,-0,-394e-6,-0,-393e-6,-0,-393e-6,-0,-392e-6,-0,-392e-6,-0,-391e-6,-0,-391e-6,-0,-39e-5,-0,-39e-5,-0,-389e-6,-0,-389e-6,-0,-388e-6,-0,-388e-6,-0,-387e-6,-0,-387e-6,-0,-387e-6,-0,-386e-6,-0,-386e-6,-0,-385e-6,-0,-385e-6,-0,-384e-6,-0,-384e-6,-0,-383e-6,-0,-383e-6,-0,-382e-6,-0,-382e-6,-0,-381e-6,-0,-381e-6,-0,-381e-6,-0,-38e-5,-0,-38e-5,-0,-379e-6,-0,-379e-6,-0,-378e-6,-0,-378e-6,-0,-377e-6,-0,-377e-6,-0,-376e-6,-0,-376e-6,-0,-376e-6,-0,-375e-6,-0,-375e-6,-0,-374e-6,-0,-374e-6,-0,-373e-6,-0,-373e-6,-0,-373e-6,-0,-372e-6,-0,-372e-6,-0,-371e-6,-0,-371e-6,-0,-37e-5,-0,-37e-5,-0,-369e-6,-0,-369e-6,-0,-369e-6,-0,-368e-6,-0,-368e-6,-0,-367e-6,-0,-367e-6,-0,-367e-6,-0,-366e-6,-0,-366e-6,-0,-365e-6,-0,-365e-6,-0,-364e-6,-0,-364e-6,-0,-364e-6,-0,-363e-6,-0,-363e-6,-0,-362e-6,-0,-362e-6,-0,-362e-6,-0,-361e-6,-0,-361e-6,-0,-36e-5,-0,-36e-5,-0,-359e-6,-0,-359e-6,-0,-359e-6,-0,-358e-6,-0,-358e-6,-0,-357e-6,-0,-357e-6,-0,-357e-6,-0,-356e-6,-0,-356e-6,-0,-355e-6,-0,-355e-6,-0,-355e-6,-0,-354e-6,-0,-354e-6,-0,-353e-6,-0,-353e-6,-0,-353e-6,-0,-352e-6,-0,-352e-6,-0,-352e-6,-0,-351e-6,-0,-351e-6,-0,-35e-5,-0,-35e-5,-0,-35e-5,-0,-349e-6,-0,-349e-6,-0,-348e-6,-0,-348e-6,-0,-348e-6,-0,-347e-6,-0,-347e-6,-0,-347e-6,-0,-346e-6,-0,-346e-6,-0,-345e-6,-0,-345e-6,-0,-345e-6,-0,-344e-6,-0,-344e-6,-0,-344e-6,-0,-343e-6,-0,-343e-6,-0,-342e-6,-0,-342e-6,-0,-342e-6,-0,-341e-6,-0,-341e-6,-0,-341e-6,-0,-34e-5,-0,-34e-5,-0,-34e-5,-0,-339e-6,-0,-339e-6,-0,-338e-6,-0,-338e-6,-0,-338e-6,-0,-337e-6,-0,-337e-6,-0,-337e-6,-0,-336e-6,-0,-336e-6,-0,-336e-6,-0,-335e-6,-0,-335e-6,-0,-335e-6,-0,-334e-6,-0,-334e-6,-0,-333e-6,-0,-333e-6,-0,-333e-6,-0,-332e-6,-0,-332e-6,-0,-332e-6,-0,-331e-6,-0,-331e-6,-0,-331e-6,-0,-33e-5,-0,-33e-5,-0,-33e-5,-0,-329e-6,-0,-329e-6,-0,-329e-6,-0,-328e-6,-0,-328e-6,-0,-328e-6,-0,-327e-6,-0,-327e-6,-0,-327e-6,-0,-326e-6,-0,-326e-6,-0,-326e-6,-0,-325e-6,-0,-325e-6,-0,-325e-6,-0,-324e-6,-0,-324e-6,-0,-324e-6,-0,-323e-6,-0,-323e-6,-0,-323e-6,-0,-322e-6,-0,-322e-6,-0,-322e-6,-0,-321e-6,-0,-321e-6,-0,-321e-6,-0,-32e-5,-0,-32e-5,-0,-32e-5,-0,-319e-6,-0,-319e-6,-0,-319e-6,-0,-318e-6,-0,-318e-6,-0,-318e-6,-0,-318e-6,-0,-317e-6,-0,-317e-6,-0,-317e-6,-0,-316e-6,-0,-316e-6,-0,-316e-6,-0,-315e-6,-0,-315e-6,-0,-315e-6,-0,-314e-6,-0,-314e-6,-0,-314e-6,-0,-313e-6,-0,-313e-6,-0,-313e-6,-0,-313e-6,-0,-312e-6,-0,-312e-6,-0,-312e-6,-0,-311e-6,-0,-311e-6]
},SQUARE:{real:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],imag:[0,-.46267,-0,.514476,0,-.222225,-0,.198434,0,-.131464,-0,.122448,0,-.093145,-0,.088485,0,-.072092,-0,.069258,0,-.058792,-0,.056891,0,-.049633,0,.048269,0,-.042941,-0,.041916,0,-.037839,0,.03704,0,-.03382,-0,.03318,0,-.030572,0,.030049,0,-.027894,-0,.027457,0,-.025647,0,.025277,-0,-.023735,-0,.023418,0,-.022088,0,.021813,0,-.020655,-0,.020414,0,-.019396,-0,.019184,-0,-.018282,-0,.018094,0,-.01729,-0,.017121,0,-.016399,-0,.016247,0,-.015595,-0,.015458,-0,-.014867,-0,.014742,0,-.014204,-0,.01409,0,-.013597,0,.013492,0,-.01304,-0,.012944,-0,-.012527,-0,.012438,-0,-.012053,-0,.01197,0,-.011613,0,.011536,0,-.011204,-0,.011133,-0,-.010823,-0,.010757,0,-.010467,-0,.010405,0,-.010134,0,.010076,0,-.009821,-0,.009767,0,-.009527,-0,.009476,-0,-.009251,-0,.009202,0,-.008989,0,.008943,0,-.008742,-0,.008699,0,-.008509,-0,.008468,0,-.008287,-0,.008248,0,-.008077,0,.00804,0,-.007877,-0,.007842,0,-.007687,0,.007653,-0,-.007506,-0,.007474,0,-.007333,-0,.007302,0,-.007168,0,.007138,0,-.00701,-0,.006982,0,-.006859,-0,.006832,-0,-.006714,-0,.006688,0,-.006575,-0,.006551,0,-.006442,0,.006419,-0,-.006314,-0,.006292,0,-.006192,-0,.00617,-0,-.006073,0,.006053,0,-.00596,-0,.00594,0,-.00585,-0,.005831,-0,-.005745,-0,.005726,0,-.005643,-0,.005625,0,-.005545,0,.005527,-0,-.00545,-0,.005433,0,-.005358,-0,.005342,0,-.005269,0,.005253,0,-.005183,-0,.005168,0,-.0051,-0,.005086,-0,-.00502,-0,.005006,0,-.004942,-0,.004928,0,-.004866,0,.004853,0,-.004793,-0,.00478,0,-.004722,-0,.004709,-0,-.004653,0,.004641,0,-.004586,-0,.004574,0,-.004521,-0,.004509,-0,-.004458,-0,.004446,0,-.004396,-0,.004385,0,-.004336,0,.004325,0,-.004278,-0,.004267,0,-.004221,-0,.004211,0,-.004166,-0,.004156,0,-.004112,-0,.004102,0,-.00406,-0,.00405,-0,-.004008,-0,.003999,0,-.003959,-0,.00395,0,-.00391,-0,.003901,0,-.003863,-0,.003854,-0,-.003816,0,.003808,-0,-.003771,-0,.003763,0,-.003727,-0,.003719,0,-.003684,-0,.003676,0,-.003642,-0,.003634,0,-.0036,0,.003593,-0,-.00356,0,.003553,0,-.003521,-0,.003514,0,-.003482,-0,.003475,0,-.003445,-0,.003438,0,-.003408,0,.003401,-0,-.003372,0,.003365,0,-.003336,-0,.00333,0,-.003302,-0,.003295,0,-.003268,-0,.003262,0,-.003235,-0,.003229,-0,-.003202,0,.003196,-0,-.00317,-0,.003164,0,-.003139,-0,.003133,0,-.003108,-0,.003103,0,-.003078,-0,.003073,-0,-.003049,0,.003043,-0,-.00302,-0,.003015,0,-.002991,-0,.002986,0,-.002964,-0,.002959,0,-.002936,-0,.002931,0,-.002909,0,.002905,-0,-.002883,0,.002878,0,-.002857,-0,.002852,0,-.002832,-0,.002827,0,-.002807,-0,.002802,0,-.002782,-0,.002778,-0,-.002758,0,.002754,-0,-.002734,-0,.00273,0,-.002711,-0,.002707,0,-.002688,-0,.002684,0,-.002666,-0,.002662,0,-.002644,0,.00264,-0,-.002622,-0,.002618,0,-.0026,-0,.002597,0,-.002579,-0,.002576,0,-.002559,-0,.002555,0,-.002538,0,.002534,-0,-.002518,0,.002514,0,-.002498,-0,.002495,0,-.002479,-0,.002475,0,-.00246,-0,.002456,0,-.002441,-0,.002437,-0,-.002422,0,.002419,0,-.002404,-0,.002401,0,-.002386,-0,.002383,0,-.002368,-0,.002365,0,-.002351,-0,.002348,-0,-.002333,0,.00233,-0,-.002317,-0,.002313,0,-.0023,-0,.002297,0,-.002283,-0,.00228,0,-.002267,-0,.002264,0,-.002251,0,.002248,-0,-.002235,-0,.002232,0,-.00222,-0,.002217,0,-.002204,-0,.002201,0,-.002189,-0,.002186,0,-.002174,-0,.002171,-0,-.002159,0,.002157,0,-.002145,-0,.002142,0,-.00213,-0,.002128,0,-.002116,-0,.002114,0,-.002102,-0,.0021,0,-.002089,0,.002086,0,-.002075,-0,.002072,0,-.002061,-0,.002059,0,-.002048,-0,.002046,0,-.002035,-0,.002033,0,-.002022,0,.00202,-0,-.002009,-0,.002007,0,-.001997,-0,.001995,0,-.001984,-0,.001982,0,-.001972,-0,.00197,0,-.00196,-0,.001958,0,-.001948,-0,.001946,0,-.001936,-0,.001934,0,-.001924,-0,.001922,-0,-.001913,-0,.001911,-0,-.001901,-0,.001899,-0,-.00189,-0,.001888,0,-.001879,-0,.001877,0,-.001868,-0,.001866,0,-.001857,0,.001855,0,-.001846,0,.001844,0,-.001836,0,.001834,0,-.001825,-0,.001823,0,-.001815,-0,.001813,0,-.001804,-0,.001803,-0,-.001794,-0,.001792,-0,-.001784,-0,.001782,-0,-.001774,-0,.001772,0,-.001764,-0,.001763,0,-.001755,0,.001753,0,-.001745,0,.001743,0,-.001736,0,.001734,0,-.001726,0,.001724,0,-.001717,-0,.001715,0,-.001708,-0,.001706,-0,-.001698,-0,.001697,-0,-.001689,-0,.001688,-0,-.001681,-0,.001679,0,-.001672,-0,.00167,0,-.001663,-0,.001661,0,-.001654,0,.001653,0,-.001646,0,.001644,0,-.001637,0,.001636,0,-.001629,-0,.001627,0,-.001621,-0,.001619,0,-.001612,-0,.001611,-0,-.001604,-0,.001603,-0,-.001596,-0,.001595,-0,-.001588,-0,.001587,0,-.00158,-0,.001579,0,-.001573,-0,.001571,0,-.001565,0,.001563,0,-.001557,0,.001556,0,-.00155,0,.001548,0,-.001542,-0,.001541,0,-.001535,-0,.001533,-0,-.001527,-0,.001526,-0,-.00152,-0,.001519,-0,-.001513,-0,.001512,0,-.001506,-0,.001504,0,-.001499,-0,.001497,0,-.001492,0,.00149,0,-.001485,0,.001483,0,-.001478,0,.001476,0,-.001471,-0,.00147,0,-.001464,-0,.001463,0,-.001457,-0,.001456,-0,-.001451,-0,.00145,-0,-.001444,-0,.001443,-0,-.001438,-0,.001436,0,-.001431,-0,.00143,0,-.001425,-0,.001424,0,-.001418,0,.001417,0,-.001412,0,.001411,0,-.001406,0,.001405,0,-.0014,-0,.001399,0,-.001394,-0,.001392,0,-.001388,-0,.001386,-0,-.001381,-0,.00138,-0,-.001376,-0,.001374,-0,-.00137,-0,.001369,0,-.001364,-0,.001363,0,-.001358,-0,.001357,0,-.001352,0,.001351,0,-.001346,0,.001345,0,-.001341,-0,.00134,0,-.001335,-0,.001334,0,-.00133,-0,.001329,0,-.001324,-0,.001323,-0,-.001319,-0,.001318,-0,-.001313,-0,.001312,0,-.001308,-0,.001307,0,-.001302,-0,.001301,0,-.001297,0,.001296,0,-.001292,0,.001291,0,-.001287,0,.001286,0,-.001281,-0,.00128,0,-.001276,-0,.001275,0,-.001271,-0,.00127,-0,-.001266,-0,.001265,-0,-.001261,-0,.00126,-0,-.001256,-0,.001255,0,-.001251,-0,.00125,0,-.001246,-0,.001245,0,-.001241,0,.001241,0,-.001237,0,.001236,0,-.001232,-0,.001231,0,-.001227,-0,.001226,0,-.001222,-0,.001221,0,-.001218,-0,.001217,-0,-.001213,-0,.001212,-0,-.001208,-0,.001208,0,-.001204,-0,.001203,0,-.001199,-0,.001198,0,-.001195,-0,.001194,0,-.00119,0,.00119,0,-.001186,0,.001185,0,-.001182,-0,.001181,0,-.001177,-0,.001176,0,-.001173,-0,.001172,-0,-.001168,-0,.001168,-0,-.001164,-0,.001163,-0,-.00116,-0,.001159,0,-.001156,-0,.001155,0,-.001152,-0,.001151,0,-.001147,0,.001147,0,-.001143,0,.001143,0,-.001139,-0,.001138,0,-.001135,-0,.001134,0,-.001131,-0,.00113,0,-.001127,-0,.001126,-0,-.001123,-0,.001122,-0,-.001119,-0,.001118,0,-.001115,-0,.001115,0,-.001111,-0,.001111,0,-.001108,-0,.001107,0,-.001104,0,.001103,0,-.0011,0,.001099,0,-.001096,-0,.001095,0,-.001092,-0,.001092,0,-.001089,-0,.001088,0,-.001085,-0,.001084,-0,-.001081,-0,.001081,-0,-.001078,-0,.001077,0,-.001074,-0,.001073,0,-.00107,-0,.00107,0,-.001067,-0,.001066,0,-.001063,0,.001062,0,-.00106,0,.001059,0,-.001056,-0,.001055,0,-.001053,-0,.001052,0,-.001049,-0,.001048,0,-.001046,-0,.001045,-0,-.001042,-0,.001042,0,-.001039,-0,.001038,0,-.001035,-0,.001035,0,-.001032,-0,.001031,0,-.001029,0,.001028,0,-.001025,0,.001025,0,-.001022,-0,.001022,0,-.001019,-0,.001018,0,-.001016,-0,.001015,0,-.001012,-0,.001012,-0,-.001009,-0,.001009,-0,-.001006,-0,.001005,0,-.001003,-0,.001002,0,-.001,-0,999e-6,0,-997e-6,-0,996e-6,0,-993e-6,0,993e-6,0,-99e-5,0,99e-5,0,-987e-6,-0,987e-6,0,-984e-6,-0,984e-6,0,-981e-6,-0,981e-6,0,-978e-6,-0,978e-6,0,-975e-6,0,975e-6,0,-972e-6,-0,972e-6,0,-969e-6,0,969e-6,0,-966e-6,-0,966e-6,0,-963e-6,0,963e-6,0,-96e-5,-0,96e-5,-0,-958e-6,-0,957e-6,0,-955e-6,-0,954e-6,-0,-952e-6,-0,951e-6,0,-949e-6,-0,949e-6,-0,-946e-6,-0,946e-6,0,-943e-6,0,943e-6,0,-941e-6,-0,94e-5,0,-938e-6,0,937e-6,0,-935e-6,-0,935e-6,0,-932e-6,0,932e-6,0,-93e-5,-0,929e-6,-0,-927e-6,-0,926e-6,0,-924e-6,-0,924e-6,-0,-922e-6,-0,921e-6,0,-919e-6,-0,918e-6,-0,-916e-6,-0,916e-6,0,-914e-6,0,913e-6,0,-911e-6,-0,911e-6,0,-908e-6,0,908e-6,0,-906e-6,-0,905e-6,0,-903e-6,0,903e-6,0,-901e-6,-0,9e-4,-0,-898e-6,-0,898e-6,0,-896e-6,-0,895e-6,-0,-893e-6,-0,893e-6,0,-891e-6,0,89e-5,-0,-888e-6,-0,888e-6,0,-886e-6,0,885e-6,0,-883e-6,-0,883e-6,0,-881e-6,0,88e-5,0,-878e-6,-0,878e-6,-0,-876e-6,0,875e-6,0,-873e-6,-0,873e-6,-0,-871e-6,-0,871e-6,0,-869e-6,-0,868e-6,-0,-866e-6,-0,866e-6,0,-864e-6,0,864e-6,-0,-862e-6,-0,861e-6,0,-859e-6,0,859e-6,0,-857e-6,-0,857e-6,0,-855e-6,0,854e-6,0,-852e-6,-0,852e-6,-0,-85e-5,-0,85e-5,0,-848e-6,-0,847e-6,-0,-846e-6,-0,845e-6,0,-843e-6,-0,843e-6,-0,-841e-6,-0,841e-6,0,-839e-6,0,839e-6,0,-837e-6,-0,836e-6,0,-835e-6,0,834e-6,0,-832e-6,-0,832e-6,0,-83e-5,0,83e-5,0,-828e-6,-0,828e-6,-0,-826e-6,-0,826e-6,0,-824e-6,-0,823e-6,-0,-822e-6,-0,821e-6,0,-82e-5,-0,819e-6,-0,-817e-6,-0,817e-6,0,-815e-6,0,815e-6,0,-813e-6,-0,813e-6,0,-811e-6,0,811e-6,0,-809e-6,-0,809e-6,0,-807e-6,0,807e-6,0,-805e-6,-0,805e-6,-0,-803e-6,-0,803e-6,0,-801e-6,-0,801e-6,-0,-799e-6,-0,799e-6,0,-797e-6,-0,797e-6,-0,-795e-6,-0,795e-6,0,-793e-6,0,793e-6,0,-791e-6,-0,791e-6,0,-789e-6,0,789e-6,0,-787e-6,-0,787e-6,0,-785e-6,0,785e-6,0,-783e-6,-0,783e-6,-0,-781e-6,-0,781e-6,0,-779e-6,-0,779e-6,-0,-777e-6,-0,777e-6,0,-776e-6,-0,775e-6,-0,-774e-6,-0,773e-6,0,-772e-6,0,771e-6,0,-77e-5,-0,77e-5,0,-768e-6,0,768e-6,0,-766e-6,-0,766e-6,-0,-764e-6,0,764e-6,0,-763e-6,-0,762e-6,-0,-761e-6,-0,76e-5,0,-759e-6,-0,759e-6,-0,-757e-6,-0,757e-6,0,-755e-6,0,755e-6,0,-754e-6,-0,753e-6,0,-752e-6,0,751e-6,0,-75e-5,-0,75e-5,0,-748e-6,0,748e-6,0,-746e-6,-0,746e-6,-0,-745e-6,-0,744e-6,0,-743e-6,-0,743e-6,-0,-741e-6,-0,741e-6,0,-74e-5,-0,739e-6,-0,-738e-6,-0,738e-6,0,-736e-6,0,736e-6,0,-734e-6,-0,734e-6,0,-733e-6,0,732e-6,0,-731e-6,-0,731e-6,0,-729e-6,0,729e-6,0,-728e-6,-0,727e-6,-0,-726e-6,-0,726e-6,0,-724e-6,-0,724e-6,-0,-723e-6,-0,722e-6,0,-721e-6,-0,721e-6,-0,-719e-6,-0,719e-6,0,-718e-6,0,718e-6,0,-716e-6,-0,716e-6,0,-715e-6,0,714e-6,0,-713e-6,-0,713e-6,0,-711e-6,0,711e-6,0,-71e-5,-0,71e-5,-0,-708e-6,-0,708e-6,0,-707e-6,-0,706e-6,-0,-705e-6,-0,705e-6,0,-704e-6,-0,703e-6,-0,-702e-6,-0,702e-6,0,-7e-4,0,7e-4,0,-699e-6,-0,699e-6,0,-697e-6,0,697e-6,0,-696e-6,-0,696e-6,0,-694e-6,0,694e-6,0,-693e-6,-0,693e-6,-0,-691e-6,-0,691e-6,0,-69e-5,-0,69e-5,-0,-688e-6,-0,688e-6,0,-687e-6,-0,687e-6,-0,-685e-6,-0,685e-6,0,-684e-6,0,684e-6,0,-682e-6,-0,682e-6,0,-681e-6,0,681e-6,0,-68e-5,-0,679e-6,0,-678e-6,-0,678e-6,0,-677e-6,-0,676e-6,-0,-675e-6,-0,675e-6,0,-674e-6,-0,674e-6,-0,-672e-6,-0,672e-6,0,-671e-6,-0,671e-6,0,-67e-5,-0,669e-6,0,-668e-6,0,668e-6,0,-667e-6,-0,666e-6,0,-665e-6,0,665e-6,0,-664e-6,-0,664e-6,0,-663e-6,-0,662e-6,0,-661e-6,-0,661e-6,-0,-66e-5,-0,66e-5,0,-658e-6,-0,658e-6,-0,-657e-6,-0,657e-6,0,-656e-6,0,656e-6,0,-654e-6,-0,654e-6,0,-653e-6,0,653e-6,0,-652e-6,-0,651e-6,0,-65e-5,0,65e-5,0,-649e-6,-0,649e-6,-0,-648e-6,-0,648e-6,0,-646e-6,-0,646e-6,-0,-645e-6,-0,645e-6,0,-644e-6,-0,644e-6,-0,-643e-6,-0,642e-6,0,-641e-6,0,641e-6,0,-64e-5,-0,64e-5,0,-639e-6,0,638e-6,0,-637e-6,-0,637e-6,0,-636e-6,0,636e-6,0,-635e-6,-0,635e-6,-0,-634e-6,-0,633e-6,0,-632e-6,-0,632e-6,-0,-631e-6,-0,631e-6,0,-63e-5,-0,63e-5,-0,-629e-6,-0,628e-6,0,-627e-6,0,627e-6,0,-626e-6,-0,626e-6,0,-625e-6,0,625e-6,0,-624e-6,-0,623e-6,0,-622e-6,-0,622e-6]}}},{}],69:[function(a,b){"use strict";var c=a("../config/Config");b.exports={get:function(a,b){var c=d[a]||"_i18n"+a;return c.replace("{0}",b||"")}};var d={SONG_LOADED_TITLE:"Song loaded",SONG_LOADED:"Loaded song '{0}'",SONG_SAVED:"Song '{0}' saved",SONG_DELETE_CONFIRM:"Are you sure you want to delete song '{0}' ? This operation cannot be undone.",WARNING_SONG_RESET:"Are you sure you want to reset, you will lose all changes and undo history",WARNING_UNLOAD:"Are you sure you want to leave this page ? All unsaved changes will be lost.",ERROR_TITLE:"Error",CONFIRM_TITLE:"Confirm",BUTTON_OK:"OK",BUTTON_CANCEL:"Cancel",BUTTON_FS_ACTIVATE:"Maximize",BUTTON_FS_CANCEL:"Exit fullscreen",ERROR_SONG_IMPORT:"Could not import song, file was possibly not a valid "+c.SONG_FILE_EXTENSION+" file, or made by an incompatible version of Efflux",ERROR_FILE_LOAD:"Unknown error occurred while importing file, please try again, if the problems persists, drop us a line.",ERROR_EMPTY_SONG:"Song has no pattern content!",ERROR_NO_META:"Song has no title or author name, take pride in your work!",ERROR_MAX_PATTERNS:"Cannot exceed the allowed maximum of {0} patterns",ERROR_NO_SONGS:"There are currently no songs available to load. Why not create one?",ERROR_NO_INS_NAME:"Please enter a name for the instrument preset",ERROR_INSTRUMENT_IMPORT:"Could not import instruments, file was possible not a valid "+(c.INSTRUMENT_FILE_EXTENSION+" file, or made by an incompatible version of Efflux"),ERROR_PARAM_GLIDE:"Could not automate module parameter glide. Define the start and end value for a\n                               specific module parameter transition within your pattern, without defining other\n                               module parameters in between.",SUCCESS_TITLE:"Operation completed",MIDI_ENABLED:"Listening to MIDI messages coming from {0}",MIDI_CONNECTED:"MIDI Connection established successfully",MIDI_FAILURE:"MIDI Unavailable, Efflux could not connect to MIDI device(s)",RECORDING_ENABLED:"Recording of output enabled. When the sequencer stops, the recording will be saved onto to your device",RECORDING_SAVED:"Recording saved to your download folder",SONG_EXPORTED:"Song '{0}' exported to your download folder",INSTRUMENTS_EXPORTED:"Instrument presets exported to your download folder",INSTRUMENTS_IMPORTED:"{0} instrument presets have been imported",INSTRUMENT_SAVED:"Instrument '{0}' saved",INPUT_PRESET:"--- new preset ---"}},{"../config/Config":40}],70:[function(a){"use strict";function b(){for(var a=0;a<g.INSTRUMENT_AMOUNT;++a)P.eventList[a]=new J;P.SettingsModel.init(),P.InstrumentModel.init(),P.SongModel.init(),P.activeSong=P.SongModel.createSong()}function c(){P.TemplateService.render("notSupported",O)}function d(){P.TemplateService.render("index",O,null,!0).then(function(){s.init(P,C),D.init(P,document.body),t.init(O.querySelector("#menuSection"),P),r.init(O,P,s),u.init(O.querySelector("#metaSection"),P,s),C.init(O.querySelector("#transportSection"),P,o,s),E.init(document.body,P),x.init(O,P,s),w.init(O,P,s),y.init(O),z.init(O.querySelector("#patternEditor"),P),A.init(O.querySelector("#patternContainer"),P,s),B.init(O,P,s),q.init(O.querySelector("#helpSection"),P),p.init(O,P),F.init(),N.isSupported()&&v.init(P,o,C)}),[L.LOAD_SONG,L.TRANSFORM_LEGACY_SONG,L.CREATE_LINKED_LISTS,L.SAVE_STATE].forEach(function(a){return M.subscribe(a,e)})}function e(a,b){switch(a){case L.LOAD_SONG:var c="string"==typeof b?P.SongModel.getSongById(b):b;c&&c.meta&&c.patterns&&(P.activeSong=G.clone(c),P.EditorModel.reset(),P.EditorModel.amountOfSteps=c.patterns[0].steps,I.resetPlayState(P.activeSong.patterns),M.publishSync(L.SONG_LOADED,c),M.publishSync(L.CREATE_LINKED_LISTS),P.StateModel.flush());break;case L.TRANSFORM_LEGACY_SONG:"object"===("undefined"==typeof b?"undefined":f(b))&&n.transformLegacy(b);break;case L.CREATE_LINKED_LISTS:H.linkEvents(P.activeSong.patterns,P.eventList);break;case L.SAVE_STATE:P.StateModel.store(b)}}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=a("./config/Config"),h=a("./model/EditorModel"),i=a("./model/InstrumentModel"),j=a("./model/SelectionModel"),k=a("./model/SettingsModel"),l=a("./model/SongModel"),m=a("./model/StateModel"),n=a("./model/validators/SongValidator"),o=a("./controller/AudioController"),p=a("./controller/DialogWindowController"),q=a("./controller/HelpController"),r=a("./controller/InstrumentController"),s=a("./controller/KeyboardController"),t=a("./controller/MenuController"),u=a("./controller/MetaController"),v=a("./controller/MidiController"),w=a("./controller/ModuleParamController"),x=a("./controller/NoteEntryController"),y=a("./controller/NotificationController"),z=a("./controller/PatternEditorController"),A=a("./controller/PatternTrackListController"),B=a("./controller/AdvancedPatternEditorController"),C=a("./controller/SequencerController"),D=a("./controller/SettingsController"),E=a("./controller/SongBrowserController"),F=a("./controller/SystemController"),G=a("./utils/ObjectUtil"),H=a("./utils/EventUtil"),I=a("./utils/SongUtil"),J=a("./utils/LinkedList"),K=a("./services/TemplateService"),L=a("./definitions/Messages"),M=a("pubsub-js"),N=a("zmidi").zMIDI,O=document.querySelector("#application"),P=window.efflux={EditorModel:new h,InstrumentModel:new i,SelectionModel:new j,SettingsModel:new k,SongModel:new l,StateModel:new m,TemplateService:new K,Pubsub:M,activeSong:null,eventList:new Array(g.INSTRUMENT_AMOUNT)};if(o.isSupported()){b();try{o.init(P,P.activeSong.instruments),d()}catch(Q){window.console&&window.console.error(Q),c()}}else c()},{"./config/Config":40,"./controller/AdvancedPatternEditorController":41,"./controller/AudioController":42,"./controller/DialogWindowController":43,"./controller/HelpController":44,"./controller/InstrumentController":45,"./controller/KeyboardController":46,"./controller/MenuController":48,"./controller/MetaController":49,"./controller/MidiController":50,"./controller/ModuleParamController":51,"./controller/NoteEntryController":52,"./controller/NotificationController":53,"./controller/PatternEditorController":54,"./controller/PatternTrackListController":55,"./controller/SequencerController":56,"./controller/SettingsController":57,"./controller/SongBrowserController":58,"./controller/SystemController":59,"./definitions/Messages":65,"./model/EditorModel":71,"./model/InstrumentModel":72,"./model/SelectionModel":73,"./model/SettingsModel":74,"./model/SongModel":75,"./model/StateModel":76,"./model/validators/SongValidator":92,"./services/TemplateService":96,"./utils/EventUtil":104,"./utils/LinkedList":108,"./utils/ObjectUtil":112,"./utils/SongUtil":114,"pubsub-js":4,zmidi:37}],71:[function(a,b){"use strict";function c(){this.activeInstrument=0,this.activePattern=0,this.activeStep=0,this.activeSlot=-1,this.amountOfSteps=16,this.recordingInput=!1,this.loopedRecording=!0,this.higherKeyboardOctave=4,this.lowerKeyboardOctave=2}b.exports=c,c.prototype.reset=function(){this.activeInstrument=this.activePattern=this.activeStep=0,this.recordingInput=!1}},{}],72:[function(a,b){"use strict";function c(){f.init(),this._instruments=[],this.activeOscillatorIndex=0,this.instrumentId=0,this.instrumentRef=null}var d=a("../config/Config"),e=a("../services/FixturesLoader"),f=a("../utils/StorageUtil"),g=a("./validators/InstrumentValidator");b.exports=c,c.prototype.init=function(){var a=this;f.getItem(d.LOCAL_STORAGE_INSTRUMENTS).then(function(b){if("string"==typeof b)try{a.setInstruments(JSON.parse(b))}catch(c){}},function(){e.load(function(b){a.setInstruments(b),a.persist()},"Instruments.js")})},c.prototype.getInstruments=function(){return this._instruments},c.prototype.setInstruments=function(a){this._instruments=a},c.prototype.getInstrumentByPresetName=function(a){for(var b=this._instruments.length,c=void 0;b--;)if(c=this._instruments[b],c.presetName===a)return c;return null},c.prototype.saveInstrument=function(a){return g.isValid(a)&&"string"==typeof a.presetName&&a.presetName.length>0?(this.deleteInstrument(a,!1),this._instruments.push(a),this.persist(),!0):!1},c.prototype.deleteInstrument=function(a,b){var c=!1,d=this._instruments.length,e=void 0;for(b="boolean"==typeof b?b:!0;d--;)if(e=this._instruments[d],e.presetName===a.presetName){this._instruments.splice(d,1),c=!0;break}return c&&b&&this.persist(),c},c.prototype.persist=function(){f.setItem(d.LOCAL_STORAGE_INSTRUMENTS,JSON.stringify(this._instruments))}},{"../config/Config":40,"../services/FixturesLoader":94,"../utils/StorageUtil":115,"./validators/InstrumentValidator":90}],73:[function(a,b){"use strict";function c(){this.selectedChannels=[],this.firstSelectedChannel=0,this.lastSelectedChannel=0,this.minSelectedStep=0,this.maxSelectedStep=0,this._copySelection=null,this.actionCache={},this.clearSelection()}b.exports=c;var d=(a("../config/Config"),a("../model/factory/PatternFactory"),a("../utils/EventUtil")),e=a("../utils/ObjectUtil");c.prototype.setSelectionChannelRange=function(a,b){"number"!=typeof b&&(b=a),this.firstSelectedChannel=a,this.lastSelectedChannel=b;for(var c=this.firstSelectedChannel;c<=this.lastSelectedChannel;++c)this.selectedChannels[c]=[];this.setSelection(this.minSelectedStep,this.maxSelectedStep)},c.prototype.getSelection=function(a,b){var c=[];return this.copySelection(a,b,c),c},c.prototype.setSelection=function(a,b){"number"!=typeof b&&(b=a),this.minSelectedStep=Math.min(a,b),this.maxSelectedStep=Math.max(b,a);var c=void 0,d=void 0,e=void 0;for(this.selectedChannels=[],c=this.firstSelectedChannel;c<=this.lastSelectedChannel;++c)for(e=this.selectedChannels[c]=[],d=this.minSelectedStep;d<=this.maxSelectedStep;++d)e.push(d);this.equalizeSelection(this.minSelectedStep,this.maxSelectedStep)},c.prototype.equalizeSelection=function(a,b){var c=void 0,d=void 0,e=void 0,f=void 0,g=this.selectedChannels;for(c=this.firstSelectedChannel;c<this.lastSelectedChannel;++c)e=g[c],e.forEach(function(e){for(d=a;b>d;++d)f=g[c],-1===f.indexOf(e)&&f.push(e)});this.sort()},c.prototype.clearSelection=function(){this.selectedChannels=[],this.minSelectedStep=this.maxSelectedStep=this.firstSelectedChannel=this.lastSelectedChannel=0;var a=this.actionCache;a.stepOnSelection=-1,a.channelOnSelection=-1,a.directionOnSelection=0,a.shrinkSelection=!1,a.minOnSelection=-1,a.maxOnSelection=-1,a.prevHorizontalKey=-1,a.prevVerticalKey=-1},c.prototype.getSelectionLength=function(){return this.maxSelectedStep-this.minSelectedStep+1},c.prototype.handleVerticalKeySelectAction=function(a,b,c,d){var e=this.actionCache,f=38===a,g=this.hasSelection();g||(e.channelOnSelection=b),f?((-1===e.stepOnSelection||e.prevVerticalKey!==a)&&(e.shrinkSelection=c===this.maxSelectedStep,e.minOnSelection=this.minSelectedStep,e.maxOnSelection=this.maxSelectedStep,e.stepOnSelection=(e.minOnSelection===c?e.minOnSelection:d)+2),g||this.setSelectionChannelRange(b),e.shrinkSelection?(e.minOnSelection===d&&(e.stepOnSelection=-1),this.setSelection(e.minOnSelection,d)):this.setSelection(d,e.stepOnSelection-1)):((-1===e.stepOnSelection||e.prevVerticalKey!==a)&&(e.shrinkSelection=e.prevVerticalKey!==a&&c===this.minSelectedStep&&1!==d,e.minOnSelection=this.minSelectedStep,e.maxOnSelection=this.maxSelectedStep,e.stepOnSelection=e.maxOnSelection===d-1?e.minOnSelection:d-1),g||this.setSelectionChannelRange(b),e.shrinkSelection?(e.maxOnSelection===d+1&&(e.stepOnSelection=-1),this.setSelection(d,e.maxOnSelection)):this.setSelection(e.stepOnSelection,Math.max(this.maxSelectedStep,d))),e.prevVerticalKey=a},c.prototype.handleHorizontalKeySelectAction=function(a,b,c){var d=this.actionCache,e=37===a,f=this.hasSelection();f||(this.minSelectedStep=c,this.maxSelectedStep=c,this.lastSelectedChannel=b,this.firstSelectedChannel=b,this.lastSelectedChannel=b,d.channelOnSelection=b,d.directionOnSelection=a);var g=e?this.lastSelectedChannel-1:this.lastSelectedChannel+1;return f&&d.prevHorizontalKey!==a&&(g=e?this.lastSelectedChannel-1:b+1),f&&!e&&37===d.prevHorizontalKey&&d.prevHorizontalKey===d.directionOnSelection?(this.setSelectionChannelRange(this.firstSelectedChannel+1,--g),void 0):(g>=d.channelOnSelection?this.setSelectionChannelRange(d.channelOnSelection,g):this.setSelectionChannelRange(this.firstSelectedChannel-1,this.lastSelectedChannel),d.prevHorizontalKey=a,void 0)},c.prototype.hasSelection=function(){return this.selectedChannels.length>0},c.prototype.copySelection=function(a,b,c){if(0!==this.getSelectionLength()){var d=void 0,f=this.selectedChannels.length;for(Array.isArray(c)||(this._copySelection=[],c=this._copySelection),d=0;f>d;++d)c.push([]);var g=a.patterns[b],h=void 0,i=void 0,j=0;for(d=0;f>d;++d)if(i=this.selectedChannels[d],i&&i.length>0){for(var k=this.minSelectedStep,l=this.maxSelectedStep;l>=k;++k)h=g.channels[d][k],c[j].push(h?e.clone(h):null);++j}}},c.prototype.cutSelection=function(a,b,c){0!==this.getSelectionLength()&&(this.copySelection(a,b),this.deleteSelection(a,b,c))},c.prototype.deleteSelection=function(a,b,c,e,f,g,h,i){var j=this.firstSelectedChannel,k=this.lastSelectedChannel,l=this.minSelectedStep,m=this.maxSelectedStep;if(Array.isArray(e))j=f,k=g,l=h,m=i;else if(0===this.getSelectionLength())return;for(var n=Array.isArray(e)?e:this.selectedChannels,o=a.patterns[b],p=void 0,q=j;k>=q;++q)if(n[q].length>0)for(var r=l,s=m;s>=r;++r)p=o.channels[q][r],d.clearEvent(a,b,q,r,c[b]),o.channels[q][r]=0},c.prototype.pasteSelection=function(a,b,c,f,g,h){Array.isArray(h)||(h=this._copySelection),Array.isArray(h)&&h.length>0&&!function(){for(var i=a.patterns[b],j=void 0,k=void 0,l=void 0,m=h.length,n=function(c,m,n){j=i.channels[c],h[n].forEach(function(h,m){k=f+m,k<j.length&&h&&(0!==h.action||h.mp)&&(l=e.clone(h),l.instrument=c,l.seq.playing=!1,d.setPosition(l,i,b,k,a.meta.tempo,l.seq.length),j[k]=l,d.linkEvent(l,c,a,g))})},o=c,p=i.channels.length,q=0;p>o&&m>q;++o,++q)n(o,p,q)}(),this.clearSelection()},c.prototype.sort=function(){for(var a=this.selectedChannels.length,b=void 0;a--;)b=this.selectedChannels[a],b&&b.sort(function(a,b){return a-b})}},{"../config/Config":40,"../model/factory/PatternFactory":81,"../utils/EventUtil":104,"../utils/ObjectUtil":112}],74:[function(a,b){"use strict";function c(){e.init(),this._settings={}}var d=a("../config/Config"),e=a("../utils/StorageUtil");b.exports=c,c.PROPERTIES={INPUT_FORMAT:"if"},c.prototype.init=function(){var a=this;e.getItem(d.LOCAL_STORAGE_SETTINGS).then(function(b){if("string"==typeof b)try{a._settings=JSON.parse(b)}catch(c){}},function(){})},c.prototype.getSetting=function(a){return this._settings.hasOwnProperty(a)?this._settings[a]:null},c.prototype.saveSetting=function(a,b){return this._settings[a]=b,this.persist(),!0},c.prototype.persist=function(){e.setItem(d.LOCAL_STORAGE_SETTINGS,JSON.stringify(this._settings))}},{"../config/Config":40,"../utils/StorageUtil":115}],75:[function(a,b){"use strict";function c(){h.init(),this._songs=[]}var d=a("../config/Config"),e=a("../model/factory/SongFactory"),f=a("../services/FixturesLoader"),g=a("../services/SongAssemblyService"),h=a("../utils/StorageUtil");b.exports=c,c.prototype.init=function(){var a=this;h.getItem(d.LOCAL_STORAGE_SONGS).then(function(b){if("string"==typeof b)try{a.setSongs(JSON.parse(b))}catch(c){}},function(){f.load(function(b){a.setSongs(b),a.persist()},"Songs.js")})},c.prototype.getSongs=function(){return this._songs},c.prototype.setSongs=function(a){var b=new Array(a.length);a.forEach(function(a,c){b[c]=g.assemble(a)}),this._songs=b},c.prototype.getSongById=function(a){for(var b=this._songs.length,c=void 0;b--;)if(c=this._songs[b],c.id===a)return c;return null},c.prototype.createSong=function(){return e.createSong(d.INSTRUMENT_AMOUNT)},c.prototype.saveSong=function(a){this.deleteSong(a,!1),a.meta.modified=Date.now(),this._songs.push(a),this.persist()},c.prototype.deleteSong=function(a,b){var c=!1,d=this._songs.length,e=void 0;for(b="boolean"==typeof b?b:!0;d--;)if(e=this._songs[d],e.id===a.id){e.meta.title===a.meta.title?(this._songs.splice(d,1),c=!0):a.id+="b";break}return c&&b&&this.persist(),c},c.prototype.persist=function(){var a=new Array(this._songs.length);this._songs.forEach(function(b,c){a[c]=g.disassemble(b)}),h.setItem(d.LOCAL_STORAGE_SONGS,JSON.stringify(a))}},{"../config/Config":40,"../model/factory/SongFactory":82,"../services/FixturesLoader":94,"../services/SongAssemblyService":95,"../utils/StorageUtil":115}],76:[function(a,b){"use strict";function c(a){this._undoManager=new d,this._undoManager.setLimit("number"==typeof a?a:99)}var d=a("undo-manager");b.exports=c,c.prototype.store=function(a){if(!a||"function"!=typeof a.undo||"function"!=typeof a.redo)throw new Error("cannot store a state without specifying valid undo and redo actions");this._undoManager.add(a)},c.prototype.canUndo=function(){return this._undoManager.hasUndo()},c.prototype.undo=function(){return this.canUndo()?(this._undoManager.undo(),!0):!1},c.prototype.canRedo=function(){return this._undoManager.hasRedo()},c.prototype.redo=function(){return this.canRedo()?(this._undoManager.redo(),!0):!1},c.prototype.getAmountOfStates=function(){
return this._undoManager.getIndex()+1},c.prototype.flush=function(){this._undoManager.clear()}},{"undo-manager":9}],77:[function(a,b){"use strict";{var c=!!("AudioContext"in window)||"webkitAudioContext"in window&&"function"==typeof(new webkitAudioContext).createGain;b.exports={startOscillation:function(a,b){c?a.start(b):a.noteOn(b)},stopOscillation:function(a,b){try{c?a.stop(b):a.noteOff(b)}catch(d){}},createGainNode:function(a){return c?a.createGain():a.createGainNode()}}}},{}],78:[function(a,b){"use strict";b.exports={createAudioEvent:function(a,b,c,d){return{instrument:"number"==typeof a?a:0,note:"string"==typeof b?b:"",octave:"number"==typeof c?c:0,action:"number"==typeof d?d:0,recording:!1,seq:{playing:!1,startMeasure:0,startMeasureOffset:0,endMeasure:0,length:0,mpLength:0}}},createModuleParam:function(a,b,c){return{module:a,value:b,glide:c||!1}}}},{}],79:[function(a,b){"use strict";var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},d=a("../../config/Config"),e=a("../../utils/ObjectUtil"),f=b.exports={createInstrument:function(a,b){var c={id:a,name:"string"==typeof b?b:"Instrument "+a.toString(),presetName:null,oscillators:[f.createOscillator(!0),f.createOscillator(!1),f.createOscillator(!1)],volume:1,filter:{enabled:!1,frequency:d.DEFAULT_FILTER_FREQ,q:d.DEFAULT_FILTER_Q,speed:d.DEFAULT_FILTER_LFO_SPEED,depth:d.DEFAULT_FILTER_LFO_DEPTH,type:"lowpass",lfoType:"off"},delay:{enabled:!1,type:0,time:.5,feedback:.5,cutoff:880,offset:0}};return f.createOverdrive(c),f.createEQ(c),c},createOverdrive:function(a){"object"!==c(a.overdrive)&&(a.overdrive={enabled:!1,preBand:1,postCut:8e3,color:4e3,drive:.8})},createEQ:function(a){"object"!==c(a.eq)&&(a.eq={enabled:!1,lowGain:1,midGain:1,highGain:1})},createOscillator:function(a){var b={enabled:a,waveform:"SAW",table:0,volume:1,detune:0,octaveShift:0,fineShift:0,adsr:{attack:0,decay:0,sustain:.75,release:0}};return f.createPitchEnvelope(b),b},createPitchEnvelope:function(a){"object"!==c(a.pitch)&&(a.pitch={range:0,attack:0,decay:1,sustain:.75,release:0})},getTableForOscillator:function(a,b){if(!a.table)for("number"!=typeof b&&(b=d.WAVE_TABLE_SIZE),a.table=new Array(b);b--;)a.table[b]=0;return a.table},loadPreset:function(a,b,c){var d=e.clone(a);return d.id=b,d.name=c,d.oscillators.forEach(function(a){return f.createPitchEnvelope(a)}),f.createOverdrive(d),f.createEQ(d),d}}},{"../../config/Config":40,"../../utils/ObjectUtil":112}],80:[function(a,b){"use strict";var c=a("./AudioFactory"),d=a("../../utils/ModuleUtil"),e=a("../../config/Config"),f=a("../../third_party/Delay"),g=a("wa-overdrive");b.exports={createEQ:function(a){var b=a.createBiquadFilter();b.type="lowshelf",b.frequency.value=360,b.gain.value=e.MIN_EQ_GAIN;var d=c.createGainNode(a);d.gain.value=-1;var f=c.createGainNode(a),g=a.createBiquadFilter();g.type="highshelf",g.frequency.value=3600,g.gain.value=e.MIN_EQ_GAIN;var h=c.createGainNode(a);h.gain.value=-1,b.connect(d),g.connect(h),d.connect(f),h.connect(f);var i=c.createGainNode(a),j=c.createGainNode(a),k=c.createGainNode(a);g.connect(i),f.connect(j),b.connect(k);var l=c.createGainNode(a);return i.connect(l),j.connect(l),k.connect(l),{lowBand:g,midBand:f,highBand:b,lowGain:i,midGain:j,highGain:k,output:l,eqEnabled:!1}},createFilter:function(a){var b=a.createBiquadFilter(),d=a.createOscillator(),f=c.createGainNode(a);return c.startOscillation(d,a.currentTime),f.connect(b.frequency),d.frequency.value=e.DEFAULT_FILTER_LFO_SPEED,f.gain.value=e.DEFAULT_FILTER_LFO_DEPTH/100*b.frequency.value,b.frequency.value=e.DEFAULT_FILTER_FREQ,b.Q.value=e.DEFAULT_FILTER_Q,{filter:b,lfo:d,lfoAmp:f,lfoEnabled:!1,filterEnabled:!1}},createDelay:function(a){var b=new f(a,{type:0,delay:.5,feedback:.42,offset:-.027,cutoff:1200});return{delay:b,delayEnabled:!1}},createOverdrive:function(a){var b=new g(a,{preBand:1,postCut:8e3,color:4e3,drive:.8});return{overdrive:b,overdriveEnabled:!1}},applyEQConfiguration:function(a,b,c){var e=a.eq;e.eqEnabled=b.enabled,e.lowGain.gain.value=b.lowGain,e.midGain.gain.value=b.midGain,e.highGain.gain.value=b.highGain,d.applyRouting(a,c)},applyODConfiguration:function(a,b,c){var e=a.overdrive;e.overdriveEnabled=b.enabled,e.overdrive.color=b.color,e.overdrive.drive=b.drive,e.overdrive.preBand=b.preBand,e.overdrive.postCut=b.postCut,d.applyRouting(a,c)},applyFilterConfiguration:function(a,b,c){var e=a.filter,f="off"!==b.lfoType;e.filter.frequency.value=b.frequency,e.filter.Q.value=b.q,e.lfo.frequency.value=b.speed,e.lfoAmp.gain.value=b.depth/100*b.frequency,f&&(e.lfo.type=b.lfoType),e.filter.type=b.type,e.filterEnabled=b.enabled,d.applyRouting(a,c),f?e.lfoEnabled||(e.lfo.connect(e.lfoAmp),e.lfoEnabled=!0):e.lfoEnabled&&(e.lfoEnabled=!1,e.lfo.disconnect())},applyDelayConfiguration:function(a,b,c){var e=a.delay.delay;e.type=b.type,e.delay=b.time,e.feedback=b.feedback,e.offset=b.offset,e.cutoff=b.cutoff,a.delay.delayEnabled=b.enabled,d.applyRouting(a,c)}}},{"../../config/Config":40,"../../third_party/Delay":97,"../../utils/ModuleUtil":110,"./AudioFactory":77,"wa-overdrive":10}],81:[function(a,b){"use strict";function c(a,b){var c=[],f=void 0;for(f=0;f<d.INSTRUMENT_AMOUNT;++f)c.push(new Array(a));return c.forEach(function(c){for(f=a;f--;)c[f]=b===!0?e.createAudioEvent():0}),c}{var d=a("../../config/Config"),e=a("./EventFactory"),f=a("../../utils/ObjectUtil");b.exports={createEmptyPattern:function(a){return a="number"==typeof a?a:16,{steps:a,channels:c(a)}},mergePatterns:function(a,b,d){var e=a.steps,g=b.steps,h=void 0,i=void 0,j=void 0,k=void 0,l=void 0;g>e?(k=c(g),l=Math.round(g/e),k.forEach(function(b,c){for(i=0,j=0;e>i;++i,j+=l)b[j]=a.channels[c][i]}),a.channels=k,e=a.steps=g):e>g&&(k=c(e),l=Math.round(e/g),k.forEach(function(a,c){for(i=0,j=0;g>i;++i,j+=l)a[j]=b.channels[c][i]}),b.channels=k,g=b.steps=e);var m=void 0,n=void 0;a.channels.forEach(function(a,c){for(h=b.channels[c],i=e;i--;)if(m=h[i],m&&(0!==m.action||m.mp)){n=a[i]=f.clone(m);var g=n.seq.startMeasure,j=n.seq.endMeasure,k=isNaN(j)?1:j-g;n.seq.startMeasure=d,n.seq.endMeasure=n.seq.startMeasure+k}})}}}},{"../../config/Config":40,"../../utils/ObjectUtil":112,"./EventFactory":78}],82:[function(a,b){"use strict";var c=a("./PatternFactory"),d=a("./InstrumentFactory"),e=1;b.exports={createSong:function(a){for(var b={version:e,id:Date.now()+Math.floor(65536*(1+Math.random())).toString(16),meta:{title:"",author:"",created:Date.now(),modified:Date.now(),tempo:120},instruments:[],patterns:[c.createEmptyPattern(16)]},f=0;a>f;++f)b.instruments[f]=d.createInstrument(f);return b}}},{"./InstrumentFactory":79,"./PatternFactory":81}],83:[function(a,b){"use strict";function c(a){function b(){if(j.setPosition(f,p,g,i,c.meta.tempo),q[i]&&(2!==f.action&&!f.mp&&q[i].mp&&(f.mp=k.clone(q[i].mp)),j.clearEvent(c,g,h,i,d[g])),q[i]=f,j.linkEvent(f,h,c,d),o&&o.newEvent===!0){var b=d[h].getNodeByData(f),e=b?b.previous:null;e&&e.data.seq.startMeasure===f.seq.startMeasure&&e.instrument!==m&&f.instrument===m&&(f.instrument=e.data.instrument)}a.updateHandler(n),n=!1}var c=a.efflux.activeSong,d=a.efflux.eventList,e=a.efflux.EditorModel,f=a.event,g=e.activePattern,h=e.activeInstrument,i=e.activeStep,l=e.activePattern,m=e.activeInstrument,n=!0,o=void 0;(o=a.optEventData)&&(g="number"==typeof o.patternIndex?o.patternIndex:g,h="number"==typeof o.channelIndex?o.channelIndex:h,i="number"==typeof o.step?o.step:i,"boolean"==typeof o.advanceOnAddition&&(n=o.advanceOnAddition));var p=c.patterns[g],q=p.channels[h];return b(),{undo:function(){j.clearEvent(c,l,m,i,d[m]),a.updateHandler()},redo:function(){b()}}}function d(a){function b(b){m?f.deleteSelection(c,g,d,b,n,o,p,q):j.clearEvent(c,g,h,i,d[h]),a.updateHandler()}var c=a.efflux.activeSong,d=a.efflux.eventList,e=a.efflux.EditorModel,f=a.efflux.SelectionModel,g=e.activePattern,h=e.activeInstrument,i=e.activeStep,k=c.patterns[g].channels[h][i],l=f.getSelection(c,g),m=l.length>0,n=f.firstSelectedChannel,o=f.lastSelectedChannel,p=f.minSelectedStep,q=f.maxSelectedStep;return b(),{undo:function(){m?f.pasteSelection(c,g,h,i,d,l):a.addHandler(k,{patternIndex:g,channelIndex:h,step:i},!1),a.updateHandler()},redo:function(){b(l)}}}function e(a){var b=a.event,c=k.clone(b.mp),d=function(){delete b.mp,a.updateHandler()};return d(),{undo:function(){b.mp=c,a.updateHandler()},redo:function(){d()}}}function f(a){function b(){m?c.patterns[f]=m:(e.cutSelection(c,f,a.efflux.eventList),m=h(c,f)),e.clearSelection(),a.updateHandler()}var c=a.efflux.activeSong,d=a.efflux.EditorModel,e=a.efflux.SelectionModel;e.hasSelection()||(e.setSelectionChannelRange(d.activeInstrument),e.setSelection(d.activeStep));var f=d.activePattern,g=e.firstSelectedChannel,i=e.lastSelectedChannel,j=e.minSelectedStep,k=e.maxSelectedStep,l=h(c,f),m=void 0;return b(),{undo:function(){c.patterns[f]=l,e.minSelectedStep=j,e.maxSelectedStep=k,e.setSelectionChannelRange(g,i),a.updateHandler()},redo:function(){b()}}}function g(a){function b(){l?c.patterns[g]=l:(f.pasteSelection(c,g,i,j,d),l=h(c,g)),a.updateHandler()}var c=a.efflux.activeSong,d=a.efflux.eventList,e=a.efflux.EditorModel,f=a.efflux.SelectionModel,g=e.activePattern,i=e.activeInstrument,j=e.activeStep,k=h(c,g),l=void 0,m=f.firstSelectedChannel,n=f.lastSelectedChannel,o=f.minSelectedStep,p=f.maxSelectedStep;return b(),{undo:function(){c.patterns[g]=k,f.minSelectedStep=o,f.maxSelectedStep=p,f.setSelectionChannelRange(m,n),a.updateHandler()},redo:function(){b(k)}}}function h(a,b){return k.clone(a.patterns[b])}var i=a("../../definitions/States"),j=a("../../utils/EventUtil"),k=a("../../utils/ObjectUtil");b.exports={getAction:function(a,b){switch(a){default:return null;case i.ADD_EVENT:return c(b);case i.DELETE_EVENT:return d(b);case i.DELETE_MODULE_AUTOMATION:return e(b);case i.CUT_SELECTION:return f(b);case i.PASTE_SELECTION:return g(b)}}}},{"../../definitions/States":67,"../../utils/EventUtil":104,"../../utils/ObjectUtil":112}],84:[function(){"use strict"},{}],85:[function(){"use strict"},{}],86:[function(){"use strict"},{}],87:[function(){"use strict"},{}],88:[function(){"use strict"},{}],89:[function(a,b){"use strict";var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};b.exports={isValid:function(a){return a&&(!a.mp||"string"==typeof a.mp.module&&"number"==typeof a.mp.value&&"boolean"==typeof a.mp.glide)?(!a.id||"number"==typeof a.id)&&"number"==typeof a.instrument&&"string"==typeof a.note&&"number"==typeof a.octave&&"number"==typeof a.action&&"boolean"==typeof a.recording&&"object"===c(a.seq)&&"boolean"==typeof a.seq.playing&&"number"==typeof a.seq.startMeasure&&"number"==typeof a.seq.endMeasure&&"number"==typeof a.seq.length&&"number"==typeof a.seq.mpLength:!1},hasContent:function(a){return"number"==typeof a.instrument&&a.instrument>=0&&"string"==typeof a.note&&a.note.length>0&&"number"==typeof a.octave&&a.octave>0&&a.octave<=8}}},{}],90:[function(a,b){"use strict";var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};b.exports={isValid:function(a){if(!a)return!1;if(!Array.isArray(a.oscillators))return!1;for(var b=a.oscillators.length,d=void 0;b--;)if(d=a.oscillators[b],"boolean"!=typeof d.enabled||"string"!=typeof d.waveform||"number"!=typeof d.volume||"number"!=typeof d.detune||"number"!=typeof d.octaveShift||"number"!=typeof d.fineShift||("object"!==c(d.adsr)||"number"!=typeof d.adsr.attack||"number"!=typeof d.adsr.decay||"number"!=typeof d.adsr.sustain||"number"!=typeof d.adsr.release)&&(0===d.table||Array.isArray(d.table)))return!1;return"number"==typeof a.id&&"string"==typeof a.name&&"number"==typeof a.volume&&"object"===c(a.filter)&&"boolean"==typeof a.filter.enabled&&"number"==typeof a.filter.frequency&&"number"==typeof a.filter.q&&"number"==typeof a.filter.speed&&"number"==typeof a.filter.depth&&"string"==typeof a.filter.type&&"string"==typeof a.filter.lfoType&&"object"===c(a.delay)&&"boolean"==typeof a.delay.enabled&&"number"==typeof a.delay.type&&"number"==typeof a.delay.time&&"number"==typeof a.delay.feedback&&"number"==typeof a.delay.cutoff&&"number"==typeof a.delay.offset}}},{}],91:[function(a,b){"use strict";b.exports={isValid:function(a){return a?"number"==typeof a.steps&&Array.isArray(a.channels):!1}}},{}],92:[function(a,b){"use strict";var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},d=a("../factory/InstrumentFactory");b.exports={isValid:function(a){return a?"string"==typeof a.id&&"number"==typeof a.version&&"undefined"!=typeof a.meta&&Array.isArray(a.instruments)&&Array.isArray(a.patterns):!1},transformLegacy:function(a){a.instruments.forEach(function(a){a.oscillators.forEach(function(a){"object"!==c(a.pitch)&&d.createPitchEnvelope(a)}),"object"!==c(a.eq)&&d.createEQ(a),"object"!==c(a.od)&&d.createOverdrive(a)}),a.patterns.forEach(function(a,b){a.channels.forEach(function(a){a.forEach(function(a){if(a&&a.seq){var c=a.seq.startMeasure,d=a.seq.endMeasure,e=isNaN(d)?1:d-c;a.seq.startMeasure=b,a.seq.endMeasure=a.seq.startMeasure+e}})})})}}},{"../factory/InstrumentFactory":79}],93:[function(a,b){"use strict";b.exports={applyAmpEnvelope:function(a,b,c){var d=b.gain,e=c+a.attack,f=e+a.decay;d.cancelScheduledValues(c),d.setValueAtTime(0,c),d.linearRampToValueAtTime(1,e),d.linearRampToValueAtTime(a.sustain,f)},applyAmpRelease:function(a,b,c){var d=b.gain;d.cancelScheduledValues(c),d.setValueAtTime(d.value,c),d.linearRampToValueAtTime(0,c+a.release)},applyPitchEnvelope:function(a,b,c){if(0!==a.range){var d=b instanceof AudioBufferSourceNode,e=d?b.playbackRate:b.frequency,f=a.org=e.value,g=c+a.attack,h=g+a.decay,i=24,j=void 0;j=d?a.range/i:f+f/1200,d&&a.range<0&&(j=-j);var k=j*(a.range/i);e.cancelScheduledValues(c),e.setValueAtTime(f,c),e.linearRampToValueAtTime(f+k,g),e.linearRampToValueAtTime(f+k*a.sustain,h)}},applyPitchRelease:function(a,b,c){if(0!==a.range&&"number"==typeof a.org){var d=b instanceof AudioBufferSourceNode,e=d?b.playbackRate:b.frequency;e.cancelScheduledValues(c),e.setValueAtTime(e.value,c),e.linearRampToValueAtTime(a.org,c+a.release)}}}},{}],94:[function(a,b){"use strict";function c(){g.publish(f.SHOW_LOADER)}function d(){g.publish(f.HIDE_LOADER)}var e=a("../config/Config"),f=a("../definitions/Messages"),g=a("pubsub-js"),h=a("qajax");b.exports={load:function(a,b){c(),h(e.getBasePath()+"/"+b).then(function(b){if(d(),b){var c=b.responseText;try{var e=JSON.parse(c);a(e)}catch(f){}}},function(){return d})}}},{"../config/Config":40,"../definitions/Messages":65,"pubsub-js":4,qajax:6}],95:[function(a,b){"use strict";function c(a,b,c){a.meta={title:c[p],author:c[q],created:c[r],modified:c[s],tempo:c[t]}}function d(a,b){var c=a[o]={};c[p]=b.title,c[q]=b.author,c[r]=b.created,c[s]=b.modified,c[t]=b.tempo}function e(a,b,c){a.instruments=new Array(c.length);var d=void 0,e=void 0,f=void 0,g=void 0;c.forEach(function(c,h){d=c[O],e=c[T],f=c[z],g=c[G],a.instruments[h]={id:c[v],name:c[w],presetName:c[x],volume:c[y],delay:{enabled:f[A],type:f[F],cutoff:parseFloat(f[B]),feedback:parseFloat(f[C]),offset:parseFloat(f[D]),time:parseFloat(f[E])},filter:{enabled:g[H],depth:parseFloat(g[I]),frequency:parseFloat(g[J]),q:parseFloat(g[L]),speed:parseFloat(g[M]),lfoType:g[K],type:g[N]},oscillators:new Array(c[Z].length)},b>=3&&(a.instruments[h].eq={enabled:d[P],lowGain:d[Q],midGain:d[R],highGain:d[S]},a.instruments[h].overdrive={enabled:e[U],preBand:e[V],postCut:e[W],color:e[X],drive:e[Y]}),c[Z].forEach(function(c,d){var e=a.instruments[h].oscillators[d]={enabled:c[$],adsr:{attack:c[_][ca],decay:c[_][da],sustain:c[_][ea],release:c[_][fa]},detune:c[ga],fineShift:c[ha],octaveShift:c[ia],volume:c[ja],waveform:c[ka],table:c[la]};b>=2&&(e.pitch={range:c[aa][ba],attack:c[aa][ca],decay:c[aa][da],sustain:c[aa][ea],release:c[aa][fa]})})})}function f(a,b){var c=a[u]=new Array(b.length),d=void 0,e=void 0,f=void 0,g=void 0,h=void 0,i=void 0,j=void 0,k=void 0,l=void 0,m=void 0,n=void 0,o=void 0;b.forEach(function(a,b){d=c[b]={},e=a.delay,f=a.filter,h=a.overdrive,g=a.eq,d[v]=a.id,d[w]=a.name,d[x]=a.presetName,d[y]=a.volume,i=d[z]={},j=d[G]={},k=d[O]={},l=d[T]={},i[A]=e.enabled,i[B]=e.cutoff,i[C]=e.feedback,i[D]=e.offset,i[E]=e.time,i[F]=e.type,j[H]=f.enabled,j[I]=f.depth,j[J]=f.frequency,j[K]=f.lfoType,j[L]=f.q,j[M]=f.speed,j[N]=f.type,k[P]=g.enabled,k[Q]=g.lowGain,k[R]=g.midGain,k[S]=g.highGain,l[U]=h.enabled,l[V]=h.preBand,l[W]=h.postCut,l[X]=h.color,l[Y]=h.drive,d[Z]=new Array(a.oscillators.length),a.oscillators.forEach(function(a,b){m=d[Z][b]={},m[$]=a.enabled,n=m[_]={},o=m[aa]={},n[ca]=a.adsr.attack,n[da]=a.adsr.decay,n[ea]=a.adsr.sustain,n[fa]=a.adsr.release,o[ba]=a.pitch.range,o[ca]=a.pitch.attack,o[da]=a.pitch.decay,o[ea]=a.pitch.sustain,o[fa]=a.pitch.release,m[ga]=a.detune,m[ha]=a.fineShift,m[ia]=a.octaveShift,m[ja]=a.volume,m[ka]=a.waveform,m[la]=a.table})})}function g(a,b,c,d){a.patterns=new Array(c.length);var e=void 0,f=void 0,g=void 0,h=void 0;c.forEach(function(b,c){e=a.patterns[c]={steps:b[na],channels:b[oa]},b[oa].forEach(function(a,b){f=e.channels[b]=new Array(a.length),a.forEach(function(a,b){a?(g={action:a[pa],id:a[qa],instrument:a[ra],note:a[sa],octave:a[ta],recording:!1,seq:{playing:!1,mpLength:0}},i.setPosition(g,e,c,b,d,a[ua]),(h=a[va])&&(g.mp={module:h[wa],value:h[xa],glide:h[ya]})):g=0,f[b]=g})})})}function h(a,b){var c=a[ma]=new Array(b.length),d=void 0,e=void 0,f=void 0,g=void 0;b.forEach(function(a,b){d=c[b]={},d[na]=a.steps,d[oa]=new Array(a.channels.length),a.channels.forEach(function(a,b){e=d[oa][b]=new Array(a.length),a.forEach(function(a,b){a?(f={},f[qa]=a.id,f[pa]=a.action,f[ra]=a.instrument,f[sa]=a.note,f[ta]=a.octave,f[ua]=a.seq.length,a.mp&&(g=f[va]={},g[wa]=a.mp.module,g[xa]=a.mp.value,g[ya]=a.mp.glide)):f=0,e[b]=f})})})}var i=a("../utils/EventUtil"),j=a("../model/validators/SongValidator"),k=3;b.exports={assemble:function(a){try{a="string"==typeof a?JSON.parse(a):a;var b=a[l];if("number"==typeof b){var d={};return d.id=a[m],d.version=a[n],c(d,b,a[o]),e(d,b,a[u]),g(d,b,a[ma],d.meta.tempo),j.transformLegacy(d),d}return a}catch(f){return null}},disassemble:function(a){var b={};return b[l]=k,b[m]=a.id,b[n]=a.version,d(b,a.meta),f(b,a.instruments),h(b,a.patterns),JSON.stringify(b)}};var l="av",m="si",n="sv",o="m",p="t",q="a",r="c",s="dm",t="tm",u="ins",v="i",w="n",x="pn",y="v",z="d",A="e",B="c",C="f",D="o",E="t",F="tp",G="f",H="e",I="d",J="f",K="lt",L="q",M="s",N="ft",O="eq",P="e",Q="l",R="m",S="h",T="od",U="e",V="pb",W="pc",X="c",Y="d",Z="o",$="e",_="a",aa="pe",ba="pr",ca="a",da="d",ea="s",fa="r",ga="d",ha="f",ia="o",ja="v",ka="w",la="t",ma="p",na="s",oa="c",pa="a",qa="i",ra="ins",sa="n",ta="o",ua="l",va="ma",wa="m",xa="v",ya="g"},{"../model/validators/SongValidator":92,"../utils/EventUtil":104}],96:[function(a,b){"use strict";function c(a,b,c,d,e){a._jobs[b]={container:c,append:d===!0,apply:"boolean"==typeof e?e:!0}}function d(a,b,c,d){var e=function f(c){var e=c.data;e&&"ready"===e.cmd&&e.template===b&&(a._worker.removeEventListener("message",f),requestAnimationFrame(function(){a.applyTemplate(e.template,e.html),d(e.html)}))};a._worker.addEventListener("message",e),a._worker.postMessage({cmd:"render",template:b,data:c})}var e=a("../config/Config"),f=b.exports=function(){this._worker=new Worker(window.URL.createObjectURL(new Blob(['(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module \'"+o+"\'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/**\n * TemplateWorker leverages the creation of HTML templates\n * using Handlebars off the main execution thread\n */\nvar data, html;\n\nself.addEventListener(\'message\', function( aEvent ) {\n\n    data = aEvent.data;\n\n    if ( data !== undefined ) {\n\n        switch ( data.cmd )\n        {\n            case "init":\n\n                var scripts = data.scripts;\n\n                if ( Array.isArray( scripts )) {\n                    scripts.forEach( function( script ) {\n                        importScripts( script );\n                    });\n                    if ( Handlebars !== undefined )\n                        registerHelpers();\n                }\n                break;\n\n            case "render":\n\n                html = "";\n\n                if ( typeof self.effluxTemplates[ data.template ] === "function" ) {\n                    html = self.effluxTemplates[ data.template ]( data.data );\n                }\n                self.postMessage({ cmd: "ready", template: data.template, html: html });\n                break;\n        }\n    }\n\n}, false );\n\nfunction registerHelpers() {\n\n    /**\n     * use in template like:\n     * {{toLowerCase propertyName}}\n     */\n    Handlebars.registerHelper( "toLowerCase", function( string ) {\n\n        if ( typeof string === "string" )\n            return string.toLowerCase();\n\n        return "";\n    });\n\n    /**\n     * use in template like:\n     * {{loop 10}}\n     */\n    Handlebars.registerHelper( "loop", function( n, block ) {\n\n        var out = "";\n\n        for( var i = 0; i < n; ++i )\n            out += block.fn( i );\n\n        return out;\n    });\n\n    /**\n     * comparison functions for templates, use like:\n     * {{#if (eq variable "value")}} ... {{/if}}\n     *\n     * multiple conditionals:\n     *\n     * {{#if (and\n     *           (eq variable "value")\n     *           (eq variable2 "value"))}}\n     */\n    Handlebars.registerHelper({\n\n        eq: function (v1, v2) {\n            return v1 === v2;\n        },/*\n        ne: function (v1, v2) {\n            return v1 !== v2;\n        },\n        lt: function (v1, v2) {\n            return v1 < v2;\n        },\n        gt: function (v1, v2) {\n            return v1 > v2;\n        },\n        lte: function (v1, v2) {\n            return v1 <= v2;\n        },\n        gte: function (v1, v2) {\n            return v1 >= v2;\n        },\n        */\n        and: function (v1, v2) {\n            return v1 && v2;\n        },\n        or: function (v1, v2) {\n            return v1 || v2;\n        }\n    });\n\n    /**\n     * formats module parameter automations (patternTrackList)\n     *\n     * use in template like:\n     */\n    Handlebars.registerHelper( "mparam", function( data ) {\n\n        var out = ( data && data.glide ) ? "G " : "";\n\n        if ( data && data.module ) {\n            out += data.module.charAt( 0 ).toUpperCase();\n            out += data.module.match(/([A-Z]?[^A-Z]*)/g)[1].charAt( 0 );\n        }\n        return out;\n    });\n\n    /**\n     * formats module parameter automation value (patternTrackList)\n     * can display in either hexadecimal or percentage-based values\n     *\n     * use in template like:\n     * {{mparam event.mp formatType}}\n     */\n    Handlebars.registerHelper( "mvalue", function( data, paramFormat ) {\n\n        var out = "", value;\n\n        if ( data ) {\n\n            // show parameter value in either hex or percentages\n            // TODO there is a bit of code duplication with NumberUtil here...\n            if ( paramFormat === "pct" )\n                value = Math.min( 99, parseInt( data.value, 10 )).toString();\n            else {\n                value = Math.round( data.value * ( 255 / 100 )).toString( 16 ).toUpperCase();\n            }\n            out += " " + (( value.length === 1 ) ? "0" + value : value );\n        }\n        return out;\n    });\n}\n\n},{}]},{},[1])'],{type:"text/javascript"}))),this._jobs={},this._worker.postMessage({cmd:"init",scripts:[e.getBasePath()+"/handlebars/handlebars.js",e.getBasePath()+"/handlebars/templates.js"]})};f.prototype.render=function(a,b,e,f,g){c(this,a,b,f,g);var h=this;return new Promise(function(b,c){var f=function(a){"string"==typeof a?b(a):c()};d(h,a,e,f)})},f.prototype.renderAsElement=function(a,b){c(this,a,null,!1,!1);var e=this;return new Promise(function(c,f){var g=function(b){if("string"==typeof b){var d=document.createElement("div");d.setAttribute("class",a+"-wrapper"),b.length>0&&(d.innerHTML=b),c(d)}else f()};d(e,a,b,g)})},f.prototype.applyTemplate=function(a,b){var c=this._jobs[a];c&&c.apply&&(c.append?c.container.innerHTML+=b:c.container.innerHTML=b),delete this._jobs[a]}},{"../config/Config":40}],97:[function(a,b){"use strict";function c(a,b){this.input=a.createGain(),this.output=a.createGain(),this._filter=a.createBiquadFilter(),this._dry=a.createGain(),this._wet=a.createGain();var c=this.meta.params;b=b||{},this._type=b.type||c.type.defaultValue,this._filter.frequency.value=b.frequency||c.frequency.defaultValue,this._filter.Q.value=b.Q||c.Q.defaultValue,this._filter.gain.value=b.gain||c.gain.defaultValue,this._wet.gain.value=b.wet||c.wet.defaultValue,this._dry.gain.value=b.dry||c.dry.defaultValue,this._filter.type=this._type,this.input.connect(this._filter),this._filter.connect(this._wet),this._wet.connect(this.output),this.input.connect(this._dry),this._dry.connect(this.output)}function d(a,b){this.input=a.createGain(),this.output=a.createGain();var d=this.meta.params;if(b=b||{},b.type=~~b.type||d.type.defaultValue,b.delay=b.delay||d.delay.defaultValue,b.feedback=b.feedback||d.feedback.defaultValue,b.cutoff=b.cutoff||d.cutoff.defaultValue,b.dry=b.dry||d.dry.defaultValue,b.offset=b.offset||d.offset.defaultValue,b.feedback>=1)throw new Error("Feedback value will force a positive feedback loop.");this._split=a.createChannelSplitter(2),this._merge=a.createChannelMerger(2),this._leftDelay=a.createDelay(),this._rightDelay=a.createDelay(),this._leftGain=a.createGain(),this._rightGain=a.createGain(),this._leftFilter=new c.Lowpass(a,{frequency:b.cutoff}),this._rightFilter=new c.Lowpass(a,{frequency:b.cutoff}),this._dry=a.createGain(),this._type=b.type,this._delayTime=b.delay,this._offset=b.offset,this._leftDelay.delayTime.value=b.delay,this._rightDelay.delayTime.value=b.delay,this._leftGain.gain.value=b.feedback,this._rightGain.gain.value=b.feedback,this.input.connect(this._split),this._leftDelay.connect(this._leftGain),this._rightDelay.connect(this._rightGain),this._leftGain.connect(this._leftFilter.input),this._rightGain.connect(this._rightFilter.input),this._merge.connect(this.output),this._route(),this.input.connect(this._dry),this._dry.connect(this.output)}c.prototype=Object.create(null,{connect:{value:function(a){this.output.connect(a.input?a.input:a)}},disconnect:{value:function(){this.output.disconnect()}},meta:{value:{name:"Filter",params:{type:{min:0,max:7,defaultValue:"lowpass",type:"int"},frequency:{min:0,max:22050,defaultValue:8e3,type:"float"},Q:{min:1e-4,max:1e3,defaultValue:1,type:"float"},gain:{min:-40,max:40,defaultValue:1,type:"float"},wet:{min:0,max:1,defaultValue:1,type:"float"},dry:{min:0,max:1,defaultValue:0,type:"float"}}}},type:{enumerable:!0,get:function(){return this._type},set:function(a){this._type=~~a,this._filter.type=~~a}},frequency:{enumerable:!0,get:function(){return this._filter.frequency.value},set:function(a){this._filter.frequency.setValueAtTime(a,0)}},Q:{enumerable:!0,get:function(){return this._filter.Q.value},set:function(a){this._filter.Q.setValueAtTime(a,0)}},gain:{enumerable:!0,get:function(){return this._filter.gain.value},set:function(a){this._filter.gain.setValueAtTime(a,0)}},wet:{enumerable:!0,get:function(){return this._wet.gain.value},set:function(a){this._wet.gain.setValueAtTime(a,0)}},dry:{enumerable:!0,get:function(){return this._dry.gain.value},set:function(a){this._dry.gain.setValueAtTime(a,0)}}}),c.Lowpass=function(a,b){return b.type="lowpass",new c(a,b)},c.Highpass=function(a,b){return b.type="highpass",new c(a,b)},c.Bandpass=function(a,b){return b.type="bandpass",new c(a,b)},c.Lowshelf=function(a,b){return b.type="lowshelf",new c(a,b)},c.Highshelf=function(a,b){return b.type="highshelf",new c(a,b)},c.Peaking=function(a,b){return b.type="peaking",new c(a,b)},c.Notch=function(a,b){return b.type="notch",new c(a,b)},c.Allpass=function(a,b){return b.type="allpass",new c(a,b)},d.prototype=Object.create(null,{connect:{value:function(a){this.output.connect(a.input?a.input:a)}},disconnect:{value:function(){this.output.disconnect()}},meta:{value:{name:"delay",params:{type:{min:0,max:2,defaultValue:0,type:"int"},delay:{min:0,max:10,defaultValue:1,type:"float"},feedback:{min:0,max:1,defaultValue:.5,type:"float"},cutoff:{min:0,max:22050,defaultValue:8e3,type:"float"},offset:{min:-.5,max:.5,defaultValue:0,type:"float"},dry:{min:0,max:1,defaultValue:1,type:"float"}}}},_route:{value:function(){this._split.disconnect(),this._leftFilter.disconnect(),this._rightFilter.disconnect(),this._leftFilter.connect(this._merge,0,0),this._rightFilter.connect(this._merge,0,1),this[["_routeNormal","_routeInverted","_routePingPong"][this._type]]()}},_routeNormal:{value:function(){this._split.connect(this._leftDelay,0),this._split.connect(this._rightDelay,1),this._leftFilter.connect(this._leftDelay),this._rightFilter.connect(this._rightDelay)}},_routeInverted:{value:function(){this._split.connect(this._leftDelay,1),this._split.connect(this._rightDelay,0),this._leftFilter.connect(this._leftDelay),this._rightFilter.connect(this._rightDelay)}},_routePingPong:{value:function(){this._split.connect(this._leftDelay,0),this._split.connect(this._rightDelay,1),this._leftFilter.connect(this._rightDelay),this._rightFilter.connect(this._leftDelay)}},type:{enumerable:!0,get:function(){return this._type},set:function(a){this._type=~~a,this._route()}},delay:{enumerable:!0,get:function(){return this._leftDelay.delayTime.value},set:function(a){this._leftDelay.delayTime.setValueAtTime(a,0),this._rightDelay.delayTime.setValueAtTime(a,0)}},feedback:{enumerable:!0,get:function(){return this._leftGain.gain.value},set:function(a){this._leftGain.gain.setValueAtTime(a,0),this._rightGain.gain.setValueAtTime(a,0)}},cutoff:{enumerable:!0,get:function(){return this._leftFilter.frequency},set:function(a){this._leftFilter.frequency=a,this._rightFilter.frequency=a}},offset:{enumerable:!0,get:function(){return this._offset},set:function(a){var b=this._delayTime+a;this._offset=a,0>a?(this._leftDelay.delayTime.setValueAtTime(b,0),this._rightDelay.delayTime.setValueAtTime(this._delayTime,0)):(this._leftDelay.delayTime.setValueAtTime(this._delayTime,0),this._rightDelay.delayTime.setValueAtTime(b,0))}},dry:{enumerable:!0,get:function(){return this._dry.gain.value},set:function(a){this._dry.gain.setValueAtTime(a,0)}}}),b.exports=d},{}],98:[function(a,b){"use strict";function c(){var a=void 0,b=void 0;document.fullscreenElement||document.webkitFullscreenElement?(a=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen,b=document):(a=document.body.requestFullScreen||document.body.webkitRequestFullScreen||document.body.mozRequestFullScreen||document.body.msRequestFullscreen,b=document.body),a&&a.call(b)}function d(){g.innerHTML=f.get(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement===!0?"BUTTON_FS_CANCEL":"BUTTON_FS_ACTIVATE")}var e=a("../config/Config"),f=a("../i18n/Copy"),g=void 0;b.exports={isSupported:function(){return!e.isChromeApp()},setToggleButton:function(a){g=a,g.addEventListener("click",c),document.addEventListener("webkitfullscreenchange",d,!1),document.addEventListener("mozfullscreenchange",d,!1),document.addEventListener("fullscreenchange",d,!1),document.addEventListener("MSFullscreenChange",d,!1)}}},{
"../config/Config":40,"../i18n/Copy":69}],99:[function(a,b){"use strict";function c(a,b,c){if(this._options,this._element,this._container,this.list,this._opened=!1,this._enabled=!0,this._focused=!1,this._selectedIndex=0,this._selectedIndexOnFocus=-(1/0),this._onChange=b,"UL"===a.tagName)this._element=a,this._container=a.parentNode;else{this._container=a;var d=!1;if(a.childNodes.length>0)for(var e=a.childNodes.length,f=void 0,g=void 0;e--;)if(f=a.childNodes[e],"UL"===f.tagName||"OL"===f.tagName){this._element=f,this._options=[];for(var h=f.childNodes.length;h--;)g=f.childNodes[h],"LI"===g.tagName&&this._options.push({title:g.innerHTML,value:g.getAttribute("data-value")||g.innerHTML});this._options.reverse(),d=!0;break}d||(this._element=document.createElement("ul"),a.appendChild(this._element))}c instanceof Array&&this.setOptions(c),a.addEventListener("click",this.handleClick.bind(this)),a.classList.add("selector")}b.exports=c,c.prototype.setOptions=function(a){this._selectedIndex=0,this._options=a;for(var b=this._element;b.childNodes.length>0;)b.removeChild(b.childNodes[0]);var c=void 0;a.forEach(function(a,d){c=document.createElement("li"),c.innerHTML=a.title,c.setAttribute("data-value",a.value),b.appendChild(c),0===d&&c.classList.add("selected")})},c.prototype.hasOptions=function(){return this._options instanceof Array&&this._options.length>0},c.prototype.getValue=function(){return this._options.length>this._selectedIndex?this._options[this._selectedIndex].value:null},c.prototype.setValue=function(a,b){if(!this._options||0===this._options.length||null===a||void 0===a)return this._selectedIndex=0,void 0;b="boolean"==typeof b?b:!0;for(var c=this._options.length,d=void 0;c--;)d=this._options[c],d.value.toString()===a.toString()?(this._selectedIndex=c,this._element.childNodes[c].classList.add("selected"),b&&"function"==typeof this._onChange&&this._onChange()):this._element.childNodes[c].classList.remove("selected")},c.prototype.setValueByFirstLetter=function(a){if("string"==typeof a&&a.length>1)throw new Error("cannot work with multiple characters, only single digits");var b=a.toString().toUpperCase(),c=void 0,d=void 0,e=void 0;for(d=this._options.length,c=this._selectedIndex+1;d>c;++c)if(e=this._options[c],e.title.charAt&&e.title.charAt(0).toUpperCase()===b||e.title.toString()===a)return this.setValue(e.value,!1),!0;for(c=0,d=this._selectedIndex;d>c;++c)if(e=this._options[c],e.title.charAt&&e.title.charAt(0).toUpperCase()===b||e.title.toString()===a)return this.setValue(e.value,!1),!0;return!1},c.prototype.setEnabled=function(a){this._enabled="boolean"==typeof a?a:!1,this._enabled?this._element.classList.remove("disabled"):this._element.classList.add("disabled")},c.prototype.isEnabled=function(){return this._enabled},c.prototype.focus=function(){this._focused||(this._container.focus(),this._container.classList.add("focused"),this._focused=!0,this._selectedIndexOnFocus=this._selectedIndex)},c.prototype.blur=function(){this._focused&&(this._container.classList.remove("focused"),this.close(),this._focused=!1)},c.prototype.isFocused=function(){return this._focused},c.prototype.open=function(){this._opened=!0,this._container.classList.add("opened")},c.prototype.close=function(){this._opened=!1,this._container.classList.remove("opened")},c.prototype.isOpen=function(){return this._opened},c.prototype.handleKey=function(a,b,c){var d=this._options.length-1,e=!0;if("down"===a)switch(b){default:var f=String.fromCharCode(b>=96&&105>=b?b-48:b);e=this.setValueByFirstLetter(f);break;case 38:case 37:this._opened||this.open(),--this._selectedIndex<0?this._selectedIndex=0:this.setValue(this._options[this._selectedIndex].value,!1);break;case 40:case 39:this._opened||this.open(),++this._selectedIndex>d?this._selectedIndex=d:this.setValue(this._options[this._selectedIndex].value,!1);break;case 32:case 13:case 9:this._selectedIndex!==this._selectedIndexOnFocus&&"function"==typeof this._onChange&&this._onChange(),this._opened?this.close():this.open();break;case 27:this._opened?this.close():e=!1}return c.preventDefault(),e},c.prototype.handleClick=function(a){if(this._opened){var b=a.target;"LI"===b.nodeName&&this.setValue(b.getAttribute("data-value")),this.close()}else this.open(),this.list&&this.list.focusOnSelect(this)}},{}],100:[function(a,b){"use strict";function c(a,b,c){this._selects=a,this._parent=b,this._keyboardController=c,this._currentFocus=0,this._maxFocus=this._selects.length-1,this._selects.forEach(function(a){a.selectList=this}.bind(this))}b.exports=c,c.prototype.focus=function(a,b){var c=a<this._currentFocus,d=void 0,e=void 0;if(c)for(d=a;d>=0&&(e=this._selects[d],!e.isEnabled());--d);else for(d=a;d<=this._maxFocus&&(e=this._selects[d],!e.isEnabled());++d);b===!0&&(e=this._selects[a]),e&&(this._selects.forEach(function(a){return a.blur()}),this.focusOnSelect(e))},c.prototype.focusOnSelect=function(a){this._currentFocus=this._selects.indexOf(a),a.focus(),this._keyboardController.setListener(this)},c.prototype.handleKey=function(a,b,c){var d=this._selects[this._currentFocus].handleKey(a,b,c);if("down"===a)switch(b){case 9:c.shiftKey&&this._currentFocus>0?this.focus(this._currentFocus-1):!c.shiftKey&&this._currentFocus<this._maxFocus&&this.focus(this._currentFocus+1);break;case 13:this._currentFocus===this._maxFocus?(this._keyboardController.setListener(this._parent),this._parent.handleKey(a,b,c)):this.focus(this._currentFocus+1);break;case 27:d||this._selects[this._currentFocus].isOpen()||(this._keyboardController.setListener(this._parent),this._parent.handleKey(a,b,c))}c.preventDefault()}},{}],101:[function(a,b){"use strict";b.exports={rangeToIndex:function(a,b){return a[Math.round(b/(100/(a.length-1)))]}}},{}],102:[function(a,b){"use strict";b.exports={getMeasureDurationInMs:function(a,b){return b/(a/60)*1e3},msToFrequency:function(a){return 1e3/a}}},{}],103:[function(a,b){"use strict";var c=a("../model/factory/AudioFactory"),d=a("bowser");b.exports={createWaveTableFromGraph:function(a,b){var c=new DFT(b.length);return c.forward(b),a.createPeriodicWave(c.real,c.imag)},createTimer:function(a,b,d){var e=a.createOscillator();e.onended=d;var f=c.createGainNode(a);return e.connect(f),f.gain.value=0,f.connect(a.destination),c.startOscillation(e,a.currentTime),c.stopOscillation(e,b),e},beep:function(a,b,d,e){var f=a.createOscillator();return f.connect(a.destination),f.frequency.value=b,("number"!=typeof d||0===d)&&(d=a.currentTime),"number"!=typeof e&&(e=1),f.onended=function(){return f.disconnect()},c.startOscillation(f,d),c.stopOscillation(f,d+e),f},iOSinit:function(a){if(d.ios){var b=function e(){document.removeEventListener("touchstart",e,!1);var b=a.createOscillator();b.type=0;var d=c.createGainNode(a);b.connect(d),d.gain.value=0,d.connect(a.destination),c.startOscillation(b,0),c.stopOscillation(b,0),d.disconnect()};document.addEventListener("touchstart",b)}}}},{"../model/factory/AudioFactory":77,bowser:1}],104:[function(a,b){"use strict";function c(a,b){if(a.previous){var c=a.data,e=a.previous.data;if(e.seq.startMeasure===c.seq.startMeasure)e.seq.length=c.seq.startMeasureOffset-e.seq.startMeasureOffset;else{for(var f=c.seq.startMeasure,g=d(b),h=e.seq.startMeasure,i=g-e.seq.startMeasureOffset,j=0;f>h;)j>0&&(i+=g),++h,++j;e.seq.length=i+c.seq.startMeasureOffset}}}function d(a){return 60/a*4}var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=a("../model/factory/EventFactory"),g=b.exports={setPosition:function(a,b,c,e,f,g){var h=d(f),i=e/b.steps*h;a.seq.length="number"==typeof g?g:1/b.steps*h,a.seq.startMeasure=c,a.seq.startMeasureOffset=i,a.seq.endMeasure=c+Math.abs(Math.ceil((i+g-h)/h))},linkEvent:function(a,b,d,e){var f=e[b],g=f.getNodeByData(a),h=d.patterns;g&&f.remove(g);var i=!1,j=void 0,k=void 0,l=void 0,m=void 0,n=void 0,o=void 0,p=void 0;for(l=a.seq.startMeasure,m=h.length;m>l;++l)for(k=h[l].channels[b],n=0,o=k.length;o>n;++n)if(j=k[n],i){if(j)return p=f.addBefore(j,a),c(p,d.meta.tempo),p}else j===a&&(i=!0);return p=f.add(a),c(p,d.meta.tempo),p},linkEvents:function(a,b){b.forEach(function(b,c){b.flush(),a.forEach(function(a){a.channels[c].forEach(function(a){a&&b.add(a)})})})},clearEvent:function(a,b,d,e,f){var g=a.patterns[b],h=g.channels[d];if(f){var i=f.getNodeByData(h[e]);if(i){var j=i.next;i.remove(),j&&c(j,a.meta.tempo)}}h[e]=0},clearEventByReference:function(a,b,c){var d=!1;a.patterns.forEach(function(e,f){e.channels.forEach(function(e,h){d||e.forEach(function(e,i){e===b&&(g.clearEvent(a,f,h,i,c[h]),d=!0)})})})},getFirstEventBeforeStep:function(a,b,c){for(var d=void 0,e=b-1;e>=0;--e)if(d=a[e],d&&("function"!=typeof c||c(d)))return d;return null},glideModuleParams:function(a,b,c,d,h){var i=h[c],j=a.patterns[b],k=j.channels[c],l=k[d],m=l.mp,n=void 0,o=void 0,p=i.getNodeByData(l),q=void 0;if(!m||!p)return null;for(;q=p.next;){if(n=q.data,o=n.mp){if(o.module===m.module)break;return null}p=q}if(!o)return null;m.glide=o.glide=!0;for(var r=!1,s=l,t=[],u=function(b,c,d,h,j){return"object"!==("undefined"==typeof b?"undefined":e(b))&&(b=f.createAudioEvent(l.instrument),h[j]=b,i.addAfter(s,b),g.setPosition(b,c,d,j,a.meta.tempo)),b.mp={module:l.mp.module,value:0,glide:!0},b},v=b;v<a.patterns.length;++v)for(var w=a.patterns[v],x=w.channels[c],y=0;y<x.length;++y){var z=x[y];if(z===l)r=!0;else{if(z===n)break;r&&(z=u(z,w,v,x,y),t.push(z),s=z)}}var A=t.length+1,B=void 0;return o.value>m.value?(B=(o.value-m.value)/A,t.forEach(function(a,b){a.mp.value=m.value+(b+1)*B})):(B=(o.value-m.value)/A,t.forEach(function(a,b){a.mp.value=m.value+(b+1)*B})),t}}},{"../model/factory/EventFactory":78}],105:[function(a,b){"use strict";function c(a){return btoa(g.disassemble(a))}var d=a("../config/Config"),e=a("../i18n/Copy"),f=a("../definitions/Messages"),g=a("../services/SongAssemblyService"),h=a("../model/validators/SongValidator"),i=a("../model/validators/InstrumentValidator"),j=a("pubsub-js");b.exports={importSong:function(){var a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("accept",d.SONG_FILE_EXTENSION);var b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(b),a.addEventListener("change",function(a){var b=new FileReader;b.onerror=function(){j.publish(f.SHOW_ERROR,e.get("ERROR_FILE_LOAD"))},b.onload=function(a){var b=a.target.result,c=g.assemble(atob(b));h.isValid(c)?(efflux.SongModel.saveSong(c),efflux.activeSong=c,j.publish(f.SONG_IMPORTED,c),j.publish(f.SONG_LOADED,c)):j.publish(f.SHOW_ERROR,e.get("ERROR_SONG_IMPORT"))},b.readAsText(a.target.files[0])})},exportSong:function(a){var b=c(a),g=document.createElement("a");g.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(b)),g.setAttribute("target","_blank"),g.setAttribute("download",a.meta.title+d.SONG_FILE_EXTENSION),g.click(),j.publish(f.SONG_EXPORTED,a),j.publish(f.SHOW_FEEDBACK,e.get("SONG_EXPORTED",a.meta.title))},importInstrument:function(){var a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("accept",d.INSTRUMENT_FILE_EXTENSION);var b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(b),a.addEventListener("change",function(a){var b=new FileReader;b.onerror=function(){j.publish(f.SHOW_ERROR,e.get("ERROR_FILE_LOAD"))},b.onload=function(a){var b=a.target.result,c=JSON.parse(atob(b));if(Array.isArray(c)){var d=0;c.forEach(function(a){i.isValid(a)&&(efflux.InstrumentModel.saveInstrument(a),++d)}),d>0?j.publish(f.SHOW_FEEDBACK,e.get("INSTRUMENTS_IMPORTED",d)):j.publish(f.SHOW_ERROR,e.get("ERROR_INSTRUMENT_IMPORT"))}},b.readAsText(a.target.files[0])})},exportInstruments:function(a){if(Array.isArray(a)&&a.length>0){var b=btoa(JSON.stringify(a)),c=document.createElement("a");c.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(b)),c.setAttribute("target","_blank"),c.setAttribute("download","efflux_instrument_presets"+d.INSTRUMENT_FILE_EXTENSION),c.click(),j.publish(f.SHOW_FEEDBACK,e.get("INSTRUMENTS_EXPORTED"))}}}},{"../config/Config":40,"../definitions/Messages":65,"../i18n/Copy":69,"../model/validators/InstrumentValidator":90,"../model/validators/SongValidator":92,"../services/SongAssemblyService":95,"pubsub-js":4}],106:[function(a,b){"use strict";b.exports={getSelectedOption:function(a){return a.options&&a.options.length>0?a.options[a.selectedIndex].value:""},setSelectedOption:function(a,b){var c=a.options;if(c){var d=c.length,e=void 0;for(b=void 0!==b&&null!==b?b.toString():"";d--;)e=c[d],e.value===b?(e.setAttribute("selected","selected"),a.value=b):e.removeAttribute("selected")}},setOptions:function(a,b){for(var c=a.childNodes,d=c.length;d--;)a.removeChild(c[d]);var e=void 0;b.forEach(function(b){e=document.createElement("option"),e.value=b.value,e.innerHTML=b.title,a.appendChild(e)})},setCheckedOption:function(a,b){var c=a.length,d=void 0;for(b=b.toString();c--;)d=a[c],d.checked=d.value===b?!0:!1},getCheckedOption:function(a){for(var b=a.length,c=void 0;b--;)if(c=a[b],c.checked===!0)return c.value;return""},focus:function(a){a&&"function"==typeof a.focus&&setTimeout(function(){return a.focus()},100)},blur:function(a){a&&"function"==typeof a.blur&&setTimeout(function(){return a.blur()},100)}}},{}],107:[function(a,b){"use strict";function c(a){return a.note+a.octave}function d(a,b){if(b.getPlaying()){var c=efflux.EditorModel,d=efflux.activeSong,e=c.activePattern,i=d.patterns[e],j=i.channels[c.activeInstrument],k=Math.round(b.getPosition().step/64*c.amountOfSteps);f.setPosition(a,i,e,k,d.meta.tempo),a.recording=!0;var l=j[k];l&&(a.mp=l.mp),j[k]=a,f.linkEvent(a,c.activeInstrument,efflux.activeSong,efflux.eventList),g.publish(h.REFRESH_PATTERN_VIEW)}else 2!==a.action&&g.publishSync(h.ADD_EVENT_AT_POSITION,[a,{newEvent:!0}])}var e=a("../model/factory/EventFactory"),f=a("./EventUtil"),g=a("pubsub-js"),h=a("../definitions/Messages"),i={},j=b.exports={tuneToOscillator:function(a,b){var c=a+a/1200*b.detune,d=c;0!==b.octaveShift&&(b.octaveShift<0?d=c/Math.abs(2*b.octaveShift):d+=c*Math.abs(2*b.octaveShift)-1);var e=c/12*Math.abs(b.fineShift);return b.fineShift<0?d-=e:d+=e,d},tuneBufferPlayback:function(a){return 1+a.detune/50},adjustEventTunings:function(a,b,c){for(var d=a.length,e=void 0,f=void 0,g=void 0;d--;)(e=a[d])&&e.length>b&&(f=e[b],g=f.generator,g instanceof OscillatorNode?g.frequency.value=j.tuneToOscillator(f.frequency,c):g instanceof AudioBufferSourceNode&&(g.playbackRate.value=j.tuneBufferPlayback(c)))},adjustEventVolume:function(a,b,c){for(var d=a.length,e=void 0,f=void 0;d--;)(e=a[d])&&e.length>b&&(f=e[b],f.gain.gain.value=c.volume)},adjustEventWaveForms:function(a,b,c){if(c instanceof PeriodicWave)for(var d=a.length,e=void 0,f=void 0;d--;)(e=a[d])&&e.length>b&&(f=e[b].generator)instanceof OscillatorNode&&f.setPeriodicWave(c)},noteOn:function(a,b,f,j){var k=c(a);if(i[k])return null;var l=e.createAudioEvent(b.id);return l.note=a.note,l.octave=a.octave,l.action=1,i[k]={event:l,instrument:b,recording:f===!0},g.publishSync(h.NOTE_ON,[l,b]),f&&d(l,j),l},noteOff:function(a,b){var f=c(a),j=i[f];if(j){if(g.publishSync(h.NOTE_OFF,[j.event,j.instrument]),j.recording){var k=e.createAudioEvent(j.instrument.id);k.action=2,d(k,b)}j.event.recording=!1}delete i[f]}}},{"../definitions/Messages":65,"../model/factory/EventFactory":78,"./EventUtil":104,"pubsub-js":4}],108:[function(a,b){"use strict";function c(){this.head=null,this.tail=null,this._length=0}function d(a,b){this._list=a,this.data=b,this.previous=null,this.next=null}var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};b.exports=c,d.prototype.remove=function(){this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous),this._list.head===this&&(this._list.head=this.next),this._list.tail===this&&(this._list.tail=this.previous),--this._list._length,this.data=null,this.previous=null,this.next=null,this._list=null},c.prototype.add=function(a){var b=new d(this,a);return 0===this._length?(this.head=b,this.tail=b):(this.tail.next=b,b.previous=this.tail,this.tail=b),++this._length,b},c.prototype.addBefore=function(a,b){var c=a instanceof d?a:this.getNodeByData(a),e=new d(this,b);if(c){if(c===this.head)this.head=e;else{var f=c.previous;f.next=e,e.previous=f}c.previous=e}return e.next=c,++this._length,e},c.prototype.addAfter=function(a,b){var c=a instanceof d?d:this.getNodeByData(a),e=new d(this,b);if(c===this.tail)this.tail=e;else{var f=c.next;f.previous=e,e.next=f}return e.previous=c,c.next=e,++this._length,e},c.prototype.remove=function(a){if(a instanceof d)a.remove();else if("number"==typeof a){var b=this.head;if(0===this._length||0>a||a>this._length)return;if(0===a)this.head=b.next,this.head?this.head.previous=null:this.tail=b;else if(a===this._length-1)this.tail=this.tail.previous,this.tail.next=null;else{for(var c=0;a>c;)b=b.next,++c;var f=b.previous,g=b.next;f.next=g,g.previous=f}--this._length}else if("object"===("undefined"==typeof a?"undefined":e(a))){var h=this.getNodeByData(a);h&&h.remove()}},c.prototype.getNodeByData=function(a){for(var b=this.head;b;){if(b.data===a)return b;b=b.next}return null},c.prototype.flush=function(){this.head=this.tail=null,this._length=0}},{}],109:[function(a,b){"use strict";var c=!1;b.exports={listen:function(a,b,d){a.addEventListener(b,d,c?{passive:!0}:!1)}};try{var d=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("test",null,d)}catch(e){}},{}],110:[function(a,b){"use strict";function c(a,b,c){var d=a.mp,e=d.glide,f=a.seq.mpLength,h=d.value/100,i=void 0,j=void 0,k=void 0,l=void 0;for(i=b.length;i--;)if(k=b[i],k)for(j=k.length;j--;)l=k[j],g(l.gain.gain,h,c,f,e,l)}function d(a,b,c){var d=a.mp,e=d.glide,f=a.seq.mpLength,h="pitchUp"===d.module,i=void 0,j=void 0,k=void 0,l=void 0,m=void 0,n=void 0,o=void 0;for(i=b.length;i--;)if(k=b[i],k)for(j=k.length;j--;)l=k[j],m=l.generator,m instanceof OscillatorNode?(n=l.frequency+l.frequency/1200,o=n*(d.value/100),h?o+=l.frequency:o=l.frequency-o/2,g(m.frequency,o,c,f,e,l)):m instanceof AudioBufferSourceNode&&(n=d.value/100,o=h?m.playbackRate.value+n:m.playbackRate.value-n,g(m.playbackRate,o,c,f,e,l))}function e(a,b,c){var d=a.mp,e=d.glide,f=a.seq.mpLength,i=b.filter,j=d.value/100;switch(d.module){case"filterFreq":g(i.filter.frequency,j*h.MAX_FILTER_FREQ,c,f,e);break;case"filterQ":g(i.filter.Q,j*h.MAX_FILTER_Q,c,f,e);break;case"filterLFOSpeed":g(i.lfo.frequency,j*h.MAX_FILTER_LFO_SPEED,c,f,e);break;case"filterLFODepth":g(i.lfoAmp.gain,j*h.MAX_FILTER_LFO_DEPTH/100*i.filter.frequency.value,c,f,e)}}function f(a,b){var c=a.mp,d=b.delay.delay,e=c.value/100;switch(c.module){case"delayTime":d.delay=e*h.MAX_DELAY_TIME;break;case"delayFeedback":d.feedback=e*h.MAX_DELAY_FEEDBACK;break;case"delayCutoff":d.cutoff=e*h.MAX_DELAY_CUTOFF;break;case"delayOffset":d.offset=e*h.MAX_DELAY_OFFSET}}function g(a,b,c,d,e,f){(!e||f&&!f.gliding)&&(a.cancelScheduledValues(c),a.setValueAtTime(e?a.value:b,c)),e&&(a.linearRampToValueAtTime(b,c+d),f&&(f.gliding=!0))}var h=a("../config/Config"),i=(a("../third_party/Delay"),a("../utils/ArrayUtil")),j=a("../definitions/Messages"),k=a("pubsub-js"),l=b.exports={applyRouting:function(a,b){var c=a.output,d=a.eq,e=a.overdrive.overdrive,f=a.filter.filter,g=a.delay.delay;c.disconnect(),e.disconnect(),d.output.disconnect(),f.disconnect(),g.output.disconnect();var h=[],i=c;d.eqEnabled&&(i.connect(d.lowBand),i.connect(d.midBand),i.connect(d.highBand),i=d.output),a.overdrive.overdriveEnabled&&h.push(e),a.filter.filterEnabled&&h.push(f),a.delay.delayEnabled&&h.push(g),h.push(b);var j=void 0;h.forEach(function(a){j=a.input instanceof GainNode?a.input:a,i.connect(j),i=a.output instanceof GainNode?a.output:a})},applyModuleParamChange:function(a,b,g,h,m,n){switch(a.mp.module){case"volume":c(a,h,m);break;case"pitchUp":case"pitchDown":d(a,h,m);break;case"filterEnabled":b.filter.filterEnabled=a.mp.value>=50,l.applyRouting(b,n);break;case"filterLFOEnabled":g.filter.lfoType=i.rangeToIndex(["off","sine","square","sawtooth","triangle"],a.mp.value),k.publishSync(j.UPDATE_FILTER_SETTINGS,[g.id,g.filter]);break;case"filterFreq":case"filterQ":case"filterLFOSpeed":case"filterLFODepth":e(a,b,m);break;case"delayEnabled":b.delay.delayEnabled=a.mp.value>=50,l.applyRouting(b,n);break;case"delayTime":case"delayFeedback":case"delayCutoff":case"delayOffset":f(a,b,m)}}}},{"../config/Config":40,"../definitions/Messages":65,"../third_party/Delay":97,"../utils/ArrayUtil":101,"pubsub-js":4}],111:[function(a,b){"use strict";var c=2.55;b.exports={toHex:function(a){var b=Math.round(a*c).toString(16);return 1===b.length?"0"+b:b},fromHex:function(a){return parseInt(a,16)/c},isHex:function(a){if("string"!=typeof a)return!1;var b=parseInt(a,16).toString(16).toUpperCase();return b.length!==a.length?"0"+b===a.toUpperCase():b===a.toUpperCase()}}},{}],112:[function(a,b){"use strict";b.exports={clone:function(a){return JSON.parse(JSON.stringify(a))}}},{}],113:[function(a,b){"use strict";var c=a("../model/factory/PatternFactory");b.exports={addEmptyPatternAtIndex:function(a,b,d){var e=a.slice(0,b),f=a.slice(b);return e.push(c.createEmptyPattern(d)),f.forEach(function(a){a.channels.forEach(function(a){a.forEach(function(a){a&&(++a.seq.startMeasure,++a.seq.endMeasure)})})}),e.concat(f)},removePatternAtIndex:function(a,b){a.splice(b,1);var c=a.slice(0,b),d=a.slice(b);return d.forEach(function(a){a.channels.forEach(function(a){a.forEach(function(a){a&&(--a.seq.startMeasure,--a.seq.endMeasure)})})}),c.concat(d)}}},{"../model/factory/PatternFactory":81}],114:[function(a,b){"use strict";a("../model/factory/PatternFactory");b.exports={hasContent:function c(a){var c=!1;return a.patterns.forEach(function(a){a.channels.forEach(function(a){a.forEach(function(a){a&&0!==a.action&&(c=!0)})})}),c},updateEventOffsets:function(a,b){var c=void 0,d=void 0,e=void 0,f=void 0,g=void 0,h=void 0;for(c=a.length;c--;)for(f=a[c],d=f.channels.length;d--;)for(g=f.channels[d],e=g.length;e--;)h=g[e],h&&h.seq&&(h.seq.startMeasureOffset*=b,h.seq.length*=b)},resetPlayState:function(a){a.forEach(function(a){a.channels.forEach(function(a){a.forEach(function(a){a&&(a.seq.playing=!1)})})})}}},{"../model/factory/PatternFactory":81}],115:[function(a,b){"use strict";function c(a){var b=void 0;try{b=e.compressToUTF16(a)}catch(c){return a}return b}function d(a){var b=void 0;try{b=e.decompressFromUTF16(a)}catch(c){return a}return!b||b.length<a.length?a:b}var e=a("lz-string"),f=void 0,g=void 0,h=b.exports={init:function(){try{g=window.chrome.storage.local,f=!0}catch(a){g=window.localStorage}},isAvailable:function(){return"undefined"!=typeof g},getItem:function(a){return new Promise(function(b,c){if(h.isAvailable())if(f)g.get(a,function(e){null!==e&&0!==Object.keys(e).length&&e[a]?b(d(e[a])):c(Error("Data for '"+a+"' not found"))});else{var e=g.getItem(a);e?b(d(e)):c(Error("Data for '"+a+"' not found"))}else c(Error("Storage not available"))})},setItem:function(a,b){var d=c(b);return new Promise(function(b,c){if(h.isAvailable())if(f){var e={};e[a]=d,g.set(e,b)}else b(g.setItem(a,d));else c(Error("Storage not available"))})}}},{"lz-string":2}],116:[function(a,b){"use strict";function c(a){return 10>a?"0"+a:a}b.exports={timestampToDate:function(a){var b=new Date(a),d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e=b.getFullYear(),f=d[b.getMonth()],g=b.getDate(),h=b.getHours(),i=b.getMinutes(),j=b.getSeconds();return g+" "+f+" "+e+" "+c(h)+":"+c(i)+":"+c(j)}}},{}],117:[function(a,b){"use strict";function c(a){var b=void 0;L.instrumentRef&&(b=B(),b.table=a,"CUSTOM"!==b.waveform?(D.setSelectedOption(W,"CUSTOM"),b.enabled||(b.enabled=!0,D.setSelectedOption(V,!0)),u(null)):M(Ja.EVENTS.CACHE_OSC),y())}function d(){window.open(E.INSTRUMENT_EDITOR_HELP,"_blank")}function e(a){var b=a.target;if("LI"===b.nodeName){var c=parseFloat(b.getAttribute("data-oscillator"));isNaN(c)||M(Ja.EVENTS.SET_OSC,c-1)}}function f(a){var b=a.target,c="active";if("LI"===b.nodeName){switch(b.getAttribute("data-type")){default:case"amplitude":aa.classList.add(c),ba.classList.remove(c);break;case"pitch":aa.classList.remove(c),ba.classList.add(c)}for(var d=b.querySelectorAll("#envelopeTabs li"),e=d.length;e--;){var f=d[e];f===b?f.classList.add("active"):f.classList.remove("active")}}}function g(a){var b=a.target,c="active";if("LI"===b.nodeName){switch(b.getAttribute("data-type")){default:case"page1":la.classList.add(c),ma.classList.remove(c);break;case"page2":la.classList.remove(c),ma.classList.add(c)}for(var d=b.querySelectorAll("#modulesTabs li"),e=d.length;e--;){var f=d[e];f===b?f.classList.add("active"):f.classList.remove("active")}}}function h(a){var b=a.target,c=parseFloat(b.value),d=void 0;switch(b){default:case Z:d="detune";break;case $:d="octave";break;case _:d="fine"}M(Ja.EVENTS.SET_TUNING,{type:d,value:c}),y()}function i(a){var b=B(),c=a.target,d=parseFloat(c.value);switch(c){case ca:b.adsr.attack=d;break;case da:b.adsr.decay=d;break;case ea:b.adsr.sustain=d;break;case fa:b.adsr.release=d}y()}function j(a){var b=B(),c=a.target,d=parseFloat(c.value);switch(c){case ga:b.pitch.range=d;break;case ha:b.pitch.attack=d;break;case ia:b.pitch.decay=d;break;case ja:b.pitch.sustain=d;break;case ka:b.pitch.release=d}y()}function k(){var a=L.instrumentRef.filter;a.frequency=parseFloat(oa.value),a.q=parseFloat(pa.value),a.speed=parseFloat(sa.value),a.depth=parseFloat(ta.value),a.lfoType=D.getSelectedOption(qa),a.type=D.getSelectedOption(ra),a.enabled="true"===D.getSelectedOption(na),G.publishSync(F.UPDATE_FILTER_SETTINGS,[L.instrumentId,a]),y()}function l(){var a=L.instrumentRef.delay;a.enabled="true"===D.getSelectedOption(Da),a.type=parseFloat(D.getSelectedOption(Ea)),a.time=parseFloat(Fa.value),a.feedback=parseFloat(Ga.value),a.cutoff=parseFloat(Ha.value),a.offset=parseFloat(Ia.value)-.5,G.publishSync(F.UPDATE_DELAY_SETTINGS,[L.instrumentId,a]),y()}function m(){var a=L.instrumentRef.eq;a.enabled="true"===D.getSelectedOption(ua),a.lowGain=parseFloat(va.value),a.midGain=parseFloat(wa.value),a.highGain=parseFloat(xa.value),G.publishSync(F.UPDATE_EQ_SETTINGS,[L.instrumentId,a]),y()}function n(){var a=L.instrumentRef.overdrive;a.enabled="true"===D.getSelectedOption(ya),a.drive=parseFloat(za.value),a.color=parseFloat(Aa.value),a.preBand=parseFloat(Ba.value),a.postCut=parseFloat(Ca.value),G.publishSync(F.UPDATE_OVERDRIVE_SETTINGS,[L.instrumentId,a]),y()}function o(){var a=parseFloat(D.getSelectedOption(R));M(Ja.EVENTS.SELECT_INSTRUMENT,a)}function p(){var a=D.getSelectedOption(S);M(Ja.EVENTS.SELECT_PRESET,a)}function q(){var a=U.value.replace("*","");M(Ja.EVENTS.SAVE_PRESET,a)}function r(){N.setSuspended(!0)}function s(){N.setSuspended(!1)}function t(){var a=B();a.enabled="true"===D.getSelectedOption(V),M(Ja.EVENTS.CACHE_OSC),y()}function u(){var a=B();B().waveform=D.getSelectedOption(W),x(a),M(Ja.EVENTS.CACHE_OSC),a.enabled||(D.setSelectedOption(V,!0),a.enabled=!0),y()}function v(){B().volume=parseFloat(X.value),G.publishSync(F.ADJUST_OSCILLATOR_VOLUME,[L.instrumentId,L.activeOscillatorIndex,B()]),y()}function w(){L.instrumentRef.volume=parseFloat(Y.value),G.publishSync(F.ADJUST_INSTRUMENT_VOLUME,[L.instrumentId,L.instrumentRef.volume]),y()}function x(a){"CUSTOM"!==a.waveform?Q.generateAndSetTable(a.waveform):Q.setTable(H.getTableForOscillator(a)),A("NOISE"!==a.waveform)}function y(){null!==L.instrumentRef.presetName&&-1===U.value.indexOf("*")&&(U.value+="*")}function z(a){for(var b=O.querySelectorAll("#oscillatorTabs li"),c=void 0,d=b.length;d--;)c=b[d].classList,d===a?c.add("active"):c.remove("active")}function A(a){[$,_].forEach(function(b){a?b.removeAttribute("disabled"):b.setAttribute("disabled","disabled")})}function B(){return L.instrumentRef.oscillators[L.activeOscillatorIndex]}var C=a("../config/Config"),D=a("../utils/Form"),E=a("../definitions/Manual"),F=a("../definitions/Messages"),G=a("pubsub-js"),H=a("../model/factory/InstrumentFactory"),I=a("../components/WaveTableDraw"),J=a("zCanvas"),K=void 0,L=void 0,M=void 0,N=void 0,O=void 0,P=void 0,Q=void 0,R=void 0,S=void 0,T=void 0,U=void 0,V=void 0,W=void 0,X=void 0,Y=void 0,Z=void 0,$=void 0,_=void 0,aa=void 0,ba=void 0,ca=void 0,da=void 0,ea=void 0,fa=void 0,ga=void 0,ha=void 0,ia=void 0,ja=void 0,ka=void 0,la=void 0,ma=void 0,na=void 0,oa=void 0,pa=void 0,qa=void 0,ra=void 0,sa=void 0,ta=void 0,ua=void 0,va=void 0,wa=void 0,xa=void 0,ya=void 0,za=void 0,Aa=void 0,Ba=void 0,Ca=void 0,Da=void 0,Ea=void 0,Fa=void 0,Ga=void 0,Ha=void 0,Ia=void 0,Ja=b.exports={EVENTS:{READY:0,CLOSE:1,SET_OSC:2,CACHE_OSC:3,SELECT_PRESET:4,SELECT_INSTRUMENT:5,SET_TUNING:6,SAVE_PRESET:7},init:function(a,b,x){K=a,L=K.InstrumentModel,N=b,M=x,O=document.createElement("div"),O.setAttribute("id","instrumentEditor"),K.TemplateService.render("instrumentEditor",O).then(function(){R=O.querySelector("#instrumentSelect"),S=O.querySelector("#presetSelect"),T=O.querySelector("#presetSave"),U=O.querySelector("#presetName"),V=O.querySelector("#oscillatorEnabled"),W=O.querySelector("#oscillatorWaveformSelect"),X=O.querySelector("#volume"),Y=O.querySelector("#instrumentVolume"),Z=O.querySelector("#detune"),$=O.querySelector("#octaveShift"),_=O.querySelector("#fineShift"),ca=O.querySelector("#attack"),da=O.querySelector("#decay"),ea=O.querySelector("#sustain"),fa=O.querySelector("#release"),ga=O.querySelector("#pitchRange"),ha=O.querySelector("#pitchAttack"),ia=O.querySelector("#pitchDecay"),ja=O.querySelector("#pitchSustain"),ka=O.querySelector("#pitchRelease"),aa=O.querySelector("#amplitudeEditor"),ba=O.querySelector("#pitchEditor"),la=O.querySelector("#modulesPage1"),ma=O.querySelector("#modulesPage2"),na=O.querySelector("#filterEnabled"),oa=O.querySelector("#filterFrequency"),pa=O.querySelector("#filterQ"),qa=O.querySelector("#filterLFO"),ra=O.querySelector("#filterType"),sa=O.querySelector("#filterSpeed"),ta=O.querySelector("#filterDepth"),Da=O.querySelector("#delayEnabled"),Ea=O.querySelector("#delayType"),Fa=O.querySelector("#delayTime"),Ga=O.querySelector("#delayFeedback"),Ha=O.querySelector("#delayCutoff"),Ia=O.querySelector("#delayOffset"),ua=O.querySelector("#eqEnabled"),va=O.querySelector("#eqLow"),wa=O.querySelector("#eqMid"),xa=O.querySelector("#eqHigh"),ya=O.querySelector("#odEnabled"),za=O.querySelector("#odDrive"),Aa=O.querySelector("#odColor"),Ba=O.querySelector("#odPreBand"),Ca=O.querySelector("#odPostCut"),P=new J.canvas(512,200),P.setBackgroundColor("#000000"),P.insertInPage(O.querySelector("#canvasContainer")),Q=new I(P.getWidth(),P.getHeight(),c),O.querySelector(".close-button").addEventListener("click",function(){return M(Ja.EVENTS.CLOSE)}),O.querySelector(".help-button").addEventListener("click",d),O.querySelector("#oscillatorTabs").addEventListener("click",e),O.querySelector("#envelopeTabs").addEventListener("click",f),O.querySelector("#modulesTabs").addEventListener("click",g),R.addEventListener("change",o),S.addEventListener("change",p),T.addEventListener("click",q),U.addEventListener("focus",r),U.addEventListener("blur",s),V.addEventListener("change",t),W.addEventListener("change",u),X.addEventListener("input",v),[Z,$,_].forEach(function(a){a.addEventListener("input",h)}),[ca,da,ea,fa].forEach(function(a){a.addEventListener("input",i)}),[ga,ha,ia,ja,ka].forEach(function(a){a.addEventListener("input",j)}),Y.addEventListener("input",w),na.addEventListener("change",k),qa.addEventListener("change",k),ra.addEventListener("change",k),[oa,pa,sa,ta].forEach(function(a){a.addEventListener("input",k)}),Da.addEventListener("change",l),Ea.addEventListener("change",l),[Fa,Ga,Ha,Ia].forEach(function(a){a.addEventListener("input",l)}),ua.addEventListener("change",m),[va,wa,xa].forEach(function(a){a.addEventListener("input",m)}),ya.addEventListener("change",n),[za,Aa,Ba,Ca].forEach(function(a){
a.addEventListener("input",n)}),Ja.updateWaveformSize(),M(Ja.EVENTS.READY)})},update:function(a,b){z(b);var c=B();O.querySelector("h2").innerHTML="Editing "+a.name,x(c),D.setSelectedOption(V,c.enabled),D.setSelectedOption(W,c.waveform),D.setSelectedOption(R,a.id),Z.value=c.detune,$.value=c.octaveShift,_.value=c.fineShift,X.value=c.volume,ca.value=c.adsr.attack,da.value=c.adsr.decay,ea.value=c.adsr.sustain,fa.value=c.adsr.release,ga.value=c.pitch.range,ha.value=c.pitch.attack,ia.value=c.pitch.decay,ja.value=c.pitch.sustain,ka.value=c.pitch.release,Y.value=a.volume,D.setSelectedOption(na,a.filter.enabled),D.setSelectedOption(qa,a.filter.lfoType),D.setSelectedOption(ra,a.filter.type),oa.value=a.filter.frequency,pa.value=a.filter.q,sa.value=a.filter.speed,ta.value=a.filter.depth,D.setSelectedOption(Da,a.delay.enabled),D.setSelectedOption(Ea,a.delay.type),Fa.value=a.delay.time,Ga.value=a.delay.feedback,Ha.value=a.delay.cutoff,Ia.value=a.delay.offset+.5,D.setSelectedOption(ua,a.eq.enabled),va.value=a.eq.lowGain,wa.value=a.eq.midGain,xa.value=a.eq.highGain,D.setSelectedOption(ya,a.overdrive.enabled),za.value=a.overdrive.drive,Aa.value=a.overdrive.color,Ba.value=a.overdrive.preBand,Ca.value=a.overdrive.postCut},updateWaveformSize:function(){var a=C.WAVE_TABLE_SIZE,b=window.innerWidth,c=a>b?.9*b:a;P.getWidth()!==c&&(P.setDimensions(c,200),Q._bounds.width=c)},inject:function(a){a.appendChild(O),P.addChild(Q)},remove:function(){O.parentNode&&(O.parentNode.removeChild(O),P.removeChild(Q))},setPresets:function(a,b){D.setOptions(S,a),D.setSelectedOption(S,b),U.value="string"==typeof b?b:""}}},{"../components/WaveTableDraw":39,"../config/Config":40,"../definitions/Manual":64,"../definitions/Messages":65,"../model/factory/InstrumentFactory":79,"../utils/Form":106,"pubsub-js":4,zCanvas:18}],118:[function(a,b){"use strict";function c(){window.open(g.PARAM_ENTRY_HELP,"_blank")}function d(a){var b=a.target;"LI"===b.nodeName&&m.setSelectedValueInList(m.moduleList,b.getAttribute("data-value"))}function e(){var a=parseFloat(l.value);j.innerHTML=10>a?"0"+a:a}var f=a("../utils/Form"),g=a("../definitions/Manual"),h=void 0,i=void 0,j=void 0,k=void 0,l=void 0,m=b.exports={EVENTS:{CLOSE:0,READY:1},moduleList:null,init:function(a,b){return h=a,new Promise(function(a){h.TemplateService.renderAsElement("moduleParamEntry").then(function(f){i=f,m.moduleList=i.querySelectorAll("#moduleSelect li"),k=i.querySelectorAll("input[type=radio]"),l=i.querySelector("#moduleValue"),j=i.querySelector("#moduleInputValue"),i.querySelector(".help-button").addEventListener("click",c),i.querySelector(".confirm-button").addEventListener("click",function(){b(m.EVENTS.READY)}),i.querySelector(".close-button").addEventListener("click",function(){b(m.EVENTS.CLOSE)}),i.querySelector("#moduleSelect").addEventListener("click",d),l.addEventListener("input",e),a()})})},inject:function(a){i.parentNode||a.appendChild(i)},remove:function(){i.parentNode&&i.parentNode.removeChild(i)},toggleGlide:function(){f.setCheckedOption(k,!m.hasGlide())},setGlide:function(a){f.setCheckedOption(k,a)},hasGlide:function(){return"true"===f.getCheckedOption(k)},getValue:function(){return parseFloat(l.value)},setValue:function(a){l.value=a,e(null)},setSelectedValueInList:function(a,b){b=b.toString();for(var c=a.length,d=void 0;c--;)d=a[c],d.getAttribute("data-value")===b?d.classList.add("selected"):d.classList.remove("selected")},getSelectedValueFromList:function(a){for(var b=a.length,c=void 0;b--;)if(c=a[b],c.classList.contains("selected"))return c.getAttribute("data-value");return null}}},{"../definitions/Manual":64,"../utils/Form":106}],119:[function(a,b){"use strict";function c(a){if("caretRangeFromPoint"in document&&!i.safari){var b=document.caretRangeFromPoint(a.clientX,a.clientY),c=0;if(b&&b.startContainer){var d=b.startContainer;d instanceof Element&&d.parentElement instanceof Element||(d=d.parentElement),d.classList.contains("moduleValue")?c=3:d.classList.contains("moduleParam")?c=2:d.classList.contains("instrument")&&(c=1)}k.activeSlot=c,h.publish(g.HIGHLIGHTED_SLOT_CHANGED)}}function d(){o=o||m.querySelectorAll(".pattern")}function e(a){return p[a]=p[a]||o[a].querySelectorAll("li")}var f=a("../model/SettingsModel"),g=a("../definitions/Messages"),h=a("pubsub-js"),i=a("bowser"),j=void 0,k=void 0,l=void 0,m=void 0,n=void 0,o=void 0,p=void 0,q=void 0,r=150,s=32,t=b.exports={init:function(a,b){j=a,m=b,k=j.EditorModel,l=j.SelectionModel,n=document.querySelector("#patternContainer")},render:function(a){j.TemplateService.render("patternTrackList",m,{steps:k.amountOfSteps,pattern:a,activeChannel:k.activeInstrument,activeStep:k.activeStep,format:j.SettingsModel.getSetting(f.PROPERTIES.INPUT_FORMAT)||"hex"}).then(function(){o=null,p=[],-1!==k.activeStep&&t.highlightActiveStep()})},highlightActiveStep:function(){d();var a="active",b="selected",c=k.activeStep,f=k.activeSlot,g=void 0,h=void 0,i=void 0,j=void 0;q&&q.classList.remove(a),q=null;for(var m=0,n=o.length;n>m;++m){h=o[m],g=l.selectedChannels[m],i=e(m),h.querySelectorAll("li");for(var p=i.length;p--;){j=i[p];var r=m===k.activeInstrument,s=p===c;if(-1===f){var t=j.classList;r&&s?t.add(a):t.remove(a),g&&g.indexOf(p)>-1?t.add(b):t.remove(b)}else{if(r&&s){var u=j.querySelectorAll("span");q=u[f],q&&q.classList.add(a)}g||j.classList.remove(b),r&&s?j.classList.add(a):j.classList.remove(a)}}}},handleSlotClick:function(a,b,f){d();var g=b.hasShift(),h=k.activeInstrument,i=k.activeStep,j=!1,m=void 0,n=void 0;l.hasSelection()&&(h=l.firstSelectedChannel,i=l.minSelectedStep);for(var p=0,q=o.length;q>p&&!j;++p){m=o[p],n=e(p);for(var r=n.length;r--;)if(n[r]===a.target){p!==k.activeInstrument&&(k.activeInstrument=p,k.activeInstrument=p),g?(l.setSelectionChannelRange(h,p),l.setSelection(i,r)):l.clearSelection(),k.activeStep=r,k.activeSlot=-1,g||"click"!==a.type||c(a),t.highlightActiveStep(),b.setListener(f),"dblclick"===a.type&&(a.preventDefault(),f.editNoteForStep(),j=!0);break}}},focusActiveStep:function(a){var b=a.scrollTop,c=n.scrollLeft,d=b+a.offsetHeight,e=c+n.offsetWidth,f=k.activeInstrument*r,g=(k.activeInstrument+1)*r,h=k.activeStep*s,i=(k.activeStep+1)*s;i>=d?a.scrollTop=i-a.offsetHeight:b>h&&(a.scrollTop=h),g>=e?n.scrollLeft=g-n.offsetWidth+r:c>f&&(n.scrollLeft=f)}}},{"../definitions/Messages":65,"../model/SettingsModel":74,bowser:1,"pubsub-js":4}],120:[function(){"use strict";var a,b,c=25;self.addEventListener("message",function(d){if(b=d.data,void 0!==b)switch(b.cmd){case"start":clearInterval(a),a=setInterval(function(){postMessage({cmd:"collect"})},c);break;case"stop":clearInterval(a),a=null}},!1)},{}],121:[function(){"use strict";function a(){Handlebars.registerHelper("toLowerCase",function(a){return"string"==typeof a?a.toLowerCase():""}),Handlebars.registerHelper("loop",function(a,b){for(var c="",d=0;a>d;++d)c+=b.fn(d);return c}),Handlebars.registerHelper({eq:function(a,b){return a===b},and:function(a,b){return a&&b},or:function(a,b){return a||b}}),Handlebars.registerHelper("mparam",function(a){var b=a&&a.glide?"G ":"";return a&&a.module&&(b+=a.module.charAt(0).toUpperCase(),b+=a.module.match(/([A-Z]?[^A-Z]*)/g)[1].charAt(0)),b}),Handlebars.registerHelper("mvalue",function(a,b){var c,d="";return a&&(c="pct"===b?Math.min(99,parseInt(a.value,10)).toString():Math.round(2.55*a.value).toString(16).toUpperCase(),d+=" "+(1===c.length?"0"+c:c)),d})}var b,c;self.addEventListener("message",function(d){if(b=d.data,void 0!==b)switch(b.cmd){case"init":var e=b.scripts;Array.isArray(e)&&(e.forEach(function(a){importScripts(a)}),void 0!==Handlebars&&a());break;case"render":c="","function"==typeof self.effluxTemplates[b.template]&&(c=self.effluxTemplates[b.template](b.data)),self.postMessage({cmd:"ready",template:b.template,html:c})}},!1)},{}]},{},[38,39,40,41,42,43,44,45,46,47,48,49,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121]);