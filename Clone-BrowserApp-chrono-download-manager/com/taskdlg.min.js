/*
 */
const ba=globalThis,C=chrome.i18n?.getMessage||(()=>""),ca=chrome.runtime?.sendMessage||(()=>{});function I(a){return atob(a).split("").map(c=>String.fromCharCode(c.charCodeAt(0)+1)).join("")}function ha(a){chrome.tabs.create({url:a,active:!0}).then(c=>chrome.windows.update(c.windowId,{focused:!0}))}function L(a){return a?a.trim():""}function ia(a,c){return a&&c&&a.startsWith(c)?a.slice(c.length):a}const ka=Date[I("bW52")]();
var la=RegExp("^data:([^;]+)((?:;[^=]+=[^;]+)*)(?:;(base64))?,(.+)$"),ma=RegExp("^(?:(?:https?|ftp)://)?(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$",
"i"),na=RegExp("^(blob:|data:|(https?|ftp)://)");
const oa={"3gpp":"3gp","3gpp2":"3g2",aiff:"aif","ms-asf":"asf",basic:"au",msvideo:"avi",binary:"bin",macbinary:"bin","octet-stream":"bin","windows-bmp":"bmp",bzip:"bz",bzip2:"bz2",java:"class","java-class":"class",msword:"doc","openxmlformats-officedocument.wordprocessingml.document":"docx",fortran:"f",icon:"ico","java-source":"java",jpeg:"jpg",pjpeg:"jpg",mpegurl:"m3u",rfc822:"mhtml",matroska:"mkv",quicktime:"mov",mpeg3:"mp3",mpeg:"mp4","sgi-movie":"mv",pascal:"p","portable-bitmap":"pbm","portable-floatmap":"pfm",
"portable-graymap":"pgm","portable-pixmap":"ppm",mspowerpoint:"ppt","ms-powerpoint":"ppt",powerpoint:"ppt","openxmlformats-officedocument.presentationml.presentation":"pptx","application/vnd.openxmlformats-officedocument.presentationml.slideshow":"ppsx",postscript:"ps","adobe.photoshop":"psd","script.phyton":"py","pn-realaudio":"ra","rn-realmedia":"rm",bsh:"sh","svg+xml":"svg",gnutar:"tgz",plain:"txt","ms-wma":"wma","ms-wmv":"wmv",excel:"xls",msexcel:"xls","ms-excel":"xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx",
compressed:"zip","zip-compressed":"zip"};
function pa(a){a=(a||"").trim();var c={},h=14;if(a.startsWith("blob:")){for(;h--;)c[qa[h]]="";return c}if(a.indexOf("data:")==0){for(;h--;)c[qa[h]]="";c.protocol="data";(a=la.exec(a))&&a[1]&&(a=a[1].match(/(?:[^\/]+)\/(?:x-)?(?:vnd\.)?(.+)/i))&&a[1]&&(c.file="download."+(oa[a[1]]||a[1]))}else try{const w=new URL(a);{var n=w.pathname;const p=n.lastIndexOf(".");if(p==-1||p==n.length-1)var q="";else{var y=n.lastIndexOf("/");q=y>p?"":n.slice(y+1)}}{var t=w.pathname;const p=t.lastIndexOf(".");if(p==-1||
p==t.length-1)var E=t;else{var z=t.lastIndexOf("/");E=z>p?t:t.substring(0,z+1)}}return{anchor:ia(w.hash,"#"),authority:w.host,directory:E,file:q,host:w.host,password:w.password,path:w.pathname,port:w.port,protocol:w.protocol,query:ia(w.search,"?"),relative:w.pathname,source:w.href,user:w.username,userInfo:w.username&&w.password?w.username+":"+w.password:w.username}}catch(w){for(console.error(w);h--;)c[qa[h]]=""}return c}var qa="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");
function ra(a){a=(a||"").trim();var c=a.lastIndexOf("."),h=c!=-1;h||(c=a.length);return{D:a.substr(0,c),m:a.substr(c+1),L:h}}function sa(a){a=a||"";if(a.startsWith("blob:"))return!0;var c=a.indexOf("data:")==0,h=a.indexOf("\r");h==-1&&(h=a.indexOf("\n"));h!=-1?a=a.substr(0,c?Math.min(h,1024):h):c&&a.length>1024&&(a=a.substr(0,1024));return c?la.test(a):ma.test(a)}function ta(a){return na.test(a)?a:"http://"+a}
function ua(a){return(a||"").trim().replace(/(^(\\|\/|\.)+)|((\\|\/|\.)+$)/g,"").replace(/\s*(\\|\/)+\s*/g,"/").trim()}function va(a,c=!0){return a.replace(/[\/\\]+$/g,"").replace(/[\/\\]+/g,"/").trim()+(c==0?"":"/")}function wa(a,c){return a?c?a.replace(/[\/\\]+$/,"")+"/"+c.replace(/[\/\\]+$/,""):a:c}function P(a){return a.replace(/[\/\\]+/g,navigator.platform.indexOf("Win")==0?"\\":"/")}
function xa(a){let c=0;a[a.length-1]=="/"&&(c=1);let h=a.lastIndexOf("/",a.length-1-c)+1;return[a.substring(0,h),a.substring(h,Math.max(h,a.length-c))]}
function ya(a,c){let h=a.split("/");var n=0,q=h.length-1;h[0]||++n;h[q]||--q;if(q<n)return a;a=n+1;var y=q-1;for(n=h[n].length+h[q].length;a<=y&&n<c;){q=Math.min(h[a].length,h[y].length);if(q>3&&n+q>c)break;n+=q;h[a].length<h[y].length?++a:--y}a<=y&&h.splice(a,y-a+1,"...");a=h.length-1-Number(!h[h.length-1]);y=h[a];--c;y.length>c?(c=Math.floor(c/2),c=y.slice(0,c)+"..."+y.slice(y.length-c)):c=y;h[a]=c;return h.join("/")}
function Aa(){let a,c;return{promise:new Promise((h,n)=>{a=h;c=n}),resolve:a,reject:c}}const Ba=ka>Number(I("MDYzLy8vODU4MDczNQ")),Ca=I("bV4"),Da=I("YF4");function Ea(a){if(a===0)return"a";let c="";for(;a>0;)c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"[a%62]+c,a=Math.floor(a/62);return c}let Fa;
function Ga(a){if(a&&(a=typeof a==="string"?a:a.stack?a.stack:a.toString?a.toString():JSON.stringify(a))&&typeof a==="string"&&(Fa||(Fa=/extensions gallery cannot be scripted|cannot access contents of the page|extension manifest must request permission to access the respective host|could not establish connection|receiving end does not exist|frame with ID \d+|Filename not yet determined|no (tab|window) with id:|Tabs cannot be edited right now|The page keeping the extension port is moved into back\/forward cache/i),!Fa.test(a)))return a.slice(0,
400)}const Ha=["",[String.fromCharCode(103),String.fromCharCode(108),String.fromCharCode(99)].join(""),"2_"].join("_");async function Ia(a){a=Ha+a;return(await chrome.storage.local.get(a))[a]}async function Ja(a){a=await Ia(a);const c=Date.now();return!a||!a._t||isNaN(a._t)||!isFinite(a._t)||c-a._t>6048E5?{_t:c}:a}async function Q(a,c,h){var n=n||1;const q=await Ja(a);c=[c,...(h||[])].map(y=>typeof y==="string"?y:Da+Ea(y)).join(";");q[c]=(q[c]||0)+n;chrome.storage.local.set({[Ha+a]:q})}
const Ka=[0,1,5,10,20,50,100,200,500,1E3,2E3,5E3,1E4,2E4,5E4,1E5,2E5,5E5,1E6];function La(a){if(a<=0)Promise.resolve();else{var c=Ka;for(var h=0;h<c.length&&a>=c[h];++h);h=Math.max(0,h-1);a=c[h];Q(6,(Ca+a).replace(/\./g,"_"))}}
const Ma={P:"//downloads",R:"//extensions",s:"//settings/downloads",I:"//settings/languages",T:"//settings/content/pdfDocuments",H:(a="chrome:")=>`${a}//extensions/?id=${chrome.runtime.id}#allow-on-file-urls`},Na={P:"chrome://downloads",s:"chrome://settings/downloads",ea:"https://chromewebstore.google.com/detail/mciiogijehkdemklbdcbfkefimifhecn",J:"https://chromewebstore.google.com/detail/mciiogijehkdemklbdcbfkefimifhecn/reviews"};var Oa,Pa;
a:{const a=["Chrome","chrome",Na,"google"],c=[a,["Edge","edge",{},"microsoftedge"],["Firefox","",{I:"about:preferences#general",H:()=>"about:addons"},"mozilla"],["Opera","opera",{},"opera"],["360","se",{s:"se://settings/browser#downloadsSection",I:"se://settings",T:"se://settings"},"360"],["QQ","qqbrowser",{s:"qqbrowser://settings/normal?qbDownload"},"qq"]],h=chrome.runtime.getManifest().homepage_url;for(const n of c){const [q,,,y]=n;if(""===q||h.includes(y)){Pa=n;break a}}Pa=a}
const [,Ra,Sa]=Pa,Ta={};if(Ra)for(const a in Ma){const c=Ma[a];Ta[a]=typeof c==="function"?c.bind(void 0,Ra+":"):Ra+":"+c}Oa={da:"about:newtab",J:chrome.runtime.getManifest().homepage_url||Na.J,...Ta,...(Sa||{})};function Ua(a){ha(Oa.s);Q(7,81,[a])}function Va(){ha(Oa.H())}
function Wa(){this.id="<invalid>";this.cr_id=-2;this.title=this.text=this.page_title=this.referer=this.url="";this.size=-1;this.naming=this.folder=this.iconURL32=this.iconURL16="";this.naming_auto=!0;this.folder_auto=!1;this.name_conflict="";this.state=2;this.time_add=new Date;this.time_finish=null;this.time_elapsed=0;this.max_threads_config=5;this.desc=this.checksum="";this.batch_num=0;this.exists=!1;this.temp_file=this.hash="";this.finished_bytes=this.recycled=0;this.eurl=this.full_path=this.file_ext=
this.mime_type=this.last_modified=this.etag="";this.single_thread=!0;this.progress=this.size>0?this.finished_bytes/this.size*100:this.state==3?100:0;this.time_remained=this.active_threads=this.max_threads=this.speed=0}
function Xa(a,c){function h(t){return t<10?"0"+t:t.toString()}function n(t,E){var z={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),S:t.getMilliseconds()};E||(E="yyyy-MM-dd hh:mm:ss");/(y+)/.test(E)&&(E=E.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var w in z)(new RegExp("("+w+")")).test(E)&&(E=E.replace(RegExp.$1,RegExp.$1.length==1?z[w]:("00"+z[w]).substr((""+z[w]).length)));return E}c=(c||"").trim();if(!c)return"";var q=
pa(a.url),y=ra(a.file_ext||(a.eurl&&a.eurl!==a.url?pa(a.eurl).file:"")||q.file);c=c.replace(/\*(flat)?([^\*]+)?\*/gi,function(t,E,z){if(z){z=L(z.replace(/\s+,\s+/,",")).split(",");t=z[0];z=z[1];var w=new Date;switch(t){case "hh":var p=h(w.getHours());break;case "mm":p=h(w.getMinutes());break;case "ss":p=h(w.getSeconds());break;case "y":p=w.getFullYear().toString();break;case "m":p=h(w.getMonth()+1);break;case "d":p=h(w.getDate());break;case "wd":p=""+w.getDay();break;case "datetime":p=n(w,z);break;
case "date":p=n(w,z||"yyyy-MM-dd");break;case "time":p=n(w,z||"hh:mm:ss");break;case "time_add":case "addtime":p=n(a.time_add,z);break;case "size_s":p=a.size;p=p<1E3?+p.toFixed(2)+" B":p<1024E3?+(p/1024).toFixed(2)+" KB":p<1048576E3?+(p/1048576).toFixed(2)+" MB":+(p/1073741824).toFixed(2)+" GB";break;case "name":case "ext":case "url":case "host":case "query":case "anchor":case "subdirs":case "text":case "title":case "page_title":case "num":case "size":case "refer":case "referer":case "mime":case "mime_type":case "remark":case "remarks":case "desc":z=
String;if(t=="mime")t="mime_type";else if(t=="addtime")t="time_add";else if(t=="refer")t="referer";else if(t=="remark"||t=="remarks")t="desc";switch(t){case "host":p=q.host;break;case "query":case "anchor":p=q[t];break;case "subdirs":p=q.directory;break;case "name":if(y){t=y.D;try{p=decodeURIComponent(t)}catch(O){console.warn(O,t),p=t}}else p="";break;case "ext":p=y?y.m:"";break;case "url":p=a.url;break;case "eurl":p=a.eurl;break;case "num":p=a.batch_num||0;break;case "date":case "datetime":p=new Date;
break;case "state":case "size":case "referer":case "page_title":case "text":case "title":case "time_add":case "time_elapsed":case "desc":case "progress":case "finished_bytes":case "mime_type":p=a[t];break;default:p="_"+t+"_"}p=z(p);break;default:p="_"+t+"_"}(p=p||"")&&E&&(p=(p||"").replace(/\/|\\/g,"_"));return p?p:"___"}return""});return ua(c.replace(/~|\*|\?|:|\||<|>|"/g,"_"))}
function Ya(a,c,h){const n=new mdc.menu.MDCMenu(a);n.quickOpen=!0;c.addEventListener("click",()=>{(n.open=!n.open)&&n.root.focus()});h&&a.addEventListener("MDCMenu:selected",h)}function Za(a){a=new mdc.dialog.MDCDialog(a);a.scrimClickAction="";return a}
function ab(){var a=document.querySelectorAll(".mdc-text-field,.mdc-checkbox");for(var c of a){a=c.classList.contains("mdc-text-field")?new mdc.textField.MDCTextField(c):new mdc.checkbox.MDCCheckbox(c);c._mdc_obj_=a;let h=c.getElementsByTagName("input")[0]||c.getElementsByTagName("textarea")[0];h&&(h._mdc_obj_=a)}c=document.querySelectorAll(".mdc-select");for(const h of c)c=new mdc.select.MDCSelect(h),h._mdc_obj_=c}function S(a,c,h){a[0]&&c!==void 0&&(a=a[0]._mdc_obj_)&&(a[h||"value"]=c)}
let bb={},U,cb;
function V(a,c,h,n){cb=n?document.activeElement:void 0;let q=document.getElementById("error_msg");U||(U=new mdc.snackbar.MDCSnackbar(q),q.addEventListener("MDCSnackbar:closed",function(y){cb&&document.activeElement==q&&cb.focus();y.detail.reason=="action"&&bb.action&&bb.action()}));a?(bb=h||{},U.labelText=a,U.timeoutMs=c||4E3,bb.text?(U.closeOnEscape=!0,q.classList.remove("no-action"),q.querySelector(".mdc-snackbar__action .mdc-button__label").innerText=bb.text):(U.closeOnEscape=!1,q.classList.add("no-action")),
U.open(),n&&q.focus()):U.close()}function db(a,c,h){V(C("errorUnableOpen",P(ya(a,60)))+" "+C("msgChooseFolderUnderHome"),7E3,{text:C("tipBtnChangeDefaultLocation"),action:Ua.bind(void 0,69)},c);Q(7,69,h?[h]:void 0)}
function eb(a,c,h){chrome.runtime.sendMessage({cmd:c},function(n){if(n&&n.list){h=h||{};const t=document.getElementById(a);for(;t.lastElementChild;)t.removeChild(t.lastElementChild);for(var q=0,y=n.list.length;q<y;++q){let E=n.list[q];if(!E)continue;let z;h.process?z=h.process(E):(z=document.createElement("option"),z.setAttribute("value",E));z&&t.appendChild(z)}h.u&&h.u(t)}})}function fb(a){a.bind("keydown.escape_focus",function(c){c.keyCode==27&&$(this).blur()})}
if(Ba&&window.top===window.self){const a=["QEFCV1hZ","cmtoYmQ","YGtkcXM","YmtucmQ"],c=a[0],h=I(a[1]),n=I(c)[h](3,5),q=C(n),y=I(a[2]),t=I(a[3]);window[y](q);window[t]()}
const W=(()=>{function a(b,d){let e=d.j;if(b.j=="-1")return e=="-1"?0:-1;if(e=="-1")return 1;b=A.cmp(b,d);return D?b:-b}async function c(b,d,e){b=va(b);if(b!=p){var m=b.startsWith(p)?b.substr(p.length):b;if(m==b)console.error("path to create is not under HOME path");else{b=va(wa(p,m.replace(/~|\*|\?|:|\||<|>|"/g,"_")));var l=[b,""];for(m={};l[0]&&l[0].length>=p.length;){var v=[];m[l[0]]=v;l[1]&&v.push(l[1]);if((d||l[0].length<b.length)&&(v=await t(l[0],!0))&&Array.isArray(v.list)){let u;if(l[1]&&
(u=v.list.find(x=>{var r=l[1];return x.url==r||x.name.toLocaleLowerCase()==r.toLocaleLowerCase()}))){V(C("errorFileOrFolderExists")+"\n"+P(wa(l[0],u.name)));return}break}if(Array.isArray(M[l[0].toLocaleLowerCase()]))break;l=xa(l[0])}if(l[0].length==b.length)V(C("errorFileOrFolderExists"));else{for(const u in m)(d=M[u.toLocaleLowerCase()])?Array.prototype.push.apply(d,m[u]):M[u.toLocaleLowerCase()]=m[u];z(b);Q(12,80,[e])}}}}function h(b){var d=!b.startsWith(p);const e=document.createElement("li");
e.setAttribute("path",b);e.setAttribute("title",P(b));d?e.className="mdc-list-item mdc-list-item--disabled folder-na":(e.setAttribute("tabindex","0"),e.className="mdc-list-item");d=document.createElement("span");d.className="mdc-list-item__ripple";const m=document.createElement("span");m.className="mdc-list-item__text";var l=0;b[b.length-1]=="/"&&(l=1);l=b.length-l;const v=b.lastIndexOf("/",l-1)+1;m.textContent=(l<=v?"":b.substring(v,l))||"/";e.appendChild(d);e.appendChild(m);return e}function n(){if(!R)return!1;
try{g&&g(F.current())}catch(b){console.error(b)}F.reset();return!0}function q(){let b={process:d=>h(va(d)),u:d=>{d.getElementsByTagName("li").length==0&&(d.parentElement.style.display="none")}};eb("nav-folders-recents-list","path_list_recents",b);eb("nav-folders-favs-list","path_list_favs",b)}function y(){function b(){if(x)return x;let r=document.getElementById("new-folder-dialog");x=Za(r);let B=r.querySelector("[name=new-dir-input]"),H=r.querySelector("button:last-child");B.addEventListener("input",
()=>{H.disabled=!(B.value||"").trim()});r.addEventListener("MDCDialog:closed",function(J){J.detail.action=="accept"&&c(wa(F.current(),B.value),!0,73);S([B],"")});return x}O=document.getElementById("btn-back");X=document.getElementById("btn-forward");N=document.getElementById("btn-up");da=document.getElementById("btn-view");Y=document.getElementById("btn-sort");ea=document.getElementById("btn-new-folder");let d=document.getElementById("main"),e=document.getElementById("nav-folders");const m=["view-details",
"view-icons"];let l=0;d.classList.add(m[l]);da.addEventListener("click",()=>{d.getElementsByTagName("li").length&&(d.classList.remove(m[l]),l=(l+1)%m.length,d.classList.add(m[l]))});d.addEventListener("click",r=>{let B;r.target&&(B=r.target.closest(".dir-item"))&&(r=B.getElementsByClassName("dir-item-name")[0].innerText,w(wa(F.current(),r)))});const v=document.getElementById("nav-folders-recents-header");v.addEventListener("click",()=>{v.parentElement.classList.toggle("nav-folders-hidden")});const u=
document.getElementById("nav-folders-favs-header");u.addEventListener("click",()=>{u.parentElement.classList.toggle("nav-folders-hidden")});e.addEventListener("click",r=>{let B;r.target&&(B=r.target.closest(".mdc-list-item"))&&(r=B.getAttribute("path"),B.classList.contains("folder-na")?db(r,!1,49):w(r),Q(12,B.parentElement.id=="nav-folders-favs-list"?51:52))});N.addEventListener("click",()=>{const r=F.current();r!=p&&(w(r.replace(/[\/\\][^\/\\:]+[\/\\]?$/,"")),Q(12,49))});O.addEventListener("click",
()=>{F.back();Q(12,49)});X.addEventListener("click",()=>{F.forward();Q(12,49)});document.getElementById("btn-close-filedlg").addEventListener("click",n);let x;ea.addEventListener("click",()=>{b().open()});Ya(document.getElementById("menu-downloads-folder"),document.getElementById("button-home-dropdown"),function(r){r.detail.index==0?chrome.downloads.showDefaultFolder():r.detail.index==1&&Ua(67)});Ya(document.getElementById("menu-sort"),Y,function(r){r.detail.index==0?A!==ja?(A=ja,D=!0):D=!D:r.detail.index==
1&&(A!==fa?(A=fa,D=!1):D=!D);E()});Z=G(document.getElementById("path-widget"))}function t(b,d){return za("file:///"+b).then(e=>{let m=[];if(e=="timeout"||e=="other_error")return{error:e};if(e!="not_found")for(var l=/<script>addRow\((.*?)\);<\/script>/g,v;v=l.exec(e);){var u=v[1].split(/,(?=(?:[^"]*"[^"]*")*[^"]*$)/);v=u[0].replace(/"/g,"");let x=u[1].replace(/"/g,""),r=u[2],B=u[5];u=u[6].replace(/"/g,"");(d&&r!="1"||!d&&r=="1")&&m.push({name:v,url:x,M:u,j:B})}if(d)return e=="not_found"?null:{list:m};
l=M[b.toLocaleLowerCase()];if(!Array.isArray(l))return e=="not_found"?null:{list:m};for(const x of l)m.some(r=>r.name==x)||m.push({name:x,url:encodeURIComponent(x),M:"-",j:"-1"});return{list:m}}).catch(()=>null)}function E(){f=f||[];f.sort(a);var b=document.getElementById("menu-sort");let d=b.querySelector(".sorted-up,.sorted-down");d!=null&&d.classList.remove("sorted-up","sorted-down");b.querySelector(`.sort-row-wrap[data-sortcol=${A.K}]`).classList.add(`sorted-${D?"up":"down"}`);for(b=document.getElementById("main");b.lastElementChild;)b.removeChild(b.lastElementChild);
const e=document.createElement("ul");f.forEach(m=>{const l=document.createElement("li");l.setAttribute("href",m.url);l.className="dir-item";const v=document.createElement("span");v.className=m.j=="-1"?"dir-icon material-icons dir-icon-new":"dir-icon material-icons";const u=document.createElement("span");u.className="dir-item-name";u.textContent=m.name;const x=document.createElement("span");x.className="dir-item-time";x.textContent=m.M;l.appendChild(v);l.appendChild(u);l.appendChild(x);e.appendChild(l)});
b.appendChild(e)}async function z(b,d=!0){b=b||p;if(b==F.W())return 0;var e=b.startsWith(p)?b.substr(p.length):b;if(e==b)return-2;let m=await t(b);if(m==null)return-1;if(m.error||!m.list)return-3;d!=0&&F.push(b);Z.set(e);N.disabled=!e;O.disabled=!F.Z();X.disabled=!F.aa();Y.disabled=da.disabled=m.list.length==0;ea.disabled=!1;d=aa._mdc_obj_;a:{e=b;var l=document.getElementById("nav-folders-favs-list");for(l=l.firstElementChild;l;l=l.nextElementSibling)if(l.getAttribute("path")==e){e=!0;break a}e=!1}d.on=
e;f=m.list;E();for(const v of k)v(b);return 1}async function w(b,d){b=va(b);d=await z(b,d);switch(d){case -1:V(C("confirmCreateWhenNotExists","`"+P(ya(b,60)+"`")),1E4,{text:C("btnCreate"),action:c.bind(W,b,!1,64)});break;case -2:db(b,void 0,64);break;case -3:V(C("errorUnableOpen",P(ya(b,60))),4E3)}return d}let p,O,X,N,da,Y,ea,aa;const ja={K:"name",cmp:(b,d)=>b.name.localeCompare(d.name)},fa={K:"time",cmp:(b,d)=>b.j.localeCompare(d.j)};let A=fa,D=!1,M={},F=(()=>{function b(){return e<d.length-1}let d=
[],e=-1;return{empty:function(){return d.length==0},push:function(m){for(;d.length-1>e;)d.pop();d.push(m);++e},back:async function(){e>0&&await w(d[e-1],!1)>=0&&(--e,O.disabled=!(e>0),X.disabled=!b())},forward:async function(){b()&&await w(d[e+1],!1)>=0&&(++e,O.disabled=!(e>0),X.disabled=!b())},Z:function(){return e>0},aa:b,current:function(){if(e>=0&&e<d.length)return d[e];throw"empty path stack";},W:function(){return e>=0&&e<d.length?d[e]:""},reset:function(){d=[];e=-1}}})(),Z,G=b=>{function d(u){u?
b.classList.add("focused"):b.classList.remove("focused")}let e=b.getElementsByClassName("button-home")[0],m=b.getElementsByClassName("path-home")[0],l=b.getElementsByClassName("buttons-view")[0],v=b.getElementsByClassName("input-view-input")[0];aa=b.getElementsByClassName("path-fav")[0];aa._mdc_obj_=new mdc.iconButton.MDCIconButtonToggle(aa);e.addEventListener("click",()=>{z()});aa.addEventListener("MDCIconButtonToggle:change",function(u){u=u.detail.isOn;const x=F.current(),r=document.getElementById("nav-folders-favs"),
B=document.getElementById("nav-folders-favs-list");let H=0,J=!1;for(let K=B.firstElementChild;K;K=K.nextElementSibling,H++)if(K.getAttribute("path")==x){u?H>0&&(B.removeChild(K),B.prepend(K)):B.removeChild(K);J=!0;break}u&&!J&&B.prepend(h(x));r.style.display=B.childElementCount==0?"none":"";ca({cmd:"fav_path",fav:u,path:x});u&&Q(12,47)});v.addEventListener("blur",()=>{d(!1)});v.addEventListener("keydown",u=>{u.keyCode==13&&(v.blur(),w(wa(p,v.value)),Q(12,50))});b.addEventListener("blur",()=>{d(!1)});
b.addEventListener("click",u=>{if(u.target.classList.contains("input-view-trigger"))d(!0),v.focus(),v.select();else if(u=u.composedPath().find(x=>x.classList&&x.classList.contains("path-button"))){let x=u.parentElement;if(x.nextElementSibling){for(u=[];x;)u.unshift(x.lastElementChild),x=x.previousElementSibling;w(wa(p,u.map(r=>r.innerText).join("/")))}}});return{set:function(u){let x=u.split(/[\\\/]/).filter(J=>!!J),r=[].slice.call(l.getElementsByClassName("path-button"));for(;r.length>x.length;)r.pop().parentElement.remove();
let B=[];for(;r.length<x.length;){var H=document.createElement("div");let J=document.createElement("span"),K=document.createElement("span"),T=document.createElement("span"),Qa=document.createElement("span");H.className="path-button-wrap";J.className="path-button-sep";K.className="path-button mdc-button";T.className="mdc-button__ripple";Qa.className="mdc-button__label";H.appendChild(J);H.appendChild(K);K.append(T);K.append(Qa);r.push(K);B.push(H)}for(H=0;H<x.length;++H)r[H].lastElementChild.innerText=
x[H];for(;B.length>0;)l.appendChild(B.shift());v.value=P(va(u,!1));b.classList.toggle("has-subdirs",r.length>0)},ha:d,G:function(u){m.innerText=P(u)}}},za=b=>new Promise(d=>{let e=new XMLHttpRequest;e.timeout=500;e.open("GET",b);e.onloadend=m=>{m.loaded&&e.response?d(e.response):d("not_found")};e.ontimeout=()=>d("timeout");e.send()}),R=!1,f=[],k=[],g;document.addEventListener("DOMContentLoaded",function(){y()});return{reset:function(){R&&(F.reset(),M={},R=!1)},F:function(){R=!0},open:function(b){if(!R)return!1;
if(!F.empty())throw"non-empty path stack";b&&b!=p?w(b).then(d=>{d<0&&z()}):z();q();Q(12,48);return!0},close:n,G:function(b){R&&(p=b,Z.G(b))},U:b=>{k.push(b)},ba:b=>{g=b}}})();
function gb(a){if(a.A)return a.A;const c=Aa();a.A=c.promise;const h=()=>{const n=document.createElement("iframe");n.style.display="none";setTimeout(()=>{a.l||Q(96,156)},6E3);window.addEventListener("message",q=>{if(a.B.includes(q.origin))switch(q.data.type){case "IFRAME_READY":const [y,t]=q.data.data;a.l=n;c.resolve([y,t]);break;case "CLOSE_CONSENT":a.l&&a.l.classList.toggle("showConsent",!1)}});n.src=a.B;document.body.appendChild(n)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",
()=>{setTimeout(h,2500)},{once:!0}):setTimeout(h,2500);return a.A}async function hb(a){var c=ib;c.v.push(["gtag_event",a]);c.l||await gb(c);a=c.l.contentWindow;if(c.v.length)for(;c.v.length>0;){const h=c.v.shift();h&&a.postMessage({type:h[0],data:h[1]},c.targetOrigin)}}async function jb(a,c){hb([a,c])}function kb(){var a=document.title;const c=new URL(location.href);c.search="";jb("page_view",{page_title:a,page_location:c.toString()})}
class lb{constructor(){var a={B:"https://app.chronodownloader.net/ga.html"};this.A=this.l=null;this.v=[];this.B=a.B;this.targetOrigin=a.targetOrigin||"*"}}const ib=new lb,mb=(a,c,h)=>{jb(Da+Ea(a),{[typeof c==="string"?c:Da+Ea(c)]:typeof h==="string"?h:Da+Ea(h),page_location:location.href,v:chrome.runtime?.getManifest?.()?.version})};(ba.__cdmg__=ba.__cdmg__||{}).r=mb;
function nb(){function a(c,h){c="i18n-"+c;for(var n=document.querySelectorAll("["+c+"]"),q=0;q<n.length;++q)n[q][h]=C(n[q].attributes[c].value),n[q].removeAttribute(c)}a("text","innerText");a("title","title");a("href","href");a("placeholder","placeholder");(function(c,h){c="i18n-"+c;for(var n=document.querySelectorAll("["+c+"]"),q=0;q<n.length;++q)n[q].setAttribute(h,C(n[q].attributes[c].value)),n[q].removeAttribute(c)})("tooltip","data-tooltip");(function(c,h){c="i18n-"+c;for(var n=document.querySelectorAll("["+
c+"]"),q=0;q<n.length;++q){var y=n[q].attributes[c].value.split(","),t=y[0];y.shift();n[q][h]=C(t,y);n[q].removeAttribute(c)}})("textparams","innerText")}document.oncontextmenu=function(a){if(a.target){var c=a.target.nodeName.toLowerCase(),h=a.target.type&&a.target.type.toLowerCase();if(!a.target.classList.contains("allow-ctx-menu")&&(a.target.disabled||c!="textarea"&&(c!="input"||h!="text"&&h!="number")))return!1}};
globalThis.addEventListener("error",a=>{(a=Ga(a.error))&&mb(137,"page_referrer",a)},!0);globalThis.addEventListener("unhandledrejection",a=>{(a=Ga(a.reason))&&mb(138,"page_referrer",a)});
let ob,pb=(()=>{function a(f){var k={};$.each(f.serializeArray(),function(){k[this.name]!==void 0?(k[this.name].push||(k[this.name]=[k[this.name]]),k[this.name].push(this.value||"")):k[this.name]=this.value||""});return k}function c(f){return(f=(new RegExp("[\\?&]"+f+"=([^&#]*)")).exec(location.href))?f[1]:void 0}function h(f){f[0]&&(f=f[0]._mdc_obj_)&&(f.valid=!1)}function n(f){function k(){return g.menu&&g.menu.items&&g.menu.items.length!=0?g.menu.items[0].classList.contains("mdc-list-item--disabled")?
null:g.getSelectAdapterMethods().getMenuItemValues()[0]:null}const g=f&&f._mdc_obj_;if(!g)throw"MDC select failed to initialize";g.menu.quickOpen=!0;f.addEventListener("MDCSelect:change",function(b){Z.val(b.detail.value);console.log("folder=>: "+b.detail.value)});fb($(g.selectAnchor));g.menuElement.addEventListener("MDCMenuSurface:opened",function(){this.focus()});return{X:()=>g,Y:function(){let b=f&&f._mdc_obj_;return b?b.value:""},O:function(b){const d=g.getSelectAdapterMethods().getMenuItemValues();
for(let e=0;e<d.length;e++)if(d[e]==b){g.selectedIndex!=e&&(g.selectedIndex=e);return}document.getElementById("folder-select-list").prepend(t(b,!1));g.layoutOptions();g.selectedIndex=0},fa:k,ca:function(){return g.menu&&g.menu.items&&g.menu.items.length!=0?k()?(g.selectedIndex=0,!0):!1:!1}}}function q(f){y(f)&&O()}function y(f){var k=a(A.find("form")),g=L(k.folder),b=ua(k.naming);if(((b?b.length-b.replace(/\*/g,"").length:0)&1)!=0)return S(M,b),h(M),V(C("errorInvalidNamingMask")),!1;b.indexOf("*")!=
b.lastIndexOf("*")&&Q(13,60);f=f==1;for(var d=[],e=k.url.split("\r\n"),m=L(k.referer),l=L(k.desc),v=L(k.text),u=L(k.title),x=k.addtop=="on"||k.addtop=="checked"||k.addtop=="yes",r="",B=0,H=e.length;B<H;++B){var J=L(e[B]).replace(/ /g,"%20");if(J){var K=da(J);if(K)if(sa(J.replace(/\[[^\[\]]*\]/g,""))){if(!confirm(X(K))||k.naming!=""&&k.naming.indexOf("*")==-1&&!confirm(C("confirmBatchDownloadNaming")))return!1;N(K,"",0,function(T){d.push({url:T,folder:g,naming:b,referer:m,desc:l})});Q(13,61);La(d.length)}else r+=
J+"\n";else sa(J)?d.push({url:J,folder:g,naming:b,referer:m,desc:l,text:v,title:u}):r+=J+"\n"}}k=!0;if(d&&d.length>0)try{e=!1;try{e=window.top?.location.protocol=="chrome-extension:"}catch(T){}chrome.runtime.sendMessage({cmd:"new_task",add_paused:f,addtop:x,tasks:d,page_title:ja,source:e?75:76},function(T){T||V(chrome.runtime.lastError?.message)})}catch(T){V(T+(ob?"\n"+ob:""),-1),k=!1}else k=!1;if(r||d.length==0)k=!1,r=L(r),r.length>0&&S(D,r),h(D),V(C("errorInvalidURLs"));return k}function t(f,k){var g=
ya(f,30),b=g!=f?P(f):"";g=P(g);const d=document.createElement("li");d.setAttribute("data-value",f);b&&d.setAttribute("title",b);k?d.className="mdc-list-item mdc-list-item--disabled folder-na":(d.setAttribute("tabindex","0"),d.className="mdc-list-item");f=document.createElement("span");f.className="mdc-list-item__ripple";k=document.createElement("span");k.className="mdc-list-item__text";k.textContent=g;d.appendChild(f);d.appendChild(k);return d}function E(f){if(f){var k=D.val();k?S(D,k+"\n"+f):S(D,
f);Y(D[0])}}function z(){var f=document.getElementById("naming_history").querySelectorAll("option");for(const k of f)G?.url?(f=(f=k.getAttribute("value"))&&Xa(G,f)||"",k.innerText=za.test(f)?"":f):k.innerText=""}function w(f,k){f||(f={url:"",referer:"",desc:""});k&&k.fontSize&&(document.documentElement.style.fontSize=k.fontSize+"px");if(f.url=="<clipboard>")V(C("statusReadClipboard"),-1),setTimeout(function(){var b=$("<textarea/>");b.appendTo($("body")).focus();document.execCommand("paste");var d=
b.val();b.remove();(b=d.trim().replace(/ /g,"%20"))&&b.length<=4096&&sa(b)?f.url=b:f.url="";V();w(f,k)},100);else{var g=D.val();E(f.url);if(!g){S(A.find("[name=referer]"),f.referer);S(A.find("[name=desc]"),f.desc);S(A.find("[name=addtop]"),!1,"checked");(g=k?k.taskDef:null)&&g.addtop&&S(A.find("[name=addtop]"),!0,"checked");f.text&&A.find("[name=text]").val(f.text);f.title&&A.find("[name=title]").val(f.title);const b=document.getElementById("filedlg-toggler");b.disabled=!0;G=new Wa;G.url=f.url&&ta(f.url);
G.referer=f.referer||"";G.title=f.title||"";G.text=f.text||"";G.desc=f.desc||"";G.page_title=ja;eb("naming_history","naming_list",{u:z});(g=A[0].querySelector(".naming-preview"))&&(g.style.display="none");k&&k.folderSelection?eb("folder-select-list","path_list_recents",{process:d=>{d=va(d);return t(d,!0)},u:d=>{ea||chrome.runtime.sendMessage({cmd:"browser_home_path_normalized"},function(e){const m=document.getElementById("folder-row");e?(d.querySelectorAll(".mdc-list-item").forEach(l=>{l.getAttribute("data-value").startsWith(e)&&
(l.classList.remove("folder-na","mdc-list-item--disabled"),l.setAttribute("tabindex","0"))}),k&&k.useLastLocation&&F.ca()||F.O(e),k.canFileAccess?(W.F(),b.classList.remove("disable-filedlg")):b.classList.add("disable-filedlg"),b.disabled=!1,m.style.display="",W.G(e)):(m.style.display="none",V(C("msgFolderDisabledNonWritable"),-1,{text:C("tipBtnChangeBrowserDownloadsSettings"),action:Ua.bind(void 0,68)}),Q(96,158),ea=!0)})}}):document.getElementById("folder-row").style.display="none"}A.removeClass("transparent");
f&&f.url?M.focus():D.focus();kb()}}function p(){Array.from(A[0].getElementsByClassName("mdc-text-field")).forEach(f=>{f=[f];S(f,"");S(f,!0,"valid")});F.X().selectedIndex=-1}function O(){G=void 0;A.removeClass("filedlg-expanded");A.addClass("transparent");p();Y(D[0]);W.reset();setTimeout(function(){window.parent.postMessage({cmd:"close_dlg",id:aa},"*")},400)}function X(f){var k=C("confirmBatchDownload")+"\n",g="",b=3,d=2,e=b+d+1;N(f,"",0,function(B){b-- >0&&(g+=B+"\n");return--e>0});if(e-1<d){var m=
"";d-=Math.max(e-1,0);const B={g:[],i:f.i};for(var l=0;l<f.g.length;++l){var v=f.g[l].from,u=f.g[l].h,x=f.g[l].step,r=v;if(x>0)for(;r<=u;r+=x);else for(;r>=u;r+=x);r-=x;B.g.push({from:r,h:v,step:-x,o:f.g[l].o,padding:f.g[l].padding,C:f.g[l].C})}N(B,"",0,function(H){m=H+"\n"+m;return--d>0});e<=0&&(g+="...\n");g+=m}f.stop=!1;return k=k+g+("\n"+C("confirmProceed"))}function N(f,k,g,b){if(f&&!f.stop)if(g<f.i.length&&(k+=f.i[g]),g>=f.i.length-1)b(k)==0&&(f.stop=!0);else{var d=f.g[g];if(d.step>0)if(d.o)for(var e=
d.from;e<=d.h;e+=d.step)N(f,k+String.fromCharCode(e),g+1,b);else if(d.padding)for(e=d.from;e<=d.h;e+=d.step){var m=Math.abs(e).toString();N(f,k+(e<0?"-":"")+(d.C+m).slice(-Math.max(d.padding,m.length)),g+1,b)}else for(e=d.from;e<=d.h;e+=d.step)N(f,k+e,g+1,b);else if(d.o)for(e=d.from;e>=d.h;e+=d.step)N(f,k+String.fromCharCode(e),g+1,b);else if(d.padding)for(e=d.from;e>=d.h;e+=d.step)m=Math.abs(e).toString(),N(f,k+(e<0?"-":"")+(d.C+m).slice(-Math.max(d.padding,m.length)),g+1,b);else for(e=d.from;e>=
d.h;e+=d.step)N(f,k+e,g+1,b)}}function da(f){function k(b){return b[0]=="0"&&b.length>1||b[0]=="-"&&b[1]=="0"&&b.length>2}if(f.indexOf("\x00\x00")!=-1)return null;const g={i:[],g:[],stop:!1};f=f.replace(/\[((?:-)?\d+|[a-z]):((?:-)?\d+|[a-z])(?::((?:-)?\d+))?\]/gi,function(b,d,e,m){var l=0;if(m!=void 0&&(l=parseInt(m),isNaN(l)||!isFinite(l)))return b;m=d.charCodeAt(0);var v=e.charCodeAt(0);if(m>=65&&m<=90&&v>=65&&v<=90||m>=97&&m<=122&&v>=97&&v<=122){if(l=l||(v-m<0?-1:1),v==m||v-m<0==l<0)return g.g.push({o:!0,
from:m,h:v,step:l}),"\x00\x00"}else{m=parseInt(d,10);v=parseInt(e,10);if(isNaN(m)||isNaN(v))return b;l=l||(v-m<0?-1:1);if(v==m||v-m<0==l<0){b={o:!1,from:m,h:v,step:l};k(d)?(d=d.length-Number(d[0]=="-"),k(e)?b.padding=Math.max(d,e.length-Number(e[0]=="-")):b.padding=d):k(e)&&(b.padding=e.length-Number(e[0]=="-"));if(b.padding)for(b.C=Array(b.padding+1).join("0"),b.N=1,e=0;e<b.padding;++e)b.N*=10;g.g.push(b);return"\x00\x00"}}return b});return g.g.length?(g.i=f.split("\x00\x00"),g):null}function Y(f){let k=
((f.value||"").match(R)||[]).length+1;k>4&&(k=4);f.setAttribute("rows",String(k));f.parentElement.classList.toggle("multi-rows",k>1);return k}let ea=!1;var aa=c("id"),ja=decodeURIComponent((c("page_title")||"").replace(/\+/g," "));let fa=c("fs");fa&&(document.documentElement.style.fontSize=fa+"px");c("theme")==="dark"&&(document.documentElement.style.colorScheme="dark");let A,D,M,F,Z;document.addEventListener("DOMContentLoaded",function(){function f(){var g=M[0].value;if(G?.url&&g.indexOf("*")!==
-1){var b=Xa(G,g);if(b&&b!==g){var d=$(k.children[0]);var e=ra(b);e.m&&e.m.length>9&&(e={D:b,m:"",L:!1});g=e.D+(e.L?".":"");e=e.m;d.find("span").text(g);d.attr("data-fext",e);k.style.display="";g=b.includes("___");k.title=`${C(g?"labelNamePreviewIncomplete":"labelNamePreview")}
  ${b}`}else k.style.display="none"}else k.style.display="none"}ab();A=$(".overlay");D=A.find("[name=url]");M=A.find("[name=naming]");Z=A.find("[name=folder]");F=n(A.find("#folder-select")[0]);document.getElementById("folder-select-list").addEventListener("click",g=>{g=g.target.closest(".folder-na");Q(13,62);g&&(g=g.getAttribute("data-value")||"",db(g,!0,44))});nb();M.attr("placeholder",C("phraseAutomatic"));D.on("input",function(g,b){function d(...l){let v=Date.now(),u=e+b;v<u?m||(m=setTimeout(function(){m=
void 0;d(...l)},u-v)):(e=v,g(...l))}let e=0,m;return d}(Y.bind(void 0,D[0]),200)).on("change",()=>{const g=D[0].value,b=((g||"").match(R)||[]).length+1;G=G||new Wa;G.url=b>1?"":g&&ta(g);z();f()});A.find("[name=referer],[name=desc]").on("change",g=>{g=g.target;G=G||new Wa;G[g.name]=g.value;z();f()});const k=M[0].parentElement.querySelector(".naming-preview");M.on("change",f);$(document).bind("keydown.dydlg",function(g){switch(g.keyCode){case 27:g.target==document.body&&(U&&U.ga&&U.closeOnEscape?(U.close(),
g=!0):g=!1,g||(A.hasClass("filedlg-expanded")?W.close():O()));break;case 70:case 71:case 79:case 83:if(g.ctrlKey||g.metaKey)return!1}});fb(A.find("input, textarea, button"));A.find(".close-button").click(function(){O()});A.find(".dlg_start_btn").click(q);Ya(document.getElementById("menu-add-paused"),document.getElementById("btnMenuAddPaused"),function(g){g.detail.index==0&&q(!0)});A.find("#btnSystemFileDlg").click(function(){let g=(D[0].value||"").trim();(g.match(R)||[]).length>0||da(g)?(h(D),V(C("errorSingleURLAllowed"))):
sa(g)?(Q(13,63),chrome.runtime.sendMessage({cmd:"save_as",url:g}),O()):(h(D),V(C("errorInvalidURLs")))});A.find("#tip-batch_desc").click(function(){chrome.runtime.sendMessage({cmd:"open_options",forceTabMode:!0,section:"help.batch_desc"})});A.find("#tip-naming_mask").click(function(){chrome.runtime.sendMessage({cmd:"open_options",forceTabMode:!0,section:"help.naming_mask"})});document.getElementById("filedlg-toggler").addEventListener("click",function(g){g.target.classList.contains("disable-filedlg")?
V(C("msgFolderDisabledNoFileAccess")+" "+C("msgEnableFileAccess",["`"+C("chromesysAllowFileAccess")+"`","`"+C("extName")+"`",Oa.R]),-1,{text:C("btnGrantPermission"),action:Va}):(g=F.Y(),A.addClass("ever-expanded"),W.open(g)&&A.toggleClass("filedlg-expanded",!0))});W.U(g=>{Z.val(g||"");console.log("folder=>: "+g)});W.ba(g=>{F.O(g);A.toggleClass("filedlg-expanded",!1)})});let G;const za=/^[_.]*$/,R=/\r\n|\r|\n/g;return{F:w,V:E}})();
window.addEventListener("message",function(a){if(a.data.cmd=="init")try{ob=C("errorUnknownReloadPage"),pb.F(a.data.task,a.data.dlg_opts)}catch(c){V(c+(ob?"\n"+ob:""),-1)}},!1);window.addEventListener("dragover",function(a){if(a.target){var c=a.target.nodeName.toLowerCase();(c!="input"&&c!="textarea"||a.target.disabled)&&a.preventDefault()}},!1);
window.addEventListener("drop",function(a){if(a.target){var c=a.target.nodeName.toLowerCase();(c!="input"&&c!="textarea"||a.target.disabled)&&(c=a.dataTransfer?.getData("text/plain").replace(/ /g,"%20"))&&sa(c)&&(pb.V(c),a.preventDefault())}},!1);
