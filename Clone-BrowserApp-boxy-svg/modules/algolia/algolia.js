function e(e){const t=`algoliasearch-client-js-${e.key}`;let r;const s=()=>(void 0===r&&(r=e.localStorage||window.localStorage),r),a=()=>JSON.parse(s().getItem(t)||"{}");return{get:(e,t,r={miss:()=>Promise.resolve()})=>Promise.resolve().then((()=>{const r=JSON.stringify(e),s=a()[r];return Promise.all([s||t(),void 0!==s])})).then((([e,t])=>Promise.all([e,t||r.miss(e)]))).then((([e])=>e)),set:(e,r)=>Promise.resolve().then((()=>{const o=a();return o[JSON.stringify(e)]=r,s().setItem(t,JSON.stringify(o)),r})),delete:e=>Promise.resolve().then((()=>{const r=a();delete r[JSON.stringify(e)],s().setItem(t,JSON.stringify(r))})),clear:()=>Promise.resolve().then((()=>{s().removeItem(t)}))}}function t(e){const r=[...e.caches],s=r.shift();return void 0===s?{get:(e,t,r={miss:()=>Promise.resolve()})=>t().then((e=>Promise.all([e,r.miss(e)]))).then((([e])=>e)),set:(e,t)=>Promise.resolve(t),delete:e=>Promise.resolve(),clear:()=>Promise.resolve()}:{get:(e,a,o={miss:()=>Promise.resolve()})=>s.get(e,a,o).catch((()=>t({caches:r}).get(e,a,o))),set:(e,a)=>s.set(e,a).catch((()=>t({caches:r}).set(e,a))),delete:e=>s.delete(e).catch((()=>t({caches:r}).delete(e))),clear:()=>s.clear().catch((()=>t({caches:r}).clear()))}}function r(e={serializable:!0}){let t={};return{get(r,s,a={miss:()=>Promise.resolve()}){const o=JSON.stringify(r);if(o in t)return Promise.resolve(e.serializable?JSON.parse(t[o]):t[o]);const n=s(),i=a&&a.miss||(()=>Promise.resolve());return n.then((e=>i(e))).then((()=>n))},set:(r,s)=>(t[JSON.stringify(r)]=e.serializable?JSON.stringify(s):s,Promise.resolve(s)),delete:e=>(delete t[JSON.stringify(e)],Promise.resolve()),clear:()=>(t={},Promise.resolve())}}function s(e,t,r){const s={"x-algolia-api-key":r,"x-algolia-application-id":t};return{headers:()=>e===d.WithinHeaders?s:{},queryParameters:()=>e===d.WithinQueryParameters?s:{}}}function a(e){let t=0;const r=()=>(t++,new Promise((s=>{setTimeout((()=>{s(e(r))}),Math.min(100*t,1e3))})));return e(r)}function o(e,t=((e,t)=>Promise.resolve())){return Object.assign(e,{wait:r=>o(e.then((e=>Promise.all([t(e,r),e]))).then((e=>e[1])))})}function n(e){let t=e.length-1;for(;t>0;t--){const r=Math.floor(Math.random()*(t+1)),s=e[t];e[t]=e[r],e[r]=s}return e}function i(e,t){return t?(Object.keys(t).forEach((r=>{e[r]=t[r](e)})),e):e}function c(e,...t){let r=0;return e.replace(/%s/g,(()=>encodeURIComponent(t[r++])))}const d={WithinQueryParameters:0,WithinHeaders:1};function u(e,t){const r=e||{},s=r.data||{};return Object.keys(r).forEach((e=>{-1===["timeout","headers","queryParameters","data","cacheable"].indexOf(e)&&(s[e]=r[e])})),{data:Object.entries(s).length>0?s:void 0,timeout:r.timeout||t,headers:r.headers||{},queryParameters:r.queryParameters||{},cacheable:r.cacheable}}const h={Read:1,Write:2,Any:3},p=1,l=2,m=3;function y(e,t=p){return{...e,status:t,lastUpdate:Date.now()}}function g(e){return"string"==typeof e?{protocol:"https",url:e,accept:h.Any}:{protocol:e.protocol||"https",url:e.url,accept:e.accept||h.Any}}const b="DELETE",f="GET",P="POST",I="PUT";function x(e,t){return Promise.all(t.map((t=>e.get(t,(()=>Promise.resolve(y(t))))))).then((e=>{const r=e.filter((e=>function(e){return e.status===p||Date.now()-e.lastUpdate>12e4}(e))),s=e.filter((e=>function(e){return e.status===m&&Date.now()-e.lastUpdate<=12e4}(e))),a=[...r,...s];return{getTimeout:(e,t)=>(0===s.length&&0===e?1:s.length+3+e)*t,statelessHosts:a.length>0?a.map((e=>g(e))):t}}))}function w(e,t,r,s){const a=[],o=function(e,t){if(e.method===f||void 0===e.data&&void 0===t.data)return;const r=Array.isArray(e.data)?e.data:{...e.data,...t.data};return JSON.stringify(r)}(r,s),n=function(e,t){const r={...e.headers,...t.headers},s={};return Object.keys(r).forEach((e=>{const t=r[e];s[e.toLowerCase()]=t})),s}(e,s),i=r.method,c=r.method!==f?{}:{...r.data,...s.data},d={"x-algolia-agent":e.userAgent.value,...e.queryParameters,...c,...s.queryParameters};let u=0;const h=(t,c)=>{const p=t.pop();if(void 0===p)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.",transporterStackTrace:k(a)};const g={data:o,headers:n,method:i,url:j(p,r.path,d),connectTimeout:c(u,e.timeouts.connect),responseTimeout:c(u,s.timeout)},b=e=>{const r={request:g,response:e,host:p,triesLeft:t.length};return a.push(r),r},f={onSuccess:e=>function(e){try{return JSON.parse(e.content)}catch(t){throw function(e,t){return{name:"DeserializationError",message:e,response:t}}(t.message,e)}}(e),onRetry(r){const s=b(r);return r.isTimedOut&&u++,Promise.all([e.logger.info("Retryable failure",v(s)),e.hostsCache.set(p,y(p,r.isTimedOut?m:l))]).then((()=>h(t,c)))},onFail(e){throw b(e),function({content:e,status:t},r){let s=e;try{s=JSON.parse(e).message}catch(e){}return function(e,t,r){return{name:"ApiError",message:e,status:t,transporterStackTrace:r}}(s,t,r)}(e,k(a))}};return e.requester.send(g).then((e=>((e,t)=>(e=>{const t=e.status;return e.isTimedOut||(({isTimedOut:e,status:t})=>!e&&0==~~t)(e)||2!=~~(t/100)&&4!=~~(t/100)})(e)?t.onRetry(e):(({status:e})=>2==~~(e/100))(e)?t.onSuccess(e):t.onFail(e))(e,f)))};return x(e.hostsCache,t).then((e=>h([...e.statelessHosts].reverse(),e.getTimeout)))}function D(e){const{hostsCache:t,logger:r,requester:s,requestsCache:a,responsesCache:o,timeouts:n,userAgent:i,hosts:c,queryParameters:d,headers:p}=e,l={hostsCache:t,logger:r,requester:s,requestsCache:a,responsesCache:o,timeouts:n,userAgent:i,headers:p,queryParameters:d,hosts:c.map((e=>g(e))),read(e,t){const r=u(t,l.timeouts.read),s=()=>w(l,l.hosts.filter((e=>0!=(e.accept&h.Read))),e,r);if(!0!==(void 0!==r.cacheable?r.cacheable:e.cacheable))return s();const a={request:e,mappedRequestOptions:r,transporter:{queryParameters:l.queryParameters,headers:l.headers}};return l.responsesCache.get(a,(()=>l.requestsCache.get(a,(()=>l.requestsCache.set(a,s()).then((e=>Promise.all([l.requestsCache.delete(a),e])),(e=>Promise.all([l.requestsCache.delete(a),Promise.reject(e)]))).then((([e,t])=>t))))),{miss:e=>l.responsesCache.set(a,e)})},write:(e,t)=>w(l,l.hosts.filter((e=>0!=(e.accept&h.Write))),e,u(t,l.timeouts.write))};return l}function q(e){const t={value:`Algolia for JavaScript (${e})`,add(e){const r=`; ${e.segment}${void 0!==e.version?` (${e.version})`:""}`;return-1===t.value.indexOf(r)&&(t.value=`${t.value}${r}`),t}};return t}function j(e,t,r){const s=O(r);let a=`${e.protocol}://${e.url}/${"/"===t.charAt(0)?t.substr(1):t}`;return s.length&&(a+=`?${s}`),a}function O(e){return Object.keys(e).map((t=>{return c("%s=%s",t,(r=e[t],"[object Object]"===Object.prototype.toString.call(r)||"[object Array]"===Object.prototype.toString.call(r)?JSON.stringify(e[t]):e[t]));var r})).join("&")}function k(e){return e.map((e=>v(e)))}function v(e){const t=e.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return{...e,request:{...e.request,headers:{...e.request.headers,...t}}}}const S=e=>(t,r)=>e.transporter.write({method:P,path:"2/abtests",data:t},r),T=e=>(t,r)=>e.transporter.write({method:b,path:c("2/abtests/%s",t)},r),N=e=>(t,r)=>e.transporter.read({method:f,path:c("2/abtests/%s",t)},r),R=e=>t=>e.transporter.read({method:f,path:"2/abtests"},t),E=e=>(t,r)=>e.transporter.write({method:P,path:c("2/abtests/%s/stop",t)},r),A=e=>t=>e.transporter.read({method:f,path:"1/strategies/personalization"},t),C=e=>(t,r)=>e.transporter.write({method:P,path:"1/strategies/personalization",data:t},r);function U(e){const t=r=>e.request(r).then((s=>{if(void 0!==e.batch&&e.batch(s.hits),!e.shouldStop(s))return s.cursor?t({cursor:s.cursor}):t({page:(r.page||0)+1})}));return t({})}const $=e=>(t,r)=>{const{queryParameters:s,...n}=r||{},i={acl:t,...void 0!==s?{queryParameters:s}:{}};return o(e.transporter.write({method:P,path:"1/keys",data:i},n),((t,r)=>a((s=>L(e)(t.key,r).catch((e=>{if(404!==e.status)throw e;return s()}))))))},J=e=>(t,r,s)=>{const a=u(s);return a.queryParameters["X-Algolia-User-ID"]=t,e.transporter.write({method:P,path:"1/clusters/mapping",data:{cluster:r}},a)},z=e=>(t,r,s)=>e.transporter.write({method:P,path:"1/clusters/mapping/batch",data:{users:t,cluster:r}},s),F=e=>(t,r)=>o(e.transporter.write({method:P,path:c("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!0,requests:{action:"addEntry",body:[]}}},r),((t,r)=>Pe(e)(t.taskID,r))),H=e=>(t,r,s)=>o(e.transporter.write({method:P,path:c("1/indexes/%s/operation",t),data:{operation:"copy",destination:r}},s),((r,s)=>te(e)(t,{methods:{waitTask:ot}}).waitTask(r.taskID,s))),K=e=>(t,r,s)=>H(e)(t,r,{...s,scope:[it.Rules]}),M=e=>(t,r,s)=>H(e)(t,r,{...s,scope:[it.Settings]}),W=e=>(t,r,s)=>H(e)(t,r,{...s,scope:[it.Synonyms]}),B=e=>(t,r)=>t.method===f?e.transporter.read(t,r):e.transporter.write(t,r),Q=e=>(t,r)=>o(e.transporter.write({method:b,path:c("1/keys/%s",t)},r),((r,s)=>a((r=>L(e)(t,s).then(r).catch((e=>{if(404!==e.status)throw e})))))),G=e=>(t,r,s)=>{const a=r.map((e=>({action:"deleteEntry",body:{objectID:e}})));return o(e.transporter.write({method:P,path:c("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!1,requests:a}},s),((t,r)=>Pe(e)(t.taskID,r)))},L=e=>(t,r)=>e.transporter.read({method:f,path:c("1/keys/%s",t)},r),V=e=>t=>e.transporter.read({method:f,path:"/1/dictionaries/*/settings"},t),_=e=>t=>e.transporter.read({method:f,path:"1/logs"},t),X=e=>t=>e.transporter.read({method:f,path:"1/clusters/mapping/top"},t),Y=e=>(t,r)=>e.transporter.read({method:f,path:c("1/task/%s",t.toString())},r),Z=e=>(t,r)=>e.transporter.read({method:f,path:c("1/clusters/mapping/%s",t)},r),ee=e=>t=>{const{retrieveMappings:r,...s}=t||{};return!0===r&&(s.getClusters=!0),e.transporter.read({method:f,path:"1/clusters/mapping/pending"},s)},te=e=>(t,r={})=>i({transporter:e.transporter,appId:e.appId,indexName:t},r.methods),re=e=>t=>e.transporter.read({method:f,path:"1/keys"},t),se=e=>t=>e.transporter.read({method:f,path:"1/clusters"},t),ae=e=>t=>e.transporter.read({method:f,path:"1/indexes"},t),oe=e=>t=>e.transporter.read({method:f,path:"1/clusters/mapping"},t),ne=e=>(t,r,s)=>o(e.transporter.write({method:P,path:c("1/indexes/%s/operation",t),data:{operation:"move",destination:r}},s),((r,s)=>te(e)(t,{methods:{waitTask:ot}}).waitTask(r.taskID,s))),ie=e=>(t,r)=>o(e.transporter.write({method:P,path:"1/indexes/*/batch",data:{requests:t}},r),((t,r)=>Promise.all(Object.keys(t.taskID).map((s=>te(e)(s,{methods:{waitTask:ot}}).waitTask(t.taskID[s],r)))))),ce=e=>(t,r)=>e.transporter.read({method:P,path:"1/indexes/*/objects",data:{requests:t}},r),de=e=>(t,r)=>{const s=t.map((e=>({...e,params:O(e.params||{})})));return e.transporter.read({method:P,path:"1/indexes/*/queries",data:{requests:s},cacheable:!0},r)},ue=e=>(t,r)=>Promise.all(t.map((t=>{const{facetName:s,facetQuery:a,...o}=t.params;return te(e)(t.indexName,{methods:{searchForFacetValues:tt}}).searchForFacetValues(s,a,{...r,...o})}))),he=e=>(t,r)=>{const s=u(r);return s.queryParameters["X-Algolia-User-ID"]=t,e.transporter.write({method:b,path:"1/clusters/mapping"},s)},pe=e=>(t,r,s)=>{const a=r.map((e=>({action:"addEntry",body:e})));return o(e.transporter.write({method:P,path:c("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!0,requests:a}},s),((t,r)=>Pe(e)(t.taskID,r)))},le=e=>(t,r)=>o(e.transporter.write({method:P,path:c("1/keys/%s/restore",t)},r),((r,s)=>a((r=>L(e)(t,s).catch((e=>{if(404!==e.status)throw e;return r()})))))),me=e=>(t,r,s)=>{const a=r.map((e=>({action:"addEntry",body:e})));return o(e.transporter.write({method:P,path:c("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!1,requests:a}},s),((t,r)=>Pe(e)(t.taskID,r)))},ye=e=>(t,r,s)=>e.transporter.read({method:P,path:c("/1/dictionaries/%s/search",t),data:{query:r},cacheable:!0},s),ge=e=>(t,r)=>e.transporter.read({method:P,path:"1/clusters/mapping/search",data:{query:t}},r),be=e=>(t,r)=>o(e.transporter.write({method:I,path:"/1/dictionaries/*/settings",data:t},r),((t,r)=>Pe(e)(t.taskID,r))),fe=e=>(t,r)=>{const s=Object.assign({},r),{queryParameters:n,...i}=r||{},d=n?{queryParameters:n}:{},u=["acl","indexes","referers","restrictSources","queryParameters","description","maxQueriesPerIPPerHour","maxHitsPerQuery"];return o(e.transporter.write({method:I,path:c("1/keys/%s",t),data:d},i),((r,o)=>a((r=>L(e)(t,o).then((e=>(e=>Object.keys(s).filter((e=>-1!==u.indexOf(e))).every((t=>e[t]===s[t])))(e)?Promise.resolve():r()))))))},Pe=e=>(t,r)=>a((s=>Y(e)(t,r).then((e=>"published"!==e.status?s():void 0)))),Ie=e=>(t,r)=>o(e.transporter.write({method:P,path:c("1/indexes/%s/batch",e.indexName),data:{requests:t}},r),((t,r)=>ot(e)(t.taskID,r))),xe=e=>t=>U({shouldStop:e=>void 0===e.cursor,...t,request:r=>e.transporter.read({method:P,path:c("1/indexes/%s/browse",e.indexName),data:r},t)}),we=e=>t=>{const r={hitsPerPage:1e3,...t};return U({shouldStop:e=>e.hits.length<r.hitsPerPage,...r,request:t=>rt(e)("",{...r,...t}).then((e=>({...e,hits:e.hits.map((e=>(delete e._highlightResult,e)))})))})},De=e=>t=>{const r={hitsPerPage:1e3,...t};return U({shouldStop:e=>e.hits.length<r.hitsPerPage,...r,request:t=>st(e)("",{...r,...t}).then((e=>({...e,hits:e.hits.map((e=>(delete e._highlightResult,e)))})))})},qe=e=>(t,r,s)=>{const{batchSize:a,...n}=s||{},i={taskIDs:[],objectIDs:[]},c=(s=0)=>{const o=[];let d;for(d=s;d<t.length&&(o.push(t[d]),o.length!==(a||1e3));d++);return 0===o.length?Promise.resolve(i):Ie(e)(o.map((e=>({action:r,body:e}))),n).then((e=>(i.objectIDs=i.objectIDs.concat(e.objectIDs),i.taskIDs.push(e.taskID),d++,c(d))))};return o(c(),((t,r)=>Promise.all(t.taskIDs.map((t=>ot(e)(t,r))))))},je=e=>t=>o(e.transporter.write({method:P,path:c("1/indexes/%s/clear",e.indexName)},t),((t,r)=>ot(e)(t.taskID,r))),Oe=e=>t=>{const{forwardToReplicas:r,...s}=t||{},a=u(s);return r&&(a.queryParameters.forwardToReplicas=1),o(e.transporter.write({method:P,path:c("1/indexes/%s/rules/clear",e.indexName)},a),((t,r)=>ot(e)(t.taskID,r)))},ke=e=>t=>{const{forwardToReplicas:r,...s}=t||{},a=u(s);return r&&(a.queryParameters.forwardToReplicas=1),o(e.transporter.write({method:P,path:c("1/indexes/%s/synonyms/clear",e.indexName)},a),((t,r)=>ot(e)(t.taskID,r)))},ve=e=>(t,r)=>o(e.transporter.write({method:P,path:c("1/indexes/%s/deleteByQuery",e.indexName),data:t},r),((t,r)=>ot(e)(t.taskID,r))),Se=e=>t=>o(e.transporter.write({method:b,path:c("1/indexes/%s",e.indexName)},t),((t,r)=>ot(e)(t.taskID,r))),Te=e=>(t,r)=>o(Ne(e)([t],r).then((e=>({taskID:e.taskIDs[0]}))),((t,r)=>ot(e)(t.taskID,r))),Ne=e=>(t,r)=>{const s=t.map((e=>({objectID:e})));return qe(e)(s,nt.DeleteObject,r)},Re=e=>(t,r)=>{const{forwardToReplicas:s,...a}=r||{},n=u(a);return s&&(n.queryParameters.forwardToReplicas=1),o(e.transporter.write({method:b,path:c("1/indexes/%s/rules/%s",e.indexName,t)},n),((t,r)=>ot(e)(t.taskID,r)))},Ee=e=>(t,r)=>{const{forwardToReplicas:s,...a}=r||{},n=u(a);return s&&(n.queryParameters.forwardToReplicas=1),o(e.transporter.write({method:b,path:c("1/indexes/%s/synonyms/%s",e.indexName,t)},n),((t,r)=>ot(e)(t.taskID,r)))},Ae=e=>t=>He(e)(t).then((()=>!0)).catch((e=>{if(404!==e.status)throw e;return!1})),Ce=e=>(t,r,s)=>e.transporter.read({method:P,path:c("1/answers/%s/prediction",e.indexName),data:{query:t,queryLanguages:r},cacheable:!0},s),Ue=e=>(t,r)=>{const{query:s,paginate:a,...o}=r||{};let n=0;const i=()=>et(e)(s||"",{...o,page:n}).then((e=>{for(const[r,s]of Object.entries(e.hits))if(t(s))return{object:s,position:parseInt(r,10),page:n};if(n++,!1===a||n>=e.nbPages)throw{name:"ObjectNotFoundError",message:"Object not found."};return i()}));return i()},$e=e=>(t,r)=>e.transporter.read({method:f,path:c("1/indexes/%s/%s",e.indexName,t)},r),Je=()=>(e,t)=>{for(const[r,s]of Object.entries(e.hits))if(s.objectID===t)return parseInt(r,10);return-1},ze=e=>(t,r)=>{const{attributesToRetrieve:s,...a}=r||{},o=t.map((t=>({indexName:e.indexName,objectID:t,...s?{attributesToRetrieve:s}:{}})));return e.transporter.read({method:P,path:"1/indexes/*/objects",data:{requests:o}},a)},Fe=e=>(t,r)=>e.transporter.read({method:f,path:c("1/indexes/%s/rules/%s",e.indexName,t)},r),He=e=>t=>e.transporter.read({method:f,path:c("1/indexes/%s/settings",e.indexName),data:{getVersion:2}},t),Ke=e=>(t,r)=>e.transporter.read({method:f,path:c("1/indexes/%s/synonyms/%s",e.indexName,t)},r),Me=e=>(t,r)=>o(We(e)([t],r).then((e=>({objectID:e.objectIDs[0],taskID:e.taskIDs[0]}))),((t,r)=>ot(e)(t.taskID,r))),We=e=>(t,r)=>{const{createIfNotExists:s,...a}=r||{},o=s?nt.PartialUpdateObject:nt.PartialUpdateObjectNoCreate;return qe(e)(t,o,a)},Be=e=>(t,r)=>{const{safe:s,autoGenerateObjectIDIfNotExist:a,batchSize:n,...i}=r||{},d=(t,r,s,a)=>o(e.transporter.write({method:P,path:c("1/indexes/%s/operation",t),data:{operation:s,destination:r}},a),((t,r)=>ot(e)(t.taskID,r))),u=Math.random().toString(36).substring(7),h=`${e.indexName}_tmp_${u}`,p=Ve({appId:e.appId,transporter:e.transporter,indexName:h});let l=[];const m=d(e.indexName,h,"copy",{...i,scope:["settings","synonyms","rules"]});l.push(m);return o((s?m.wait(i):m).then((()=>{const e=p(t,{...i,autoGenerateObjectIDIfNotExist:a,batchSize:n});return l.push(e),s?e.wait(i):e})).then((()=>{const t=d(h,e.indexName,"move",i);return l.push(t),s?t.wait(i):t})).then((()=>Promise.all(l))).then((([e,t,r])=>({objectIDs:t.objectIDs,taskIDs:[e.taskID,...t.taskIDs,r.taskID]}))),((e,t)=>Promise.all(l.map((e=>e.wait(t))))))},Qe=e=>(t,r)=>Xe(e)(t,{...r,clearExistingRules:!0}),Ge=e=>(t,r)=>Ze(e)(t,{...r,clearExistingSynonyms:!0}),Le=e=>(t,r)=>o(Ve(e)([t],r).then((e=>({objectID:e.objectIDs[0],taskID:e.taskIDs[0]}))),((t,r)=>ot(e)(t.taskID,r))),Ve=e=>(t,r)=>{const{autoGenerateObjectIDIfNotExist:s,...a}=r||{},n=s?nt.AddObject:nt.UpdateObject;if(n===nt.UpdateObject)for(const e of t)if(void 0===e.objectID)return o(Promise.reject({name:"MissingObjectIDError",message:"All objects must have an unique objectID (like a primary key) to be valid. Algolia is also able to generate objectIDs automatically but *it's not recommended*. To do it, use the `{'autoGenerateObjectIDIfNotExist': true}` option."}));return qe(e)(t,n,a)},_e=e=>(t,r)=>Xe(e)([t],r),Xe=e=>(t,r)=>{const{forwardToReplicas:s,clearExistingRules:a,...n}=r||{},i=u(n);return s&&(i.queryParameters.forwardToReplicas=1),a&&(i.queryParameters.clearExistingRules=1),o(e.transporter.write({method:P,path:c("1/indexes/%s/rules/batch",e.indexName),data:t},i),((t,r)=>ot(e)(t.taskID,r)))},Ye=e=>(t,r)=>Ze(e)([t],r),Ze=e=>(t,r)=>{const{forwardToReplicas:s,clearExistingSynonyms:a,replaceExistingSynonyms:n,...i}=r||{},d=u(i);return s&&(d.queryParameters.forwardToReplicas=1),(n||a)&&(d.queryParameters.replaceExistingSynonyms=1),o(e.transporter.write({method:P,path:c("1/indexes/%s/synonyms/batch",e.indexName),data:t},d),((t,r)=>ot(e)(t.taskID,r)))},et=e=>(t,r)=>e.transporter.read({method:P,path:c("1/indexes/%s/query",e.indexName),data:{query:t},cacheable:!0},r),tt=e=>(t,r,s)=>e.transporter.read({method:P,path:c("1/indexes/%s/facets/%s/query",e.indexName,t),data:{facetQuery:r},cacheable:!0},s),rt=e=>(t,r)=>e.transporter.read({method:P,path:c("1/indexes/%s/rules/search",e.indexName),data:{query:t}},r),st=e=>(t,r)=>e.transporter.read({method:P,path:c("1/indexes/%s/synonyms/search",e.indexName),data:{query:t}},r),at=e=>(t,r)=>{const{forwardToReplicas:s,...a}=r||{},n=u(a);return s&&(n.queryParameters.forwardToReplicas=1),o(e.transporter.write({method:I,path:c("1/indexes/%s/settings",e.indexName),data:t},n),((t,r)=>ot(e)(t.taskID,r)))},ot=e=>(t,r)=>a((s=>(e=>(t,r)=>e.transporter.read({method:f,path:c("1/indexes/%s/task/%s",e.indexName,t.toString())},r))(e)(t,r).then((e=>"published"!==e.status?s():void 0)))),nt={AddObject:"addObject",UpdateObject:"updateObject",PartialUpdateObject:"partialUpdateObject",PartialUpdateObjectNoCreate:"partialUpdateObjectNoCreate",DeleteObject:"deleteObject",DeleteIndex:"delete",ClearIndex:"clear"},it={Settings:"settings",Synonyms:"synonyms",Rules:"rules"},ct=1,dt=2,ut=3;function ht(a,o,c){const u={appId:a,apiKey:o,timeouts:{connect:1,read:2,write:30},requester:{send:e=>new Promise((t=>{const r=new XMLHttpRequest;r.open(e.method,e.url,!0),Object.keys(e.headers).forEach((t=>r.setRequestHeader(t,e.headers[t])));const s=(e,s)=>setTimeout((()=>{r.abort(),t({status:0,content:s,isTimedOut:!0})}),1e3*e),a=s(e.connectTimeout,"Connection timeout");let o;r.onreadystatechange=()=>{r.readyState>r.OPENED&&void 0===o&&(clearTimeout(a),o=s(e.responseTimeout,"Socket timeout"))},r.onerror=()=>{0===r.status&&(clearTimeout(a),clearTimeout(o),t({content:r.responseText||"Network request failed",status:r.status,isTimedOut:!1}))},r.onload=()=>{clearTimeout(a),clearTimeout(o),t({content:r.responseText,status:r.status,isTimedOut:!1})},r.send(e.data)}))},logger:(p=ut,{debug:(e,t)=>(ct>=p&&console.debug(e,t),Promise.resolve()),info:(e,t)=>(dt>=p&&console.info(e,t),Promise.resolve()),error:(e,t)=>(console.error(e,t),Promise.resolve())}),responsesCache:r(),requestsCache:r({serializable:!1}),hostsCache:t({caches:[e({key:`4.11.0-${a}`}),r()]}),userAgent:q("4.11.0").add({segment:"Browser"})};var p;const l={...u,...c},m=()=>e=>(e=>{const t=e.region||"us",r=s(d.WithinHeaders,e.appId,e.apiKey),a=D({hosts:[{url:`personalization.${t}.algolia.com`}],...e,headers:{...r.headers(),"content-type":"application/json",...e.headers},queryParameters:{...r.queryParameters(),...e.queryParameters}});return i({appId:e.appId,transporter:a},e.methods)})({...u,...e,methods:{getPersonalizationStrategy:A,setPersonalizationStrategy:C}});return(e=>{const t=e.appId,r=s(void 0!==e.authMode?e.authMode:d.WithinHeaders,t,e.apiKey),a=D({hosts:[{url:`${t}-dsn.algolia.net`,accept:h.Read},{url:`${t}.algolia.net`,accept:h.Write}].concat(n([{url:`${t}-1.algolianet.com`},{url:`${t}-2.algolianet.com`},{url:`${t}-3.algolianet.com`}])),...e,headers:{...r.headers(),"content-type":"application/x-www-form-urlencoded",...e.headers},queryParameters:{...r.queryParameters(),...e.queryParameters}});return i({transporter:a,appId:t,addAlgoliaAgent(e,t){a.userAgent.add({segment:e,version:t})},clearCache:()=>Promise.all([a.requestsCache.clear(),a.responsesCache.clear()]).then((()=>{}))},e.methods)})({...l,methods:{search:de,searchForFacetValues:ue,multipleBatch:ie,multipleGetObjects:ce,multipleQueries:de,copyIndex:H,copySettings:M,copySynonyms:W,copyRules:K,moveIndex:ne,listIndices:ae,getLogs:_,listClusters:se,multipleSearchForFacetValues:ue,getApiKey:L,addApiKey:$,listApiKeys:re,updateApiKey:fe,deleteApiKey:Q,restoreApiKey:le,assignUserID:J,assignUserIDs:z,getUserID:Z,searchUserIDs:ge,listUserIDs:oe,getTopUserIDs:X,removeUserID:he,hasPendingMappings:ee,clearDictionaryEntries:F,deleteDictionaryEntries:G,getDictionarySettings:V,getAppTask:Y,replaceDictionaryEntries:pe,saveDictionaryEntries:me,searchDictionaryEntries:ye,setDictionarySettings:be,waitAppTask:Pe,customRequest:B,initIndex:e=>t=>te(e)(t,{methods:{batch:Ie,delete:Se,findAnswers:Ce,getObject:$e,getObjects:ze,saveObject:Le,saveObjects:Ve,search:et,searchForFacetValues:tt,waitTask:ot,setSettings:at,getSettings:He,partialUpdateObject:Me,partialUpdateObjects:We,deleteObject:Te,deleteObjects:Ne,deleteBy:ve,clearObjects:je,browseObjects:xe,getObjectPosition:Je,findObject:Ue,exists:Ae,saveSynonym:Ye,saveSynonyms:Ze,getSynonym:Ke,searchSynonyms:st,browseSynonyms:De,deleteSynonym:Ee,clearSynonyms:ke,replaceAllObjects:Be,replaceAllSynonyms:Ge,searchRules:rt,getRule:Fe,deleteRule:Re,saveRule:_e,saveRules:Xe,replaceAllRules:Qe,browseRules:we,clearRules:Oe}}),initAnalytics:()=>e=>(e=>{const t=e.region||"us",r=s(d.WithinHeaders,e.appId,e.apiKey),a=D({hosts:[{url:`analytics.${t}.algolia.com`}],...e,headers:{...r.headers(),"content-type":"application/json",...e.headers},queryParameters:{...r.queryParameters(),...e.queryParameters}});return i({appId:e.appId,transporter:a},e.methods)})({...u,...e,methods:{addABTest:S,getABTest:N,getABTests:R,stopABTest:E,deleteABTest:T}}),initPersonalization:m,initRecommendation:()=>e=>(l.logger.info("The `initRecommendation` method is deprecated. Use `initPersonalization` instead."),m()(e))}})}ht.version="4.11.0";export default ht;