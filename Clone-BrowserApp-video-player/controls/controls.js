(function(n){var y,t,i,f,c,k,p,l,nt,h,v,tt,it,rt,e,o,u,ut,s,w,d,r;n.fn.initVideoPlayer=function(){y=n(this);t=y.parent();i=n(this)[0];n(".player").length||n('<div class="controls player" id="controls"><div class="controls play-pause pause"><span class="controls play-button">&#9658;<\/span><div class="controls pause-button"><span> <\/span><span> <\/span><\/div><\/div><div class="controls progress"><div class="controls progress-bar"><div class="controls button-holder"><div class="controls progress-button"> <\/div><\/div><\/div><div class="controls time"><span class="controls ctime">00:00<\/span><span class="controls stime"> / <\/span><span class="controls ttime">00:00<\/span><\/div><\/div><div class="controls volume"><div class="controls volume-holder"><div class="controls volume-bar-holder"><div class="controls volume-bar"><div class="controls volume-button-holder"><div class="controls volume-button"> <\/div><\/div><\/div><\/div><\/div><div class="controls volume-icon v-change-0"><span> <\/span><\/div><\/div><\/div>').appendTo(t);i.addEventListener("timeupdate",g);i.addEventListener("ended",ft);i.addEventListener("volumechange",et);n("body, html").bind("mouseup",function(){p=!1;l=!1;$draggingProgress=!1;v==!0&&i.play();b()});n("body, html").bind("mousemove",function(y){var w,k,b;if(p==!0&&($draggingProgress=!0,w=0,k=t.find(".progress-button").width(),o=y.pageX-t.find(".progress").offset().left,v==!0&&c<f&&t.find(".play-pause").addClass("pause").removeClass("play"),o<0?(w=0,i.currentTime=0):o>s?(i.currentTime=f,w=s):(w=o,c=o/s*f,i.currentTime=c),t.find(".progress-bar").css({width:w+"px"}),t.find(".progress-button").css({left:w-k+"px"})),l==!0){if(u=t.find(".volume-bar-holder").height()-(y.pageY-t.find(".volume-bar-holder").offset().top),b=0,t.find(".volume-holder").css("display")=="none")return l=!1,!1;t.find(".volume-icon").hasClass("volume-icon-hover")||t.find(".volume-icon").addClass("volume-icon-hover");u<0||u==0?(r=0,b=0,t.find(".volume-icon").removeClass().addClass("volume-icon volume-icon-hover v-change-11")):u>n(this).find(".volume-bar-holder").height()||u/t.find(".volume-bar-holder").height()==1?(r=1,b=t.find(".volume-bar-holder").height(),t.find(".volume-icon").removeClass().addClass("volume-icon volume-icon-hover v-change-1")):(r=t.find(".volume-bar").height()/t.find(".volume-bar-holder").height(),b=u);t.find(".volume-bar").css({height:b+"px"});t.find(".volume-button").css({top:b+t.find(".volume-button").height()+"px"});a();i.volume=r;e=r}h==!1?(t.find(".volume-holder").stop(!0,!1).fadeOut(100),t.find(".volume-icon").removeClass("volume-icon-hover")):(t.find(".volume-icon").addClass("volume-icon-hover"),t.find(".volume-holder").stop(!0,!1),t.find(".volume-holder").css({opacity:"1"}),t.find(".volume-holder").fadeIn(100))});t.find(".volume-icon").bind("mousedown",function(){r=i.volume;typeof e=="undefined"&&(e=i.volume);r>0?(i.volume=0,r=0,t.find(".volume-bar").css({height:"0"}),a()):(i.volume=e,r=e,t.find(".volume-bar").css({height:e*100+"%"}),a())});t.find(".play-pause").bind("click",function(){i.pause();b();v=!1});t.find(".progress").bind("mousedown",function(n){p=!0;o=n.pageX-t.find(".progress").offset().left;c=o/s*f;i.currentTime=c});t.find(".volume-bar-holder").bind("mousedown",function(f){if(l=!0,u=t.find(".volume-bar-holder").height()-(f.pageY-t.find(".volume-bar-holder").offset().top),u<0||u>n(this).height())return l=!1,!1;t.find(".volume-bar").css({height:u+"px"});t.find(".volume-button").css({top:u-t.find(".volume-button").height()/2+"px"});i.volume=t.find(".volume-bar").height()/n(this).height();e=t.find(".volume-bar").height()/n(this).height();r=t.find(".volume-bar").height()/n(this).height();a()});t.bind("selectstart",function(){return!1});n(window).bind("resize",function(){$videoWidth=y.width();t.find(".player").css({width:$videoWidth-40+"px",left:"20px"});t.find(".progress").css({width:$videoWidth-300+"px"});s=t.find(".progress").width()});n(".fullscreen").click(function(){document.webkitFullscreenElement?document.webkitExitFullscreen():i.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)})};n.fn.hideVideoControls=function(){t&&(t.find(".player").css({opacity:"0"}),k=setTimeout(function(){k&&t.find(".player").css({visibility:"hidden"})},300))};n.fn.showVideoControls=function(){t&&(k=null,t.find(".player").css({visibility:"visible"}),t.find(".player").css({opacity:"1"}))};n.fn.initVideoControls=function(){$videoWidth=y.width();t.find(".player").css({width:$videoWidth-40+"px"});t.find(".progress").css({width:$videoWidth-200+"px"});t.find(".player").css({display:"block"});i=n(this)[0];f=i.duration;r=i.volume;c;p=!1;l=!1;nt=!1;h=!1;v=!1;tt=!1;it=!1;rt=!1;e;o=0;u=0;ut=0;w=0;d=0;r=i.volume;s=t.find(".progress").width();b();g();a();t.find(".volume").hover(function(){h=!0},function(){h=!1});i.requestFullscreen||i.mozRequestFullScreen||i.webkitRequestFullScreen||n(".fullscreen").hide()};var b=function(){var r=i.buffered,u,e,o;if(t.find("[class^=buffered]").remove(),r.length>0)for(u=r.length;u--;)$maxBuffer=r.end(u),$minBuffer=r.start(u),e=$minBuffer/f*100,o=($maxBuffer-$minBuffer)/f*100,n('<div class="buffered"><\/div>').css({left:e+"%",width:o+"%"}).appendTo(t.find(".progress"))},g=function(r){var o=Math.round(n(".progress-bar").width()/s*f),l=i.currentTime,u=0,h=Math.floor(o/60),c=Math.floor(f/60),e=Math.floor(f-c*60);o&&(u=Math.floor(o)-60*h);w=l/f*s;u<10&&(u="0"+u);e<10&&(e="0"+e);r!=!0&&(t.find(".progress-bar").css({width:w+"px"}),t.find(".progress-button").css({left:w-t.find(".progress-button").width()+"px"}));t.find(".ctime").html(h+":"+u);t.find(".ttime").html(c+":"+e);i.currentTime>0&&i.paused==!1&&i.ended==!1&&b()},ft=function(){v=!1;$draggingProgress==!1&&t.find(".play-pause").addClass("play").removeClass("pause")},et=function(){r=i.volume;var n=t.find(".volume-bar-holder").height()*r;t.find(".volume-bar").css({height:n+"px"});t.find(".volume-button").css({top:n+t.find(".volume-button").height()+"px"});a()},a=function(){for(var i,u,n=0;n<1;n+=.1)i=parseInt(Math.floor(n*10))/10,u=i*10+1,r==1?h==!0?t.find(".volume-icon").removeClass().addClass("volume-icon volume-icon-hover v-change-11"):t.find(".volume-icon").removeClass().addClass("volume-icon v-change-11"):r==0?h==!0?t.find(".volume-icon").removeClass().addClass("volume-icon volume-icon-hover v-change-1"):t.find(".volume-icon").removeClass().addClass("volume-icon v-change-1"):r>i-.1&&d<i&&!t.find(".volume-icon").hasClass("v-change-"+u)&&(h==!0?t.find(".volume-icon").removeClass().addClass("volume-icon volume-icon-hover v-change-"+u):t.find(".volume-icon").removeClass().addClass("volume-icon v-change-"+u))}})(jQuery)