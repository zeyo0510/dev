<!doctype html>
<html lang="en-us">
  
<!-- Mirrored from localhost:3001/voxlgo by HTTrack Website Copier/3.x [XR&CO'2013], Fri, 06 May 2016 18:41:08 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <script src="../ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="assets/application.js" type="text/javascript"></script>
    <script src="assets/voxel_library.js" type="text/javascript"></script>
    <script src="assets/voxel_high_level_lib.js" type="text/javascript"></script>
    <script type="text/javascript" src="assets/acorn/acorn.js"></script>
    <script type="text/javascript" src="assets/acorn/interpreter.js"></script>
    <script type="text/javascript" src="assets/blockly_interpreter.js"></script>

    <meta charset="utf-8">
<script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","errorBeacon":"bam.nr-data.net","licenseKey":"92771d7f79","applicationID":"3968337","transactionName":"cVcITUFeWQ1REx9HCkpUAVYcWFsFURk=","queueTime":0,"applicationTime":275,"agent":""}</script>
<script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(e,t,n){function r(n){if(!t[n]){var o=t[n]={exports:{}};e[n][0].call(o.exports,function(t){var o=e[n][1][t];return r(o||t)},o,o.exports)}return t[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,n){function r(e,t){return function(){o(e,[(new Date).getTime()].concat(a(arguments)),null,t)}}var o=e("handle"),i=e(2),a=e(3);"undefined"==typeof window.newrelic&&(newrelic=NREUM);var u=["setPageViewName","setCustomAttribute","finished","addToTrace","inlineHit"],c=["addPageAction"],f="api-";i(u,function(e,t){newrelic[t]=r(f+t,"api")}),i(c,function(e,t){newrelic[t]=r(f+t)}),t.exports=newrelic,newrelic.noticeError=function(e){"string"==typeof e&&(e=new Error(e)),o("err",[e,(new Date).getTime()])}},{}],2:[function(e,t,n){function r(e,t){var n=[],r="",i=0;for(r in e)o.call(e,r)&&(n[i]=t(r,e[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],3:[function(e,t,n){function r(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,o=n-t||0,i=Array(0>o?0:o);++r<o;)i[r]=e[t+r];return i}t.exports=r},{}],ee:[function(e,t,n){function r(){}function o(e){function t(e){return e&&e instanceof r?e:e?u(e,a,i):i()}function n(n,r,o){e&&e(n,r,o);for(var i=t(o),a=l(n),u=a.length,c=0;u>c;c++)a[c].apply(i,r);var s=f[g[n]];return s&&s.push([m,n,r,i]),i}function p(e,t){w[e]=l(e).concat(t)}function l(e){return w[e]||[]}function d(e){return s[e]=s[e]||o(n)}function v(e,t){c(e,function(e,n){t=t||"feature",g[n]=t,t in f||(f[t]=[])})}var w={},g={},m={on:p,emit:n,get:d,listeners:l,context:t,buffer:v};return m}function i(){return new r}var a="nr@context",u=e("gos"),c=e(2),f={},s={},p=t.exports=o();p.backlog=f},{}],gos:[function(e,t,n){function r(e,t,n){if(o.call(e,t))return e[t];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return e[t]=r,r}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],handle:[function(e,t,n){function r(e,t,n,r){o.buffer([e],r),o.emit(e,t,n)}var o=e("ee").get("handle");t.exports=r,r.ee=o},{}],id:[function(e,t,n){function r(e){var t=typeof e;return!e||"object"!==t&&"function"!==t?-1:e===window?0:a(e,i,function(){return o++})}var o=1,i="nr@id",a=e("gos");t.exports=r},{}],loader:[function(e,t,n){function r(){if(!w++){var e=v.info=NREUM.info,t=s.getElementsByTagName("script")[0];if(e&&e.licenseKey&&e.applicationID&&t){c(l,function(t,n){e[t]||(e[t]=n)});var n="https"===p.split(":")[0]||e.sslForHttp;v.proto=n?"https://":"http://",u("mark",["onload",a()],null,"api");var r=s.createElement("script");r.src=v.proto+e.agent,t.parentNode.insertBefore(r,t)}}}function o(){"complete"===s.readyState&&i()}function i(){u("mark",["domContent",a()],null,"api")}function a(){return(new Date).getTime()}var u=e("handle"),c=e(2),f=window,s=f.document;NREUM.o={ST:setTimeout,CT:clearTimeout,XHR:f.XMLHttpRequest,REQ:f.Request,EV:f.Event,PR:f.Promise,MO:f.MutationObserver},e(1);var p=""+location,l={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-943.min.js"},d=window.XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.addEventListener&&!/CriOS/.test(navigator.userAgent),v=t.exports={offset:a(),origin:p,features:{},xhrWrappable:d};s.addEventListener?(s.addEventListener("DOMContentLoaded",i,!1),f.addEventListener("load",r,!1)):(s.attachEvent("onreadystatechange",o),f.attachEvent("onload",r)),u("mark",["firstbyte",a()],null,"api");var w=0},{}]},{},["loader"]);</script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>LearnToMod | Simulator</title>
    <style>
      body, html{
        margin: 0; padding: 0; 
      }
    </style>
  </head>
  <body style="text-align: left !important;" class="template metro">
    <div id="over_simulator_curtain">
    </div>


    <div id="over_simulator_loader" style="display:none;z-index: 500; position:absolute; top:0px; left:0px; width: 100vw; background-color:rgba(200,200,200,0.5); padding: 50px; text-align: center; color: white;">
      <img style="display:inline-block; width: 30px; margin-right: 5px; position:relative; top: -30px;" src="assets/ajax-loader.gif"/>
      <div style="width:300px; display: inline-block">
      Voxel engine is loading...
      This can take a few minutes.
      <span style="display:block; color: orange;" id="progress_feedback"></span>
      </div>
    </div>

    <script>
       $(document).ready(function(){
          var height = $("#over_simulator_loader").outerHeight()
          $("#over_simulator_loader").css("top", ($(window).height()/2 - height/2) +"px")
          $("#over_simulator_loader").show()
       })
    </script>

    <div class="template-wrap clear"> <input style="position:absolute; margin-top: -1000px; margin-left: -1000px" id="WebGLKeyboardInput" type="text" name="WebGLKeyboardInput" value="" />
    <canvas class="emscripten" id="canvas" oncontextmenu="event.preventDefault()" height="600px" width="960px"></canvas>
    </div>

    <a id="dataUrl" href="../s3-us-west-1.amazonaws.com/voxel-engine/Releases/0-14/WebGL/Unzipped/VoxLAlpha/Release/VoxLAlpha.datagz" style="display:none"></a>
    <a id="codeUrl" href="../s3-us-west-1.amazonaws.com/voxel-engine/Releases/0-14/WebGL/Unzipped/VoxLAlpha/Release/VoxLAlpha.jsgz" style="display:none"></a>
    <a id="memUrl"  href="../s3-us-west-1.amazonaws.com/voxel-engine/Releases/0-14/WebGL/Unzipped/VoxLAlpha/Release/VoxLAlpha.memgz" style="display:none"></a>

    <script type='text/javascript'>
        // connect to canvas
        var Module = {
          TOTAL_MEMORY: 268435456 * 2, //Gives some out of memory issues on large maps -- e.g. minas Tirith..
          //TOTAL_MEMORY: 268435456 * 4, //Causes chrome/windows issue:  uncaught rangeerror invalid typed array length
          errorhandler: null,
          compatibilitycheck: null,
          dataUrl: $("#dataUrl").attr("href"), 
          codeUrl: $("#codeUrl").attr("href"), 
          memUrl: $("#memUrl").attr("href")
        };

        var myHeight = 100; var myWidth = 100;
          
        function OnLoaded(){
                reportSize();
          document.getElementById('canvas').style.width = myWidth + 'px';
          document.getElementById('canvas').style.height = myHeight + 'px';
        }
        
        window.onresize = function(){
          reportSize();

          document.getElementById('canvas').style.width = myWidth + 'px';
          document.getElementById('canvas').style.height = myHeight + 'px';
        }

        function reportSize() {
          myWidth = 0, myHeight = 0;
          if( typeof( window.innerWidth ) == 'number' ) {
            //Non-IE
            myWidth = window.innerWidth;
            myHeight = window.innerHeight;
          } else {
            if( document.documentElement &&
                ( document.documentElement.clientWidth || document.documentElement.clientHeight ) ) {
              //IE 6+ in 'standards compliant mode'
              myWidth = document.documentElement.clientWidth;
              myHeight = document.documentElement.clientHeight;
            } else {
              if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
                //IE 4 compatible
                myWidth = document.body.clientWidth;
                myHeight = document.body.clientHeight;
              }
            }
          }
        }

        function UnityProgress(dom){
          $("#progress_feedback").html("Starting...")
          this.SetProgress = function(progress){
            $("#progress_feedback").html((""+(progress*100)).split(".")[0] +"% complete")
          }

          this.SetMessage = function(message){
            $("#progress_feedback").html(message)
          }

          this.Clear = function(){

          }
        }
</script>

<script src="../s3-us-west-1.amazonaws.com/voxel-engine/Releases/0-14/WebGL/Unzipped/VoxLAlpha/Release/UnityLoader.js"></script>

<script>
function simulatorLoaded(){
  $("#over_simulator_loader").hide();
  $("#over_simulator_curtain").hide()

  window.message_bus = new MessageBus()
  try{
    window.socket_manager = new SocketManager()
    window.message_bus.subscribe(window.socket_manager)
  } catch (err) {
    console.log("error in simulatorLoaded function: ", err)
  }
  console.timeEnd("page_load");

  $.event.trigger({type: "vox_l_loaded"})

  hackWebGLKeyboard()

  window.onresize()
  //Why is this even necessary????
  setInterval(function(){
    //Wish we could just call it once but it doesn't seem to be working...
    window.onresize()
  }, 1000);
  
    //Subscribe to unity events so you can use voxel_library.js stuff in the browser, as well as in interpreter
  message_bus.subscribe({
    receive: function(msg){
      window.local_player_id = message_bus.local_player_id
      handleMessage(msg)
    }
  })

  window.local_player_id = message_bus.local_player_id
}

function SendUnityMessage(msg){
  message_bus.sendToUnity({receive: function(){}}, msg)
}

function hackWebGLKeyboard()
 {
     var webGLInput = document.getElementById('WebGLKeyboardInput');
     for (var i in JSEvents.eventHandlers)
     {
         var event = JSEvents.eventHandlers[i];
         if (event.eventTypeString == 'keydown' || event.eventTypeString == 'keypress' || event.eventTypeString == 'keyup')
         {
             webGLInput.addEventListener(event.eventTypeString, event.eventListenerFunc, event.useCapture);
             window.removeEventListener(event.eventTypeString, event.eventListenerFunc, event.useCapture);
         }
     }
 }

</script>
  

  <style>
    #over_simulator_content{
      width: 100vw;
      height: 100vh;
      top:0;
      left:0;
      position:absolute;
      z-index: 100;
    }

    #over_simulator_curtain{
      width: 100vw;
      height: 100vh;
      top:0;
      left:0;
      position:absolute;
      z-index: 50;
      background-color: black;
    }

  </style>



  <script>

    var game_focus_interval = null;

    function unfocusGame(dont_show_over_content){
       window.game_has_focus = false

       if(!dont_show_over_content){
         $("#over_simulator_content").show()
         $(".blocklyToolboxDiv").show()
       }
      
       $('#WebGLKeyboardInput').hide()
       SendMessage("Browser", "UnlockCursor", "")

       if(game_focus_interval){
         clearInterval(game_focus_interval)
         game_focus_interval = null
       }
    }

    function focusGame(){
        restoreBlocks()

       window.game_has_focus = true
       clearSelection()

       var canvas = $(".emscripten")[0]

       canvas.requestPointerLock = canvas.requestPointerLock ||
           canvas.mozRequestPointerLock ||
           canvas.webkitRequestPointerLock

       canvas.requestPointerLock()

       $("#over_simulator_content").hide()
       $(".blocklyToolboxDiv").hide()
      
       $('#WebGLKeyboardInput').show()
       document.getElementById('WebGLKeyboardInput').focus()    

       if(!game_focus_interval){
         game_focus_interval = setInterval(function(){
           clearSelection()
       //    document.getElementById('WebGLKeyboardInput').focus()    
         }, 1000);
       }

       SendMessage("Browser", "LockCursor", "")
    }

    function clearSelection() {
        if ( document.selection ) {
            document.selection.empty();
        } else if ( window.getSelection ) {
            window.getSelection().removeAllRanges();
        }
    }


    function changeCallback(e){
     //If the cursor is shown, let the browser know that the game is unfocused.
       var canvas = $(".emscripten")[0]
        if(document.pointerLockElement === canvas ||
                  document.mozPointerLockElement === canvas ||
                  document.webkitPointerLockElement === canvas){
         $('#WebGLKeyboardInput').show()
         document.getElementById('WebGLKeyboardInput').focus()    
        } else {
          window.game_has_focus = false
        //  unfocusGame(true)
        }
    }

    document.addEventListener('pointerlockchange', changeCallback, false);
    document.addEventListener('mozpointerlockchange', changeCallback, false);
    document.addEventListener('webkitpointerlockchange', changeCallback, false);  

    document.addEventListener('keydown', function(e){
      //If the game is unfocused and you press escape, unfocus it "more" -- e.g. show stuff on top, like blockly.
      if(e.keyCode == 27 && !window.game_has_focus){
        unfocusGame() 
      }
    }, false);  

    function authToken() {
      return '42Eji/zSqj3qWmGTNgoVLYGKJHaYdrt/YnLMMop2csk=';
    }


    //OVerriding Unity's bullshit
    window.onerror = function(e){
      console.log(e)
    }


    $(document).ready(function(){
      var last_mouse_up_time = new Date().getTime();
      $(window).click(function(event){
        //Hack so that if blockly is on the page, you have to click the background to focus the game.  Otherwise, any double-click will do.
        if($(".blocklyMainBackground")[0] && $(event.target).attr("class") != "blocklyMainBackground")
          return

        var current_mouse_up_time = new Date().getTime();
        var diff = current_mouse_up_time - last_mouse_up_time 
        last_mouse_up_time = current_mouse_up_time;
        if(diff < 200)
        {
          focusGame()
        }
      })
    })


    /*
    window.onerror = function(e){
      console.log(e)
      SendMessage("Browser", "ApplyMessage", JSON.stringify({type:"console_log", data: {entity_id: "console", message: e}}))
    }
    */
  </script>


  <script src="assets/socket_manager.js"></script>
     <script src="assets/unity_message_bus.js"></script>
  <script src="assets/blockly_message_bus.js"></script>

  <div id="over_simulator_content">
    
<style>
  .table{
    background-color:white !important;
  }

  .variable_table_container{
    padding: 10px;
    background-color:white;
  }

  #variable_table_container{
    position: absolute;
    bottom: 34px;
    left: 0px;
    z-index: 300;
    padding: 10px;
    background-color:white;
    max-height: 500px;
    max-width: 700px;
    overflow: scroll;
  }


  #save_status{
      top:0px;
      right:0px;
      position: fixed;	
      z-index: 0;
      font-size: 20pt;
      text-align: center;
  }


      #done_editing{
        position: absolute;
        bottom:0;
        right: 0;
      }

      #run_script{
        position: absolute;
        top:0;
        right: 0;
        margin-top: 20px;
      }

    .available{
      background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAIGNIUk0AAHolAACAgwAA+f8AAIDoAABSCAABFVgAADqXAAAXb9daH5AAAAKvSURBVHjahJA/bJR1HMY/31977x33r2LuClc1LYM9TSAUr5gqtkVJjAkSFxYHE3VgaWRw0cUwOagxMZLApoXFBIwuHVSoQYkVMBXUpqSkMW9jaS25plh7/3rv+3scTIwixs/8PHn+2Bk/SVtN2mqxacYOKw13KfNiXtlneihmDONXqs0VVs/VXP1UqJvnc8qBeZoWYWf9JHXVqWkj2EX55G76X86R4W40aDHNzMdzLBwJLLEWm6fTI+o0knvZ+dkgO/cDfGczTNpl5gjxePrpY0SPMKwKT1A5nCe7Y4ofDgQEv/Ghn2AqunZabUmR9Fb8gQoaUVIVFTSiokaV0qDu0T694Y+rGbWktnQ5+nHiuP+IjrFjR4cqevj9wBK8beO87t6jiyzbKJAiIEWSreQxjAm7QGyeAwzRzb39i/7WFbdV2bGs0nxvs7zjxtlOgRwZPP6v7R5PmhQPUOKEneFLd4UECfqs51WXU/opDL6wb/mdDfJkEfrXgUKk2UKbiM/5BoD76d7reujOANwgJH9H8p14PDnSzBGySZsSReecDIAIDxj/jxH/LcQtW7UJ0E8f69RwuP+0Ohwb1CnTS0CCW6zK3Wb9a4AnNcgWktRoYHdpYhgtWvypfRSARVv5yVXd2smGWuzTHo7qeRZZpk7zH00cRos2ITd5yT/HQY0gPKGW3u0YPvZ06HB77tO2hx5jN5HFTNk11lgHRIs2VW5Tp8kRf5g3eYUUSa5y/eKsfn7NTvlPaCjqelwDF3bx4ADAeXeJc1xijpCYmDJ9jKrCIe0H4IaF81/56VGDJTvtPwV1IFmhTO/4AOWDSQIAWmwiRIokADEx08xeXGD5hUjxQp0GnQCdOAKS1RnNP7tO7VDOMmO9bB8qUQRghVVCW7raUOPEvH45W7IidRoA/DEAmmk0pL+n6f4AAAAASUVORK5CYII%3D") 50% no-repeat;
      width: 20px;
      height: 20px;
      position: relative;
    }

    .busy{
      background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAIGNIUk0AAHolAACAgwAA+f8AAIDoAABSCAABFVgAADqXAAAXb9daH5AAAAKNSURBVHjajJI9a1RBGIWfGeLdmPXuKkR0Q0RTmFsFUxgQNcaPRonpbAW1sAlY2IhFfoCIVSDaaVImFhYWmkTxAwJBVgttNqTYQFAjAWPi7t3svXeOxeC3hQdeZpiZ887DmTFuchIlCUoSTLOJ6erqV7F4QYXCaTo68hgDHz82WFmZsbXauKrVWYUhBjCNBsZNTaF6HdVqAT09tzlw4BJhyD8Vx1Au36dSuWyC4LPJMlpwDur1HH19jzh48DiAefUK8+QJVCrgHHR3o2PHUH8/HD16jkKhi7m5UwTBF9zdu6RzcxOJpFRSduOG1N4u5XJ+3LlTam2Vtm+XGxlR2mgokZTOzz90o6PgpqcPpRsbP83GSKWSFEXS/v2+okjq7JRA7vp1pZLSZlPJ5OQZqx07hrVtG+b1a+zNm7B7N4ShR/8u56CtDfbswYyNYZ8+hS1bMPv2XbUKw5MGMNPTsLEBhQJIfwco+SZJAo8f+7XOzj5LR0cegIUFb/715j/lnKerVKDZhFLJWlnrN9OU/1aW/Zha8+FDA4Dublhfh+8N/yVr4etXiCIIAvj0SZa1tRcAOnECtm6FWg2M+dtsDGxu8uMsYJaX31q7unpbcYyOHEFXrsDyMtTrv5NY683VKu7iRTQ4CBKqVm/h7twhnZ9/kEhK41ju2jWpWJTa2qRdu3zl81I+r2x4WNnamv8H5fKLZHQU48bHURwXdfjwM3p6egHs7CzMzPi0swyiCA0MoKEhj76wsOiePx/AmPfGTUwgQFI7UXSP3t5BcjmPvrnp37+19Wf65fJLlpbOK02XqNdpAaClBYJgVe/enWV9fciE4TB79x6iVPLGlRVMtfpGcTymxcUpUyr5nIBvAwDWIWcndiwtQAAAAABJRU5ErkJggg%3D%3D") 50% no-repeat;
      width: 20px;
      height: 20px;
      position: relative;
    }
    #editor_tools, #editor_tool_icons, #mod, #done_editing, #debug, #show_vars{
      display:none;
    }

   .editor_tool_icon {
    width: 15px !important;
    height: 15px !important;
    padding: 5px !important;
   }

   .editor_tool_icon svg{
     width:  15px;
     height: 15px;
   }

   #blockly_target{
      position: absolute;
      top:0;
      left: 0;
      width: 100vw;
      height: 100vh;
   }

</style>

<div id="blockly_target"></div>

  <link rel="stylesheet" type="text/css" href="assets/blockly/apps/common.css">
  <link rel="stylesheet" type="text/css" href="assets/blockly/apps/code/style.css">
  <script type="text/javascript" src="assets/blockly/blockly_compressed.js"></script>
<script type="text/javascript" src="assets/blockly/blocks_compressed.js"></script>
<script type="text/javascript" src="assets/blockly/javascript_compressed.js"></script>
<script type="text/javascript" src="assets/blockly/unityscript_compressed.js"></script>
<script type="text/javascript" src="assets/blockly/apps/code/minecraft.js"></script>
<script type="text/javascript" src="assets/blockly/apps/code/examples.js"></script>

<script type="text/javascript" src="assets/blockly/apps/common.js"></script>

<script type="text/javascript" src="assets/blockly/msg/js/en.js"></script>

  <style>
    .blocklyPathLight{ display: none; }
    .blocklyPathDark{ display: none; }
    .blocklyIconShield{ display: none; }
  </style>


  <script src="ace-builds2/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
<style>

  .blocklyToolboxDiv{
    z-index: 150;
  }


  .blocklySvg{
    background-color: rgba(0,0,0,0) !important;
    background: transparent;
  }

  .main-menu-wrapper{
    display: none;
  }

  #editor div, #editor span, #editor p {
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;
    font-weight: normal;
    font-style: normal;
  }

  #edit_overlay{
    position: absolute;
    right: 0;
    top: 0;
    width: 45px;
    height: 25px;
    padding: 5px;
    background-color: cyan;
    cursor: pointer;
    z-index: 100;
  }


  #editor{
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    text-align: left;
    z-index: 1000;
  }


</style>

    <script>
      Blockly.HSV_SATURATION = 0.9
      Blockly.HSV_VALUE = 0.9
      Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE = "function"

      function init() {
        if(window.parent && window.parent.blocklyLoaded)
          window.parent.blocklyLoaded(Blockly);

        if(window.top && window.top != window.parent && window.top.blocklyLoaded)
          window.top.blocklyLoaded(Blockly);

        if(top == window && document.getElementById("instructions"))
          document.getElementById("instructions").style.display="block"
      }
    </script>
    <style>
      body{
        margin: 0px;
        padding: 0px;
      }

      #simulator{

      }

      .blocklyPathLight{ display: none }
      .blocklyPathDark{ display: none }
      .blocklyIconShield{ display: none }
      
      .transparent {
     opacity: .8;
      }

    .blue {
      background-color: #46B8DA !important;
    }
    
    .orange {
      background-color: orange !important;
    }
    
    .btn-sharp {
      border:1px solid transparent;
      color: black;
      border-radius:0px;
    }
    
    .btn-sharp:hover {
      color: white;
      border: 1px outset rgb(240,240,240);
    }
    
    .btn-sharp:active {
      border: 1px inset lightgrey;
      background-color: black !important;
      color: white;
    }

    .editor_tool_icon{
      padding: 2px; 
      color: white;
      text-align: center;
      width: 25px;
      margin-right: 5px;
      cursor:pointer;
      position: relative;
      float: left;
    }

    #editor_tools{
      display:none;
      position: absolute;
      bottom: 0px;
      left: 0px;
      padding: 5px;
      padding-right: 0px;
      z-index: 300;
      background-color: #ddd;
    }
    </style>
</head>
<body onload="init()" >
<div id="editor" style="display:none; font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;">
</div>

<div id="editor_tools" >
  <div data-toggle="tooltip" title="Show JS" class="editor_tool_icon" style="background-color: orange" onclick="showJs()">.js</div>
</div>

<div id="js_warning" style="display:none; position: absolute; bottom:0px; left: 123px; z-index: 1000; padding: 10px; background-color: red; color: white;  text-align: center; cursor: pointer;" onclick="showJs()">Warning: You are looking at the JavaScript for a Blockly mod.  It is not (currently) possible to edit it here.  However, you can make a new JavaScript mod and copy this code into it.</div>

  <xml id="toolbox" style="display: none">
      <category name="Vox-L">
        <category name="Entities">
          <block type="entity_type" voxl></block>
          <block type="typeof" voxl></block>
          <block type="get_location" voxl></block>
          <block type="set_location" voxl></block>
          <block type="teleport" voxl></block>
          <block type="rotate_player" voxl></block>
          <block type="entitieswithinrange" voxl>
              <value name="NAME">
                  <block type="math_number" voxl></block>
              </value>
          </block>
          <block type="entitieswithinrange_mod" voxl>
              <value name="range">
                  <block type="math_number" voxl></block>
              </value>
          </block>
        </category>

        <category name="Players">
          <block type="me" voxl></block>
          <block type="player"></block>
          <block type="send" voxl></block>
          <block type="potion_effect" voxl></block>
          <block type="perform_command" voxl></block>
          <block type="register_command"></block>
          <block type="changearmor"></block>
          <block type="clear_armor"></block>
          <block type="get_target_block" voxl></block>
          <block type="texturepack" voxl></block>
        </category>

        <category name = "Item">
          <block type="item_in_hand" voxl></block>
          <block type="give_item" voxl></block>
          <block type="remove_items" voxl></block>
          <block type="remove_all_items" voxl></block>
          <block type="new_itemstack" voxl></block>
          <block type="add_lore"></block>
          <block type="change_item_name"></block>
          <block type="give_item_to_player" voxl></block>
          <block type="skull"></block>
        </category>

        <category name="Drone">
          <block type="new_drone" voxl></block>
          <block type="drone_move" voxl></block>
          <block type="drone_move_2" voxl>
            <value name="DISTANCE">
              <block type="math_number" voxl>
                <field name="NUM">1</field>
              </block>
            </value>
          </block>
          <block type="drone_rotate">
            <value name="NUM_ROTATIONS">
                <block type="math_number">
                  <field name="NUM">1</field>
                </block>
            </value>
          </block>
          <block type="block_place" voxl></block>
          <block type="mob" voxl></block>
        </category>

      <category name="NPC">
        <block type="newgoal">
            <value name="shouldexecute">
                <block type="anon_func">
                    <mutation><arg name="selector"></arg></mutation>
                </block>
            </value>
            <value name="run">
                <block type="anon_func">
                    <mutation><arg name="selector"></arg></mutation>
                </block>
            </value>
            <value name="priority">
                <block type="math_number"></block>
            </value>
        </block>
        <block type="newnpc" voxl>
           <value name="type">
               <block type="entity_type" voxl></block>
           </value>
           <value name="named">
               <block type="text" voxl></block>
           </value>
        </block>
        <block type="npc_navigate"> </block>
        <block type="npc_navigate_entity" voxl>
            <value name="aggro">
                <block type="logic_boolean" voxl></block>
            </value>
        </block>
        <block type="navigation_events"></block>
        <block type="npc_events"></block>
	<block type="npc_get_entity"> </block>
	<block type="npc_set_tamed"></block>
	<block type="npc_get_inventory"></block>
	<block type="npc_wander_goal"></block>
	<block type="npc_getNPC"></block>
	<block type="npc_isNPC"></block>
	<block type="npc_isSpawned"></block>



</category>

        <!-- <category name="SteveBot">
          <block type="stevebot">
              <value name="name">
                  <block type="text"></block>
              </value>

              <value name="location">
                  <block type="get_location">
                      <value name="THING">
                          <block type="me"></block>
                      </value>
                  </block>
              </value>

              <value name="pose">
                  <block type="logic_null"></block>
              </value>

              <value name="animation">
                  <block type="logic_null"></block>
              </value>

              <value name="desires">
                  <block type="logic_null"></block>
              </value>

              <value name="tiny">
                  <block type="logic_boolean"></block>
              </value>

              <value name="baseplate">
                  <block type="logic_boolean"></block>
              </value>

              <value name="arms">
                  <block type="logic_boolean"></block>
              </value>
          
          </block>
          <block type="change_stevebot_armor">
              <value name="item">
                  <block type="new_itemstack"></block>
              </value>
          </block>
          <block type="setstevebotanim"></block>
          <block type="setdesires">
              <value name="desires">
                  <block type="lists_create_with"></block>
              </value>
          </block>
          <block type="adddesire">
              <value name="priority">
                  <block type="math_number"></block>
              </value>
          </block>
          <block type="stevebot_move"></block>
          <category name="Pose Builder">
              <block type="pose"></block>
              <block type="equippart">
                  <value name="equip">
                      <block type="new_itemstack"></block>
                  </value>
              </block>
              <block type="posepart">
                  <value name="angle">
                      <block type="eulerangle"></block>
                  </value>
              </block>
              <block type="eulerangle"></block>
              <block type="prebuilt_pose_handshake"></block>
              <block type="prebuilt_pose_wave"></block>
          </category>
          <category name="Animation">
              <block type="animbuilder"></block>
              <block type="animblock">
                  <value name="delay">
                      <block type="math_number"></block>
                  </value>
              </block>
              <block type="prebuilt_anim_wave"></block>
              <block type="prebuilt_anim_block"></block>
              <block type="prebuilt_anim_attack"></block>
              <block type="prebuilt_anim_walk"></block>
          </category>
        </category> -->

       <category name="World">
          <block type="broadcast_message"></block>
          <block type="world" voxl></block>
          <block type="explosion"></block>
          <block type="firework"></block>
          <block type="get_meta"></block>
          <block type="set_meta"></block>
          <block type="spawn_entity" voxl></block>
          <block type="materialat" voxl></block>
          <block type="update_sign"></block>
          <block type="paste_schematic" boxl></block>
        </category>
        <category name="Recipes">
          <block type="new_recipe" voxl></block>
          <block type="recipe_row" voxl></block>
        </category>
        <category name="Events">
          <block type="interval" voxl></block>
          <block type="timeout" voxl></block>
          <block type="event" voxl></block>
          <block type="new_event" voxl></block>
        </category>
        
        <category name="Materials [A - C]">
          <block type="block_type_ACTIVATOR_RAIL"></block>
          <block type="block_type_AIR" voxl></block>
          <block type="block_type_ANVIL"></block>
          <block type="block_type_APPLE"></block>
          <block type="block_type_ARROW"></block>
          <block type="block_type_BAKED_POTATO"></block>
          <block type="block_type_BEACON"></block>
          <block type="block_type_BED"></block>
          <block type="block_type_BED_BLOCK"></block>
          <block type="block_type_BEDROCK" voxl></block>
          <block type="block_type_BIRCH_WOOD_STAIRS"></block>
          <block type="block_type_BLAZE_POWDER"></block>
          <block type="block_type_BLAZE_ROD"></block>
          <block type="block_type_BOAT"></block>
          <block type="block_type_BONE"></block>
          <block type="block_type_BOOK"></block>
          <block type="block_type_BOOK_AND_QUILL"></block>
          <block type="block_type_BOOKSHELF" voxl></block>
          <block type="block_type_BOW"></block>
          <block type="block_type_BOWL"></block>
          <block type="block_type_BREAD"></block>
          <block type="block_type_BREWING_STAND"></block>
          <block type="block_type_BREWING_STAND_ITEM"></block>
          <block type="block_type_BRICK" voxl></block>
          <block type="block_type_BRICK_STAIRS"></block>
          <block type="block_type_BROWN_MUSHROOM"></block>
          <block type="block_type_BUCKET"></block>
          <block type="block_type_BURNING_FURNACE"></block>
          <block type="block_type_CACTUS" voxl></block>
          <block type="block_type_CAKE"></block>
          <block type="block_type_CAKE_BLOCK" voxl></block>
          <block type="block_type_CARPET"></block>
          <block type="block_type_CARROT_ITEM"></block>
          <block type="block_type_CARROT_STICK"></block>
          <block type="block_type_CAULDRON"></block>
          <block type="block_type_CAULDRON_ITEM"></block>
          <block type="block_type_CHAINMAIL_BOOTS"></block>
          <block type="block_type_CHAINMAIL_CHESTPLATE"></block>
          <block type="block_type_CHAINMAIL_HELMET"></block>
          <block type="block_type_CHAINMAIL_LEGGINGS"></block>
          <block type="block_type_CHEST"></block>
          <block type="block_type_CLAY" voxl></block>
          <block type="block_type_CLAY_BALL"></block>
          <block type="block_type_CLAY_BRICK"></block>
          <block type="block_type_COAL"></block>
          <block type="block_type_COAL_BLOCK"></block>
          <block type="block_type_COAL_ORE"></block>
          <block type="block_type_COBBLE_WALL"></block>
          <block type="block_type_COBBLESTONE" voxl></block>
          <block type="block_type_COBBLESTONE_STAIRS"></block>
          <block type="block_type_COCOA"></block>
          <block type="block_type_COMMAND"></block>
          <block type="block_type_COMPASS"></block>
          <block type="block_type_COOKED_BEEF"></block>
          <block type="block_type_COOKED_CHICKEN"></block>
          <block type="block_type_COOKED_FISH"></block>
          <block type="block_type_COOKIE"></block>
          <block type="block_type_CRAFTING_TABLE"></block>
          <block type="block_type_CROPS"></block>
        </category>
        <category name="Materials [D - G]">
          <block type="block_type_DAYLIGHT_DETECTOR"></block>
          <block type="block_type_DEAD_BUSH"></block>
          <block type="block_type_DETECTOR_RAIL"></block>
          <block type="block_type_DIAMOND" voxl></block>
          <block type="block_type_DIAMOND_AXE"></block>
          <block type="block_type_DIAMOND_BARDING"></block>
          <block type="block_type_DIAMOND_BLOCK" voxl></block>
          <block type="block_type_DIAMOND_BOOTS"></block>
          <block type="block_type_DIAMOND_CHESTPLATE"></block>
          <block type="block_type_DIAMOND_HELMET"></block>
          <block type="block_type_DIAMOND_HOE"></block>
          <block type="block_type_DIAMOND_LEGGINGS"></block>
          <block type="block_type_DIAMOND_ORE"></block>
          <block type="block_type_DIAMOND_PICKAXE" voxl></block>
          <block type="block_type_DIAMOND_SPADE"></block>
          <block type="block_type_DIAMOND_SWORD" voxl></block>
          <block type="block_type_DIODE"></block>
          <block type="block_type_DIODE_BLOCK_OFF"></block>
          <block type="block_type_DIODE_BLOCK_ON"></block>
          <block type="block_type_DIRT" voxl></block>
          <block type="block_type_DISPENSER"></block>
          <block type="block_type_DOUBLE_STEP"></block>
          <block type="block_type_DRAGON_EGG"></block>
          <block type="block_type_DROPPER"></block>
          <block type="block_type_EGG"></block>
          <block type="block_type_EMERALD"></block>
          <block type="block_type_EMERALD_BLOCK" voxl></block>
          <block type="block_type_EMERALD_ORE" voxl></block>
          <block type="block_type_EMPTY_MAP"></block>
          <block type="block_type_ENCHANTED_BOOK"></block>
          <block type="block_type_ENCHANTMENT_TABLE"></block>
          <block type="block_type_ENDER_CHEST"></block>
          <block type="block_type_ENDER_PEARL"></block>
          <block type="block_type_ENDER_PORTAL"></block>
          <block type="block_type_ENDER_PORTAL_FRAME"></block>
          <block type="block_type_ENDER_STONE"></block>
          <block type="block_type_EXP_BOTTLE"></block>
          <block type="block_type_EXPLOSIVE_MINECART"></block>
          <block type="block_type_EYE_OF_ENDER"></block>
          <block type="block_type_FEATHER"></block>
          <block type="block_type_FENCE"></block>
          <block type="block_type_FENCE_GATE"></block>
          <block type="block_type_FERMENTED_SPIDER_EYE"></block>
          <block type="block_type_FIRE"></block>
          <block type="block_type_FIREBALL"></block>
          <block type="block_type_FIREWORK"></block>
          <block type="block_type_FIREWORK_CHARGE"></block>
          <block type="block_type_FISHING_ROD"></block>
          <block type="block_type_FLINT"></block>
          <block type="block_type_FLINT_AND_STEEL"></block>
          <block type="block_type_FLOWER_POT"></block>
          <block type="block_type_FLOWER_POT_ITEM"></block>
          <block type="block_type_FURNACE"></block>
          <block type="block_type_GHAST_TEAR"></block>
          <block type="block_type_GLASS" voxl></block>
          <block type="block_type_GLASS_BOTTLE"></block>
          <block type="block_type_GLOWING_REDSTONE_ORE"></block>
          <block type="block_type_GLOWSTONE" voxl></block>
          <block type="block_type_GLOWSTONE_DUST"></block>
          <block type="block_type_GOLD_AXE"></block>
          <block type="block_type_GOLD_BARDING"></block>
          <block type="block_type_GOLD_BLOCK" voxl></block>
          <block type="block_type_GOLD_BOOTS"></block>
          <block type="block_type_GOLD_CHESTPLATE"></block>
          <block type="block_type_GOLD_HELMET"></block>
          <block type="block_type_GOLD_HOE"></block>
          <block type="block_type_GOLD_INGOT"></block>
          <block type="block_type_GOLD_LEGGINGS"></block>
          <block type="block_type_GOLD_NUGGET"></block>
          <block type="block_type_GOLD_ORE" voxl></block>
          <block type="block_type_GOLD_PICKAXE" voxl></block>
          <block type="block_type_GOLD_PLATE"></block>
          <block type="block_type_GOLD_RECORD"></block>
          <block type="block_type_GOLD_SPADE"></block>
          <block type="block_type_GOLD_SWORD" voxl></block>
          <block type="block_type_GOLDEN_APPLE"></block>
          <block type="block_type_GOLDEN_CARROT"></block>
          <block type="block_type_GRASS" voxl></block>
          <block type="block_type_GRAVEL"></block>
          <block type="block_type_GREEN_RECORD"></block>
          <block type="block_type_GRILLED_PORK"></block>
        </category>
        <category name="Materials [H - M]">
          <block type="block_type_HARD_CLAY"></block>
          <block type="block_type_HAY_BLOCK"></block>
          <block type="block_type_HOPPER"></block>
          <block type="block_type_HOPPER_MINECART"></block>
          <block type="block_type_HUGE_MUSHROOM_1"></block>
          <block type="block_type_HUGE_MUSHROOM_2"></block>
          <block type="block_type_ICE"></block>
          <block type="block_type_INK_SACK"></block>
          <block type="block_type_IRON_AXE"></block>
          <block type="block_type_IRON_BARDING"></block>
          <block type="block_type_IRON_BLOCK"></block>
          <block type="block_type_IRON_BOOTS"></block>
          <block type="block_type_IRON_CHESTPLATE"></block>
          <block type="block_type_IRON_DOOR"></block>
          <block type="block_type_IRON_DOOR_BLOCK"></block>
          <block type="block_type_IRON_FENCE"></block>
          <block type="block_type_IRON_HELMET"></block>
          <block type="block_type_IRON_HOE"></block>
          <block type="block_type_IRON_INGOT"></block>
          <block type="block_type_IRON_LEGGINGS"></block>
          <block type="block_type_IRON_ORE"></block>
          <block type="block_type_IRON_PICKAXE" voxl></block>
          <block type="block_type_IRON_PLATE"></block>
          <block type="block_type_IRON_SPADE"></block>
          <block type="block_type_IRON_SWORD" voxl></block>
          <block type="block_type_ITEM_FRAME"></block>
          <block type="block_type_JACK_O_LANTERN" voxl></block>
          <block type="block_type_JUKEBOX"></block>
          <block type="block_type_JUNGLE_WOOD_STAIRS"></block>
          <block type="block_type_LADDER"></block>
          <block type="block_type_LAPIS_BLOCK"></block>
          <block type="block_type_LAPIS_ORE"></block>
          <block type="block_type_LAVA" ></block>
          <block type="block_type_LAVA_BUCKET"></block>
          <block type="block_type_LEASH"></block>
          <block type="block_type_LEATHER"></block>
          <block type="block_type_LEATHER_BOOTS"></block>
          <block type="block_type_LEATHER_CHESTPLATE"></block>
          <block type="block_type_LEATHER_HELMET"></block>
          <block type="block_type_LEATHER_LEGGINGS"></block>
          <block type="block_type_LEAVES"></block>
          <block type="block_type_LEVER"></block>
          <block type="block_type_LOCKED_CHEST"></block>
          <block type="block_type_LOG"></block>
          <block type="block_type_LONG_GRASS"></block>
          <block type="block_type_MAGMA_CREAM"></block>
          <block type="block_type_MAP"></block>
          <block type="block_type_MELON"></block>
          <block type="block_type_MELON_BLOCK" voxl></block>
          <block type="block_type_MELON_SEEDS"></block>
          <block type="block_type_MELON_STEM"></block>
          <block type="block_type_MILK_BUCKET"></block>
          <block type="block_type_MINECART"></block>
          <block type="block_type_MOB_SPAWNER"></block>
          <block type="block_type_MONSTER_EGG"></block>
          <block type="block_type_MONSTER_EGGS"></block>
          <block type="block_type_MOSSY_COBBLESTONE" voxl></block>
          <block type="block_type_MUSHROOM_SOUP"></block>
          <block type="block_type_MYCEL"></block>
        </category>
        <category name="Materials [N - R]">
          <block type="block_type_NAME_TAG"></block>
          <block type="block_type_NETHER_BRICK"></block>
          <block type="block_type_NETHER_BRICK_ITEM"></block>
          <block type="block_type_NETHER_BRICK_STAIRS"></block>
          <block type="block_type_NETHER_FENCE"></block>
          <block type="block_type_NETHER_STALK"></block>
          <block type="block_type_NETHER_STAR"></block>
          <block type="block_type_NETHER_WARTS"></block>
          <block type="block_type_NETHERRACK"></block>
          <block type="block_type_NOTE_BLOCK"></block>
          <block type="block_type_OBSIDIAN" voxl></block>
          <block type="block_type_PAINTING"></block>
          <block type="block_type_PAPER"></block>
          <block type="block_type_PISTON_BASE"></block>
          <block type="block_type_PISTON_EXTENSION"></block>
          <block type="block_type_PISTON_MOVING_PIECE"></block>
          <block type="block_type_PISTON_STICKY_BASE"></block>
          <block type="block_type_POISONOUS_POTATO"></block>
          <block type="block_type_PORK"></block>
          <block type="block_type_PORTAL"></block>
          <block type="block_type_POTATO"></block>
          <block type="block_type_POTATO_ITEM"></block>
          <block type="block_type_POTION"></block>
          <block type="block_type_POWERED_MINECART"></block>
          <block type="block_type_POWERED_RAIL"></block>
          <block type="block_type_PUMPKIN" voxl></block>
          <block type="block_type_PUMPKIN_PIE"></block>
          <block type="block_type_PUMPKIN_SEEDS"></block>
          <block type="block_type_PUMPKIN_STEM"></block>
          <block type="block_type_QUARTZ"></block>
          <block type="block_type_QUARTZ_BLOCK" voxl></block>
          <block type="block_type_QUARTZ_ORE"></block>
          <block type="block_type_QUARTZ_STAIRS"></block>
          <block type="block_type_RAILS"></block>
          <block type="block_type_RAW_BEEF"></block>
          <block type="block_type_RAW_CHICKEN"></block>
          <block type="block_type_RAW_FISH"></block>
          <block type="block_type_RECORD_10"></block>
          <block type="block_type_RECORD_11"></block>
          <block type="block_type_RECORD_12"></block>
          <block type="block_type_RECORD_3"></block>
          <block type="block_type_RECORD_4"></block>
          <block type="block_type_RECORD_5"></block>
          <block type="block_type_RECORD_6"></block>
          <block type="block_type_RECORD_7"></block>
          <block type="block_type_RECORD_8"></block>
          <block type="block_type_RECORD_9"></block>
          <block type="block_type_RED_MUSHROOM"></block>
          <block type="block_type_RED_ROSE"></block>
          <block type="block_type_REDSTONE"></block>
          <block type="block_type_REDSTONE_BLOCK"></block>
          <block type="block_type_REDSTONE_COMPARATOR"></block>
          <block type="block_type_REDSTONE_COMPARATOR_OFF"></block>
          <block type="block_type_REDSTONE_COMPARATOR_ON"></block>
          <block type="block_type_REDSTONE_LAMP_OFF"></block>
          <block type="block_type_REDSTONE_LAMP_ON"></block>
          <block type="block_type_REDSTONE_ORE"></block>
          <block type="block_type_REDSTONE_TORCH_OFF"></block>
          <block type="block_type_REDSTONE_TORCH_ON"></block>
          <block type="block_type_REDSTONE_WIRE"></block>
          <block type="block_type_ROTTEN_FLESH"></block>
        </category>
        <category name="Materials [S - Z]">
          <block type="block_type_SADDLE"></block>
          <block type="block_type_SAND" voxl></block>
          <block type="block_type_SANDSTONE"></block>
          <block type="block_type_SANDSTONE_STAIRS"></block>
          <block type="block_type_SAPLING"></block>
          <block type="block_type_SEEDS"></block>
          <block type="block_type_SHEARS"></block>
          <block type="block_type_SIGN"></block>
          <block type="block_type_SIGN_POST"></block>
          <block type="block_type_SKULL"></block>
          <block type="block_type_SKULL_ITEM"></block>
          <block type="block_type_SLIME_BALL"></block>
          <block type="block_type_SMOOTH_BRICK"></block>
          <block type="block_type_SMOOTH_STAIRS"></block>
          <block type="block_type_SNOW"></block>
          <block type="block_type_SNOW_BALL"></block>
          <block type="block_type_SNOW_BLOCK"></block>
          <block type="block_type_SOIL"></block>
          <block type="block_type_SOUL_SAND"></block>
          <block type="block_type_SPECKLED_MELON"></block>
          <block type="block_type_SPIDER_EYE"></block>
          <block type="block_type_SPONGE"></block>
          <block type="block_type_SPRUCE_WOOD_STAIRS"></block>
          <block type="block_type_STAINED_CLAY"></block>
          <block type="block_type_STATIONARY_LAVA"></block>
          <block type="block_type_STATIONARY_WATER"></block>
          <block type="block_type_STEP"></block>
          <block type="block_type_STICK"></block>
          <block type="block_type_STONE" voxl></block>
          <block type="block_type_STONE_AXE"></block>
          <block type="block_type_STONE_BUTTON"></block>
          <block type="block_type_STONE_HOE"></block>
          <block type="block_type_STONE_PICKAXE"></block>
          <block type="block_type_STONE_PLATE"></block>
          <block type="block_type_STONE_SPADE"></block>
          <block type="block_type_STONE_SWORD"></block>
          <block type="block_type_STORAGE_MINECART"></block>
          <block type="block_type_STRING"></block>
          <block type="block_type_SUGAR"></block>
          <block type="block_type_SUGAR_CANE"></block>
          <block type="block_type_SUGAR_CANE_BLOCK"></block>
          <block type="block_type_SULPHUR"></block>
          <block type="block_type_THIN_GLASS"></block>
          <block type="block_type_TNT" voxl></block>
          <block type="block_type_TORCH"></block>
          <block type="block_type_TRAP_DOOR"></block>
          <block type="block_type_TRAPPED_CHEST"></block>
          <block type="block_type_TRIPWIRE"></block>
          <block type="block_type_TRIPWIRE_HOOK"></block>
          <block type="block_type_VINE"></block>
          <block type="block_type_WALL_SIGN"></block>
          <block type="block_type_WATCH"></block>
          <block type="block_type_WATER"></block>
          <block type="block_type_WATER_BUCKET"></block>
          <block type="block_type_WATER_LILY"></block>
          <block type="block_type_WEB"></block>
          <block type="block_type_WHEAT"></block>
          <block type="block_type_WOOD" voxl></block>
          <block type="block_type_WOOD_AXE"></block>
          <block type="block_type_WOOD_BUTTON"></block>
          <block type="block_type_WOOD_DOOR"></block>
          <block type="block_type_WOOD_DOUBLE_STEP"></block>
          <block type="block_type_WOOD_HOE"></block>
          <block type="block_type_WOOD_PICKAXE" voxl></block>
          <block type="block_type_WOOD_PLATE"></block>
          <block type="block_type_WOOD_SPADE"></block>
          <block type="block_type_WOOD_STAIRS"></block>
          <block type="block_type_WOOD_STEP"></block>
          <block type="block_type_WOOD_SWORD" voxl></block>
          <block type="block_type_WOODEN_DOOR" ></block>
          <block type="block_type_WOOL"></block>
          <block type="block_type_WORKBENCH"></block>
          <block type="block_type_WRITTEN_BOOK"></block>
          <block type="block_type_YELLOW_FLOWER"></block>
        </category>
    </category>
    <category name="Misc">
        <block type="eval" voxl></block>
        <block type="dot" voxl></block>
        <block type="generalsetter" voxl></block>
        <block type="functionblock" voxl></block>
        <block type="functionblock_dropdown" voxl></block>
        <block type="js" voxl></block>
        <block type="js_noret" voxl></block>
        <block type="anon_func" voxl></block>
	<block type="anon_func_with_return" voxl></block>
        <block type="local_var" voxl></block>
        <block type="import" voxl></block>
        <block type="export" voxl></block>
        <block type="new_object" voxl></block>
        <block type="call" voxl></block>
        <block type="callret" voxl></block>
        <block type="get_object" voxl></block>
        <block type="put_object" voxl></block>
        <block type="accessjso" voxl></block>
        <block type="setjso" voxl></block>
        <block type="keyinjso" voxl></block>
    </category>
    <category name="Logic">
      <block type="controls_if" voxl></block>
      <block type="logic_compare" voxl></block>
      <block type="logic_operation" voxl></block>
      <block type="logic_negate" voxl></block>
      <block type="logic_boolean" voxl></block>
      <block type="logic_null" voxl></block>
      <block type="logic_ternary" voxl></block>
    </category>
    <category name="Loops">
      <block type="controls_repeat_ext" voxl>
        <value name="TIMES">
          <block type="math_number" voxl>
            <field name="NUM">10</field>
          </block>
        </value>
      </block>
      <block type="controls_whileUntil" voxl></block>
      <block type="controls_for" voxl>
        <value name="FROM">
          <block type="math_number" voxl>
            <field name="NUM">1</field>
          </block>
        </value>
        <value name="TO">
          <block type="math_number" voxl>
            <field name="NUM">10</field>
          </block>
        </value>
        <value name="BY">
          <block type="math_number" voxl>
            <field name="NUM">1</field>
          </block>
        </value>
      </block>
      <block type="controls_forEach" voxl></block>
      <block type="controls_flow_statements" voxl></block>
    </category>
    <category name="Math">
      <block type="math_number" voxl></block>
      <block type="math_arithmetic" voxl></block>
      <block type="math_single" voxl></block>
      <block type="math_trig" voxl></block>
      <block type="math_constant" voxl></block>
      <block type="math_number_property" voxl></block>
      <block type="math_change" voxl>
        <value name="DELTA">
          <block type="math_number" voxl>
            <field name="NUM">1</field>
          </block>
        </value>
      </block>
      <block type="math_round" voxl></block>
      <block type="math_on_list" voxl></block>
      <block type="math_modulo" voxl></block>
      <block type="math_constrain" voxl>
        <value name="LOW">
          <block type="math_number" voxl>
            <field name="NUM">1</field>
          </block>
        </value>
        <value name="HIGH">
          <block type="math_number" voxl>
            <field name="NUM">100</field>
          </block>
        </value>
      </block>
      <block type="math_random_int" voxl>
        <value name="FROM">
          <block type="math_number" voxl>
            <field name="NUM">1</field>
          </block>
        </value>
        <value name="TO">
          <block type="math_number" voxl>
            <field name="NUM">100</field>
          </block>
        </value>
      </block>
      <block type="math_random_float" voxl></block>
    </category>
    <category name="Text">
      <block type="text" voxl></block>
      <block type="text_join" voxl></block>
      <block type="text_append" voxl>
        <value name="TEXT">
          <block type="text" voxl></block>
        </value>
      </block>
      <block type="text_length" voxl></block>
      <block type="text_isEmpty" voxl></block>
      <block type="text_indexOf" voxl>
        <value name="VALUE">
          <block type="variables_get" voxl>
            <field name="VAR">text</field>
          </block>
        </value>
      </block>
      <block type="text_charAt" voxl>
        <value name="VALUE">
          <block type="variables_get" voxl>
            <field name="VAR">text</field>
          </block>
        </value>
      </block>
      <block type="text_getSubstring" voxl>
        <value name="STRING">
          <block type="variables_get">
            <field name="VAR">text</field>
          </block>
        </value>
      </block>
      <block type="text_changeCase" voxl></block>
      <block type="text_trim" voxl></block>
      /*<block type="text_print"></block>*/
      /*<block type="text_prompt"></block>*/
    </category>
    <category name="Lists">
      <block type="lists_create_empty" voxl></block>
      <block type="lists_create_with" voxl></block>
      <block type="lists_repeat" voxl>
        <value name="NUM">
          <block type="math_number" voxl>
            <field name="NUM">5</field>
          </block>
        </value>
      </block>
      <block type="lists_length" voxl></block>
      <block type="lists_isEmpty" voxl></block>
      <block type="lists_indexOf" voxl>
        <value name="VALUE">
          <block type="variables_get" voxl>
            <field name="VAR">list</field>
          </block>
        </value>
      </block>
      <block type="lists_getIndex" voxl>
        <value name="VALUE">
          <block type="variables_get" voxl>
            <field name="VAR">list</field>
          </block>
        </value>
      </block>
      <block type="lists_setIndex" voxl>
        <value name="LIST">
          <block type="variables_get" voxl>
            <field name="VAR">list</field>
          </block>
        </value>
      </block>
      <block type="lists_getSublist" voxl>
        <value name="LIST">
          <block type="variables_get" voxl>
            <field name="VAR">list</field>
          </block>
        </value>
      </block>
    </category>
    <!-- /**<category name="Colour">
      <block type="colour_picker"></block>
      <block type="colour_random"></block>
      <block type="colour_rgb"></block>
      <block type="colour_blend"></block>
    </category>**/ -->
    <category name="Variables" custom="VARIABLE">

    </category>
    <category name="Functions" custom="PROCEDURE"></category>
  </xml>
  <script type="text/javascript">
    window.editor = ace.edit("editor");
    editor.setTheme("ace/theme/monokai");
    editor.getSession().setMode("ace/mode/javascript");
    editor.setReadOnly(true)


    $(document).ready(function(){
        $("xml").find('block:not([voxl])').remove()

        window.mainBlockly = Blockly.inject(document.getElementById("blockly_target"), {toolbox: document.getElementById('toolbox'), path: "/", trashcan: false});


    })


    function showJs(){
      $(".blocklyToolboxDiv").toggle()
      $("#editor").toggle()
      $("#js_warning").toggle()
      var js = Blockly.JavaScript.workspaceToCodeAlpha(mainBlockly)
      editor.setValue(js + "\n\n\n\n\n\n\n\n\n\n ") //Extra padding at the bottom so that the warning doesn't cover up any of the editor text.  Kind of ghetto but the editor doesn't seem to like being resized.
    }


    $(document).ready(function(){
      $("#editor_tools").appendTo("body");

      $(".blocklyScrollbarBackground").remove()
      $(".blocklyScrollbarKnob").remove()

      //Getting rid of that stupid square in the bottom right.
      $("rect[height=15][width=15][style='fill: #fff']").remove()
    })


  function getNonFunctions(blockly){
    var blocks = blockly.getTopBlocks()
    
    var ret = [];
    
    for(var i=0;i <blocks.length;i++)
    {
      var block = blocks[i]
      if(block.type != "procedures_defreturn" && 
         block.type != "procedures_defnoreturn" && 
         block.type != "import" && 
         block.type != "export" && 
         block.type != "js_noret" &&
         block.type != "js")
        { 
          ret.push(block);
        }
      }
    
      return ret
  }
    
  function checkForStrayBlocks() {
      var blocks = getNonFunctions(Blockly.mainWorkspace)
      //fade away existing problem markers
      //console.log("check if need problem markers: ", blocks)
      clearBlockMarkers()
      appendBlockMarkers(blocks)
      //make problem markers
    }
    
    function appendBlockMarkers(blocks) {
      // console.log("appending problem markers: ", blocks)
      // debugVar = blocks
      var strayCount = 0
      blocks.forEach(function(block){
        if(!block.disabled) {
          strayCount++
          appendBlockMarker(block)
        }
      })
      
    }
    
    function clearBlockMarkers() {
      $(".problem-marker").fadeOut(200, this.remove)
    }
    
    function appendBlockMarker(block) {
        if(!block.getParent()) {
          var $marker = $("<div hidden></div>")
                          .addClass('problem-marker')
                          .addClass('arrow-right')
                          .css('left', (block.getRelativeToSurfaceXY().x + block.workspace.scrollX) + 80)
                          .css('top',  (block.getRelativeToSurfaceXY().y + block.workspace.scrollY))
                          .fadeIn(250).fadeOut(250).fadeIn(250)
          $("body").append($marker)
        }
    }
    
    $(document).ready(function(){
      $("body").bind("mouseup", function(){setTimeout(function(){checkForStrayBlocks()}, 0)});
      $("g").mousedown(clearBlockMarkers);
    })
   
  </script>
  <style>
    html {
      overflow: hidden;
    }
    .problem-marker {
      font-size: 16px;
      color: white;
      position: fixed;
    }
    .arrow-down {
      width: 0; 
      height: 0; 
      border-left: 20px solid transparent;
      border-right: 20px solid transparent;
      
      border-top: 20px solid #f00;
    }
    .arrow-right {
      width: 0; 
      height: 0; 
      border-top: 20px solid transparent;
      border-bottom: 20px solid transparent;
      
      border-left: 20px solid #f00;
    }
  </style>
  <button id='copy_code' onclick='codeToClipboard()' style='position:absolute; bottom:20px; left: 40%; background-color:rgba(200,200,200,0.5); display:none' hidden>Code to Clipboard</button>




<div data-toggle="tooltip" title="Play"  id="done_editing" onclick="startEvaluation();focusGame();">
  <div class="editor_tool_icon" style="background-color: purple;"><svg class="svg_icon"><polygon points="3,0 12,7 3,15" style="fill:white;stroke-width:1" /></svg></div>
</div>

<div hidden data-toggle="tooltip" title="Stop"  id="stop"  onclick="stopProgram(); ">
  <div class="editor_tool_icon" style="background-color: purple;"><svg class="svg_icon"><rect fill="white" width="15" height="15"></rect></svg></div>
</div>

<div data-toggle="tooltip" title="Debug"  id="debug" onclick="startDebugging(); ">
  <div class="editor_tool_icon" style="background-color: green;"><svg><g transform="scale(0.3)"><g><path fill="white" d="M17.6,6.6C16,7.8,15,9.4,15,11.2c0,3.6,4,6.5,9,6.5c5,0,9-2.9,9-6.5c0-1.8-1-3.4-2.6-4.6l3-4.3c0.4-0.6,0.3-1.3-0.3-1.7    c-0.6-0.4-1.3-0.3-1.7,0.3l-3.1,4.5C27,4.9,25.5,4.6,24,4.6c-1.5,0-3,0.3-4.2,0.8l-3.1-4.5c-0.4-0.6-1.2-0.7-1.7-0.3    c-0.6,0.4-0.7,1.2-0.3,1.7L17.6,6.6z"></path></g><g><path fill="white" d="M34.7,13.1c-1.1,3.8-5.4,6.6-10.7,6.6c-5.3,0-9.6-2.8-10.7-6.6c-3.9,3.6-6.4,9-6.4,15.1c0,10.7,7.7,19.4,17.1,19.4    c9.5,0,17.1-8.7,17.1-19.4C41.1,22.1,38.6,16.7,34.7,13.1z M16,29.6c-1.6,0-2.9-1.3-2.9-2.9s1.3-2.9,2.9-2.9    c1.6,0,2.9,1.3,2.9,2.9S17.6,29.6,16,29.6z M22.5,39.6c-1.4,0-2.6-1.2-2.6-2.6s1.2-2.6,2.6-2.6s2.6,1.2,2.6,2.6    S23.9,39.6,22.5,39.6z M32.5,30.7c-1.5,0-2.8-1.2-2.8-2.8s1.2-2.8,2.8-2.8s2.8,1.2,2.8,2.8S34,30.7,32.5,30.7z"></path></g></g></svg</div>
</div>

<div data-toggle="tooltip" title="Step"  id="step_debugger" style="display:none" onclick="mainInterpreter.stepCode(); ">
  <div class="editor_tool_icon" style="background-color: green;"><i class="icon-arrow-right-3"></i></div>
</div>

<div hidden data-toggle="tooltip" title="Variables"  id="show_vars"  onclick="showVars(); ">
  <div class="editor_tool_icon" style="background-color: red;">x=</div>
</div>

<script>
  var script

  var mainInterpreter

  function newMainInterpreter(blockly){
      if(!blockly)
        blockly = mainBlockly

      if(mainInterpreter){
        mainInterpreter.haltScript()
      }

      mainInterpreter = new BlocklyInterpreter(blockly)
      mainInterpreter.scriptPreprocess = function(text){
        text = text.replace(/setTimeout/g,"_setTimeout")
        text = text.replace(/setInterval/g,"_setInterval")
        text = text.replace(/org.bukkit.event.player./g,"")
        text = text+"; main();"

        return text
      }

      mainInterpreter.onDebugSuspend = function(){
        $("#step_debugger").show()
      }

      mainInterpreter.onDebugUnsuspend = function(){
        $("#step_debugger").hide()
      }

      mainInterpreter.onDebugStep = function(){
        regenerateTable()
      }

      mainInterpreter.onHighlightBlock = function(){
        unfocusGame();
      }

      mainInterpreter.ajaxLoadLibrary = "assets/voxel_library.js"
   }

  function stopProgram(){
    mainInterpreter.halted = true
    $("#stop").fadeOut()
  }

  function startEvaluation(){
    newMainInterpreter()

      try{
        SendMessage("Browser", "ScriptEvaluated", "");
      }catch(e){

      }

    $("#stop").show()
  }

  function runScript(){
    mainInterpreter.runScript(function(){
      if(mainInterpreter.parseError){
        unfocusGame();
        var err = "Your script had errors and couldn't be run.  Check for missing and stray blocks in your code.  And make sure your have a function called 'main'"

        $("#editor_tools").popover({
          popoverText: err,
          popoverTimeout: 1000000,
          popoverPosition: "right"
        })

        $("#editor_tools").popover("setText", err)
        $("#editor_tools").popover("show")
      }
    })
  }

  function startDebugging(){
    mainInterpreter.startDebugging()
    focusGame();
  }

  var showing_vars = false;
  var update_vars = undefined
  function showVars(){
    if(showing_vars){
      showing_vars = false;

      clearInterval(update_vars)

      $("#variable_table_container").hide()
      return;
    }

    showing_vars = true

    regenerateTable()
    $("#variable_table_container").show()

    update_vars = setInterval(regenerateTable, 500)
  }

  function regenerateTable(){
    var table = undefined
    if($("#variable_table_container").length == 0){
      table = $("<div id='variable_table_container' style='display:none'></div>")
      $("body").append(table) 
      table.html("<table id='variable_table' class='table striped'></table>")
    } else {
      table = $("#variable_table_container")
    }

    var header = "<thead><tr><th>Name</th><th>Value</th></tr></thead>"

    var body = "<tbody>"

    var vars = [];
     
    try{
      vars = mainInterpreter.getVariableValues()
    }catch(e){
      //Can fail if the interpreter hasn't been created, or there's no script loaded yet.  That's fine, we just display and empty table and wait...
    }

    for(var i in vars){
      body += "<tr>"
      body += "<td>"+i+"</td>"
      if(typeof(vars[i]) == "object"){
        body += "<td>"+subTable(vars[i])+"</td>"
      } else {
        body += "<td>"+(vars[i])+"</td>"
      }
      body += "</tr>"
    } 

    body += "</tbody>"

    $("#variable_table").html(header+body)
  }

  function subTable(obj){
    var table = "<div class='variable_table_container'>"
    table += "<table class='table'>"

    var header = "<thead><tr><th>Name</th><th>Value</th></tr></thead>"

    var body = "<tbody>"

    for(var i in obj){
      body += "<tr>"
      body += "<td>"+i+"</td>"
      if(typeof(obj[i]) == "object"){
        body += "<td>"+subTable(obj[i])+"</td>"
      } else {
        body += "<td>"+(obj[i])+"</td>"
      }
      body += "</tr>"
    } 

    body += "</tbody>"

    table += header+body

    table += "</table>"
    table += "</div>"

    return table
  }


  $(document).ready(function(){
    $("#mod").attr("onclick","")
    window.setTimeout(show_tools, 2000)
  })
  
  function show_tools(){
    $("#editor_tools").show()
    $("#editor_tool_icons").show()
    $("#mod").show()
    $("#done_editing").show()
    $("#debug").show()
    $("#show_vars").show()
   }
  
  var modding = false;


  var timeout = undefined;


  function switchProgram(new_nickname,new_name, xml){
    nickname = new_nickname
    name     = new_name
    
    if(mainBlockly)
      mainBlockly.clear()
  
    var dom = Blockly.Xml.textToDom(xml)

    Blockly.Xml.domToWorkspace(mainBlockly, dom)
  }

  function getXml(){
    var xml = Blockly.Xml.workspaceToDom(mainBlockly);
    var xml_text = Blockly.Xml.domToText(xml);
    return xml_text 
  } 

  $(document).ready(function(){
    $("#done_editing").css("position", "static")
    $("#done_editing").css("float", "left")
    $("#done_editing").appendTo("#editor_tools")

    $("#stop").css("position", "static")
    $("#stop").css("float", "left")
    $("#stop").appendTo("#editor_tools")
    $("#stop").hide()

    $("#debug").css("position", "static")
    $("#debug").css("float", "left")
    $("#debug").appendTo("#editor_tools")

    $("#step_debugger").css("position", "static")
    $("#step_debugger").css("float", "left")
    $("#step_debugger").appendTo("#editor_tools")

    $("#show_vars").css("position", "static")
    $("#show_vars").css("float", "left")
    $("#show_vars").appendTo("#editor_tools")
  })

</script>

<script>
function loadStarter(xml_text){

  var xml = Blockly.Xml.textToDom("<xml>"+xml_text+"</xml>")

  mainBlockly.clear()
  setTimeout(function(){
        Blockly.Xml.domToWorkspace(mainBlockly, xml)
  },500)

}
</script>


  </div>

  <script src="assets/unity_chat.js"></script>
  <script>

VoxelMessager.main.onVoxlLoad(function(){


  BlockTracker.main.addMultiSidedBlock({name: "Bedrock", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Bedrock.png"]})

  BlockTracker.main.addMultiSidedBlock({name: "Brick", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Brick.png"]})

  BlockTracker.main.addMultiSidedBlock({name: "Wood", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Wood.png"]})

  BlockTracker.main.addMultiSidedBlock({name: "Plank", 
    textures: [
      "https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Wood.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Wood.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Plank.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Plank.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Plank.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Plank.png"
    ]})

  BlockTracker.main.addMultiSidedBlock({name: "Grass", 
    textures: [
      "https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/GrassTop.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Dirt.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/GrassSide.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/GrassSide.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/GrassSide.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/GrassSide.png"
    ]})

  BlockTracker.main.addMultiSidedBlock({name: "Dirt", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Dirt.png"]})

  BlockTracker.main.addMultiSidedBlock({name: "JackOLantern", 
    textures: [
      "https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/PumpkinTop.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/PumpkinSide.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/PumpkinSide.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/PumpkinSide.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/JackOLantern.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/PumpkinSide.png"
    ]})

  BlockTracker.main.addMultiSidedBlock({name: "Cobblestone", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Cobblestone.png"]})

  BlockTracker.main.addMultiSidedBlock({name: "Mossy Cobblestone", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/MossyCobblestone.png"]})

  BlockTracker.main.addMultiSidedBlock({name: "Leaves", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Leaves.png"]})

  BlockTracker.main.addMultiSidedBlock({name: "Diamond", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Diamond.png"]})

  BlockTracker.main.addMultiSidedBlock({name: "Pumpkin", 
    textures: [
      "https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/PumpkinTop.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/PumpkinSide.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/PumpkinSide.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/PumpkinSide.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/PumpkinSide.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/PumpkinSide.png"
    ]})

  BlockTracker.main.addMultiSidedBlock({name: "Glass", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Glass.png"]})

  BlockTracker.main.addMultiSidedBlock({name: "Sand", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Sand.png"]})

  BlockTracker.main.addMultiSidedBlock({name: "Cake", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Cake.png"]})

  BlockTracker.main.addMultiSidedBlock({name: "DiamondOre", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/DiamondOre.png"]})
  BlockTracker.main.addMultiSidedBlock({name: "EmeraldOre", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/EmeraldOre.png"]})
  BlockTracker.main.addMultiSidedBlock({name: "GoldOre", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/GoldOre.png"]})


  BlockTracker.main.addMultiSidedBlock({name: "Bookshelf", 
    textures: [
      "https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Wood.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Wood.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Wood.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Wood.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Bookshelf.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Wood.png"
    ]})

  BlockTracker.main.addMultiSidedBlock({name: "TNT", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/TNT.png"]})

  BlockTracker.main.addMultiSidedBlock({name: "Clay", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Clay.png"]})

  BlockTracker.main.addMultiSidedBlock({name: "Glowstone", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Glowstone.png"]})

  BlockTracker.main.addMultiSidedBlock({name: "Gold", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Gold.png"]})
  BlockTracker.main.addMultiSidedBlock({name: "Emerald", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Emerald.png"]})
  BlockTracker.main.addMultiSidedBlock({name: "Obsidian", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Obsidian.png"]})
  BlockTracker.main.addMultiSidedBlock({name: "Quartz", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Quartz.png"]})
  BlockTracker.main.addMultiSidedBlock({name: "Sandstone", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Sandstone.png"]})
  BlockTracker.main.addMultiSidedBlock({name: "Stone", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Stone.png"]})

  BlockTracker.main.addMultiSidedBlock({name: "DoubleStoneSlab", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/DoubleStoneSlab.png"]})
  BlockTracker.main.addMultiSidedBlock({name: "StoneSlab", textures: ["https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/DoubleStoneSlab.png"]})

  BlockTracker.main.addMultiSidedBlock({name: "Cactus", 
    textures: [
      "https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/CactusTop.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/CactusSide.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/CactusSide.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/CactusSide.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/CactusSide.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/CactusSide.png"
    ]})

  BlockTracker.main.addMultiSidedBlock({name: "Melon", 
    textures: [
      "https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/MelonTop.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/MelonSide.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/MelonSide.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/MelonSide.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/MelonSide.png",
      "../s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/MelonSide.png"
    ]})


  BlockTracker.main.addSimpleItem({
    name: "Stick",
    asset_name: "wooden_sword",
    icon_url: "https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/Stick.png"
  })

  BlockTracker.main.addSimpleItem({
    name: "Diamond Sword",
    asset_name: "diamond_sword",
    icon_url: "https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/DiamondSword.png"
  })
  BlockTracker.main.addSimpleItem({
    name: "Gold Sword",
    asset_name: "gold_sword",
    icon_url: "https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/GoldSword.png"
  })
  BlockTracker.main.addSimpleItem({
    name: "Wood Sword",
    asset_name: "wooden_sword",
    icon_url: "https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/WoodSword.png"
  })
  BlockTracker.main.addSimpleItem({
    name: "Stone Sword",
    asset_name: "stone_sword",
    icon_url: "https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/StoneSword.png"
  })
  BlockTracker.main.addSimpleItem({
    name: "Iron Sword",
    asset_name: "iron_sword",
    icon_url: "https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/IronSword.png"
  })
  BlockTracker.main.addSimpleItem({
    name: "Diamond Axe",
    asset_name: "diamond_axe",
    icon_url: "https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/DiamondAxe.png"
  })
  BlockTracker.main.addSimpleItem({
    name: "Gold Axe",
    asset_name: "gold_axe",
    icon_url: "https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/GoldAxe.png"
  })
  BlockTracker.main.addSimpleItem({
    name: "Wood Axe",
    asset_name: "wooden_axe",
    icon_url: "https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/WoodAxe.png"
  })
  BlockTracker.main.addSimpleItem({
    name: "Stone Axe",
    asset_name: "stone_axe",
    icon_url: "https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/StoneAxe.png"
  })
  BlockTracker.main.addSimpleItem({
    name: "Iron Axe",
    asset_name: "iron_axe",
    icon_url: "https://s3-us-west-1.amazonaws.com/voxel-engine/DefaultTextures/IronAxe.png"
  })





  message_bus.sendToUnity(function(){},"{\"type\": \"define_mob\",\"data\": {\"name\": \"Pig\", \"asset\": \"cave_worm\", \"entity_id\": \"mob_synchronizer\"}}");
  message_bus.sendToUnity(function(){},"{\"type\": \"define_mob\",\"data\": {\"name\": \"Cow\", \"asset\": \"worm\", \"entity_id\": \"mob_synchronizer\"}}");
  message_bus.sendToUnity(function(){},"{\"type\": \"define_mob\",\"data\": {\"name\": \"Zombie\", \"asset\": \"wood_walker\", \"entity_id\": \"mob_synchronizer\"}}");
  message_bus.sendToUnity(function(){},"{\"type\": \"define_mob\",\"data\": {\"name\": \"Creeper\", \"asset\": \"plant_monster\", \"entity_id\": \"mob_synchronizer\"}}");
  message_bus.sendToUnity(function(){},"{\"type\": \"define_mob\",\"data\": {\"name\": \"Sheep\", \"asset\": \"otyugh\", \"entity_id\": \"mob_synchronizer\"}}");
  message_bus.sendToUnity(function(){},"{\"type\": \"define_mob\",\"data\": {\"name\": \"Enderman\", \"asset\": \"golem\", \"entity_id\": \"mob_synchronizer\"}}");

  message_bus.sendToUnity(function(){},"{\"type\": \"define_mob\",\"data\": {\"name\": \"lightning\", \"asset\": \"lightning_spark\", \"entity_id\": \"mob_synchronizer\"}}")
})
</script>


  <script>
    var storage = new StorageInterface("voxl")

    VoxelMessager.main.onVoxlLoad(function(){
      events.when("block.BlockPlaceEvent", function(e){
        saveBlockChange(e)
      })
      events.when("block.BlockBreakEvent", function(e){
        saveBlockChange(e)
      })

      var previous_code = storage.getObject("code_states")
      if(previous_code){
        mainBlockly.clear()
        var dom = Blockly.Xml.textToDom(previous_code[0]);
        Blockly.Xml.domToWorkspace(mainBlockly,dom);
      }



      Blockly.bindEvent_(document, 'mouseup', null, function(){
          saveBlocklyState()
      })
      Blockly.bindEvent_(document, 'keydown', null, function(){
          saveBlocklyState()
      })
    })

    function saveBlockChange(e){
      clearInterval(window.restore_interval)
      var changes = storage.getObject("block_changes")
      if(!changes){
        changes = []
      }

      changes.push(e)

      storage.setObject("block_changes", changes)
    }

    function saveBlocklyState(){
      console.log("SAVING STATE")
      var states = storage.getObject("code_states")
      if(!states){
        states = []
      }

      var xml = Blockly.Xml.workspaceToDom(mainBlockly);
      var xml_text = Blockly.Xml.domToText(xml);

      states = [xml_text] //Could push and implement undo later.

      storage.setObject("code_states", states)
    }


    function restoreBlocks(){
        var block_changes = storage.getObject("block_changes")
        if(block_changes){

          var blocks = block_changes.map(function(b){
            var loc = JSON.parse(b.location)
            return {
              name: b.material,
              x: loc[0],
              y: loc[1],
              z: loc[2]
            }
          })

          schematics.pasteRaw(blocks, new Voxels.Location(0,0,0))
        }
      }


  </script>

  </body>

<!-- Mirrored from localhost:3001/voxlgo by HTTrack Website Copier/3.x [XR&CO'2013], Fri, 06 May 2016 18:41:08 GMT -->
</html>
