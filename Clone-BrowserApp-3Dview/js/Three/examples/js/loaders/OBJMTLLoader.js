T.OBJMTLLoader=function(){};
T.OBJMTLLoader.prototype={constructor:T.OBJMTLLoader,load:function(k,n,p,z,w){var g=this;(new T.MTLLoader(k.substr(0,k.lastIndexOf("/")+1))).load(n,function(f){f.preload();var h=new T.XHRLoader(g.manager);h.setCrossOrigin(this.crossOrigin);h.load(k,function(c){c=g.parse(c);c.traverse(function(d){if(d instanceof T.Mesh&&d.material.name){var c=f.create(d.material.name);c&&(d.material=c)}});p(c)})})},parse:function(k,n){function p(a,B,b){return new T.V3(a,B,b)}function z(a,b){return new T.Vector2(a,
b)}function w(a,b,q,d){return new T.F3(a,b,q,d)}function g(a,b){0<l.length&&(e.vertices=l,e.mergeVertices(),e.computeCentroids(),e.computeFaceNormals(),e.computeBoundingSphere(),r.add(t),e=new T.Geometry,t=new T.Mesh(e,m));void 0!==a&&(t.name=a);void 0!==b&&(m=new T.MeshLambertMaterial,m.name=b,t.material=m)}function f(a,b,q,c){void 0===c?e.faces.push(w(parseInt(a)-(d+1),parseInt(b)-(d+1),parseInt(q)-(d+1))):e.faces.push(w(parseInt(a)-(d+1),parseInt(b)-(d+1),parseInt(q)-(d+1),[u[parseInt(c[0])-1].clone(),
u[parseInt(c[1])-1].clone(),u[parseInt(c[2])-1].clone()]))}function h(a,b,c){e.faceVertexUvs[0].push([v[parseInt(a)-1].clone(),v[parseInt(b)-1].clone(),v[parseInt(c)-1].clone()])}function c(a,b,c){void 0===a[3]?(f(a[0],a[1],a[2],c),void 0!==b&&0<b.length&&h(b[0],b[1],b[2])):(void 0!==c&&0<c.length?(f(a[0],a[1],a[3],[c[0],c[1],c[3]]),f(a[1],a[2],a[3],[c[1],c[2],c[3]])):(f(a[0],a[1],a[3]),f(a[1],a[2],a[3])),void 0!==b&&0<b.length&&(h(b[0],b[1],b[3]),h(b[1],b[2],b[3])))}for(var d=0,x=new T.Object3D,
r=x,e=new T.Geometry,m=new T.MeshLambertMaterial,t=new T.Mesh(e,m),l=[],u=[],v=[],C=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,D=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,E=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,F=/f( +\d+)( +\d+)( +\d+)( +\d+)?/,G=/f( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))?/,H=/f( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))?/,I=/f( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))?/,
A=k.split("\n"),y=0;y<A.length;y++){var b=A[y],b=b.trim(),a;0!==b.length&&"#"!==b.charAt(0)&&(null!==(a=C.exec(b))?l.push(p(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]))):null!==(a=D.exec(b))?u.push(p(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]))):null!==(a=E.exec(b))?v.push(z(parseFloat(a[1]),parseFloat(a[2]))):null!==(a=F.exec(b))?c([a[1],a[2],a[3],a[4]]):null!==(a=G.exec(b))?c([a[2],a[5],a[8],a[11]],[a[3],a[6],a[9],a[12]]):null!==(a=H.exec(b))?c([a[2],a[6],a[10],a[14]],[a[3],a[7],a[11],
a[15]],[a[4],a[8],a[12],a[16]]):null!==(a=I.exec(b))?c([a[2],a[5],a[8],a[11]],[],[a[3],a[6],a[9],a[12]]):/^o /.test(b)?(g(),d+=l.length,l=[],r=new T.Object3D,r.name=b.substring(2).trim(),x.add(r)):/^g /.test(b)?g(b.substring(2).trim(),void 0):/^usemtl /.test(b)?g(void 0,b.substring(7).trim()):/^mtllib /.test(b)?n&&(b=b.substring(7),b=b.trim(),n(b)):/^s /.test(b)||console.log("T.OBJMTLLoader: Unhandled line "+b))}g(void 0,void 0);return x}};T.EventDispatcher.prototype.apply(T.OBJMTLLoader.prototype);
