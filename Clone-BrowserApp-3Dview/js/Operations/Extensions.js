T.Line.prototype.raycast=function(){var u=new T.Matrix4,n=new T.Ray,p=new T.Sphere;return function(c,q){var k=c.linePrecision,k=k*k,d=this.geometry;null===d.boundingSphere&&d.computeBoundingSphere();p.copy(d.boundingSphere);p.applyMatrix4(this.matrixWorld);if(!1!==c.ray.isIntersectionSphere(p)){u.getInverse(this.matrixWorld);n.copy(c.ray).applyMatrix4(u);var g=new T.V3,l=new T.V3,m=new T.V3,e=new T.V3,r=this.type===T.LineStrip?1:2;if(d instanceof T.BufferGeometry){var a=d.index,f=d.attributes;if(null!==
a)for(var d=a.array,f=f.position.array,a=0,t=d.length-1;a<t;a+=r){var b=d[a+1];g.fromArray(f,3*d[a]);l.fromArray(f,3*b);b=n.distanceSqToSegment(g,l,e,m);if(!(b>k||(e.applyMatrix4(this.matrixWorld),b=c.ray.origin.distanceTo(e),b<c.near||b>c.far))){var h=m.clone().applyMatrix4(this.matrixWorld);q.push({distance:b,precision:h.distanceTo(e),point:h,index:a,face:null,faceIndex:null,object:this})}}else for(f=f.position.array,a=0,t=f.length/3-1;a<t;a+=r)g.fromArray(f,3*a),l.fromArray(f,3*a+3),b=n.distanceSqToSegment(g,
l,e,m),b>k||(e.applyMatrix4(this.matrixWorld),b=c.ray.origin.distanceTo(e),b<c.near||b>c.far||(h=m.clone().applyMatrix4(this.matrixWorld),q.push({distance:b,precision:h.distanceTo(e),point:h,index:a,face:null,faceIndex:null,object:this})))}else if(d instanceof T.Geometry)for(g=d.vertices,l=g.length,a=0;a<l-1;a+=r)b=n.distanceSqToSegment(g[a],g[a+1],e,m),b>k||(e.applyMatrix4(this.matrixWorld),b=c.ray.origin.distanceTo(e),b<c.near||b>c.far||(h=m.clone().applyMatrix4(this.matrixWorld),q.push({distance:b,
precision:h.distanceTo(e),point:h,index:a,face:null,faceIndex:null,object:this})))}}}();
