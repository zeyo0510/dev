function install_notice(){try{chrome.storage.local.get("install_time",function(a){void 0===a.install_time&&(a=(new Date).getTime(),chrome.storage.local.set({install_time:a}))})}catch(a){}}
function loadFiles(a,b){if(a&&a.items&&0<a.items.length){var c=b.contentWindow.editor;b.contentWindow.tipDialog.cancel();for(var d=0;d<a.items.length;d++)(function(a){chrome.fileSystem.getDisplayPath(a,function(b){a.file(function(a){c.loader.loadFile(a,b,function(){c.signals.unzoomCamera.dispatch()})})})})(a.items[d].entry)}}var mainAppWindow=null;
chrome.app.runtime.onLaunched.addListener(function(a){mainAppWindow?loadFiles(a,mainAppWindow):chrome.app.window.create("index.html",{id:"3DView",minWidth:740,minHeight:400,width:Math.min(1280,window.screen.width),height:Math.min(800,window.screen.height)},function(b){b&&b.contentWindow&&(b.onClosed.addListener(function(){mainAppWindow=null}),b.contentWindow.addEventListener("load",function(c){mainAppWindow=b;loadFiles(a,mainAppWindow)}))})});chrome.app.runtime.onRestarted.addListener(function(){});
chrome.runtime.onStartup.addListener(function(){});chrome.runtime.onInstalled.addListener(function(a){install_notice()});chrome.runtime.onSuspend.addListener(function(){});chrome.runtime.onSuspendCanceled.addListener(function(){});
