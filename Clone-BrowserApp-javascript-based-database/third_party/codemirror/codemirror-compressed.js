(function(l){if("object"==typeof exports&&"object"==typeof module)module.exports=l();else{if("function"==typeof define&&define.amd)return define([],l);this.CodeMirror=l()}})(function(){function l(a,b){if(!(this instanceof l))return new l(a,b);this.options=b=b?da(b):{};da(qf,b,!1);P(b);var c=b.value;"string"==typeof c&&(c=new V(c,b.mode,null,b.lineSeparator));this.doc=c;var d=new l.inputStyles[b.inputStyle](this),d=this.display=new ka(a,c,d);d.wrapper.CodeMirror=this;Tb(this);D(this);b.lineWrapping&&
(this.display.wrapper.className+=" CodeMirror-wrap");b.autofocus&&!lb&&d.input.focus();X(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new mb,keySeq:null,specialChars:null};var e=this;E&&11>J&&setTimeout(function(){e.display.input.reset(!0)},20);rf(this);Cd||(sf(),Cd=!0);Sa(this);this.curOp.forceUpdate=!0;Dd(this,c);b.autofocus&&!lb||e.hasFocus()?setTimeout(nb(Gc,this),20):
ob(this);for(var f in Ta)if(Ta.hasOwnProperty(f))Ta[f](this,b[f],Ed);Fd(this);b.finishInit&&b.finishInit(this);for(c=0;c<Hc.length;++c)Hc[c](this);Ua(this);N&&b.lineWrapping&&"optimizelegibility"==getComputedStyle(d.lineDiv).textRendering&&(d.lineDiv.style.textRendering="auto")}function ka(a,b,c){this.input=c;this.scrollbarFiller=t("div",null,"CodeMirror-scrollbar-filler");this.scrollbarFiller.setAttribute("cm-not-content","true");this.gutterFiller=t("div",null,"CodeMirror-gutter-filler");this.gutterFiller.setAttribute("cm-not-content",
"true");this.lineDiv=t("div",null,"CodeMirror-code");this.selectionDiv=t("div",null,null,"position: relative; z-index: 1");this.cursorDiv=t("div",null,"CodeMirror-cursors");this.measure=t("div",null,"CodeMirror-measure");this.lineMeasure=t("div",null,"CodeMirror-measure");this.lineSpace=t("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");this.mover=t("div",[t("div",[this.lineSpace],"CodeMirror-lines")],null,"position: relative");
this.sizer=t("div",[this.mover],"CodeMirror-sizer");this.sizerWidth=null;this.heightForcer=t("div",null,null,"position: absolute; height: "+Gd+"px; width: 1px;");this.gutters=t("div",null,"CodeMirror-gutters");this.lineGutter=null;this.scroller=t("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll");this.scroller.setAttribute("tabIndex","-1");this.wrapper=t("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror");E&&8>J&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=
0);N||Ea&&lb||(this.scroller.draggable=!0);a&&(a.appendChild?a.appendChild(this.wrapper):a(this.wrapper));this.reportedViewFrom=this.reportedViewTo=this.viewFrom=this.viewTo=b.first;this.view=[];this.externalMeasured=this.renderedView=null;this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0;this.updateLineNumbers=null;this.nativeBarWidth=this.barHeight=this.barWidth=0;this.scrollbarsClipped=!1;this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null;this.alignWidgets=!1;this.maxLine=this.cachedCharWidth=
this.cachedTextHeight=this.cachedPaddingH=null;this.maxLineLength=0;this.maxLineChanged=!1;this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null;this.shift=!1;this.activeTouch=this.selForContextMenu=null;c.init(this)}function G(a){a.doc.mode=l.getMode(a.options,a.doc.modeOption);L(a)}function L(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null)});a.doc.frontier=a.doc.first;pb(a,100);a.state.modeGen++;a.curOp&&W(a)}function u(a){var b=Fa(a.display),c=a.options.lineWrapping,
d=c&&Math.max(5,a.display.scroller.clientWidth/qb(a.display)-3);return function(e){if(Ga(a.doc,e))return 0;var f=0;if(e.widgets)for(var g=0;g<e.widgets.length;g++)e.widgets[g].height&&(f+=e.widgets[g].height);return c?f+(Math.ceil(e.text.length/d)||1)*b:f+b}}function F(a){var b=a.doc,c=u(a);b.iter(function(a){var b=c(a);b!=a.height&&la(a,b)})}function D(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");rb(a)}function ea(a){Tb(a);
W(a);setTimeout(function(){Ic(a)},20)}function Tb(a){var b=a.display.gutters,c=a.options.gutters;Ha(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(t("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none";sb(a)}function sb(a){a.display.sizer.style.marginLeft=a.display.gutters.offsetWidth+"px"}function Va(a){if(0==a.height)return 0;for(var b=a.text.length,c,d=a;c=Ia(d,!0);)c=c.find(0,
!0),d=c.from.line,b+=c.from.ch-c.to.ch;for(d=a;c=Ia(d,!1);)c=c.find(0,!0),b-=d.text.length-c.from.ch,d=c.to.line,b+=d.text.length-c.to.ch;return b}function Wa(a){var b=a.display;a=a.doc;b.maxLine=r(a,a.first);b.maxLineLength=Va(b.maxLine);b.maxLineChanged=!0;a.iter(function(a){var d=Va(a);d>b.maxLineLength&&(b.maxLineLength=d,b.maxLine=a)})}function P(a){var b=R(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):-1<b&&!a.lineNumbers&&(a.gutters=
a.gutters.slice(0),a.gutters.splice(b,1))}function ya(a){var b=a.display,c=b.gutters.offsetWidth,d=Math.round(a.doc.height+Jc(a.display));return{clientHeight:b.scroller.clientHeight,viewHeight:b.wrapper.clientHeight,scrollWidth:b.scroller.scrollWidth,clientWidth:b.scroller.clientWidth,viewWidth:b.wrapper.clientWidth,barLeft:a.options.fixedGutter?c:0,docHeight:d,scrollHeight:d+ma(a)+b.barHeight,nativeBarWidth:b.nativeBarWidth,gutterWidth:c}}function tb(a,b,c){this.cm=c;var d=this.vert=t("div",[t("div",
null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),e=this.horiz=t("div",[t("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");a(d);a(e);y(d,"scroll",function(){d.clientHeight&&b(d.scrollTop,"vertical")});y(e,"scroll",function(){e.clientWidth&&b(e.scrollLeft,"horizontal")});this.checkedOverlay=!1;E&&8>J&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function H(){}function X(a){a.display.scrollbars&&(a.display.scrollbars.clear(),a.display.scrollbars.addClass&&
ub(a.display.wrapper,a.display.scrollbars.addClass));a.display.scrollbars=new l.scrollbarModel[a.options.scrollbarStyle](function(b){a.display.wrapper.insertBefore(b,a.display.scrollbarFiller);y(b,"mousedown",function(){a.state.focused&&setTimeout(function(){a.display.input.focus()},0)});b.setAttribute("cm-not-content","true")},function(b,c){"horizontal"==c?Xa(a,b):vb(a,b)},a);a.display.scrollbars.addClass&&wb(a.display.wrapper,a.display.scrollbars.addClass)}function w(a,b){b||(b=ya(a));var c=a.display.barWidth,
d=a.display.barHeight;Hd(a,b);for(var e=0;4>e&&c!=a.display.barWidth||d!=a.display.barHeight;e++)c!=a.display.barWidth&&a.options.lineWrapping&&Ub(a),Hd(a,ya(a)),c=a.display.barWidth,d=a.display.barHeight}function Hd(a,b){var c=a.display,d=c.scrollbars.update(b);c.sizer.style.paddingRight=(c.barWidth=d.right)+"px";c.sizer.style.paddingBottom=(c.barHeight=d.bottom)+"px";d.right&&d.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=d.bottom+"px",c.scrollbarFiller.style.width=
d.right+"px"):c.scrollbarFiller.style.display="";d.bottom&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=d.bottom+"px",c.gutterFiller.style.width=b.gutterWidth+"px"):c.gutterFiller.style.display=""}function Kc(a,b,c){var d=c&&null!=c.top?Math.max(0,c.top):a.scroller.scrollTop,d=Math.floor(d-a.lineSpace.offsetTop),e=c&&null!=c.bottom?c.bottom:d+a.wrapper.clientHeight,d=Ja(b,d),e=Ja(b,e);if(c&&c.ensure){var f=c.ensure.from.line;
c=c.ensure.to.line;f<d?(d=f,e=Ja(b,na(r(b,f))+a.wrapper.clientHeight)):Math.min(c,b.lastLine())>=e&&(d=Ja(b,na(r(b,c))-a.wrapper.clientHeight),e=c)}return{from:d,to:Math.max(e,d+1)}}function Ic(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var d=Lc(b)-b.scroller.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,f=d+"px",g=0;g<c.length;g++)if(!c[g].hidden){a.options.fixedGutter&&c[g].gutter&&(c[g].gutter.style.left=f);var h=c[g].alignable;if(h)for(var k=
0;k<h.length;k++)h[k].style.left=f}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function Fd(a){if(!a.options.lineNumbers)return!1;var b=a.doc,b=Mc(a.options,b.first+b.size-1),c=a.display;if(b.length!=c.lineNumChars){var d=c.measure.appendChild(t("div",[t("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),e=d.firstChild.offsetWidth,d=d.offsetWidth-e;c.lineGutter.style.width="";c.lineNumInnerWidth=Math.max(e,c.lineGutter.offsetWidth-d)+1;c.lineNumWidth=c.lineNumInnerWidth+d;c.lineNumChars=
c.lineNumInnerWidth?b.length:-1;c.lineGutter.style.width=c.lineNumWidth+"px";sb(a);return!0}return!1}function Mc(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function Lc(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function Vb(a,b,c){var d=a.display;this.viewport=b;this.visible=Kc(d,a.doc,b);this.editorIsHidden=!d.wrapper.offsetWidth;this.wrapperHeight=d.wrapper.clientHeight;this.wrapperWidth=d.wrapper.clientWidth;this.oldDisplayWidth=za(a);
this.force=c;this.dims=Nc(a);this.events=[]}function Oc(a,b){var c=a.display,d=a.doc;if(b.editorIsHidden)return Aa(a),!1;if(!b.force&&b.visible.from>=c.viewFrom&&b.visible.to<=c.viewTo&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo)&&c.renderedView==c.view&&0==Id(a))return!1;Fd(a)&&(Aa(a),b.dims=Nc(a));var e=d.first+d.size,f=Math.max(b.visible.from-a.options.viewportMargin,d.first),g=Math.min(e,b.visible.to+a.options.viewportMargin);c.viewFrom<f&&20>f-c.viewFrom&&(f=Math.max(d.first,c.viewFrom));
c.viewTo>g&&20>c.viewTo-g&&(g=Math.min(e,c.viewTo));Ba&&(f=Pc(a.doc,f),g=Jd(a.doc,g));d=f!=c.viewFrom||g!=c.viewTo||c.lastWrapHeight!=b.wrapperHeight||c.lastWrapWidth!=b.wrapperWidth;e=a.display;0==e.view.length||f>=e.viewTo||g<=e.viewFrom?(e.view=Wb(a,f,g),e.viewFrom=f):(e.viewFrom>f?e.view=Wb(a,f,e.viewFrom).concat(e.view):e.viewFrom<f&&(e.view=e.view.slice(Ka(a,f))),e.viewFrom=f,e.viewTo<g?e.view=e.view.concat(Wb(a,e.viewTo,g)):e.viewTo>g&&(e.view=e.view.slice(0,Ka(a,g))));e.viewTo=g;c.viewOffset=
na(r(a.doc,c.viewFrom));a.display.mover.style.top=c.viewOffset+"px";g=Id(a);if(!d&&0==g&&!b.force&&c.renderedView==c.view&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo))return!1;f=oa();4<g&&(c.lineDiv.style.display="none");tf(a,c.updateLineNumbers,b.dims);4<g&&(c.lineDiv.style.display="");c.renderedView=c.view;f&&oa()!=f&&f.offsetHeight&&f.focus();Ha(c.cursorDiv);Ha(c.selectionDiv);c.gutters.style.height=c.sizer.style.minHeight=0;d&&(c.lastWrapHeight=b.wrapperHeight,c.lastWrapWidth=b.wrapperWidth,
pb(a,400));c.updateLineNumbers=null;return!0}function Kd(a,b){for(var c=b.viewport,d=!0;;d=!1){if(!d||!a.options.lineWrapping||b.oldDisplayWidth==za(a))if(c&&null!=c.top&&(c={top:Math.min(a.doc.height+Jc(a.display)-Qc(a),c.top)}),b.visible=Kc(a.display,a.doc,c),b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)break;if(!Oc(a,b))break;Ub(a);d=ya(a);xb(a);Rc(a,d);w(a,d)}b.signal(a,"update",a);if(a.display.viewFrom!=a.display.reportedViewFrom||a.display.viewTo!=a.display.reportedViewTo)b.signal(a,
"viewportChange",a,a.display.viewFrom,a.display.viewTo),a.display.reportedViewFrom=a.display.viewFrom,a.display.reportedViewTo=a.display.viewTo}function Sc(a,b){var c=new Vb(a,b);if(Oc(a,c)){Ub(a);Kd(a,c);var d=ya(a);xb(a);Rc(a,d);w(a,d);c.finish()}}function Rc(a,b){a.display.sizer.style.minHeight=b.docHeight+"px";var c=b.docHeight+a.display.barHeight;a.display.heightForcer.style.top=c+"px";a.display.gutters.style.height=Math.max(c+ma(a),b.clientHeight)+"px"}function Ub(a){a=a.display;for(var b=a.lineDiv.offsetTop,
c=0;c<a.view.length;c++){var d=a.view[c],e;if(!d.hidden){if(E&&8>J){var f=d.node.offsetTop+d.node.offsetHeight;e=f-b;b=f}else e=d.node.getBoundingClientRect(),e=e.bottom-e.top;f=d.line.height-e;2>e&&(e=Fa(a));if(.001<f||-.001>f)if(la(d.line,e),Ld(d.line),d.rest)for(e=0;e<d.rest.length;e++)Ld(d.rest[e])}}}function Ld(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b)a.widgets[b].height=a.widgets[b].node.offsetHeight}function Nc(a){for(var b=a.display,c={},d={},e=b.gutters.clientLeft,f=b.gutters.firstChild,
g=0;f;f=f.nextSibling,++g)c[a.options.gutters[g]]=f.offsetLeft+f.clientLeft+e,d[a.options.gutters[g]]=f.clientWidth;return{fixedPos:Lc(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function tf(a,b,c){function d(b){var c=b.nextSibling;N&&fa&&a.display.currentWheelTarget==b?b.style.display="none":b.parentNode.removeChild(b);return c}for(var e=a.display,f=a.options.lineNumbers,g=e.lineDiv,h=g.firstChild,k=e.view,e=e.viewFrom,m=0;m<k.length;m++){var n=
k[m];if(!n.hidden)if(n.node&&n.node.parentNode==g){for(;h!=n.node;)h=d(h);h=f&&null!=b&&b<=e&&n.lineNumber;n.changes&&(-1<R(n.changes,"gutter")&&(h=!1),Md(a,n,e,c));h&&(Ha(n.lineNumber),n.lineNumber.appendChild(document.createTextNode(Mc(a.options,e))));h=n.node.nextSibling}else{var v=uf(a,n,e,c);g.insertBefore(v,h)}e+=n.size}for(;h;)h=d(h)}function Md(a,b,c,d){for(var e=0;e<b.changes.length;e++){var f=b.changes[e];if("text"==f){var f=b,g=f.text.className,h=Nd(a,f);f.text==f.node&&(f.node=h.pre);
f.text.parentNode.replaceChild(h.pre,f.text);f.text=h.pre;h.bgClass!=f.bgClass||h.textClass!=f.textClass?(f.bgClass=h.bgClass,f.textClass=h.textClass,Tc(f)):g&&(f.text.className=g)}else if("gutter"==f)Od(a,b,c,d);else if("class"==f)Tc(b);else if("widget"==f){f=a;g=b;h=d;g.alignable&&(g.alignable=null);for(var k=g.node.firstChild,m=void 0;k;k=m)m=k.nextSibling,"CodeMirror-linewidget"==k.className&&g.node.removeChild(k);Pd(f,g,h)}}b.changes=null}function yb(a){a.node==a.text&&(a.node=t("div",null,null,
"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),E&&8>J&&(a.node.style.zIndex=2));return a.node}function Nd(a,b){var c=a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=null,b.measure=c.measure,c.built):Qd(a,b)}function Tc(a){var b=a.bgClass?a.bgClass+" "+(a.line.bgClass||""):a.line.bgClass;b&&(b+=" CodeMirror-linebackground");if(a.background)b?a.background.className=b:(a.background.parentNode.removeChild(a.background),
a.background=null);else if(b){var c=yb(a);a.background=c.insertBefore(t("div",null,b),c.firstChild)}a.line.wrapClass?yb(a).className=a.line.wrapClass:a.node!=a.text&&(a.node.className="");a.text.className=(a.textClass?a.textClass+" "+(a.line.textClass||""):a.line.textClass)||""}function Od(a,b,c,d){b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null);b.gutterBackground&&(b.node.removeChild(b.gutterBackground),b.gutterBackground=null);if(b.line.gutterClass){var e=yb(b);b.gutterBackground=t("div",
null,"CodeMirror-gutter-background "+b.line.gutterClass,"left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px; width: "+d.gutterTotalWidth+"px");e.insertBefore(b.gutterBackground,b.text)}var f=b.line.gutterMarkers;if(a.options.lineNumbers||f){var e=yb(b),g=b.gutter=t("div",null,"CodeMirror-gutter-wrapper","left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px");a.display.input.setUneditable(g);e.insertBefore(g,b.text);b.line.gutterClass&&(g.className+=" "+b.line.gutterClass);
!a.options.lineNumbers||f&&f["CodeMirror-linenumbers"]||(b.lineNumber=g.appendChild(t("div",Mc(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px")));if(f)for(b=0;b<a.options.gutters.length;++b)c=a.options.gutters[b],(e=f.hasOwnProperty(c)&&f[c])&&g.appendChild(t("div",[e],"CodeMirror-gutter-elt","left: "+d.gutterLeft[c]+"px; width: "+d.gutterWidth[c]+"px"))}}function uf(a,b,c,d){var e=Nd(a,b);b.text=
b.node=e.pre;e.bgClass&&(b.bgClass=e.bgClass);e.textClass&&(b.textClass=e.textClass);Tc(b);Od(a,b,c,d);Pd(a,b,d);return b.node}function Pd(a,b,c){Rd(a,b.line,b,c,!0);if(b.rest)for(var d=0;d<b.rest.length;d++)Rd(a,b.rest[d],b,c,!1)}function Rd(a,b,c,d,e){if(b.widgets){var f=yb(c),g=0;for(b=b.widgets;g<b.length;++g){var h=b[g],k=t("div",[h.node],"CodeMirror-linewidget");h.handleMouseEvents||k.setAttribute("cm-ignore-events","true");var m=h,n=k,v=d;if(m.noHScroll){(c.alignable||(c.alignable=[])).push(n);
var p=v.wrapperWidth;n.style.left=v.fixedPos+"px";m.coverGutter||(p-=v.gutterTotalWidth,n.style.paddingLeft=v.gutterTotalWidth+"px");n.style.width=p+"px"}m.coverGutter&&(n.style.zIndex=5,n.style.position="relative",m.noHScroll||(n.style.marginLeft=-v.gutterTotalWidth+"px"));a.display.input.setUneditable(k);e&&h.above?f.insertBefore(k,c.gutter||c.text):f.appendChild(k);S(h,"redraw")}}}function Uc(a){return q(a.line,a.ch)}function Xb(a,b){return 0>z(a,b)?b:a}function Yb(a,b){return 0>z(a,b)?a:b}function Sd(a){a.state.focused||
(a.display.input.focus(),Gc(a))}function Zb(a){return a.options.readOnly||a.doc.cantEdit}function $b(a,b,c,d,e){var f=a.doc;a.display.shift=!1;d||(d=f.sel);var g=a.state.pasteIncoming||"paste"==e,h=f.splitLines(b),k=null;if(g&&1<d.ranges.length)if(aa&&aa.join("\n")==b){if(0==d.ranges.length%aa.length)for(var k=[],m=0;m<aa.length;m++)k.push(f.splitLines(aa[m]))}else h.length==d.ranges.length&&(k=ac(h,function(a){return[a]}));for(m=d.ranges.length-1;0<=m;m--){var n=d.ranges[m],v=n.from(),p=n.to();n.empty()&&
(c&&0<c?v=q(v.line,v.ch-c):a.state.overwrite&&!g&&(p=q(p.line,Math.min(r(f,p.line).text.length,p.ch+A(h).length))));n=a.curOp.updateInput;v={from:v,to:p,text:k?k[m%k.length]:h,origin:e||(g?"paste":a.state.cutIncoming?"cut":"+input")};Ya(a.doc,v);S(a,"inputRead",a,v)}b&&!g&&Td(a,b);Za(a);a.curOp.updateInput=n;a.curOp.typing=!0;a.state.pasteIncoming=a.state.cutIncoming=!1}function Ud(a,b){var c=a.clipboardData&&a.clipboardData.getData("text/plain");if(c)return a.preventDefault(),Y(b,function(){$b(b,
c,0,null,"paste")}),!0}function Td(a,b){if(a.options.electricChars&&a.options.smartIndent)for(var c=a.doc.sel,d=c.ranges.length-1;0<=d;d--){var e=c.ranges[d];if(!(100<e.head.ch||d&&c.ranges[d-1].head.line==e.head.line)){var f=a.getModeAt(e.head),g=!1;if(f.electricChars)for(var h=0;h<f.electricChars.length;h++){if(-1<b.indexOf(f.electricChars.charAt(h))){g=zb(a,e.head.line,"smart");break}}else f.electricInput&&f.electricInput.test(r(a.doc,e.head.line).text.slice(0,e.head.ch))&&(g=zb(a,e.head.line,
"smart"));g&&S(a,"electricInput",a,e.head.line)}}}function Vd(a){for(var b=[],c=[],d=0;d<a.doc.sel.ranges.length;d++){var e=a.doc.sel.ranges[d].head.line,e={anchor:q(e,0),head:q(e+1,0)};c.push(e);b.push(a.getRange(e.anchor,e.head))}return{text:b,ranges:c}}function Wd(a){a.setAttribute("autocorrect","off");a.setAttribute("autocapitalize","off");a.setAttribute("spellcheck","false")}function Vc(a){this.cm=a;this.prevInput="";this.pollingFast=!1;this.polling=new mb;this.hasSelection=this.inaccurateSelection=
!1;this.composing=null}function Xd(){var a=t("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),b=t("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");N?a.style.width="1000px":a.setAttribute("wrap","off");$a&&(a.style.border="1px solid black");Wd(a);return b}function Wc(a){this.cm=a;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new mb;this.gracePeriod=!1}function Yd(a,b){var c=
Xc(a,b.line);if(!c||c.hidden)return null;var d=r(a.doc,b.line),c=Zd(c,d,b.line),d=ga(d),e="left";d&&(e=bc(d,b.ch)%2?"right":"left");c=$d(c.map,b.ch,e);c.offset="right"==c.collapse?c.end:c.start;return c}function ab(a,b){b&&(a.bad=!0);return a}function cc(a,b,c){var d;if(b==a.display.lineDiv){d=a.display.lineDiv.childNodes[c];if(!d)return ab(a.clipPos(q(a.display.viewTo-1)),!0);b=null;c=0}else for(d=b;;d=d.parentNode){if(!d||d==a.display.lineDiv)return null;if(d.parentNode&&d.parentNode==a.display.lineDiv)break}for(var e=
0;e<a.display.view.length;e++){var f=a.display.view[e];if(f.node==d)return vf(f,b,c)}}function vf(a,b,c){function d(b,c,d){for(var e=-1;e<(m?m.length:0);e++)for(var f=0>e?k.map:m[e],g=0;g<f.length;g+=3){var h=f[g+2];if(h==b||h==c){c=I(0>e?a.line:a.rest[e]);e=f[g]+d;if(0>d||h!=b)e=f[g+(d?1:0)];return q(c,e)}}}var e=a.text.firstChild,f=!1;if(!b||!Yc(e,b))return ab(q(I(a.line),0),!0);if(b==e&&(f=!0,b=e.childNodes[c],c=0,!b))return c=a.rest?A(a.rest):a.line,ab(q(I(c),c.text.length),f);var g=3==b.nodeType?
b:null,h=b;g||1!=b.childNodes.length||3!=b.firstChild.nodeType||(g=b.firstChild,c&&(c=g.nodeValue.length));for(;h.parentNode!=e;)h=h.parentNode;var k=a.measure,m=k.maps;if(b=d(g,h,c))return ab(b,f);e=h.nextSibling;for(g=g?g.nodeValue.length-c:0;e;e=e.nextSibling){if(b=d(e,e.firstChild,0))return ab(q(b.line,b.ch-g),f);g+=e.textContent.length}h=h.previousSibling;for(g=c;h;h=h.previousSibling){if(b=d(h,h.firstChild,-1))return ab(q(b.line,b.ch+g),f);g+=e.textContent.length}}function wf(a,b,c,d,e){function f(a){return function(b){return b.id==
a}}function g(b){if(1==b.nodeType){var c=b.getAttribute("cm-text");if(null!=c)""==c&&(c=b.textContent.replace(/\u200b/g,"")),h+=c;else{var c=b.getAttribute("cm-marker"),p;if(c)b=a.findMarks(q(d,0),q(e+1,0),f(+c)),b.length&&(p=b[0].find())&&(h+=La(a.doc,p.from,p.to).join(m));else if("false"!=b.getAttribute("contenteditable")){for(p=0;p<b.childNodes.length;p++)g(b.childNodes[p]);/^(pre|div|p)$/i.test(b.nodeName)&&(k=!0)}}}else 3==b.nodeType&&(b=b.nodeValue)&&(k&&(h+=m,k=!1),h+=b)}for(var h="",k=!1,
m=a.doc.lineSeparator();;){g(b);if(b==c)break;b=b.nextSibling}return h}function ua(a,b){this.ranges=a;this.primIndex=b}function C(a,b){this.anchor=a;this.head=b}function ha(a,b){var c=a[b];a.sort(function(a,b){return z(a.from(),b.from())});b=R(a,c);for(c=1;c<a.length;c++){var d=a[c],e=a[c-1];if(0<=z(e.to(),d.from())){var f=Yb(e.from(),d.from()),g=Xb(e.to(),d.to()),d=e.empty()?d.from()==d.head:e.from()==e.head;c<=b&&--b;a.splice(--c,2,new C(d?g:f,d?f:g))}}return new ua(a,b)}function pa(a,b){return new ua([new C(a,
b||a)],0)}function B(a,b){if(b.line<a.first)return q(a.first,0);var c=a.first+a.size-1;if(b.line>c)return q(c,r(a,c).text.length);var c=r(a,b.line).text.length,d=b.ch,c=null==d||d>c?q(b.line,c):0>d?q(b.line,0):b;return c}function Ab(a,b){return b>=a.first&&b<a.first+a.size}function Bb(a,b,c,d){return a.cm&&a.cm.display.shift||a.extend?(a=b.anchor,d&&(b=0>z(c,a),b!=0>z(d,a)?(a=c,c=d):b!=0>z(c,d)&&(c=d)),new C(a,c)):new C(d||c,c)}function dc(a,b,c,d){O(a,new ua([Bb(a,a.sel.primary(),b,c)],0),d)}function ae(a,
b,c){for(var d=[],e=0;e<a.sel.ranges.length;e++)d[e]=Bb(a,a.sel.ranges[e],b[e],null);b=ha(d,a.sel.primIndex);O(a,b,c)}function Zc(a,b,c,d){var e=a.sel.ranges.slice(0);e[b]=c;O(a,ha(e,a.sel.primIndex),d)}function xf(a,b){var c={ranges:b.ranges,update:function(b){this.ranges=[];for(var c=0;c<b.length;c++)this.ranges[c]=new C(B(a,b[c].anchor),B(a,b[c].head))}};M(a,"beforeSelectionChange",a,c);a.cm&&M(a.cm,"beforeSelectionChange",a.cm,c);return c.ranges!=b.ranges?ha(c.ranges,c.ranges.length-1):b}function be(a,
b,c){var d=a.history.done,e=A(d);e&&e.ranges?(d[d.length-1]=b,ec(a,b,c)):O(a,b,c)}function O(a,b,c){ec(a,b,c);b=a.sel;var d=a.cm?a.cm.curOp.id:NaN,e=a.history,f=c&&c.origin,g;if(!(g=d==e.lastSelOp)&&(g=f&&e.lastSelOrigin==f)&&!(g=e.lastModTime==e.lastSelTime&&e.lastOrigin==f)){g=A(e.done);var h=f.charAt(0);g="*"==h||"+"==h&&g.ranges.length==b.ranges.length&&g.somethingSelected()==b.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}g?e.done[e.done.length-
1]=b:fc(b,e.done);e.lastSelTime=+new Date;e.lastSelOrigin=f;e.lastSelOp=d;c&&!1!==c.clearRedo&&ce(e.undone)}function ec(a,b,c){if(ba(a,"beforeSelectionChange")||a.cm&&ba(a.cm,"beforeSelectionChange"))b=xf(a,b);var d=c&&c.bias||(0>z(b.primary().head,a.sel.primary().head)?-1:1);de(a,ee(a,b,d,!0));c&&!1===c.scroll||!a.cm||Za(a.cm)}function de(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=!0,fe(a.cm)),S(a,"cursorActivity",a))}function ge(a){de(a,ee(a,a.sel,null,
!1),qa)}function ee(a,b,c,d){for(var e,f=0;f<b.ranges.length;f++){var g=b.ranges[f],h=gc(a,g.anchor,c,d),k=gc(a,g.head,c,d);if(e||h!=g.anchor||k!=g.head)e||(e=b.ranges.slice(0,f)),e[f]=new C(h,k)}return e?ha(e,b.primIndex):b}function gc(a,b,c,d){var e=!1,f=b,g=c||1;a.cantEdit=!1;a:for(;;){var h=r(a,f.line);if(h.markedSpans)for(var k=0;k<h.markedSpans.length;++k){var m=h.markedSpans[k],n=m.marker;if((null==m.from||(n.inclusiveLeft?m.from<=f.ch:m.from<f.ch))&&(null==m.to||(n.inclusiveRight?m.to>=f.ch:
m.to>f.ch))){if(d&&(M(n,"beforeCursorEnter"),n.explicitlyCleared))if(h.markedSpans){--k;continue}else break;if(n.atomic){k=n.find(0>g?-1:1);if(0==z(k,f)&&(k.ch+=g,0>k.ch?k=k.line>a.first?B(a,q(k.line-1)):null:k.ch>h.text.length&&(k=k.line<a.first+a.size-1?q(k.line+1,0):null),!k)){if(e){if(!d)return gc(a,b,c,!0);a.cantEdit=!0;return q(a.first,0)}e=!0;k=b;g=-g}f=k;continue a}}}return f}}function xb(a){a.display.input.showSelection(a.display.input.prepareSelection())}function he(a,b){for(var c=a.doc,
d={},e=d.cursors=document.createDocumentFragment(),f=d.selection=document.createDocumentFragment(),g=0;g<c.sel.ranges.length;g++)if(!1!==b||g!=c.sel.primIndex){var h=c.sel.ranges[g],k=h.empty();if(k||a.options.showCursorWhenSelecting){var m=a,n=e,v=va(m,h.head,"div",null,null,!m.options.singleCursorHeightPerLine),p=n.appendChild(t("div","\u00a0","CodeMirror-cursor"));p.style.left=v.left+"px";p.style.top=v.top+"px";p.style.height=Math.max(0,v.bottom-v.top)*m.options.cursorHeight+"px";v.other&&(m=n.appendChild(t("div",
"\u00a0","CodeMirror-cursor CodeMirror-secondarycursor")),m.style.display="",m.style.left=v.other.left+"px",m.style.top=v.other.top+"px",m.style.height=.85*(v.other.bottom-v.other.top)+"px")}k||yf(a,h,f)}return d}function yf(a,b,c){function d(a,b,c,d){0>b&&(b=0);b=Math.round(b);d=Math.round(d);h.appendChild(t("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; width: "+(null==c?n-a:c)+"px; height: "+(d-b)+"px"))}function e(b,c,e){var f=r(g,b),h=f.text.length,k,v;zf(ga(f),
c||0,null==e?h:e,function(g,l,t){var r=hc(a,q(b,g),"div",f,"left"),H,w;g==l?(H=r,t=w=r.left):(H=hc(a,q(b,l-1),"div",f,"right"),"rtl"==t&&(t=r,r=H,H=t),t=r.left,w=H.right);null==c&&0==g&&(t=m);3<H.top-r.top&&(d(t,r.top,null,r.bottom),t=m,r.bottom<H.top&&d(t,r.bottom,null,H.top));null==e&&l==h&&(w=n);if(!k||r.top<k.top||r.top==k.top&&r.left<k.left)k=r;if(!v||H.bottom>v.bottom||H.bottom==v.bottom&&H.right>v.right)v=H;t<m+1&&(t=m);d(t,H.top,w-t,H.bottom)});return{start:k,end:v}}var f=a.display,g=a.doc,
h=document.createDocumentFragment(),k=ie(a.display),m=k.left,n=Math.max(f.sizerWidth,za(a)-f.sizer.offsetLeft)-k.right,f=b.from();b=b.to();if(f.line==b.line)e(f.line,f.ch,b.ch);else{var v=r(g,f.line),k=r(g,b.line),k=ra(v)==ra(k),f=e(f.line,f.ch,k?v.text.length+1:null).end;b=e(b.line,k?0:null,b.ch).start;k&&(f.top<b.top-2?(d(f.right,f.top,null,f.bottom),d(m,b.top,b.left,b.bottom)):d(f.right,f.top,b.left-f.right,f.bottom));f.bottom<b.top&&d(m,f.bottom,null,b.top)}c.appendChild(h)}function $c(a){if(a.state.focused){var b=
a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="";0<a.options.cursorBlinkRate?b.blinker=setInterval(function(){b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate):0>a.options.cursorBlinkRate&&(b.cursorDiv.style.visibility="hidden")}}function pb(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.viewTo&&a.state.highlight.set(b,nb(Af,a))}function Af(a){var b=a.doc;b.frontier<b.first&&(b.frontier=b.first);if(!(b.frontier>=a.display.viewTo)){var c=+new Date+
a.options.workTime,d=bb(b.mode,Cb(a,b.frontier)),e=[];b.iter(b.frontier,Math.min(b.first+b.size,a.display.viewTo+500),function(f){if(b.frontier>=a.display.viewFrom){var g=f.styles,h=je(a,f,d,!0);f.styles=h.styles;var k=f.styleClasses;(h=h.classes)?f.styleClasses=h:k&&(f.styleClasses=null);k=!g||g.length!=f.styles.length||k!=h&&(!k||!h||k.bgClass!=h.bgClass||k.textClass!=h.textClass);for(h=0;!k&&h<g.length;++h)k=g[h]!=f.styles[h];k&&e.push(b.frontier);f.stateAfter=bb(b.mode,d)}else ad(a,f.text,d),
f.stateAfter=0==b.frontier%5?bb(b.mode,d):null;++b.frontier;if(+new Date>c)return pb(a,a.options.workDelay),!0});e.length&&Y(a,function(){for(var b=0;b<e.length;b++)wa(a,e[b],"text")})}}function Bf(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1E3:100);b>g;--b){if(b<=f.first)return f.first;var h=r(f,b-1);if(h.stateAfter&&(!c||b<=f.frontier))return b;h=ia(h.text,null,a.options.tabSize);if(null==e||d>h)e=b-1,d=h}return e}function Cb(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;
var f=Bf(a,b,c),g=f>d.first&&r(d,f-1).stateAfter,g=g?bb(d.mode,g):Cf(d.mode);d.iter(f,b,function(c){ad(a,c.text,g);c.stateAfter=f==b-1||0==f%5||f>=e.viewFrom&&f<e.viewTo?bb(d.mode,g):null;++f});c&&(d.frontier=f);return g}function Jc(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function ie(a){if(a.cachedPaddingH)return a.cachedPaddingH;var b=ca(a.measure,t("pre","x")),b=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle,b={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};
isNaN(b.left)||isNaN(b.right)||(a.cachedPaddingH=b);return b}function ma(a){return Gd-a.display.nativeBarWidth}function za(a){return a.display.scroller.clientWidth-ma(a)-a.display.barWidth}function Qc(a){return a.display.scroller.clientHeight-ma(a)-a.display.barHeight}function Zd(a,b,c){if(a.line==b)return{map:a.measure.map,cache:a.measure.cache};for(var d=0;d<a.rest.length;d++)if(a.rest[d]==b)return{map:a.measure.maps[d],cache:a.measure.caches[d]};for(d=0;d<a.rest.length;d++)if(I(a.rest[d])>c)return{map:a.measure.maps[d],
cache:a.measure.caches[d],before:!0}}function Xc(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[Ka(a,b)];var c=a.display.externalMeasured;if(c&&b>=c.lineN&&b<c.lineN+c.size)return c}function ic(a,b){var c=I(b),d=Xc(a,c);d&&!d.text?d=null:d&&d.changes&&(Md(a,d,c,Nc(a)),a.curOp.forceUpdate=!0);if(!d){var e;e=ra(b);d=I(e);e=a.display.externalMeasured=new ke(a.doc,e,d);e.lineN=d;d=e.built=Qd(a,e);e.text=d.pre;ca(a.display.lineMeasure,d.pre);d=e}c=Zd(d,b,c);return{line:b,view:d,
rect:null,map:c.map,cache:c.cache,before:c.before,hasHeights:!1}}function bd(a,b,c,d,e){b.before&&(c=-1);var f=c+(d||"");if(b.cache.hasOwnProperty(f))a=b.cache[f];else{b.rect||(b.rect=b.view.text.getBoundingClientRect());if(!b.hasHeights){var g=b.view,h=b.rect,k=a.options.lineWrapping,m=k&&za(a);if(!g.measure.heights||k&&g.measure.width!=m){var n=g.measure.heights=[];if(k)for(g.measure.width=m,g=g.text.firstChild.getClientRects(),k=0;k<g.length-1;k++){var m=g[k],v=g[k+1];2<Math.abs(m.bottom-v.bottom)&&
n.push((m.bottom+v.top)/2-h.top)}n.push(h.bottom-h.top)}b.hasHeights=!0}g=d;k=$d(b.map,c,g);d=k.node;h=k.start;m=k.end;c=k.collapse;var p;if(3==d.nodeType){for(n=0;4>n;n++){for(;h&&Db(b.line.text.charAt(k.coverStart+h));)--h;for(;k.coverStart+m<k.coverEnd&&Db(b.line.text.charAt(k.coverStart+m));)++m;if(E&&9>J&&0==h&&m==k.coverEnd-k.coverStart)p=d.parentNode.getBoundingClientRect();else if(E&&a.options.lineWrapping){var l=Ma(d,h,m).getClientRects();p=l.length?l["right"==g?l.length-1:0]:cd}else p=Ma(d,
h,m).getBoundingClientRect()||cd;if(p.left||p.right||0==h)break;m=h;--h;c="right"}E&&11>J&&((l=!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI)||(null!=dd?l=dd:(n=ca(a.display.measure,t("span","x")),l=n.getBoundingClientRect(),n=Ma(n,0,1).getBoundingClientRect(),l=dd=1<Math.abs(l.left-n.left)),l=!l),l||(l=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI,p={left:p.left*l,right:p.right*l,top:p.top*n,bottom:p.bottom*n}))}else 0<h&&(c=g="right"),
p=a.options.lineWrapping&&1<(l=d.getClientRects()).length?l["right"==g?l.length-1:0]:d.getBoundingClientRect();!(E&&9>J)||h||p&&(p.left||p.right)||(p=(p=d.parentNode.getClientRects()[0])?{left:p.left,right:p.left+qb(a.display),top:p.top,bottom:p.bottom}:cd);l=p.top-b.rect.top;d=p.bottom-b.rect.top;h=(l+d)/2;g=b.view.measure.heights;for(n=0;n<g.length-1&&!(h<g[n]);n++);c={left:("right"==c?p.right:p.left)-b.rect.left,right:("left"==c?p.left:p.right)-b.rect.left,top:n?g[n-1]:0,bottom:g[n]};p.left||p.right||
(c.bogus=!0);a.options.singleCursorHeightPerLine||(c.rtop=l,c.rbottom=d);a=c;a.bogus||(b.cache[f]=a)}return{left:a.left,right:a.right,top:e?a.rtop:a.top,bottom:e?a.rbottom:a.bottom}}function $d(a,b,c){for(var d,e,f,g,h=0;h<a.length;h+=3){var k=a[h],m=a[h+1];if(b<k)e=0,f=1,g="left";else if(b<m)e=b-k,f=e+1;else if(h==a.length-3||b==m&&a[h+3]>b)f=m-k,e=f-1,b>=m&&(g="right");if(null!=e){d=a[h+2];k==m&&c==(d.insertLeft?"left":"right")&&(g=c);if("left"==c&&0==e)for(;h&&a[h-2]==a[h-3]&&a[h-1].insertLeft;)d=
a[(h-=3)+2],g="left";if("right"==c&&e==m-k)for(;h<a.length-3&&a[h+3]==a[h+4]&&!a[h+5].insertLeft;)d=a[(h+=3)+2],g="right";break}}return{node:d,start:e,end:f,collapse:g,coverStart:k,coverEnd:m}}function le(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]={}}function me(a){a.display.externalMeasure=null;Ha(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++)le(a.display.view[b])}function rb(a){me(a);a.display.cachedCharWidth=
a.display.cachedTextHeight=a.display.cachedPaddingH=null;a.options.lineWrapping||(a.display.maxLineChanged=!0);a.display.lineNumChars=null}function ed(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=Eb(b.widgets[e]);c.top+=f;c.bottom+=f}if("line"==d)return c;d||(d="local");b=na(b);b="local"==d?b+a.display.lineSpace.offsetTop:b-a.display.viewOffset;if("page"==d||"window"==d)a=a.display.lineSpace.getBoundingClientRect(),b+=a.top+("window"==d?0:window.pageYOffset||
(document.documentElement||document.body).scrollTop),d=a.left+("window"==d?0:window.pageXOffset||(document.documentElement||document.body).scrollLeft),c.left+=d,c.right+=d;c.top+=b;c.bottom+=b;return c}function ne(a,b,c){if("div"==c)return b;var d=b.left;b=b.top;"page"==c?(d-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,b-=window.pageYOffset||(document.documentElement||document.body).scrollTop):"local"!=c&&c||(c=a.display.sizer.getBoundingClientRect(),d+=c.left,b+=c.top);
a=a.display.lineSpace.getBoundingClientRect();return{left:d-a.left,top:b-a.top}}function hc(a,b,c,d,e){d||(d=r(a.doc,b.line));var f=d;b=b.ch;d=bd(a,ic(a,d),b,e);return ed(a,f,d,c)}function va(a,b,c,d,e,f){function g(b,g){var h=bd(a,e,b,g?"right":"left",f);g?h.left=h.right:h.right=h.left;return ed(a,d,h,c)}function h(a,b){var c=k[b],d=c.level%2;a==fd(c)&&b&&c.level<k[b-1].level?(c=k[--b],a=gd(c)-(c.level%2?0:1),d=!0):a==gd(c)&&b<k.length-1&&c.level<k[b+1].level&&(c=k[++b],a=fd(c)-c.level%2,d=!1);return d&&
a==c.to&&a>c.from?g(a-1):g(a,d)}d=d||r(a.doc,b.line);e||(e=ic(a,d));var k=ga(d);b=b.ch;if(!k)return g(b);var m=bc(k,b),m=h(b,m);null!=Fb&&(m.other=h(b,Fb));return m}function oe(a,b){var c=0;b=B(a.doc,b);a.options.lineWrapping||(c=qb(a.display)*b.ch);var d=r(a.doc,b.line),e=na(d)+a.display.lineSpace.offsetTop;return{left:c,right:c,top:e,bottom:e+d.height}}function jc(a,b,c,d){a=q(a,b);a.xRel=d;c&&(a.outside=!0);return a}function hd(a,b,c){var d=a.doc;c+=a.display.viewOffset;if(0>c)return jc(d.first,
0,!0,-1);var e=Ja(d,c),f=d.first+d.size-1;if(e>f)return jc(d.first+d.size-1,r(d,f).text.length,!0,1);0>b&&(b=0);for(d=r(d,e);;)if(e=Df(a,d,e,b,c),f=(d=Ia(d,!1))&&d.find(0,!0),d&&(e.ch>f.from.ch||e.ch==f.from.ch&&0<e.xRel))e=I(d=f.to.line);else return e}function Df(a,b,c,d,e){function f(d){d=va(a,q(c,d),"line",b,m);h=!0;if(g>d.bottom)return d.left-k;if(g<d.top)return d.left+k;h=!1;return d.left}var g=e-na(b),h=!1,k=2*a.display.wrapper.clientWidth,m=ic(a,b),n=ga(b),v=b.text.length;e=kc(b);var p=lc(b),
l=f(e),t=h,r=f(p),H=h;if(d>r)return jc(c,p,H,1);for(;;){if(n?p==e||p==id(b,e,1):1>=p-e){n=d<l||d-l<=r-d?e:p;for(d-=n==e?l:r;Db(b.text.charAt(n));)++n;return jc(c,n,n==e?t:H,-1>d?-1:1<d?1:0)}var w=Math.ceil(v/2),y=e+w;if(n)for(var y=e,x=0;x<w;++x)y=id(b,y,1);x=f(y);if(x>d){p=y;r=x;if(H=h)r+=1E3;v=w}else e=y,l=x,t=h,v-=w}}function Fa(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==Na){Na=t("pre");for(var b=0;49>b;++b)Na.appendChild(document.createTextNode("x")),Na.appendChild(t("br"));
Na.appendChild(document.createTextNode("x"))}ca(a.measure,Na);b=Na.offsetHeight/50;3<b&&(a.cachedTextHeight=b);Ha(a.measure);return b||1}function qb(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=t("span","xxxxxxxxxx"),c=t("pre",[b]);ca(a.measure,c);b=b.getBoundingClientRect();b=(b.right-b.left)/10;2<b&&(a.cachedCharWidth=b);return b||10}function Sa(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,
cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ef};cb?cb.ops.push(a.curOp):a.curOp.ownsGroup=cb={ops:[a.curOp],delayedCallbacks:[]}}function Ua(a){if(a=a.curOp.ownsGroup)try{var b=a.delayedCallbacks,c=0;do{for(;c<b.length;c++)b[c]();for(var d=0;d<a.ops.length;d++){var e=a.ops[d];if(e.cursorActivityHandlers)for(;e.cursorActivityCalled<e.cursorActivityHandlers.length;)e.cursorActivityHandlers[e.cursorActivityCalled++](e.cm)}}while(c<
b.length)}finally{cb=null;for(b=0;b<a.ops.length;b++)a.ops[b].cm.curOp=null;a=a.ops;for(b=0;b<a.length;b++){var e=a[b],c=e.cm,f=d=c.display;!f.scrollbarsClipped&&f.scroller.offsetWidth&&(f.nativeBarWidth=f.scroller.offsetWidth-f.scroller.clientWidth,f.heightForcer.style.height=ma(c)+"px",f.sizer.style.marginBottom=-f.nativeBarWidth+"px",f.sizer.style.borderRightWidth=ma(c)+"px",f.scrollbarsClipped=!0);e.updateMaxLine&&Wa(c);e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&
(e.scrollToPos.from.line<d.viewFrom||e.scrollToPos.to.line>=d.viewTo)||d.maxLineChanged&&c.options.lineWrapping;e.update=e.mustUpdate&&new Vb(c,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}for(b=0;b<a.length;b++)e=a[b],e.updatedDisplay=e.mustUpdate&&Oc(e.cm,e.update);for(b=0;b<a.length;b++)if(e=a[b],c=e.cm,d=c.display,e.updatedDisplay&&Ub(c),e.barMeasure=ya(c),d.maxLineChanged&&!c.options.lineWrapping&&(f=void 0,f=d.maxLine.text.length,f=bd(c,ic(c,d.maxLine),f,void 0),e.adjustWidthTo=
f.left+3,c.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(d.scroller.clientWidth,d.sizer.offsetLeft+e.adjustWidthTo+ma(c)+c.display.barWidth),e.maxScrollLeft=Math.max(0,d.sizer.offsetLeft+e.adjustWidthTo-za(c))),e.updatedDisplay||e.selectionChanged)e.preparedSelection=d.input.prepareSelection();for(b=0;b<a.length;b++)e=a[b],c=e.cm,null!=e.adjustWidthTo&&(c.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<c.doc.scrollLeft&&Xa(c,Math.min(c.display.scroller.scrollLeft,
e.maxScrollLeft),!0),c.display.maxLineChanged=!1),e.preparedSelection&&c.display.input.showSelection(e.preparedSelection),e.updatedDisplay&&Rc(c,e.barMeasure),(e.updatedDisplay||e.startHeight!=c.doc.height)&&w(c,e.barMeasure),e.selectionChanged&&$c(c),c.state.focused&&e.updateInput&&c.display.input.reset(e.typing),e.focus&&e.focus==oa()&&Sd(e.cm);for(b=0;b<a.length;b++){e=a[b];c=e.cm;d=c.display;f=c.doc;e.updatedDisplay&&Kd(c,e.update);null==d.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||
(d.wheelStartX=d.wheelStartY=null);null==e.scrollTop||d.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(f.scrollTop=Math.max(0,Math.min(d.scroller.scrollHeight-d.scroller.clientHeight,e.scrollTop)),d.scrollbars.setScrollTop(f.scrollTop),d.scroller.scrollTop=f.scrollTop);null==e.scrollLeft||d.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(f.scrollLeft=Math.max(0,Math.min(d.scroller.scrollWidth-za(c),e.scrollLeft)),d.scrollbars.setScrollLeft(f.scrollLeft),d.scroller.scrollLeft=f.scrollLeft,Ic(c));
if(e.scrollToPos){var g=void 0,h=B(f,e.scrollToPos.from),g=B(f,e.scrollToPos.to),k=e.scrollToPos.margin;null==k&&(k=0);for(var m=0;5>m;m++){var n=!1,v=va(c,h),p=g&&g!=h?va(c,g):v,p=mc(c,Math.min(v.left,p.left),Math.min(v.top,p.top)-k,Math.max(v.left,p.left),Math.max(v.bottom,p.bottom)+k),l=c.doc.scrollTop,q=c.doc.scrollLeft;null!=p.scrollTop&&(vb(c,p.scrollTop),1<Math.abs(c.doc.scrollTop-l)&&(n=!0));null!=p.scrollLeft&&(Xa(c,p.scrollLeft),1<Math.abs(c.doc.scrollLeft-q)&&(n=!0));if(!n)break}g=v;e.scrollToPos.isCursor&&
c.state.focused&&(sa(c,"scrollCursorIntoView")||(k=c.display,m=k.sizer.getBoundingClientRect(),h=null,0>g.top+m.top?h=!0:g.bottom+m.top>(window.innerHeight||document.documentElement.clientHeight)&&(h=!1),null==h||Ff||(g=t("div","\u200b",null,"position: absolute; top: "+(g.top-k.viewOffset-c.display.lineSpace.offsetTop)+"px; height: "+(g.bottom-g.top+ma(c)+k.barHeight)+"px; left: "+g.left+"px; width: 2px;"),c.display.lineSpace.appendChild(g),g.scrollIntoView(h),c.display.lineSpace.removeChild(g))))}h=
e.maybeHiddenMarkers;g=e.maybeUnhiddenMarkers;if(h)for(k=0;k<h.length;++k)h[k].lines.length||M(h[k],"hide");if(g)for(k=0;k<g.length;++k)g[k].lines.length&&M(g[k],"unhide");d.wrapper.offsetHeight&&(f.scrollTop=c.display.scroller.scrollTop);e.changeObjs&&M(c,"changes",c,e.changeObjs);e.update&&e.update.finish()}}}function Y(a,b){if(a.curOp)return b();Sa(a);try{return b()}finally{Ua(a)}}function K(a,b){return function(){if(a.curOp)return b.apply(a,arguments);Sa(a);try{return b.apply(a,arguments)}finally{Ua(a)}}}
function Q(a){return function(){if(this.curOp)return a.apply(this,arguments);Sa(this);try{return a.apply(this,arguments)}finally{Ua(this)}}}function T(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);Sa(b);try{return a.apply(this,arguments)}finally{Ua(b)}}}function ke(a,b,c){for(var d=this.line=b,e;d=Ia(d,!1);)d=d.find(1,!0).line,(e||(e=[])).push(d);this.size=(this.rest=e)?I(A(this.rest))-c+1:1;this.node=this.text=null;this.hidden=Ga(a,b)}function Wb(a,b,c){var d=[],
e;for(e=b;e<c;)b=new ke(a.doc,r(a.doc,e),e),e+=b.size,d.push(b);return d}function W(a,b,c,d){null==b&&(b=a.doc.first);null==c&&(c=a.doc.first+a.doc.size);d||(d=0);var e=a.display;d&&c<e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>b)&&(e.updateLineNumbers=b);a.curOp.viewChanged=!0;if(b>=e.viewTo)Ba&&Pc(a.doc,b)<e.viewTo&&Aa(a);else if(c<=e.viewFrom)Ba&&Jd(a.doc,c+d)>e.viewFrom?Aa(a):(e.viewFrom+=d,e.viewTo+=d);else if(b<=e.viewFrom&&c>=e.viewTo)Aa(a);else if(b<=e.viewFrom){var f=nc(a,c,
c+d,1);f?(e.view=e.view.slice(f.index),e.viewFrom=f.lineN,e.viewTo+=d):Aa(a)}else if(c>=e.viewTo)(f=nc(a,b,b,-1))?(e.view=e.view.slice(0,f.index),e.viewTo=f.lineN):Aa(a);else{var f=nc(a,b,b,-1),g=nc(a,c,c+d,1);f&&g?(e.view=e.view.slice(0,f.index).concat(Wb(a,f.lineN,g.lineN)).concat(e.view.slice(g.index)),e.viewTo+=d):Aa(a)}if(a=e.externalMeasured)c<a.lineN?a.lineN+=d:b<a.lineN+a.size&&(e.externalMeasured=null)}function wa(a,b,c){a.curOp.viewChanged=!0;var d=a.display,e=a.display.externalMeasured;
e&&b>=e.lineN&&b<e.lineN+e.size&&(d.externalMeasured=null);b<d.viewFrom||b>=d.viewTo||(a=d.view[Ka(a,b)],null!=a.node&&(a=a.changes||(a.changes=[]),-1==R(a,c)&&a.push(c)))}function Aa(a){a.display.viewFrom=a.display.viewTo=a.doc.first;a.display.view=[];a.display.viewOffset=0}function Ka(a,b){if(b>=a.display.viewTo)return null;b-=a.display.viewFrom;if(0>b)return null;for(var c=a.display.view,d=0;d<c.length;d++)if(b-=c[d].size,0>b)return d}function nc(a,b,c,d){var e=Ka(a,b),f=a.display.view;if(!Ba||
c==a.doc.first+a.doc.size)return{index:e,lineN:c};for(var g=0,h=a.display.viewFrom;g<e;g++)h+=f[g].size;if(h!=b){if(0<d){if(e==f.length-1)return null;b=h+f[e].size-b;e++}else b=h-b;c+=b}for(;Pc(a.doc,c)!=c;){if(e==(0>d?0:f.length-1))return null;c+=d*f[e-(0>d?1:0)].size;e+=d}return{index:e,lineN:c}}function Id(a){a=a.display.view;for(var b=0,c=0;c<a.length;c++){var d=a[c];d.hidden||d.node&&!d.changes||++b}return b}function rf(a){function b(){d.activeTouch&&(e=setTimeout(function(){d.activeTouch=null},
1E3),f=d.activeTouch,f.end=+new Date)}function c(a,b){if(null==b.left)return!0;var c=b.left-a.left,d=b.top-a.top;return 400<c*c+d*d}var d=a.display;y(d.scroller,"mousedown",K(a,pe));E&&11>J?y(d.scroller,"dblclick",K(a,function(b){if(!sa(a,b)){var c=db(a,b);!c||jd(a,b,"gutterClick",!0,S)||xa(a.display,b)||(U(b),b=a.findWordAt(c),dc(a.doc,b.anchor,b.head))}})):y(d.scroller,"dblclick",function(b){sa(a,b)||U(b)});kd||y(d.scroller,"contextmenu",function(b){qe(a,b)});var e,f={end:0};y(d.scroller,"touchstart",
function(a){var b;1!=a.touches.length?b=!1:(b=a.touches[0],b=1>=b.radiusX&&1>=b.radiusY);b||(clearTimeout(e),b=+new Date,d.activeTouch={start:b,moved:!1,prev:300>=b-f.end?f:null},1==a.touches.length&&(d.activeTouch.left=a.touches[0].pageX,d.activeTouch.top=a.touches[0].pageY))});y(d.scroller,"touchmove",function(){d.activeTouch&&(d.activeTouch.moved=!0)});y(d.scroller,"touchend",function(e){var f=d.activeTouch;if(f&&!xa(d,e)&&null!=f.left&&!f.moved&&300>new Date-f.start){var g=a.coordsChar(d.activeTouch,
"page"),f=!f.prev||c(f,f.prev)?new C(g,g):!f.prev.prev||c(f,f.prev.prev)?a.findWordAt(g):new C(q(g.line,0),B(a.doc,q(g.line+1,0)));a.setSelection(f.anchor,f.head);a.focus();U(e)}b()});y(d.scroller,"touchcancel",b);y(d.scroller,"scroll",function(){d.scroller.clientHeight&&(vb(a,d.scroller.scrollTop),Xa(a,d.scroller.scrollLeft,!0),M(a,"scroll",a))});y(d.scroller,"mousewheel",function(b){re(a,b)});y(d.scroller,"DOMMouseScroll",function(b){re(a,b)});y(d.wrapper,"scroll",function(){d.wrapper.scrollTop=
d.wrapper.scrollLeft=0});d.dragFunctions={simple:function(b){sa(a,b)||ld(b)},start:function(b){if(E&&(!a.state.draggingText||100>+new Date-se))ld(b);else if(!sa(a,b)&&!xa(a.display,b)&&(b.dataTransfer.setData("Text",a.getSelection()),b.dataTransfer.setDragImage&&!te)){var c=t("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";ja&&(c.width=c.height=1,a.display.wrapper.appendChild(c),c._top=c.offsetTop);b.dataTransfer.setDragImage(c,
0,0);ja&&c.parentNode.removeChild(c)}},drop:K(a,Gf)};var g=d.input.getField();y(g,"keyup",function(b){ue.call(a,b)});y(g,"keydown",K(a,ve));y(g,"keypress",K(a,we));y(g,"focus",nb(Gc,a));y(g,"blur",nb(ob,a))}function Hf(a){var b=a.display;if(b.lastWrapHeight!=b.wrapper.clientHeight||b.lastWrapWidth!=b.wrapper.clientWidth)b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null,b.scrollbarsClipped=!1,a.setSize()}function xa(a,b){for(var c=b.target||b.srcElement;c!=a.wrapper;c=c.parentNode)if(!c||
1==c.nodeType&&"true"==c.getAttribute("cm-ignore-events")||c.parentNode==a.sizer&&c!=a.mover)return!0}function db(a,b,c,d){var e=a.display;if(!c&&"true"==(b.target||b.srcElement).getAttribute("cm-not-content"))return null;var f,g;c=e.lineSpace.getBoundingClientRect();try{f=b.clientX-c.left,g=b.clientY-c.top}catch(k){return null}b=hd(a,f,g);var h;d&&1==b.xRel&&(h=r(a.doc,b.line).text).length==b.ch&&(d=ia(h,h.length,a.options.tabSize)-h.length,b=q(b.line,Math.max(0,Math.round((f-ie(a.display).left)/
qb(a.display))-d)));return b}function pe(a){var b=this.display;if(!(b.activeTouch&&b.input.supportsTouch()||sa(this,a)))if(b.shift=a.shiftKey,xa(b,a))N||(b.scroller.draggable=!1,setTimeout(function(){b.scroller.draggable=!0},100));else if(!jd(this,a,"gutterClick",!0,S)){var c=db(this,a);window.focus();switch(xe(a)){case 1:c?If(this,a,c):(a.target||a.srcElement)==b.scroller&&U(a);break;case 2:N&&(this.state.lastMiddleDown=+new Date);c&&dc(this.doc,c);setTimeout(function(){b.input.focus()},20);U(a);
break;case 3:kd?qe(this,a):Jf(this)}}}function If(a,b,c){E?setTimeout(nb(Sd,a),0):a.curOp.focus=oa();var d=+new Date,e;oc&&oc.time>d-400&&0==z(oc.pos,c)?e="triple":pc&&pc.time>d-400&&0==z(pc.pos,c)?(e="double",oc={time:d,pos:c}):(e="single",pc={time:d,pos:c});var d=a.doc.sel,f=fa?b.metaKey:b.ctrlKey,g;a.options.dragDrop&&Kf&&!Zb(a)&&"single"==e&&-1<(g=d.contains(c))&&(0>z((g=d.ranges[g]).from(),c)||0<c.xRel)&&(0<z(g.to(),c)||0>c.xRel)?Lf(a,b,c,f):Mf(a,b,c,e,f)}function Lf(a,b,c,d){var e=a.display,
f=+new Date,g=K(a,function(h){N&&(e.scroller.draggable=!1);a.state.draggingText=!1;ta(document,"mouseup",g);ta(e.scroller,"drop",g);10>Math.abs(b.clientX-h.clientX)+Math.abs(b.clientY-h.clientY)&&(U(h),!d&&+new Date-200<f&&dc(a.doc,c),N||E&&9==J?setTimeout(function(){document.body.focus();e.input.focus()},20):e.input.focus())});N&&(e.scroller.draggable=!0);a.state.draggingText=g;e.scroller.dragDrop&&e.scroller.dragDrop();y(document,"mouseup",g);y(e.scroller,"drop",g)}function Mf(a,b,c,d,e){function f(b){if(0!=
z(H,b))if(H=b,"rect"==d){for(var e=[],f=a.options.tabSize,g=ia(r(m,c.line).text,c.ch,f),h=ia(r(m,b.line).text,b.ch,f),k=Math.min(g,h),g=Math.max(g,h),h=Math.min(c.line,b.line),l=Math.min(a.lastLine(),Math.max(c.line,b.line));h<=l;h++){var t=r(m,h).text,w=ye(t,k,f);k==g?e.push(new C(q(h,w),q(h,w))):t.length>w&&e.push(new C(q(h,w),q(h,ye(t,g,f))))}e.length||e.push(new C(c,c));O(m,ha(p.ranges.slice(0,v).concat(e),v),{origin:"*mouse",scroll:!1});a.scrollIntoView(b)}else e=n,f=e.anchor,k=b,"single"!=d&&
(b="double"==d?a.findWordAt(b):new C(q(b.line,0),B(m,q(b.line+1,0))),0<z(b.anchor,f)?(k=b.head,f=Yb(e.from(),b.anchor)):(k=b.anchor,f=Xb(e.to(),b.head))),e=p.ranges.slice(0),e[v]=new C(B(m,f),k),O(m,ha(e,v),md)}function g(b){var c=++x,e=db(a,b,!0,"rect"==d);if(e)if(0!=z(e,H)){a.curOp.focus=oa();f(e);var h=Kc(k,m);(e.line>=h.to||e.line<h.from)&&setTimeout(K(a,function(){x==c&&g(b)}),150)}else{var n=b.clientY<w.top?-20:b.clientY>w.bottom?20:0;n&&setTimeout(K(a,function(){x==c&&(k.scroller.scrollTop+=
n,g(b))}),50)}}function h(a){x=Infinity;U(a);k.input.focus();ta(document,"mousemove",u);ta(document,"mouseup",D);m.history.lastSelOrigin=null}var k=a.display,m=a.doc;U(b);var n,v,p=m.sel,l=p.ranges;e&&!b.shiftKey?(v=m.sel.contains(c),n=-1<v?l[v]:new C(c,c)):(n=m.sel.primary(),v=m.sel.primIndex);if(b.altKey)d="rect",e||(n=new C(c,c)),c=db(a,b,!0,!0),v=-1;else if("double"==d){var t=a.findWordAt(c);n=a.display.shift||m.extend?Bb(m,n,t.anchor,t.head):t}else"triple"==d?(t=new C(q(c.line,0),B(m,q(c.line+
1,0))),n=a.display.shift||m.extend?Bb(m,n,t.anchor,t.head):t):n=Bb(m,n,c);e?-1==v?(v=l.length,O(m,ha(l.concat([n]),v),{scroll:!1,origin:"*mouse"})):1<l.length&&l[v].empty()&&"single"==d&&!b.shiftKey?(O(m,ha(l.slice(0,v).concat(l.slice(v+1)),0)),p=m.sel):Zc(m,v,n,md):(v=0,O(m,new ua([n],0),md),p=m.sel);var H=c,w=k.wrapper.getBoundingClientRect(),x=0,u=K(a,function(a){xe(a)?g(a):h(a)}),D=K(a,h);y(document,"mousemove",u);y(document,"mouseup",D)}function jd(a,b,c,d,e){try{var f=b.clientX,g=b.clientY}catch(m){return!1}if(f>=
Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&U(b);d=a.display;var h=d.lineDiv.getBoundingClientRect();if(g>h.bottom||!ba(a,c))return nd(b);g-=h.top-d.viewOffset;for(h=0;h<a.options.gutters.length;++h){var k=d.gutters.childNodes[h];if(k&&k.getBoundingClientRect().right>=f)return f=Ja(a.doc,g),e(a,c,a,f,a.options.gutters[h],b),nd(b)}}function Gf(a){var b=this;if(!sa(b,a)&&!xa(b.display,a)){U(a);E&&(se=+new Date);var c=db(b,a,!0),d=a.dataTransfer.files;if(c&&!Zb(b))if(d&&d.length&&
window.FileReader&&window.File){var e=d.length,f=Array(e),g=0;a=function(a,d){var h=new FileReader;h.onload=K(b,function(){f[d]=h.result;if(++g==e){c=B(b.doc,c);var a={from:c,to:c,text:b.doc.splitLines(f.join(b.doc.lineSeparator())),origin:"paste"};Ya(b.doc,a);be(b.doc,pa(c,Oa(a)))}});h.readAsText(a)};for(var h=0;h<e;++h)a(d[h],h)}else if(b.state.draggingText&&-1<b.doc.sel.contains(c))b.state.draggingText(a),setTimeout(function(){b.display.input.focus()},20);else try{if(f=a.dataTransfer.getData("Text")){if(b.state.draggingText&&
(fa?!a.altKey:!a.ctrlKey))var k=b.listSelections();ec(b.doc,pa(c,c));if(k)for(h=0;h<k.length;++h)eb(b.doc,"",k[h].anchor,k[h].head,"drag");b.replaceSelection(f,"around","paste");b.display.input.focus()}}catch(m){}}}function vb(a,b){2>Math.abs(a.doc.scrollTop-b)||(a.doc.scrollTop=b,Ea||Sc(a,{top:b}),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbars.setScrollTop(b),Ea&&Sc(a),pb(a,100))}function Xa(a,b,c){(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))||(b=
Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,Ic(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbars.setScrollLeft(b))}function re(a,b){var c=ze(b),d=c.x,c=c.y,e=a.display,f=e.scroller;if(d&&f.scrollWidth>f.clientWidth||c&&f.scrollHeight>f.clientHeight){if(c&&fa&&N){var g=b.target,h=e.view;a:for(;g!=f;g=g.parentNode)for(var k=0;k<h.length;k++)if(h[k].node==g){a.display.currentWheelTarget=g;break a}}!d||Ea||ja||
null==Z?(c&&null!=Z&&(g=c*Z,h=a.doc.scrollTop,k=h+e.wrapper.clientHeight,0>g?h=Math.max(0,h+g-50):k=Math.min(a.doc.height,k+g+50),Sc(a,{top:h,bottom:k})),20>qc&&(null==e.wheelStartX?(e.wheelStartX=f.scrollLeft,e.wheelStartY=f.scrollTop,e.wheelDX=d,e.wheelDY=c,setTimeout(function(){if(null!=e.wheelStartX){var a=f.scrollLeft-e.wheelStartX,b=f.scrollTop-e.wheelStartY,a=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null;a&&(Z=(Z*qc+a)/(qc+1),++qc)}},200)):(e.wheelDX+=
d,e.wheelDY+=c))):(c&&vb(a,Math.max(0,Math.min(f.scrollTop+c*Z,f.scrollHeight-f.clientHeight))),Xa(a,Math.max(0,Math.min(f.scrollLeft+d*Z,f.scrollWidth-f.clientWidth))),U(b),e.wheelStartX=null)}}function rc(a,b,c){if("string"==typeof b&&(b=sc[b],!b))return!1;a.display.input.ensurePolled();var d=a.display.shift,e=!1;try{Zb(a)&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),e=b(a)!=Ae}finally{a.display.shift=d,a.state.suppressEdits=!1}return e}function Nf(a,b,c){for(var d=0;d<a.state.keyMaps.length;d++){var e=
Gb(b,a.state.keyMaps[d],c,a);if(e)return e}return a.options.extraKeys&&Gb(b,a.options.extraKeys,c,a)||Gb(b,a.options.keyMap,c,a)}function tc(a,b,c,d){var e=a.state.keySeq;if(e){if(Of(b))return"handled";Pf.set(50,function(){a.state.keySeq==e&&(a.state.keySeq=null,a.display.input.reset())});b=e+" "+b}d=Nf(a,b,d);"multi"==d&&(a.state.keySeq=b);"handled"==d&&S(a,"keyHandled",a,b,c);if("handled"==d||"multi"==d)U(c),$c(a);return e&&!d&&/\'$/.test(b)?(U(c),!0):!!d}function Be(a,b){var c=Qf(b,!0);return c?
b.shiftKey&&!a.state.keySeq?tc(a,"Shift-"+c,b,function(b){return rc(a,b,!0)})||tc(a,c,b,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return rc(a,b)}):tc(a,c,b,function(b){return rc(a,b)}):!1}function Rf(a,b,c){return tc(a,"'"+c+"'",b,function(b){return rc(a,b,!0)})}function ve(a){this.curOp.focus=oa();if(!sa(this,a)){E&&11>J&&27==a.keyCode&&(a.returnValue=!1);var b=a.keyCode;this.display.shift=16==b||a.shiftKey;var c=Be(this,a);ja&&(od=c?b:null,!c&&88==b&&!Ce&&(fa?a.metaKey:a.ctrlKey)&&
this.replaceSelection("",null,"cut"));18!=b||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||Sf(this)}}function Sf(a){function b(a){18!=a.keyCode&&a.altKey||(ub(c,"CodeMirror-crosshair"),ta(document,"keyup",b),ta(document,"mouseover",b))}var c=a.display.lineDiv;wb(c,"CodeMirror-crosshair");y(document,"keyup",b);y(document,"mouseover",b)}function ue(a){16==a.keyCode&&(this.doc.sel.shift=!1);sa(this,a)}function we(a){if(!(xa(this.display,a)||sa(this,a)||a.ctrlKey&&!a.altKey||fa&&a.metaKey)){var b=
a.keyCode,c=a.charCode;if(ja&&b==od)od=null,U(a);else if(!ja||a.which&&!(10>a.which)||!Be(this,a))if(b=String.fromCharCode(null==c?b:c),!Rf(this,a,b))this.display.input.onKeyPress(a)}}function Jf(a){a.state.delayingBlurEvent=!0;setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,ob(a))},100)}function Gc(a){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1);"nocursor"!=a.options.readOnly&&(a.state.focused||(M(a,"focus",a),a.state.focused=!0,wb(a.display.wrapper,"CodeMirror-focused"),
a.curOp||a.display.selForContextMenu==a.doc.sel||(a.display.input.reset(),N&&setTimeout(function(){a.display.input.reset(!0)},20)),a.display.input.receivedFocus()),$c(a))}function ob(a){a.state.delayingBlurEvent||(a.state.focused&&(M(a,"blur",a),a.state.focused=!1,ub(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150))}function qe(a,b){var c;(c=xa(a.display,b))||(c=ba(a,"gutterContextMenu")?jd(a,b,"gutterContextMenu",
!1,M):!1);if(!c)a.display.input.onContextMenu(b)}function De(a,b){if(0>z(a,b.from))return a;if(0>=z(a,b.to))return Oa(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;a.line==b.to.line&&(d+=Oa(b).ch-b.to.ch);return q(c,d)}function pd(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];c.push(new C(De(e.anchor,b),De(e.head,b)))}return ha(c,a.sel.primIndex)}function Ee(a,b,c){return a.line==b.line?q(c.line,a.ch-b.ch+c.ch):q(c.line+(a.line-b.line),a.ch)}function Fe(a,
b,c){b={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=!0}};c&&(b.update=function(b,c,f,g){b&&(this.from=B(a,b));c&&(this.to=B(a,c));f&&(this.text=f);void 0!==g&&(this.origin=g)});M(a,"beforeChange",a,b);a.cm&&M(a.cm,"beforeChange",a.cm,b);return b.canceled?null:{from:b.from,to:b.to,text:b.text,origin:b.origin}}function Ya(a,b,c){if(a.cm){if(!a.cm.curOp)return K(a.cm,Ya)(a,b,c);if(a.cm.state.suppressEdits)return}if(ba(a,"beforeChange")||a.cm&&ba(a.cm,"beforeChange"))if(b=
Fe(a,b,!0),!b)return;if(c=Ge&&!c&&Tf(a,b.from,b.to))for(var d=c.length-1;0<=d;--d)He(a,{from:c[d].from,to:c[d].to,text:d?[""]:b.text});else He(a,b)}function He(a,b){if(1!=b.text.length||""!=b.text[0]||0!=z(b.from,b.to)){var c=pd(a,b);Ie(a,b,c,a.cm?a.cm.curOp.id:NaN);Hb(a,b,c,qd(a,b));var d=[];Pa(a,function(a,c){c||-1!=R(d,a.history)||(Je(a.history,b),d.push(a.history));Hb(a,b,null,qd(a,b))})}}function uc(a,b,c){if(!a.cm||!a.cm.state.suppressEdits){for(var d=a.history,e,f=a.sel,g="undo"==b?d.done:
d.undone,h="undo"==b?d.undone:d.done,k=0;k<g.length&&(e=g[k],c?!e.ranges||e.equals(a.sel):e.ranges);k++);if(k!=g.length){for(d.lastOrigin=d.lastSelOrigin=null;;)if(e=g.pop(),e.ranges){fc(e,h);if(c&&!e.equals(a.sel)){O(a,e,{clearRedo:!1});return}f=e}else break;c=[];fc(f,h);h.push({changes:c,generation:d.generation});d.generation=e.generation||++d.maxGeneration;d=ba(a,"beforeChange")||a.cm&&ba(a.cm,"beforeChange");for(k=e.changes.length-1;0<=k;--k){var m=e.changes[k];m.origin=b;if(d&&!Fe(a,m,!1)){g.length=
0;break}c.push(rd(a,m));f=k?pd(a,m):A(g);Hb(a,m,f,Ke(a,m));!k&&a.cm&&a.cm.scrollIntoView({from:m.from,to:Oa(m)});var n=[];Pa(a,function(a,b){b||-1!=R(n,a.history)||(Je(a.history,m),n.push(a.history));Hb(a,m,null,Ke(a,m))})}}}}function Le(a,b){if(0!=b&&(a.first+=b,a.sel=new ua(ac(a.sel.ranges,function(a){return new C(q(a.anchor.line+b,a.anchor.ch),q(a.head.line+b,a.head.ch))}),a.sel.primIndex),a.cm)){W(a.cm,a.first,a.first-b,b);for(var c=a.cm.display,d=c.viewFrom;d<c.viewTo;d++)wa(a.cm,d,"gutter")}}
function Hb(a,b,c,d){if(a.cm&&!a.cm.curOp)return K(a.cm,Hb)(a,b,c,d);if(b.to.line<a.first)Le(a,b.text.length-1-(b.to.line-b.from.line));else if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);Le(a,e);b={from:q(a.first,0),to:q(b.to.line+e,b.to.ch),text:[A(b.text)],origin:b.origin}}e=a.lastLine();b.to.line>e&&(b={from:b.from,to:q(e,r(a,e).text.length),text:[b.text[0]],origin:b.origin});b.removed=La(a,b.from,b.to);c||(c=pd(a,b));a.cm?Uf(a.cm,b,d):sd(a,
b,d);ec(a,c,qa)}}function Uf(a,b,c){var d=a.doc,e=a.display,f=b.from,g=b.to,h=!1,k=f.line;a.options.lineWrapping||(k=I(ra(r(d,f.line))),d.iter(k,g.line+1,function(a){if(a==e.maxLine)return h=!0}));-1<d.sel.contains(b.from,b.to)&&fe(a);sd(d,b,c,u(a));a.options.lineWrapping||(d.iter(k,f.line+b.text.length,function(a){var b=Va(a);b>e.maxLineLength&&(e.maxLine=a,e.maxLineLength=b,e.maxLineChanged=!0,h=!1)}),h&&(a.curOp.updateMaxLine=!0));d.frontier=Math.min(d.frontier,f.line);pb(a,400);c=b.text.length-
(g.line-f.line)-1;b.full?W(a):f.line!=g.line||1!=b.text.length||Me(a.doc,b)?W(a,f.line,g.line+1,c):wa(a,f.line,"text");c=ba(a,"changes");if((d=ba(a,"change"))||c)b={from:f,to:g,text:b.text,removed:b.removed,origin:b.origin},d&&S(a,"change",a,b),c&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(b);a.display.selForContextMenu=null}function eb(a,b,c,d,e){d||(d=c);if(0>z(d,c)){var f=d;d=c;c=f}"string"==typeof b&&(b=a.splitLines(b));Ya(a,{from:c,to:d,text:b,origin:e})}function mc(a,b,c,d,e){var f=
a.display,g=Fa(a.display);0>c&&(c=0);var h=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:f.scroller.scrollTop,k=Qc(a),m={};e-c>k&&(e=c+k);var n=a.doc.height+Jc(f),v=c<g,g=e>n-g;c<h?m.scrollTop=v?0:c:e>h+k&&(c=Math.min(c,(g?n:e)-k),c!=h&&(m.scrollTop=c));h=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:f.scroller.scrollLeft;a=za(a)-(a.options.fixedGutter?f.gutters.offsetWidth:0);(f=d-b>a)&&(d=b+a);10>b?m.scrollLeft=0:b<h?m.scrollLeft=Math.max(0,b-(f?0:10)):d>a+h-3&&(m.scrollLeft=d+(f?0:
10)-a);return m}function vc(a,b,c){null==b&&null==c||wc(a);null!=b&&(a.curOp.scrollLeft=(null==a.curOp.scrollLeft?a.doc.scrollLeft:a.curOp.scrollLeft)+b);null!=c&&(a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+c)}function Za(a){wc(a);var b=a.getCursor(),c=b,d=b;a.options.lineWrapping||(c=b.ch?q(b.line,b.ch-1):b,d=q(b.line,b.ch+1));a.curOp.scrollToPos={from:c,to:d,margin:a.options.cursorScrollMargin,isCursor:!0}}function wc(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=
null;var c=oe(a,b.from),d=oe(a,b.to),b=mc(a,Math.min(c.left,d.left),Math.min(c.top,d.top)-b.margin,Math.max(c.right,d.right),Math.max(c.bottom,d.bottom)+b.margin);a.scrollTo(b.scrollLeft,b.scrollTop)}}function zb(a,b,c,d){var e=a.doc,f;null==c&&(c="add");"smart"==c&&(e.mode.indent?f=Cb(a,b):c="prev");var g=a.options.tabSize,h=r(e,b),k=ia(h.text,null,g);h.stateAfter&&(h.stateAfter=null);var m=h.text.match(/^\s*/)[0],n;if(!d&&!/\S/.test(h.text))n=0,c="not";else if("smart"==c&&(n=e.mode.indent(f,h.text.slice(m.length),
h.text),n==Ae||150<n)){if(!d)return;c="prev"}"prev"==c?n=b>e.first?ia(r(e,b-1).text,null,g):0:"add"==c?n=k+a.options.indentUnit:"subtract"==c?n=k-a.options.indentUnit:"number"==typeof c&&(n=k+c);n=Math.max(0,n);c="";d=0;if(a.options.indentWithTabs)for(a=Math.floor(n/g);a;--a)d+=g,c+="\t";d<n&&(c+=Ne(n-d));if(c!=m)return eb(e,c,q(b,0),q(b,m.length),"+input"),h.stateAfter=null,!0;for(a=0;a<e.sel.ranges.length;a++)if(g=e.sel.ranges[a],g.head.line==b&&g.head.ch<m.length){d=q(b,m.length);Zc(e,a,new C(d,
d));break}}function xc(a,b,c,d){var e=b,f=b;"number"==typeof b?f=r(a,Math.max(a.first,Math.min(b,a.first+a.size-1))):e=I(b);if(null==e)return null;d(f,e)&&a.cm&&wa(a.cm,e,c);return f}function fb(a,b){for(var c=a.doc.sel.ranges,d=[],e=0;e<c.length;e++){for(var f=b(c[e]);d.length&&0>=z(f.from,A(d).to);){var g=d.pop();if(0>z(g.from,f.from)){f.from=g.from;break}}d.push(f)}Y(a,function(){for(var b=d.length-1;0<=b;b--)eb(a.doc,"",d[b].from,d[b].to,"+delete");Za(a)})}function td(a,b,c,d,e){function f(b){var d=
(e?id:Oe)(m,h,c,!0);if(null==d){if(b=!b)b=g+c,b<a.first||b>=a.first+a.size?b=n=!1:(g=b,b=m=r(a,b));if(b)h=e?(0>c?lc:kc)(m):0>c?m.text.length:0;else return n=!1}else h=d;return!0}var g=b.line,h=b.ch,k=c,m=r(a,g),n=!0;if("char"==d)f();else if("column"==d)f(!0);else if("word"==d||"group"==d){var v=null;d="group"==d;b=a.cm&&a.cm.getHelper(b,"wordChars");for(var p=!0;!(0>c)||f(!p);p=!1){var l=m.text.charAt(h)||"\n",l=yc(l,b)?"w":d&&"\n"==l?"n":!d||/\s/.test(l)?null:"p";!d||p||l||(l="s");if(v&&v!=l){0>
c&&(c=1,f());break}l&&(v=l);if(0<c&&!f(!p))break}}k=gc(a,q(g,h),k,!0);n||(k.hitSide=!0);return k}function Pe(a,b,c,d){var e=a.doc,f=b.left,g;for("page"==d?g=b.top+c*(Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight)-(0>c?1.5:.5)*Fa(a.display)):"line"==d&&(g=0<c?b.bottom+3:b.top-3);;){b=hd(a,f,g);if(!b.outside)break;if(0>c?0>=g:g>=e.height){b.hitSide=!0;break}g+=5*c}return b}function x(a,b,c,d){l.defaults[a]=b;c&&(Ta[a]=d?function(a,b,d){d!=Ed&&c(a,
b,d)}:c)}function Vf(a){var b=a.split(/-(?!$)/);a=b[b.length-1];for(var c,d,e,f,g=0;g<b.length-1;g++){var h=b[g];if(/^(cmd|meta|m)$/i.test(h))f=!0;else if(/^a(lt)?$/i.test(h))c=!0;else if(/^(c|ctrl|control)$/i.test(h))d=!0;else if(/^s(hift)$/i.test(h))e=!0;else throw Error("Unrecognized modifier name: "+h);}c&&(a="Alt-"+a);d&&(a="Ctrl-"+a);f&&(a="Cmd-"+a);e&&(a="Shift-"+a);return a}function zc(a){return"string"==typeof a?Ca[a]:a}function gb(a,b,c,d,e){if(d&&d.shared)return Wf(a,b,c,d,e);if(a.cm&&
!a.cm.curOp)return K(a.cm,gb)(a,b,c,d,e);var f=new Qa(a,e);e=z(b,c);d&&da(d,f,!1);if(0<e||0==e&&!1!==f.clearWhenEmpty)return f;f.replacedWith&&(f.collapsed=!0,f.widgetNode=t("span",[f.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||f.widgetNode.setAttribute("cm-ignore-events","true"),d.insertLeft&&(f.widgetNode.insertLeft=!0));if(f.collapsed){if(Qe(a,b.line,b,c,f)||b.line!=c.line&&Qe(a,c.line,b,c,f))throw Error("Inserting collapsed marker partially overlapping an existing one");Ba=!0}f.addToHistory&&
Ie(a,{from:b,to:c,origin:"markText"},a.sel,NaN);var g=b.line,h=a.cm,k;a.iter(g,c.line+1,function(a){h&&f.collapsed&&!h.options.lineWrapping&&ra(a)==h.display.maxLine&&(k=!0);f.collapsed&&g!=b.line&&la(a,0);var d=new Ac(f,g==b.line?b.ch:null,g==c.line?c.ch:null);a.markedSpans=a.markedSpans?a.markedSpans.concat([d]):[d];d.marker.attachLine(a);++g});f.collapsed&&a.iter(b.line,c.line+1,function(b){Ga(a,b)&&la(b,0)});f.clearOnEnter&&y(f,"beforeCursorEnter",function(){f.clear()});f.readOnly&&(Ge=!0,(a.history.done.length||
a.history.undone.length)&&a.clearHistory());f.collapsed&&(f.id=++ud,f.atomic=!0);if(h){k&&(h.curOp.updateMaxLine=!0);if(f.collapsed)W(h,b.line,c.line+1);else if(f.className||f.title||f.startStyle||f.endStyle||f.css)for(d=b.line;d<=c.line;d++)wa(h,d,"text");f.atomic&&ge(h.doc);S(h,"markerAdded",h,f)}return f}function Wf(a,b,c,d,e){d=da(d);d.shared=!1;var f=[gb(a,b,c,d,e)],g=f[0],h=d.widgetNode;Pa(a,function(a){h&&(d.widgetNode=h.cloneNode(!0));f.push(gb(a,B(a,b),B(a,c),d,e));for(var m=0;m<a.linked.length;++m)if(a.linked[m].isParent)return;
g=A(f)});return new Bc(f,g)}function Re(a){return a.findMarks(q(a.first,0),a.clipPos(q(a.lastLine())),function(a){return a.parent})}function Xf(a){for(var b=0;b<a.length;b++){var c=a[b],d=[c.primary.doc];Pa(c.primary.doc,function(a){d.push(a)});for(var e=0;e<c.markers.length;e++){var f=c.markers[e];-1==R(d,f.doc)&&(f.parent=null,c.markers.splice(e--,1))}}}function Ac(a,b,c){this.marker=a;this.from=b;this.to=c}function Ib(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function qd(a,
b){if(b.full)return null;var c=Ab(a,b.from.line)&&r(a,b.from.line).markedSpans,d=Ab(a,b.to.line)&&r(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=0==z(b.from,b.to);if(c)for(var h=0,k;h<c.length;++h){var m=c[h],n=m.marker;if(null==m.from||(n.inclusiveLeft?m.from<=e:m.from<e)||!(m.from!=e||"bookmark"!=n.type||g&&m.marker.insertLeft)){var v=null==m.to||(n.inclusiveRight?m.to>=e:m.to>e);(k||(k=[])).push(new Ac(n,m.from,v?null:m.to))}}c=k;if(d)for(var h=0,p;h<d.length;++h)if(k=
d[h],m=k.marker,null==k.to||(m.inclusiveRight?k.to>=f:k.to>f)||k.from==f&&"bookmark"==m.type&&(!g||k.marker.insertLeft))n=null==k.from||(m.inclusiveLeft?k.from<=f:k.from<f),(p||(p=[])).push(new Ac(m,n?null:k.from-f,null==k.to?null:k.to-f));d=p;g=1==b.text.length;p=A(b.text).length+(g?e:0);if(c)for(f=0;f<c.length;++f)if(h=c[f],null==h.to)(k=Ib(d,h.marker),k)?g&&(h.to=null==k.to?null:k.to+p):h.to=e;if(d)for(f=0;f<d.length;++f)h=d[f],null!=h.to&&(h.to+=p),null==h.from?(k=Ib(c,h.marker),k||(h.from=p,
g&&(c||(c=[])).push(h))):(h.from+=p,g&&(c||(c=[])).push(h));c&&(c=Se(c));d&&d!=c&&(d=Se(d));e=[c];if(!g){var g=b.text.length-2,l;if(0<g&&c)for(f=0;f<c.length;++f)null==c[f].to&&(l||(l=[])).push(new Ac(c[f].marker,null,null));for(f=0;f<g;++f)e.push(l);e.push(d)}return e}function Se(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&a.splice(b--,1)}return a.length?a:null}function Ke(a,b){var c;if(c=b["spans_"+a.id]){for(var d=0,e=[];d<b.text.length;++d)e.push(Yf(c[d]));
c=e}else c=null;d=qd(a,b);if(!c)return d;if(!d)return c;for(e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g){var h=0;a:for(;h<g.length;++h){for(var k=g[h],m=0;m<f.length;++m)if(f[m].marker==k.marker)continue a;f.push(k)}}else g&&(c[e]=g)}return c}function Tf(a,b,c){var d=null;a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=R(d,c)||(d||(d=[])).push(c)}});if(!d)return null;a=[{from:b,to:c}];for(b=0;b<d.length;++b){c=
d[b];for(var e=c.find(0),f=0;f<a.length;++f){var g=a[f];if(!(0>z(g.to,e.from)||0<z(g.from,e.to))){var h=[f,1],k=z(g.from,e.from),m=z(g.to,e.to);(0>k||!c.inclusiveLeft&&!k)&&h.push({from:g.from,to:e.from});(0<m||!c.inclusiveRight&&!m)&&h.push({from:e.to,to:g.to});a.splice.apply(a,h);f+=h.length-1}}}return a}function Te(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function Ue(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=
b}}function Ve(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;var c=a.find(),d=b.find(),e=z(c.from,d.from)||(a.inclusiveLeft?-1:0)-(b.inclusiveLeft?-1:0);return e?-e:(c=z(c.to,d.to)||(a.inclusiveRight?1:0)-(b.inclusiveRight?1:0))?c:b.id-a.id}function Ia(a,b){var c=Ba&&a.markedSpans,d;if(c)for(var e,f=0;f<c.length;++f)e=c[f],e.marker.collapsed&&null==(b?e.from:e.to)&&(!d||0>Ve(d,e.marker))&&(d=e.marker);return d}function Qe(a,b,c,d,e){a=r(a,b);if(a=Ba&&a.markedSpans)for(b=0;b<a.length;++b){var f=
a[b];if(f.marker.collapsed){var g=f.marker.find(0),h=z(g.from,c)||(f.marker.inclusiveLeft?-1:0)-(e.inclusiveLeft?-1:0),k=z(g.to,d)||(f.marker.inclusiveRight?1:0)-(e.inclusiveRight?1:0);if(!(0<=h&&0>=k||0>=h&&0<=k)&&(0>=h&&(0<z(g.to,c)||f.marker.inclusiveRight&&e.inclusiveLeft)||0<=h&&(0>z(g.from,d)||f.marker.inclusiveLeft&&e.inclusiveRight)))return!0}}}function ra(a){for(var b;b=Ia(a,!0);)a=b.find(-1,!0).line;return a}function Pc(a,b){var c=r(a,b),d=ra(c);return c==d?b:I(d)}function Jd(a,b){if(b>
a.lastLine())return b;var c=r(a,b),d;if(!Ga(a,c))return b;for(;d=Ia(c,!1);)c=d.find(1,!0).line;return I(c)+1}function Ga(a,b){var c=Ba&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed&&(null==d.from||!d.marker.widgetNode&&0==d.from&&d.marker.inclusiveLeft&&vd(a,b,d)))return!0}function vd(a,b,c){if(null==c.to)return b=c.marker.find(1,!0),vd(a,b.line,Ib(b.line.markedSpans,c.marker));if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var d,e=0;e<b.markedSpans.length;++e)if(d=
b.markedSpans[e],d.marker.collapsed&&!d.marker.widgetNode&&d.from==c.to&&(null==d.to||d.to!=c.from)&&(d.marker.inclusiveLeft||c.marker.inclusiveRight)&&vd(a,b,d))return!0}function Eb(a){if(null!=a.height)return a.height;var b=a.doc.cm;if(!b)return 0;if(!Yc(document.body,a.node)){var c="position: relative;";a.coverGutter&&(c+="margin-left: -"+b.display.gutters.offsetWidth+"px;");a.noHScroll&&(c+="width: "+b.display.wrapper.clientWidth+"px;");ca(b.display.measure,t("div",[a.node],null,c))}return a.height=
a.node.offsetHeight}function Zf(a,b,c,d){var e=new Cc(a,c,d),f=a.cm;f&&e.noHScroll&&(f.display.alignWidgets=!0);xc(a,b,"widget",function(b){var c=b.widgets||(b.widgets=[]);null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e);e.line=b;f&&!Ga(a,b)&&(c=na(b)<a.scrollTop,la(b,b.height+Eb(e)),c&&vc(f,null,e.height),f.curOp.forceUpdate=!0);return!0});return e}function We(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+
a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:(new RegExp("(?:^|s)"+c[2]+"(?:$|s)")).test(b[d])||(b[d]+=" "+c[2])}return a}function Xe(a,b){if(a.blankLine)return a.blankLine(b);if(a.innerMode){var c=l.innerMode(a,b);if(c.mode.blankLine)return c.mode.blankLine(c.state)}}function wd(a,b,c,d){for(var e=0;10>e;e++){d&&(d[0]=l.innerMode(a,c).mode);var f=a.token(b,c);if(b.pos>b.start)return f}throw Error("Mode "+a.name+" failed to advance stream.");}function Ye(a,b,
c,d){function e(a){return{start:n.start,end:n.pos,string:n.current(),type:h||null,state:a?bb(f.mode,m):m}}var f=a.doc,g=f.mode,h;b=B(f,b);var k=r(f,b.line),m=Cb(a,b.line,c),n=new Dc(k.text,a.options.tabSize),v;for(d&&(v=[]);(d||n.pos<b.ch)&&!n.eol();)n.start=n.pos,h=wd(g,n,m),d&&v.push(e(!0));return d?v:e()}function Ze(a,b,c,d,e,f,g){var h=c.flattenSpans;null==h&&(h=a.options.flattenSpans);var k=0,m=null,n=new Dc(b,a.options.tabSize),v,p=a.options.addModeClass&&[null];for(""==b&&We(Xe(c,d),f);!n.eol();){n.pos>
a.options.maxHighlightLength?(h=!1,g&&ad(a,b,d,n.pos),n.pos=b.length,v=null):v=We(wd(c,n,d,p),f);if(p){var l=p[0].name;l&&(v="m-"+(v?l+" "+v:l))}if(!h||m!=v){for(;k<n.start;)k=Math.min(n.start,k+5E4),e(k,m);m=v}n.start=n.pos}for(;k<n.pos;)a=Math.min(n.pos,k+5E4),e(a,m),k=a}function je(a,b,c,d){var e=[a.state.modeGen],f={};Ze(a,b.text,a.doc.mode,c,function(a,b){e.push(a,b)},f,d);for(c=0;c<a.state.overlays.length;++c){var g=a.state.overlays[c],h=1,k=0;Ze(a,b.text,g.mode,!0,function(a,b){for(var c=h;k<
a;){var d=e[h];d>a&&e.splice(h,1,a,e[h+1],d);h+=2;k=Math.min(a,d)}if(b)if(g.opaque)e.splice(c,h-c,a,"cm-overlay "+b),h=c+2;else for(;c<h;c+=2)d=e[c+1],e[c+1]=(d?d+" ":"")+"cm-overlay "+b},f)}return{styles:e,classes:f.bgClass||f.textClass?f:null}}function $e(a,b,c){if(!b.styles||b.styles[0]!=a.state.modeGen){var d=je(a,b,b.stateAfter=Cb(a,I(b)));b.styles=d.styles;d.classes?b.styleClasses=d.classes:b.styleClasses&&(b.styleClasses=null);c===a.doc.frontier&&a.doc.frontier++}return b.styles}function ad(a,
b,c,d){var e=a.doc.mode,f=new Dc(b,a.options.tabSize);f.start=f.pos=d||0;for(""==b&&Xe(e,c);!f.eol()&&f.pos<=a.options.maxHighlightLength;)wd(e,f,c),f.start=f.pos}function af(a,b){if(!a||/^\s*$/.test(a))return null;var c=b.addModeClass?$f:ag;return c[a]||(c[a]=a.replace(/\S+/g,"cm-$&"))}function Qd(a,b){var c=t("span",null,null,N?"padding-right: .1px":null),c={pre:t("pre",[c],"CodeMirror-line"),content:c,col:0,pos:0,cm:a,splitSpaces:(E||N)&&a.getOption("lineWrapping")};b.measure={};for(var d=0;d<=
(b.rest?b.rest.length:0);d++){var e=d?b.rest[d-1]:b.line,f;c.pos=0;c.addToken=bg;var g;if(null!=xd)g=xd;else{g=ca(a.display.measure,document.createTextNode("A\u062eA"));var h=Ma(g,0,1).getBoundingClientRect();g=h&&h.left!=h.right?xd=3>Ma(g,1,2).getBoundingClientRect().right-h.right:!1}g&&(f=ga(e))&&(c.addToken=cg(c.addToken,f));c.map=[];h=b!=a.display.externalMeasured&&I(e);a:{g=c;var h=$e(a,e,h),k=e.markedSpans,m=e.text,n=0;if(k)for(var l=m.length,p=0,q=1,r="",H=void 0,w=void 0,x=0,y=void 0,u=void 0,
D=void 0,B=void 0,z=void 0;;){if(x==p){for(var y=u=D=B=w="",z=null,x=Infinity,X=[],F=0;F<k.length;++F){var A=k[F],C=A.marker;"bookmark"==C.type&&A.from==p&&C.widgetNode?X.push(C):A.from<=p&&(null==A.to||A.to>p||C.collapsed&&A.to==p&&A.from==p)?(null!=A.to&&A.to!=p&&x>A.to&&(x=A.to,u=""),C.className&&(y+=" "+C.className),C.css&&(w=C.css),C.startStyle&&A.from==p&&(D+=" "+C.startStyle),C.endStyle&&A.to==x&&(u+=" "+C.endStyle),C.title&&!B&&(B=C.title),C.collapsed&&(!z||0>Ve(z.marker,C))&&(z=A)):A.from>
p&&x>A.from&&(x=A.from)}if(z&&(z.from||0)==p){bf(g,(null==z.to?l+1:z.to)-p,z.marker,null==z.from);if(null==z.to)break a;z.to==p&&(z=!1)}if(!z&&X.length)for(F=0;F<X.length;++F)bf(g,0,X[F])}if(p>=l)break;for(X=Math.min(l,x);;){if(r){F=p+r.length;z||(A=F>X?r.slice(0,X-p):r,g.addToken(g,A,H?H+y:y,D,p+A.length==x?u:"",B,w));if(F>=X){r=r.slice(X-p);p=X;break}p=F;D=""}r=m.slice(n,n=h[q++]);H=af(h[q++],g.cm.options)}}else for(var q=1;q<h.length;q+=2)g.addToken(g,m.slice(n,n=h[q]),af(h[q+1],g.cm.options))}e.styleClasses&&
(e.styleClasses.bgClass&&(c.bgClass=yd(e.styleClasses.bgClass,c.bgClass||"")),e.styleClasses.textClass&&(c.textClass=yd(e.styleClasses.textClass,c.textClass||"")));0==c.map.length&&c.map.push(0,0,c.content.appendChild(dg(a.display.measure)));0==d?(b.measure.map=c.map,b.measure.cache={}):((b.measure.maps||(b.measure.maps=[])).push(c.map),(b.measure.caches||(b.measure.caches=[])).push({}))}N&&/\bcm-tab\b/.test(c.content.lastChild.className)&&(c.content.className="cm-tab-wrap-hack");M(a,"renderLine",
a,b.line,c.pre);c.pre.className&&(c.textClass=yd(c.pre.className,c.textClass||""));return c}function bg(a,b,c,d,e,f,g){if(b){var h=a.splitSpaces?b.replace(/ {3,}/g,eg):b,k=a.cm.state.specialChars,m=!1;if(k.test(b))for(var n=document.createDocumentFragment(),l=0;;){k.lastIndex=l;var p=k.exec(b),q=p?p.index-l:b.length-l;if(q){var r=document.createTextNode(h.slice(l,l+q));E&&9>J?n.appendChild(t("span",[r])):n.appendChild(r);a.map.push(a.pos,a.pos+q,r);a.col+=q;a.pos+=q}if(!p)break;l+=q+1;"\t"==p[0]?
(r=a.cm.options.tabSize,p=r-a.col%r,r=n.appendChild(t("span",Ne(p),"cm-tab")),r.setAttribute("role","presentation"),r.setAttribute("cm-text","\t"),a.col+=p):("\r"==p[0]||"\n"==p[0]?(r=n.appendChild(t("span","\r"==p[0]?"\u240d":"\u2424","cm-invalidchar")),r.setAttribute("cm-text",p[0])):(r=a.cm.options.specialCharPlaceholder(p[0]),r.setAttribute("cm-text",p[0]),E&&9>J?n.appendChild(t("span",[r])):n.appendChild(r)),a.col+=1);a.map.push(a.pos,a.pos+1,r);a.pos++}else{a.col+=b.length;var n=document.createTextNode(h);
a.map.push(a.pos,a.pos+b.length,n);E&&9>J&&(m=!0);a.pos+=b.length}if(c||d||e||m||g)return b=c||"",d&&(b+=d),e&&(b+=e),d=t("span",[n],b,g),f&&(d.title=f),a.content.appendChild(d);a.content.appendChild(n)}}function eg(a){for(var b=" ",c=0;c<a.length-2;++c)b+=c%2?" ":"\u00a0";return b+" "}function cg(a,b){return function(c,d,e,f,g,h,k){e=e?e+" cm-force-border":"cm-force-border";for(var m=c.pos,n=m+d.length;;){for(var l=0;l<b.length;l++){var p=b[l];if(p.to>m&&p.from<=m)break}if(p.to>=n)return a(c,d,e,
f,g,h,k);a(c,d.slice(0,p.to-m),e,f,null,h,k);f=null;d=d.slice(p.to-m);m=p.to}}}function bf(a,b,c,d){var e=!d&&c.widgetNode;e&&a.map.push(a.pos,a.pos+b,e);!d&&a.cm.display.input.needsContentAttribute&&(e||(e=a.content.appendChild(document.createElement("span"))),e.setAttribute("cm-marker",c.id));e&&(a.cm.display.input.setUneditable(e),a.content.appendChild(e));a.pos+=b}function Me(a,b){return 0==b.from.ch&&0==b.to.ch&&""==A(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function sd(a,b,c,d){function e(a,
c,e){a.text=c;a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null);null!=a.order&&(a.order=null);Te(a);Ue(a,e);c=d?d(a):1;c!=a.height&&la(a,c);S(a,"change",a,b)}function f(a,b){for(var e=a,f=[];e<b;++e)f.push(new Jb(k[e],c?c[e]:null,d));return f}var g=b.from,h=b.to,k=b.text,m=r(a,g.line),n=r(a,h.line),l=A(k),p=c?c[k.length-1]:null,q=h.line-g.line;if(b.full)a.insert(0,f(0,k.length)),a.remove(k.length,a.size-k.length);else if(Me(a,b)){var t=f(0,k.length-1);e(n,n.text,p);q&&a.remove(g.line,q);
t.length&&a.insert(g.line,t)}else m==n?1==k.length?e(m,m.text.slice(0,g.ch)+l+m.text.slice(h.ch),p):(t=f(1,k.length-1),t.push(new Jb(l+m.text.slice(h.ch),p,d)),e(m,m.text.slice(0,g.ch)+k[0],c?c[0]:null),a.insert(g.line+1,t)):1==k.length?(e(m,m.text.slice(0,g.ch)+k[0]+n.text.slice(h.ch),c?c[0]:null),a.remove(g.line+1,q)):(e(m,m.text.slice(0,g.ch)+k[0],c?c[0]:null),e(n,l+n.text.slice(h.ch),p),t=f(1,k.length-1),1<q&&a.remove(g.line+1,q-1),a.insert(g.line+1,t));S(a,"change",a,b)}function Kb(a){this.lines=
a;this.parent=null;for(var b=0,c=0;b<a.length;++b)a[b].parent=this,c+=a[b].height;this.height=c}function Lb(a){this.children=a;for(var b=0,c=0,d=0;d<a.length;++d){var e=a[d],b=b+e.chunkSize(),c=c+e.height;e.parent=this}this.size=b;this.height=c;this.parent=null}function Pa(a,b,c){function d(a,f,g){if(a.linked)for(var h=0;h<a.linked.length;++h){var k=a.linked[h];if(k.doc!=f){var m=g&&k.sharedHist;if(!c||m)b(k.doc,m),d(k.doc,a,m)}}}d(a,null,!0)}function Dd(a,b){if(b.cm)throw Error("This document is already in use.");
a.doc=b;b.cm=a;F(a);G(a);a.options.lineWrapping||Wa(a);a.options.mode=b.modeOption;W(a)}function r(a,b){b-=a.first;if(0>b||b>=a.size)throw Error("There is no line "+(b+a.first)+" in the document.");for(var c=a;!c.lines;)for(var d=0;;++d){var e=c.children[d],f=e.chunkSize();if(b<f){c=e;break}b-=f}return c.lines[b]}function La(a,b,c){var d=[],e=b.line;a.iter(b.line,c.line+1,function(a){a=a.text;e==c.line&&(a=a.slice(0,c.ch));e==b.line&&(a=a.slice(b.ch));d.push(a);++e});return d}function zd(a,b,c){var d=
[];a.iter(b,c,function(a){d.push(a.text)});return d}function la(a,b){var c=b-a.height;if(c)for(var d=a;d;d=d.parent)d.height+=c}function I(a){if(null==a.parent)return null;var b=a.parent;a=R(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var d=0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a+b.first}function Ja(a,b){var c=a.first;a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],f=e.height;if(b<f){a=e;continue a}b-=f;c+=e.chunkSize()}return c}while(!a.lines);for(d=0;d<
a.lines.length;++d){e=a.lines[d].height;if(b<e)break;b-=e}return c+d}function na(a){a=ra(a);for(var b=0,c=a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;else b+=e.height}for(a=c.parent;a;c=a,a=c.parent)for(d=0;d<a.children.length&&(e=a.children[d],e!=c);++d)b+=e.height;return b}function ga(a){var b=a.order;null==b&&(b=a.order=fg(a.text));return b}function Ec(a){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOrigin=this.lastSelOrigin=
this.lastOp=this.lastSelOp=null;this.generation=this.maxGeneration=a||1}function rd(a,b){var c={from:Uc(b.from),to:Oa(b),text:La(a,b.from,b.to)};cf(a,c,b.from.line,b.to.line+1);Pa(a,function(a){cf(a,c,b.from.line,b.to.line+1)},!0);return c}function ce(a){for(;a.length;)if(A(a).ranges)a.pop();else break}function Ie(a,b,c,d){var e=a.history;e.undone.length=0;var f=+new Date,g,h;if(h=e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastModTime>f-a.cm.options.historyEventDelay||
"*"==b.origin.charAt(0)))e.lastOp==d?(ce(e.done),g=A(e.done)):e.done.length&&!A(e.done).ranges?g=A(e.done):1<e.done.length&&!e.done[e.done.length-2].ranges?(e.done.pop(),g=A(e.done)):g=void 0,h=g;if(h){var k=A(g.changes);0==z(b.from,b.to)&&0==z(b.from,k.to)?k.to=Oa(b):g.changes.push(rd(a,b))}else for((g=A(e.done))&&g.ranges||fc(a.sel,e.done),g={changes:[rd(a,b)],generation:e.generation},e.done.push(g);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||e.done.shift();e.done.push(c);e.generation=
++e.maxGeneration;e.lastModTime=e.lastSelTime=f;e.lastOp=e.lastSelOp=d;e.lastOrigin=e.lastSelOrigin=b.origin;k||M(a,"historyAdded")}function fc(a,b){var c=A(b);c&&c.ranges&&c.equals(a)||b.push(a)}function cf(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans);++f})}function Yf(a){if(!a)return null;for(var b=0,c;b<a.length;++b)a[b].marker.explicitlyCleared?c||(c=a.slice(0,b)):c&&c.push(a[b]);
return c?c.length?c:null:a}function hb(a,b,c){for(var d=0,e=[];d<a.length;++d){var f=a[d];if(f.ranges)e.push(c?ua.prototype.deepCopy.call(f):f);else{var f=f.changes,g=[];e.push({changes:g});for(var h=0;h<f.length;++h){var k=f[h],m;g.push({from:k.from,to:k.to,text:k.text});if(b)for(var n in k)(m=n.match(/^spans_(\d+)$/))&&-1<R(b,Number(m[1]))&&(A(g)[n]=k[n],delete k[n])}}}return e}function df(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function ef(a,b,c,d){for(var e=0;e<a.length;++e){var f=
a[e],g=!0;if(f.ranges){f.copied||(f=a[e]=f.deepCopy(),f.copied=!0);for(var h=0;h<f.ranges.length;h++)df(f.ranges[h].anchor,b,c,d),df(f.ranges[h].head,b,c,d)}else{for(h=0;h<f.changes.length;++h){var k=f.changes[h];if(c<k.from.line)k.from=q(k.from.line+d,k.from.ch),k.to=q(k.to.line+d,k.to.ch);else if(b<=k.to.line){g=!1;break}}g||(a.splice(0,e+1),e=0)}}}function Je(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;ef(a.done,c,d,e);ef(a.undone,c,d,e)}function nd(a){return null!=a.defaultPrevented?
a.defaultPrevented:0==a.returnValue}function xe(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));fa&&a.ctrlKey&&1==b&&(b=3);return b}function S(a,b){function c(a){return function(){a.apply(null,e)}}var d=a._handlers&&a._handlers[b];if(d){var e=Array.prototype.slice.call(arguments,2),f;cb?f=cb.delayedCallbacks:Mb?f=Mb:(f=Mb=[],setTimeout(gg,0));for(var g=0;g<d.length;++g)f.push(c(d[g]))}}function gg(){var a=Mb;Mb=null;for(var b=0;b<a.length;++b)a[b]()}function sa(a,b,c){"string"==
typeof b&&(b={type:b,preventDefault:function(){this.defaultPrevented=!0}});M(a,c||b.type,a,b);return nd(b)||b.codemirrorIgnore}function fe(a){var b=a._handlers&&a._handlers.cursorActivity;if(b){a=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]);for(var c=0;c<b.length;++c)-1==R(a,b[c])&&a.push(b[c])}}function ba(a,b){var c=a._handlers&&a._handlers[b];return c&&0<c.length}function ib(a){a.prototype.on=function(a,c){y(this,a,c)};a.prototype.off=function(a,c){ta(this,a,c)}}function mb(){this.id=
null}function ye(a,b,c){for(var d=0,e=0;;){var f=a.indexOf("\t",d);-1==f&&(f=a.length);var g=f-d;if(f==a.length||e+g>=b)return d+Math.min(g,b-e);e+=f-d;e+=c-e%c;d=f+1;if(e>=b)return d}}function Ne(a){for(;Fc.length<=a;)Fc.push(A(Fc)+" ");return Fc[a]}function A(a){return a[a.length-1]}function R(a,b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function ac(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function Nb(){}function ff(a,b){var c;Object.create?c=Object.create(a):
(Nb.prototype=a,c=new Nb);b&&da(b,c);return c}function da(a,b,c){b||(b={});for(var d in a)!a.hasOwnProperty(d)||!1===c&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function nb(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function yc(a,b){return b?-1<b.source.indexOf("\\w")&&gf(a)?!0:b.test(a):gf(a)}function hf(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function Db(a){return 768<=a.charCodeAt(0)&&hg.test(a)}function t(a,b,c,d){a=document.createElement(a);
c&&(a.className=c);d&&(a.style.cssText=d);if("string"==typeof b)a.appendChild(document.createTextNode(b));else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function Ha(a){for(var b=a.childNodes.length;0<b;--b)a.removeChild(a.firstChild);return a}function ca(a,b){return Ha(a).appendChild(b)}function oa(){for(var a=document.activeElement;a&&a.root&&a.root.activeElement;)a=a.root.activeElement;return a}function Ob(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}function yd(a,b){for(var c=
a.split(" "),d=0;d<c.length;d++)c[d]&&!Ob(c[d]).test(b)&&(b+=" "+c[d]);return b}function jf(a){if(document.body.getElementsByClassName)for(var b=document.body.getElementsByClassName("CodeMirror"),c=0;c<b.length;c++){var d=b[c].CodeMirror;d&&a(d)}}function sf(){var a;y(window,"resize",function(){null==a&&(a=setTimeout(function(){a=null;jf(Hf)},100))});y(window,"blur",function(){jf(ob)})}function dg(a){if(null==Ad){var b=t("span","\u200b");ca(a,t("span",[b,document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&
(Ad=1>=b.offsetWidth&&2<b.offsetHeight&&!(E&&8>J))}a=Ad?t("span","\u200b"):t("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");a.setAttribute("cm-text","");return a}function zf(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=!1,f=0;f<a.length;++f){var g=a[f];if(g.from<c&&g.to>b||b==c&&g.to==b)d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr"),e=!0}e||d(b,c,"ltr")}function fd(a){return a.level%2?a.to:a.from}function gd(a){return a.level%2?a.from:a.to}function kc(a){return(a=
ga(a))?fd(a[0]):0}function lc(a){var b=ga(a);return b?gd(A(b)):a.text.length}function kf(a,b){var c=r(a.doc,b),d=ra(c);d!=c&&(b=I(d));d=(c=ga(d))?c[0].level%2?lc(d):kc(d):0;return q(b,d)}function lf(a,b){var c=kf(a,b.line),d=r(a.doc,c.line),e=ga(d);return e&&0!=e[0].level?c:(d=Math.max(0,d.text.search(/\S/)),q(c.line,b.line==c.line&&b.ch<=d&&b.ch?0:d))}function bc(a,b){Fb=null;for(var c=0,d;c<a.length;++c){var e=a[c];if(e.from<b&&e.to>b)return c;if(e.from==b||e.to==b)if(null==d)d=c;else{var f;f=e.level;
var g=a[d].level,h=a[0].level;f=f==h?!0:g==h?!1:f<g;if(f)return e.from!=e.to&&(Fb=d),c;e.from!=e.to&&(Fb=c);break}}return d}function Bd(a,b,c,d){if(!d)return b+c;do b+=c;while(0<b&&Db(a.text.charAt(b)));return b}function id(a,b,c,d){var e=ga(a);if(!e)return Oe(a,b,c,d);var f=bc(e,b),g=e[f];for(b=Bd(a,b,g.level%2?-c:c,d);;){if(b>g.from&&b<g.to)return b;if(b==g.from||b==g.to){if(bc(e,b)==f)return b;g=e[f+c];return 0<c==g.level%2?g.to:g.from}g=e[f+=c];if(!g)return null;b=0<c==g.level%2?Bd(a,g.to,-1,
d):Bd(a,g.from,1,d)}}function Oe(a,b,c,d){b+=c;if(d)for(;0<b&&Db(a.text.charAt(b));)b+=c;return 0>b||b>a.text.length?null:b}var Ea=/gecko\/\d/i.test(navigator.userAgent),mf=/MSIE \d/.test(navigator.userAgent),nf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),E=mf||nf,J=E&&(mf?document.documentMode||6:nf[1]),N=/WebKit\//.test(navigator.userAgent),ig=N&&/Qt\/\d+\.\d+/.test(navigator.userAgent),jg=/Chrome\//.test(navigator.userAgent),ja=/Opera\//.test(navigator.userAgent),te=/Apple Computer/.test(navigator.vendor),
kg=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Ff=/PhantomJS/.test(navigator.userAgent),$a=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),lb=$a||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),fa=$a||/Mac/.test(navigator.platform),lg=/win/i.test(navigator.platform),Ra=ja&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Ra&&(Ra=Number(Ra[1]));Ra&&15<=Ra&&(ja=!1,N=!0);var of=fa&&(ig||ja&&(null==Ra||12.11>Ra)),kd=Ea||
E&&9<=J,Ge=!1,Ba=!1;tb.prototype=da({update:function(a){var b=a.scrollWidth>a.clientWidth+1,c=a.scrollHeight>a.clientHeight+1,d=a.nativeBarWidth;c?(this.vert.style.display="block",this.vert.style.bottom=b?d+"px":"0",this.vert.firstChild.style.height=Math.max(0,a.scrollHeight-a.clientHeight+(a.viewHeight-(b?d:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0");b?(this.horiz.style.display="block",this.horiz.style.right=c?d+"px":"0",this.horiz.style.left=a.barLeft+"px",this.horiz.firstChild.style.width=
a.scrollWidth-a.clientWidth+(a.viewWidth-a.barLeft-(c?d:0))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0");!this.checkedOverlay&&0<a.clientHeight&&(0==d&&this.overlayHack(),this.checkedOverlay=!0);return{right:c?d:0,bottom:b?d:0}},setScrollLeft:function(a){this.horiz.scrollLeft!=a&&(this.horiz.scrollLeft=a)},setScrollTop:function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a)},overlayHack:function(){this.horiz.style.minHeight=this.vert.style.minWidth=fa&&!kg?"12px":
"18px";var a=this,b=function(b){(b.target||b.srcElement)!=a.vert&&(b.target||b.srcElement)!=a.horiz&&K(a.cm,pe)(b)};y(this.vert,"mousedown",b);y(this.horiz,"mousedown",b)},clear:function(){var a=this.horiz.parentNode;a.removeChild(this.horiz);a.removeChild(this.vert)}},tb.prototype);H.prototype=da({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},H.prototype);l.scrollbarModel={"native":tb,"null":H};Vb.prototype.signal=function(a,
b){ba(a,b)&&this.events.push(arguments)};Vb.prototype.finish=function(){for(var a=0;a<this.events.length;a++)M.apply(null,this.events[a])};var q=l.Pos=function(a,b){if(!(this instanceof q))return new q(a,b);this.line=a;this.ch=b},z=l.cmpPos=function(a,b){return a.line-b.line||a.ch-b.ch},aa=null;Vc.prototype=da({init:function(a){function b(a){if(d.somethingSelected())aa=d.getSelections(),c.inaccurateSelection&&(c.prevInput="",c.inaccurateSelection=!1,f.value=aa.join("\n"),jb(f));else if(d.options.lineWiseCopyCut){var b=
Vd(d);aa=b.text;"cut"==a.type?d.setSelections(b.ranges,null,qa):(c.prevInput="",f.value=b.text.join("\n"),jb(f))}else return;"cut"==a.type&&(d.state.cutIncoming=!0)}var c=this,d=this.cm,e=this.wrapper=Xd(),f=this.textarea=e.firstChild;a.wrapper.insertBefore(e,a.wrapper.firstChild);$a&&(f.style.width="0px");y(f,"input",function(){E&&9<=J&&c.hasSelection&&(c.hasSelection=null);c.poll()});y(f,"paste",function(a){if(Ud(a,d))return!0;d.state.pasteIncoming=!0;c.fastPoll()});y(f,"cut",b);y(f,"copy",b);y(a.scroller,
"paste",function(b){xa(a,b)||(d.state.pasteIncoming=!0,c.focus())});y(a.lineSpace,"selectstart",function(b){xa(a,b)||U(b)});y(f,"compositionstart",function(){var a=d.getCursor("from");c.composing={start:a,range:d.markText(a,d.getCursor("to"),{className:"CodeMirror-composing"})}});y(f,"compositionend",function(){c.composing&&(c.poll(),c.composing.range.clear(),c.composing=null)})},prepareSelection:function(){var a=this.cm,b=a.display,c=a.doc,d=he(a);if(a.options.moveInputWithCursor){var a=va(a,c.sel.primary().head,
"div"),c=b.wrapper.getBoundingClientRect(),e=b.lineDiv.getBoundingClientRect();d.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-10,a.top+e.top-c.top));d.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,a.left+e.left-c.left))}return d},showSelection:function(a){var b=this.cm.display;ca(b.cursorDiv,a.cursors);ca(b.selectionDiv,a.selection);null!=a.teTop&&(this.wrapper.style.top=a.teTop+"px",this.wrapper.style.left=a.teLeft+"px")},reset:function(a){if(!this.contextMenuPending){var b,c,d=this.cm,
e=d.doc;d.somethingSelected()?(this.prevInput="",b=e.sel.primary(),c=(b=Ce&&(100<b.to().line-b.from().line||1E3<(c=d.getSelection()).length))?"-":c||d.getSelection(),this.textarea.value=c,d.state.focused&&jb(this.textarea),E&&9<=J&&(this.hasSelection=c)):a||(this.prevInput=this.textarea.value="",E&&9<=J&&(this.hasSelection=null));this.inaccurateSelection=b}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!lb||
oa()!=this.textarea))try{this.textarea.focus()}catch(a){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var a=this;a.pollingFast||a.polling.set(this.cm.options.pollInterval,function(){a.poll();a.cm.state.focused&&a.slowPoll()})},fastPoll:function(){function a(){c.poll()||b?(c.pollingFast=!1,c.slowPoll()):(b=!0,c.polling.set(60,a))}var b=!1,c=this;c.pollingFast=!0;c.polling.set(20,
a)},poll:function(){var a=this.cm,b=this.textarea,c=this.prevInput;if(this.contextMenuPending||!a.state.focused||mg(b)&&!c&&!this.composing||Zb(a)||a.options.disableInput||a.state.keySeq)return!1;var d=b.value;if(d==c&&!a.somethingSelected())return!1;if(E&&9<=J&&this.hasSelection===d||fa&&/[\uf700-\uf7ff]/.test(d))return a.display.input.reset(),!1;if(a.doc.sel==a.display.selForContextMenu){var e=d.charCodeAt(0);8203!=e||c||(c="\u200b");if(8666==e)return this.reset(),this.cm.execCommand("undo")}for(var f=
0,e=Math.min(c.length,d.length);f<e&&c.charCodeAt(f)==d.charCodeAt(f);)++f;var g=this;Y(a,function(){$b(a,d.slice(f),c.length-f,null,g.composing?"*compose":null);1E3<d.length||-1<d.indexOf("\n")?b.value=g.prevInput="":g.prevInput=d;g.composing&&(g.composing.range.clear(),g.composing.range=a.markText(g.composing.start,a.getCursor("to"),{className:"CodeMirror-composing"}))});return!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){E&&9<=J&&(this.hasSelection=
null);this.fastPoll()},onContextMenu:function(a){function b(){if(null!=g.selectionStart){var a=e.somethingSelected(),b="\u200b"+(a?g.value:"");g.value="\u21da";g.value=b;d.prevInput=a?"":"\u200b";g.selectionStart=1;g.selectionEnd=b.length;f.selForContextMenu=e.doc.sel}}function c(){d.contextMenuPending=!1;d.wrapper.style.position="relative";g.style.cssText=m;E&&9>J&&f.scrollbars.setScrollTop(f.scroller.scrollTop=k);if(null!=g.selectionStart){(!E||E&&9>J)&&b();var a=0,c=function(){f.selForContextMenu==
e.doc.sel&&0==g.selectionStart&&0<g.selectionEnd&&"\u200b"==d.prevInput?K(e,sc.selectAll)(e):10>a++?f.detectingSelectAll=setTimeout(c,500):f.input.reset()};f.detectingSelectAll=setTimeout(c,200)}}var d=this,e=d.cm,f=e.display,g=d.textarea,h=db(e,a),k=f.scroller.scrollTop;if(h&&!ja){e.options.resetSelectionOnContextMenu&&-1==e.doc.sel.contains(h)&&K(e,O)(e.doc,pa(h),qa);var m=g.style.cssText;d.wrapper.style.position="absolute";g.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(a.clientY-
5)+"px; left: "+(a.clientX-5)+"px; z-index: 1000; background: "+(E?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(N)var n=window.scrollY;f.input.focus();N&&window.scrollTo(null,n);f.input.reset();e.somethingSelected()||(g.value=d.prevInput=" ");d.contextMenuPending=!0;f.selForContextMenu=e.doc.sel;clearTimeout(f.detectingSelectAll);E&&9<=J&&b();if(kd){ld(a);var l=function(){ta(window,"mouseup",
l);setTimeout(c,20)};y(window,"mouseup",l)}else setTimeout(c,50)}},setUneditable:Nb,needsContentAttribute:!1},Vc.prototype);Wc.prototype=da({init:function(a){function b(a){if(d.somethingSelected())aa=d.getSelections(),"cut"==a.type&&d.replaceSelection("",null,"cut");else if(d.options.lineWiseCopyCut){var b=Vd(d);aa=b.text;"cut"==a.type&&d.operation(function(){d.setSelections(b.ranges,0,qa);d.replaceSelection("",null,"cut")})}else return;if(a.clipboardData&&!$a)a.preventDefault(),a.clipboardData.clearData(),
a.clipboardData.setData("text/plain",aa.join("\n"));else{var c=Xd();a=c.firstChild;d.display.lineSpace.insertBefore(c,d.display.lineSpace.firstChild);a.value=aa.join("\n");var h=document.activeElement;jb(a);setTimeout(function(){d.display.lineSpace.removeChild(c);h.focus()},50)}}var c=this,d=c.cm;a=c.div=a.lineDiv;a.contentEditable="true";Wd(a);y(a,"paste",function(a){Ud(a,d)});y(a,"compositionstart",function(a){a=a.data;c.composing={sel:d.doc.sel,data:a,startData:a};if(a){var b=d.doc.sel.primary(),
g=d.getLine(b.head.line).indexOf(a,Math.max(0,b.head.ch-a.length));-1<g&&g<=b.head.ch&&(c.composing.sel=pa(q(b.head.line,g),q(b.head.line,g+a.length)))}});y(a,"compositionupdate",function(a){c.composing.data=a.data});y(a,"compositionend",function(a){var b=c.composing;b&&(a.data==b.startData||/\u200b/.test(a.data)||(b.data=a.data),setTimeout(function(){b.handled||c.applyComposition(b);c.composing==b&&(c.composing=null)},50))});y(a,"touchstart",function(){c.forceCompositionEnd()});y(a,"input",function(){c.composing||
c.pollContent()||Y(c.cm,function(){W(d)})});y(a,"copy",b);y(a,"cut",b)},prepareSelection:function(){var a=he(this.cm,!1);a.focus=this.cm.state.focused;return a},showSelection:function(a){a&&this.cm.display.view.length&&(a.focus&&this.showPrimarySelection(),this.showMultipleSelections(a))},showPrimarySelection:function(){var a=window.getSelection(),b=this.cm.doc.sel.primary(),c=cc(this.cm,a.anchorNode,a.anchorOffset),d=cc(this.cm,a.focusNode,a.focusOffset);if(!c||c.bad||!d||d.bad||0!=z(Yb(c,d),b.from())||
0!=z(Xb(c,d),b.to()))if(c=Yd(this.cm,b.from()),d=Yd(this.cm,b.to()),c||d){var e=this.cm.display.view,b=a.rangeCount&&a.getRangeAt(0);c?d||(d=e[e.length-1].measure,d=d.maps?d.maps[d.maps.length-1]:d.map,d={node:d[d.length-1],offset:d[d.length-2]-d[d.length-3]}):c={node:e[0].measure.map[2],offset:0};try{var f=Ma(c.node,c.offset,d.offset,d.node)}catch(g){}f&&(a.removeAllRanges(),a.addRange(f),b&&null==a.anchorNode?a.addRange(b):Ea&&this.startGracePeriod());this.rememberSelection()}},startGracePeriod:function(){var a=
this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){a.gracePeriod=!1;a.selectionChanged()&&a.cm.operation(function(){a.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(a){ca(this.cm.display.cursorDiv,a.cursors);ca(this.cm.display.selectionDiv,a.selection)},rememberSelection:function(){var a=window.getSelection();this.lastAnchorNode=a.anchorNode;this.lastAnchorOffset=a.anchorOffset;this.lastFocusNode=a.focusNode;this.lastFocusOffset=a.focusOffset},selectionInEditor:function(){var a=
window.getSelection();if(!a.rangeCount)return!1;a=a.getRangeAt(0).commonAncestorContainer;return Yc(this.div,a)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){function a(){b.cm.state.focused&&(b.pollSelection(),b.polling.set(b.cm.options.pollInterval,a))}var b=this;this.selectionInEditor()?this.pollSelection():Y(this.cm,function(){b.cm.curOp.selectionChanged=
!0});this.polling.set(this.cm.options.pollInterval,a)},selectionChanged:function(){var a=window.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastFocusNode||a.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var a=window.getSelection(),b=this.cm;this.rememberSelection();var c=cc(b,a.anchorNode,a.anchorOffset),d=cc(b,a.focusNode,a.focusOffset);c&&d&&Y(b,function(){O(b.doc,
pa(c,d),qa);if(c.bad||d.bad)b.curOp.selectionChanged=!0})}},pollContent:function(){var a=this.cm,b=a.display,c=a.doc.sel.primary(),d=c.from(),c=c.to();if(d.line<b.viewFrom||c.line>b.viewTo-1)return!1;var e;d.line==b.viewFrom||0==(e=Ka(a,d.line))?(d=I(b.view[0].line),e=b.view[0].node):(d=I(b.view[e].line),e=b.view[e-1].node.nextSibling);var f=Ka(a,c.line);f==b.view.length-1?(c=b.viewTo-1,b=b.lineDiv.lastChild):(c=I(b.view[f+1].line)-1,b=b.view[f+1].node.previousSibling);b=a.doc.splitLines(wf(a,e,b,
d,c));for(e=La(a.doc,q(d,0),q(c,r(a.doc,c).text.length));1<b.length&&1<e.length;)if(A(b)==A(e))b.pop(),e.pop(),c--;else if(b[0]==e[0])b.shift(),e.shift(),d++;else break;for(var g=0,f=0,h=b[0],k=e[0],m=Math.min(h.length,k.length);g<m&&h.charCodeAt(g)==k.charCodeAt(g);)++g;h=A(b);k=A(e);for(m=Math.min(h.length-(1==b.length?g:0),k.length-(1==e.length?g:0));f<m&&h.charCodeAt(h.length-f-1)==k.charCodeAt(k.length-f-1);)++f;b[b.length-1]=h.slice(0,h.length-f);b[0]=b[0].slice(g);d=q(d,g);c=q(c,e.length?A(e).length-
f:0);if(1<b.length||b[0]||z(d,c))return eb(a.doc,b,d,c,"+input"),!0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(a){a.data&&a.data!=a.startData&&K(this.cm,$b)(this.cm,a.data,0,a.sel)},setUneditable:function(a){a.setAttribute("contenteditable","false")},
onKeyPress:function(a){a.preventDefault();K(this.cm,$b)(this.cm,String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),0)},onContextMenu:Nb,resetPosition:Nb,needsContentAttribute:!0},Wc.prototype);l.inputStyles={textarea:Vc,contenteditable:Wc};ua.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b],d=a.ranges[b];
if(0!=z(c.anchor,d.anchor)||0!=z(c.head,d.head))return!1}return!0},deepCopy:function(){for(var a=[],b=0;b<this.ranges.length;b++)a[b]=new C(Uc(this.ranges[b].anchor),Uc(this.ranges[b].head));return new ua(a,this.primIndex)},somethingSelected:function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1},contains:function(a,b){b||(b=a);for(var c=0;c<this.ranges.length;c++){var d=this.ranges[c];if(0<=z(b,d.from())&&0>=z(a,d.to()))return c}return-1}};C.prototype={from:function(){return Yb(this.anchor,
this.head)},to:function(){return Xb(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var cd={left:0,right:0,top:0,bottom:0},Na,cb=null,Ef=0,pc,oc,se=0,qc=0,Z=null;E?Z=-.53:Ea?Z=15:jg?Z=-.7:te&&(Z=-1/3);var ze=function(a){var b=a.wheelDeltaX,c=a.wheelDeltaY;null==b&&a.detail&&a.axis==a.HORIZONTAL_AXIS&&(b=a.detail);null==c&&a.detail&&a.axis==a.VERTICAL_AXIS?c=a.detail:null==c&&(c=a.wheelDelta);return{x:b,y:c}};l.wheelEventPixels=function(a){a=
ze(a);a.x*=Z;a.y*=Z;return a};var Pf=new mb,od=null,Oa=l.changeEnd=function(a){return a.text?q(a.from.line+a.text.length-1,A(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};l.prototype={constructor:l,focus:function(){window.focus();this.display.input.focus()},setOption:function(a,b){var c=this.options,d=c[a];if(c[a]!=b||"mode"==a)c[a]=b,Ta.hasOwnProperty(a)&&K(this,Ta[a])(this,b,d)},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?
"push":"unshift"](zc(a))},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||b[c].name==a)return b.splice(c,1),!0},addOverlay:Q(function(a,b){var c=a.token?a:l.getMode(this.options,a);if(c.startState)throw Error("Overlays may not be stateful.");this.state.overlays.push({mode:c,modeSpec:a,opaque:b&&b.opaque});this.state.modeGen++;W(this)}),removeOverlay:Q(function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&
d.name==a){b.splice(c,1);this.state.modeGen++;W(this);break}}}),indentLine:Q(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract");Ab(this.doc,a)&&zb(this,a,b,c)}),indentSelection:Q(function(a){for(var b=this.doc.sel.ranges,c=-1,d=0;d<b.length;d++){var e=b[d];if(e.empty())e.head.line>c&&(zb(this,e.head.line,a,!0),c=e.head.line,d==this.doc.sel.primIndex&&Za(this));else{for(var f=e.from(),e=e.to(),g=Math.max(c,f.line),c=Math.min(this.lastLine(),
e.line-(e.ch?0:1))+1,e=g;e<c;++e)zb(this,e,a);e=this.doc.sel.ranges;0==f.ch&&b.length==e.length&&0<e[d].from().ch&&Zc(this.doc,d,new C(f,e[d].to()),qa)}}}),getTokenAt:function(a,b){return Ye(this,a,b)},getLineTokens:function(a,b){return Ye(this,q(a),b,!0)},getTokenTypeAt:function(a){a=B(this.doc,a);var b=$e(this,r(this.doc,a.line)),c=0,d=(b.length-1)/2;a=a.ch;if(0==a)b=b[2];else for(;;){var e=c+d>>1;if((e?b[2*e-1]:0)>=a)d=e;else if(b[2*e+1]<a)c=e+1;else{b=b[2*e+2];break}}c=b?b.indexOf("cm-overlay "):
-1;return 0>c?b:0==c?null:b.slice(0,c-1)},getModeAt:function(a){var b=this.doc.mode;return b.innerMode?l.innerMode(b,this.getTokenAt(a).state).mode:b},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var c=[];if(!kb.hasOwnProperty(b))return c;var d=kb[b],e=this.getModeAt(a);if("string"==typeof e[b])d[e[b]]&&c.push(d[e[b]]);else if(e[b])for(var f=0;f<e[b].length;f++){var g=d[e[b][f]];g&&c.push(g)}else e.helperType&&d[e.helperType]?c.push(d[e.helperType]):d[e.name]&&
c.push(d[e.name]);for(f=0;f<d._global.length;f++)g=d._global[f],g.pred(e,this)&&-1==R(c,g.val)&&c.push(g.val);return c},getStateAfter:function(a,b){var c=this.doc;a=Math.max(c.first,Math.min(null==a?c.first+c.size-1:a,c.first+c.size-1));return Cb(this,a+1,b)},cursorCoords:function(a,b){var c;c=this.doc.sel.primary();c=null==a?c.head:"object"==typeof a?B(this.doc,a):a?c.from():c.to();return va(this,c,b||"page")},charCoords:function(a,b){return hc(this,B(this.doc,a),b||"page")},coordsChar:function(a,
b){a=ne(this,a,b||"page");return hd(this,a.left,a.top)},lineAtHeight:function(a,b){a=ne(this,{top:a,left:0},b||"page").top;return Ja(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b){var c=!1,d;"number"==typeof a?(d=this.doc.first+this.doc.size-1,a<this.doc.first?a=this.doc.first:a>d&&(a=d,c=!0),d=r(this.doc,a)):d=a;return ed(this,d,{top:0,left:0},b||"page").top+(c?this.doc.height-na(d):0)},defaultTextHeight:function(){return Fa(this.display)},defaultCharWidth:function(){return qb(this.display)},
setGutterMarker:Q(function(a,b,c){return xc(this.doc,a,"gutter",function(a){var e=a.gutterMarkers||(a.gutterMarkers={});e[b]=c;!c&&hf(e)&&(a.gutterMarkers=null);return!0})}),clearGutter:Q(function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,wa(b,d,"gutter"),hf(c.gutterMarkers)&&(c.gutterMarkers=null));++d})}),lineInfo:function(a){if("number"==typeof a){if(!Ab(this.doc,a))return null;var b=a;a=r(this.doc,a);if(!a)return null}else if(b=
I(a),null==b)return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=va(this,B(this.doc,a));var g=a.bottom,h=a.left;b.style.position="absolute";b.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(b);f.sizer.appendChild(b);if("over"==d)g=a.top;
else if("above"==d||"near"==d){var k=Math.max(f.wrapper.clientHeight,this.doc.height),m=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>k)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=k&&(g=a.bottom);h+b.offsetWidth>m&&(h=m-b.offsetWidth)}b.style.top=g+"px";b.style.left=b.style.right="";"right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=
h+"px");c&&(a=mc(this,h,g,h+b.offsetWidth,g+b.offsetHeight),null!=a.scrollTop&&vb(this,a.scrollTop),null!=a.scrollLeft&&Xa(this,a.scrollLeft))},triggerOnKeyDown:Q(ve),triggerOnKeyPress:Q(we),triggerOnKeyUp:ue,execCommand:function(a){if(sc.hasOwnProperty(a))return sc[a](this)},triggerElectric:Q(function(a){Td(this,a)}),findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=B(this.doc,a);f<b&&(a=td(this.doc,a,e,c,d),!a.hitSide);++f);return a},moveH:Q(function(a,b){var c=this;c.extendSelectionsBy(function(d){return c.display.shift||
c.doc.extend||d.empty()?td(c.doc,d.head,a,b,c.options.rtlMoveVisually):0>a?d.from():d.to()},Pb)}),deleteH:Q(function(a,b){var c=this.doc;this.doc.sel.somethingSelected()?c.replaceSelection("",null,"+delete"):fb(this,function(d){var e=td(c,d.head,a,b,!1);return 0>a?{from:e,to:d.head}:{from:d.head,to:e}})}),findPosV:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=B(this.doc,a);f<b&&(a=va(this,a,"div"),null==d?d=a.left:a.left=d,a=Pe(this,a,e,c),!a.hitSide);++f);return a},moveV:Q(function(a,
b){var c=this,d=this.doc,e=[],f=!c.display.shift&&!d.extend&&d.sel.somethingSelected();d.extendSelectionsBy(function(g){if(f)return 0>a?g.from():g.to();var k=va(c,g.head,"div");null!=g.goalColumn&&(k.left=g.goalColumn);e.push(k.left);var m=Pe(c,k,a,b);"page"==b&&g==d.sel.primary()&&vc(c,null,hc(c,m,"div").top-k.top);return m},Pb);if(e.length)for(var g=0;g<d.sel.ranges.length;g++)d.sel.ranges[g].goalColumn=e[g]}),findWordAt:function(a){var b=r(this.doc,a.line).text,c=a.ch,d=a.ch;if(b){var e=this.getHelper(a,
"wordChars");(0>a.xRel||d==b.length)&&c?--c:++d;for(var f=b.charAt(c),f=yc(f,e)?function(a){return yc(a,e)}:/\s/.test(f)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!yc(a)};0<c&&f(b.charAt(c-1));)--c;for(;d<b.length&&f(b.charAt(d));)++d}return new C(q(a.line,c),q(a.line,d))},toggleOverwrite:function(a){if(null==a||a!=this.state.overwrite)(this.state.overwrite=!this.state.overwrite)?wb(this.display.cursorDiv,"CodeMirror-overwrite"):ub(this.display.cursorDiv,"CodeMirror-overwrite"),
M(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==oa()},scrollTo:Q(function(a,b){null==a&&null==b||wc(this);null!=a&&(this.curOp.scrollLeft=a);null!=b&&(this.curOp.scrollTop=b)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-ma(this)-this.display.barHeight,width:a.scrollWidth-ma(this)-this.display.barWidth,clientHeight:Qc(this),clientWidth:za(this)}},scrollIntoView:Q(function(a,
b){null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:q(a,0),to:null}:null==a.from&&(a={from:a,to:null});a.to||(a.to=a.from);a.margin=b||0;if(null!=a.from.line)wc(this),this.curOp.scrollToPos=a;else{var c=mc(this,Math.min(a.from.left,a.to.left),Math.min(a.from.top,a.to.top)-a.margin,Math.max(a.from.right,a.to.right),Math.max(a.from.bottom,a.to.bottom)+a.margin);this.scrollTo(c.scrollLeft,c.scrollTop)}}),setSize:Q(function(a,
b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a}var d=this;null!=a&&(d.display.wrapper.style.width=c(a));null!=b&&(d.display.wrapper.style.height=c(b));d.options.lineWrapping&&me(this);var e=d.display.viewFrom;d.doc.iter(e,d.display.viewTo,function(a){if(a.widgets)for(var b=0;b<a.widgets.length;b++)if(a.widgets[b].noHScroll){wa(d,e,"widget");break}++e});d.curOp.forceUpdate=!0;M(d,"refresh",this)}),operation:function(a){return Y(this,a)},refresh:Q(function(){var a=this.display.cachedTextHeight;
W(this);this.curOp.forceUpdate=!0;rb(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);sb(this);(null==a||.5<Math.abs(a-Fa(this.display)))&&F(this);M(this,"refresh",this)}),swapDoc:Q(function(a){var b=this.doc;b.cm=null;Dd(this,a);rb(this);this.display.input.reset();this.scrollTo(a.scrollLeft,a.scrollTop);this.curOp.forceScroll=!0;S(this,"swapDoc",this,b);return b}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},
getGutterElement:function(){return this.display.gutters}};ib(l);var qf=l.defaults={},Ta=l.optionHandlers={},Ed=l.Init={toString:function(){return"CodeMirror.Init"}};x("value","",function(a,b){a.setValue(b)},!0);x("mode",null,function(a,b){a.doc.modeOption=b;G(a)},!0);x("indentUnit",2,G,!0);x("indentWithTabs",!1);x("smartIndent",!0);x("tabSize",4,function(a){L(a);rb(a);W(a)},!0);x("lineSeparator",null,function(a,b){if(a.doc.lineSep=b){var c=[],d=a.doc.first;a.doc.iter(function(a){for(var e=0;;){var h=
a.text.indexOf(b,e);if(-1==h)break;e=h+b.length;c.push(q(d,h))}d++});for(var e=c.length-1;0<=e;e--)eb(a.doc,b,c[e],q(c[e].line,c[e].ch+b.length))}});x("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(a,b,c){a.state.specialChars=new RegExp(b.source+(b.test("\t")?"":"|\t"),"g");c!=l.Init&&a.refresh()});x("specialCharPlaceholder",function(a){var b=t("span","\u2022","cm-invalidchar");b.title="\\u"+a.charCodeAt(0).toString(16);b.setAttribute("aria-label",b.title);return b},
function(a){a.refresh()},!0);x("electricChars",!0);x("inputStyle",lb?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor");},!0);x("rtlMoveVisually",!lg);x("wholeLineUpdateBefore",!0);x("theme","default",function(a){D(a);ea(a)},!0);x("keyMap","default",function(a,b,c){b=zc(b);(c=c!=l.Init&&zc(c))&&c.detach&&c.detach(a,b);b.attach&&b.attach(a,c||null)});x("extraKeys",null);x("lineWrapping",!1,function(a){a.options.lineWrapping?(wb(a.display.wrapper,
"CodeMirror-wrap"),a.display.sizer.style.minWidth="",a.display.sizerWidth=null):(ub(a.display.wrapper,"CodeMirror-wrap"),Wa(a));F(a);W(a);rb(a);setTimeout(function(){w(a)},100)},!0);x("gutters",[],function(a){P(a.options);ea(a)},!0);x("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?Lc(a.display)+"px":"0";a.refresh()},!0);x("coverGutterNextToScrollbar",!1,function(a){w(a)},!0);x("scrollbarStyle","native",function(a){X(a);w(a);a.display.scrollbars.setScrollTop(a.doc.scrollTop);a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},
!0);x("lineNumbers",!1,function(a){P(a.options);ea(a)},!0);x("firstLineNumber",1,ea,!0);x("lineNumberFormatter",function(a){return a},ea,!0);x("showCursorWhenSelecting",!1,xb,!0);x("resetSelectionOnContextMenu",!0);x("lineWiseCopyCut",!0);x("readOnly",!1,function(a,b){"nocursor"==b?(ob(a),a.display.input.blur(),a.display.disabled=!0):(a.display.disabled=!1,b||a.display.input.reset())});x("disableInput",!1,function(a,b){b||a.display.input.reset()},!0);x("dragDrop",!0,function(a,b,c){!b!=!(c&&c!=l.Init)&&
(c=a.display.dragFunctions,b=b?y:ta,b(a.display.scroller,"dragstart",c.start),b(a.display.scroller,"dragenter",c.simple),b(a.display.scroller,"dragover",c.simple),b(a.display.scroller,"drop",c.drop))});x("cursorBlinkRate",530);x("cursorScrollMargin",0);x("cursorHeight",1,xb,!0);x("singleCursorHeightPerLine",!0,xb,!0);x("workTime",100);x("workDelay",100);x("flattenSpans",!0,L,!0);x("addModeClass",!1,L,!0);x("pollInterval",100);x("undoDepth",200,function(a,b){a.doc.history.undoDepth=b});x("historyEventDelay",
1250);x("viewportMargin",10,function(a){a.refresh()},!0);x("maxHighlightLength",1E4,L,!0);x("moveInputWithCursor",!0,function(a,b){b||a.display.input.resetPosition()});x("tabindex",null,function(a,b){a.display.input.getField().tabIndex=b||""});x("autofocus",null);var pf=l.modes={},Qb=l.mimeModes={};l.defineMode=function(a,b){l.defaults.mode||"null"==a||(l.defaults.mode=a);2<arguments.length&&(b.dependencies=Array.prototype.slice.call(arguments,2));pf[a]=b};l.defineMIME=function(a,b){Qb[a]=b};l.resolveMode=
function(a){if("string"==typeof a&&Qb.hasOwnProperty(a))a=Qb[a];else if(a&&"string"==typeof a.name&&Qb.hasOwnProperty(a.name)){var b=Qb[a.name];"string"==typeof b&&(b={name:b});a=ff(b,a);a.name=b.name}else if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return l.resolveMode("application/xml");return"string"==typeof a?{name:a}:a||{name:"null"}};l.getMode=function(a,b){b=l.resolveMode(b);var c=pf[b.name];if(!c)return l.getMode(a,"text/plain");c=c(a,b);if(Rb.hasOwnProperty(b.name)){var d=Rb[b.name],
e;for(e in d)d.hasOwnProperty(e)&&(c.hasOwnProperty(e)&&(c["_"+e]=c[e]),c[e]=d[e])}c.name=b.name;b.helperType&&(c.helperType=b.helperType);if(b.modeProps)for(e in b.modeProps)c[e]=b.modeProps[e];return c};l.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});l.defineMIME("text/plain","null");var Rb=l.modeExtensions={};l.extendMode=function(a,b){var c=Rb.hasOwnProperty(a)?Rb[a]:Rb[a]={};da(b,c)};l.defineExtension=function(a,b){l.prototype[a]=b};l.defineDocExtension=function(a,b){V.prototype[a]=
b};l.defineOption=x;var Hc=[];l.defineInitHook=function(a){Hc.push(a)};var kb=l.helpers={};l.registerHelper=function(a,b,c){kb.hasOwnProperty(a)||(kb[a]=l[a]={_global:[]});kb[a][b]=c};l.registerGlobalHelper=function(a,b,c,d){l.registerHelper(a,b,d);kb[a]._global.push({pred:c,val:d})};var bb=l.copyState=function(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},d;for(d in b){var e=b[d];e instanceof Array&&(e=e.concat([]));c[d]=e}return c},Cf=l.startState=function(a,b,c){return a.startState?
a.startState(b,c):!0};l.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state;a=c.mode}return c||{mode:a,state:b}};var sc=l.commands={selectAll:function(a){a.setSelection(q(a.firstLine(),0),q(a.lastLine()),qa)},singleSelection:function(a){a.setSelection(a.getCursor("anchor"),a.getCursor("head"),qa)},killLine:function(a){fb(a,function(b){if(b.empty()){var c=r(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?{from:b.head,to:q(b.head.line+
1,0)}:{from:b.head,to:q(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){fb(a,function(b){return{from:q(b.from().line,0),to:B(a.doc,q(b.to().line+1,0))}})},delLineLeft:function(a){fb(a,function(a){return{from:q(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(a){fb(a,function(b){var c=a.charCoords(b.head,"div").top+5;return{from:a.coordsChar({left:0,top:c},"div"),to:b.from()}})},delWrappedLineRight:function(a){fb(a,function(b){var c=a.charCoords(b.head,"div").top+
5,c=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");return{from:b.from(),to:c}})},undo:function(a){a.undo()},redo:function(a){a.redo()},undoSelection:function(a){a.undoSelection()},redoSelection:function(a){a.redoSelection()},goDocStart:function(a){a.extendSelection(q(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(q(a.lastLine()))},goLineStart:function(a){a.extendSelectionsBy(function(b){return kf(a,b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){a.extendSelectionsBy(function(b){return lf(a,
b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){a.extendSelectionsBy(function(b){b=b.head.line;for(var c,d=r(a.doc,b);c=Ia(d,!1);)d=c.find(1,!0).line,b=null;c=(c=ga(d))?c[0].level%2?kc(d):lc(d):d.text.length;return q(null==b?I(d):b,c)},{origin:"+move",bias:-1})},goLineRight:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div")},Pb)},goLineLeft:function(a){a.extendSelectionsBy(function(b){b=
a.charCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:b},"div")},Pb)},goLineLeftSmart:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5,c=a.coordsChar({left:0,top:c},"div");return c.ch<a.getLine(c.line).search(/\S/)?lf(a,b.head):c},Pb)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,
"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,
"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){var f=c[e].from(),f=ia(a.getLine(f.line),f.ch,d);b.push(Array(d-f%d+1).join(" "))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?
a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){Y(a,function(){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++){var e=b[d].head,f=r(a.doc,e.line).text;if(f)if(e.ch==f.length&&(e=new q(e.line,e.ch-1)),0<e.ch)e=new q(e.line,e.ch+1),a.replaceRange(f.charAt(e.ch-1)+f.charAt(e.ch-2),q(e.line,e.ch-2),e,"+transpose");else if(e.line>a.doc.first){var g=r(a.doc,e.line-1).text;g&&a.replaceRange(f.charAt(0)+a.doc.lineSeparator()+g.charAt(g.length-1),q(e.line-1,g.length-1),
q(e.line,1),"+transpose")}c.push(new C(e,e))}a.setSelections(c)})},newlineAndIndent:function(a){Y(a,function(){for(var b=a.listSelections().length,c=0;c<b;c++){var d=a.listSelections()[c];a.replaceRange(a.doc.lineSeparator(),d.anchor,d.head,"+input");a.indentLine(d.from().line+1,null,!0);Za(a)}})},toggleOverwrite:function(a){a.toggleOverwrite()}},Ca=l.keyMap={};Ca.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",
PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};Ca.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart",
"Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};Ca.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft",
"Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};Ca.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft",
"Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};Ca["default"]=
fa?Ca.macDefault:Ca.pcDefault;l.normalizeKeyMap=function(a){var b={},c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!/^(name|fallthrough|(de|at)tach)$/.test(c)){if("..."!=d)for(var e=ac(c.split(" "),Vf),f=0;f<e.length;f++){var g,h;f==e.length-1?(h=e.join(" "),g=d):(h=e.slice(0,f+1).join(" "),g="...");var k=b[h];if(!k)b[h]=g;else if(k!=g)throw Error("Inconsistent bindings for "+h);}delete a[c]}}for(var m in b)a[m]=b[m];return a};var Gb=l.lookupKey=function(a,b,c,d){b=zc(b);var e=b.call?b.call(a,
d):b[a];if(!1===e)return"nothing";if("..."===e)return"multi";if(null!=e&&c(e))return"handled";if(b.fallthrough){if("[object Array]"!=Object.prototype.toString.call(b.fallthrough))return Gb(a,b.fallthrough,c,d);for(e=0;e<b.fallthrough.length;e++){var f=Gb(a,b.fallthrough[e],c,d);if(f)return f}}},Of=l.isModifierKey=function(a){a="string"==typeof a?a:Da[a.keyCode];return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a},Qf=l.keyName=function(a,b){if(ja&&34==a.keyCode&&a["char"])return!1;var c=Da[a.keyCode],
d=c;if(null==d||a.altGraphKey)return!1;a.altKey&&"Alt"!=c&&(d="Alt-"+d);(of?a.metaKey:a.ctrlKey)&&"Ctrl"!=c&&(d="Ctrl-"+d);(of?a.ctrlKey:a.metaKey)&&"Cmd"!=c&&(d="Cmd-"+d);!b&&a.shiftKey&&"Shift"!=c&&(d="Shift-"+d);return d};l.fromTextArea=function(a,b){function c(){a.value=h.getValue()}b=b?da(b):{};b.value=a.value;!b.tabindex&&a.tabIndex&&(b.tabindex=a.tabIndex);!b.placeholder&&a.placeholder&&(b.placeholder=a.placeholder);if(null==b.autofocus){var d=oa();b.autofocus=d==a||null!=a.getAttribute("autofocus")&&
d==document.body}if(a.form&&(y(a.form,"submit",c),!b.leaveSubmitMethodAlone)){var e=a.form,f=e.submit;try{var g=e.submit=function(){c();e.submit=f;e.submit();e.submit=g}}catch(k){}}b.finishInit=function(b){b.save=c;b.getTextArea=function(){return a};b.toTextArea=function(){b.toTextArea=isNaN;c();a.parentNode.removeChild(b.getWrapperElement());a.style.display="";a.form&&(ta(a.form,"submit",c),"function"==typeof a.form.submit&&(a.form.submit=f))}};a.style.display="none";var h=l(function(b){a.parentNode.insertBefore(b,
a.nextSibling)},b);return h};var Dc=l.StringStream=function(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0};Dc.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);if("string"==
typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){this.lastColumnPos<this.start&&(this.lastColumnValue=ia(this.string,
this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?ia(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return ia(this.string,null,this.tabSize)-(this.lineStart?ia(this.string,this.lineStart,this.tabSize):0)},match:function(a,b,c){if("string"==typeof a){var d=function(a){return c?a.toLowerCase():a},e=this.string.substr(this.pos,a.length);if(d(e)==d(a))return!1!==b&&(this.pos+=a.length),!0}else{if((a=
this.string.slice(this.pos).match(a))&&0<a.index)return null;a&&!1!==b&&(this.pos+=a[0].length);return a}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}}};var ud=0,Qa=l.TextMarker=function(a,b){this.lines=[];this.type=b;this.doc=a;this.id=++ud};ib(Qa);Qa.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;b&&Sa(a);if(ba(this,"clear")){var c=this.find();c&&
S(this,"clear",c.from,c.to)}for(var d=c=null,e=0;e<this.lines.length;++e){var f=this.lines[e],g=Ib(f.markedSpans,this);a&&!this.collapsed?wa(a,I(f),"text"):a&&(null!=g.to&&(d=I(f)),null!=g.from&&(c=I(f)));for(var h=f,k=f.markedSpans,m=g,n=void 0,l=0;l<k.length;++l)k[l]!=m&&(n||(n=[])).push(k[l]);h.markedSpans=n;null==g.from&&this.collapsed&&!Ga(this.doc,f)&&a&&la(f,Fa(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(e=0;e<this.lines.length;++e)f=ra(this.lines[e]),g=Va(f),g>a.display.maxLineLength&&
(a.display.maxLine=f,a.display.maxLineLength=g,a.display.maxLineChanged=!0);null!=c&&a&&this.collapsed&&W(a,c,d+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&ge(a.doc));a&&S(a,"markerCleared",a,this);b&&Ua(a);this.parent&&this.parent.clear()}};Qa.prototype.find=function(a,b){null==a&&"bookmark"==this.type&&(a=1);for(var c,d,e=0;e<this.lines.length;++e){var f=this.lines[e],g=Ib(f.markedSpans,this);if(null!=g.from&&(c=q(b?f:I(f),g.from),-1==
a))return c;if(null!=g.to&&(d=q(b?f:I(f),g.to),1==a))return d}return c&&{from:c,to:d}};Qa.prototype.changed=function(){var a=this.find(-1,!0),b=this,c=this.doc.cm;a&&c&&Y(c,function(){var d=a.line,e=I(a.line);if(e=Xc(c,e))le(e),c.curOp.selectionChanged=c.curOp.forceUpdate=!0;c.curOp.updateMaxLine=!0;Ga(b.doc,d)||null==b.height||(e=b.height,b.height=null,(e=Eb(b)-e)&&la(d,d.height+e))})};Qa.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&
-1!=R(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)};Qa.prototype.detachLine=function(a){this.lines.splice(R(this.lines,a),1);!this.lines.length&&this.doc.cm&&(a=this.doc.cm.curOp,(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this))};var ud=0,Bc=l.SharedTextMarker=function(a,b){this.markers=a;this.primary=b;for(var c=0;c<a.length;++c)a[c].parent=this};ib(Bc);Bc.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=
!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();S(this,"clear")}};Bc.prototype.find=function(a,b){return this.primary.find(a,b)};var Cc=l.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.doc=a;this.node=b};ib(Cc);Cc.prototype.clear=function(){var a=this.doc.cm,b=this.line.widgets,c=this.line,d=I(c);if(null!=d&&b){for(var e=0;e<b.length;++e)b[e]==this&&b.splice(e--,1);b.length||(c.widgets=null);var f=Eb(this);la(c,Math.max(0,c.height-f));a&&Y(a,
function(){var b=-f;na(c)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&vc(a,null,b);wa(a,d,"widget")})}};Cc.prototype.changed=function(){var a=this.height,b=this.doc.cm,c=this.line;this.height=null;var d=Eb(this)-a;d&&(la(c,c.height+d),b&&Y(b,function(){b.curOp.forceUpdate=!0;na(c)<(b.curOp&&b.curOp.scrollTop||b.doc.scrollTop)&&vc(b,null,d)}))};var Jb=l.Line=function(a,b,c){this.text=a;Ue(this,b);this.height=c?c(this):1};ib(Jb);Jb.prototype.lineNo=function(){return I(this)};var ag={},$f={};Kb.prototype=
{chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;c<d;++c){var e=this.lines[c];this.height-=e.height;var f=e;f.parent=null;Te(f);S(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(a=0;a<b.length;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};Lb.prototype={chunkSize:function(){return this.size},
removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(a<e){var f=Math.min(b,e-a),g=d.height;d.removeInner(a,f);this.height-=g-d.height;e==f&&(this.children.splice(c--,1),d.parent=null);if(0==(b-=f))break;a=0}else a-=e}25>this.size-b&&(1<this.children.length||!(this.children[0]instanceof Kb))&&(c=[],this.collapse(c),this.children=[new Kb(c)],this.children[0].parent=this)},collapse:function(a){for(var b=0;b<this.children.length;++b)this.children[b].collapse(a)},
insertInner:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<=f){e.insertInner(a,b,c);if(e.lines&&50<e.lines.length){for(;50<e.lines.length;)a=e.lines.splice(e.lines.length-25,25),a=new Kb(a),e.height-=a.height,this.children.splice(d+1,0,a),a.parent=this;this.maybeSpill()}break}a-=f}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5),b=new Lb(b);if(a.parent){a.size-=
b.size;a.height-=b.height;var c=R(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new Lb(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){f=Math.min(b,f-a);if(e.iterN(a,f,c))return!0;if(0==(b-=f))break;a=0}else a-=f}}};var ng=0,V=l.Doc=function(a,b,c,d){if(!(this instanceof V))return new V(a,b,c,d);null==c&&(c=0);
Lb.call(this,[new Kb([new Jb("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.frontier=c;c=q(c,0);this.sel=pa(c);this.history=new Ec(null);this.id=++ng;this.modeOption=b;this.lineSep=d;"string"==typeof a&&(a=this.splitLines(a));sd(this,{from:c,to:c,text:a});O(this,pa(c),qa)};V.prototype=ff(Lb.prototype,{constructor:V,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=
0,d=0;d<b.length;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=zd(this,this.first,this.first+this.size);return!1===a?b:b.join(a||this.lineSeparator())},setValue:T(function(a){var b=q(this.first,0),c=this.first+this.size-1;Ya(this,{from:b,to:q(c,r(this,c).text.length),text:this.splitLines(a),origin:"setValue",full:!0},!0);O(this,pa(b))}),replaceRange:function(a,b,c,d){b=B(this,b);c=c?B(this,c):b;eb(this,a,b,
c,d)},getRange:function(a,b,c){a=La(this,B(this,a),B(this,b));return!1===c?a:a.join(c||this.lineSeparator())},getLine:function(a){return(a=this.getLineHandle(a))&&a.text},getLineHandle:function(a){if(Ab(this,a))return r(this,a)},getLineNumber:function(a){return I(a)},getLineHandleVisualStart:function(a){"number"==typeof a&&(a=r(this,a));return ra(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return B(this,
a)},getCursor:function(a){var b=this.sel.primary();return null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||"to"==a||!1===a?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:T(function(a,b,c){a=B(this,"number"==typeof a?q(a,b||0):a);O(this,pa(a,null),c)}),setSelection:T(function(a,b,c){var d=B(this,a);a=B(this,b||a);O(this,pa(d,a),c)}),extendSelection:T(function(a,b,c){dc(this,B(this,a),b&&B(this,b),
c)}),extendSelections:T(function(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=B(this,a[d]);ae(this,c)}),extendSelectionsBy:T(function(a,b){ae(this,ac(this.sel.ranges,a),b)}),setSelections:T(function(a,b,c){if(a.length){for(var d=0,e=[];d<a.length;d++)e[d]=new C(B(this,a[d].anchor),B(this,a[d].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex));O(this,ha(e,b),c)}}),addSelection:T(function(a,b,c){var d=this.sel.ranges.slice(0);d.push(new C(B(this,a),B(this,b||a)));O(this,ha(d,d.length-1),c)}),
getSelection:function(a){for(var b=this.sel.ranges,c,d=0;d<b.length;d++){var e=La(this,b[d].from(),b[d].to());c=c?c.concat(e):e}return!1===a?c:c.join(a||this.lineSeparator())},getSelections:function(a){for(var b=[],c=this.sel.ranges,d=0;d<c.length;d++){var e=La(this,c[d].from(),c[d].to());!1!==a&&(e=e.join(a||this.lineSeparator()));b[d]=e}return b},replaceSelection:function(a,b,c){for(var d=[],e=0;e<this.sel.ranges.length;e++)d[e]=a;this.replaceSelections(d,b,c||"+input")},replaceSelections:T(function(a,
b,c){for(var d=[],e=this.sel,f=0;f<e.ranges.length;f++){var g=e.ranges[f];d[f]={from:g.from(),to:g.to(),text:this.splitLines(a[f]),origin:c}}if(f=b&&"end"!=b){f=[];c=a=q(this.first,0);for(e=0;e<d.length;e++){var h=d[e],g=Ee(h.from,a,c),k=Ee(Oa(h),a,c);a=h.to;c=k;"around"==b?(h=this.sel.ranges[e],h=0>z(h.head,h.anchor),f[e]=new C(h?k:g,h?g:k)):f[e]=new C(g,g)}f=new ua(f,this.sel.primIndex)}b=f;for(f=d.length-1;0<=f;f--)Ya(this,d[f]);b?be(this,b):this.cm&&Za(this.cm)}),undo:T(function(){uc(this,"undo")}),
redo:T(function(){uc(this,"redo")}),undoSelection:T(function(){uc(this,"undo",!0)}),redoSelection:T(function(){uc(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].ranges||++b;for(d=0;d<a.undone.length;d++)a.undone[d].ranges||++c;return{undo:b,redo:c}},clearHistory:function(){this.history=new Ec(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=
this.changeGeneration(!0)},changeGeneration:function(a){a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null);return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:hb(this.history.done),undone:hb(this.history.undone)}},setHistory:function(a){var b=this.history=new Ec(this.history.maxGeneration);b.done=hb(a.done.slice(0),null,!0);b.undone=hb(a.undone.slice(0),null,!0)},addLineClass:T(function(a,
b,c){return xc(this,a,"gutter"==b?"gutter":"class",function(a){var e="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass";if(a[e]){if(Ob(c).test(a[e]))return!1;a[e]+=" "+c}else a[e]=c;return!0})}),removeLineClass:T(function(a,b,c){return xc(this,a,"gutter"==b?"gutter":"class",function(a){var e="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass",f=a[e];if(f)if(null==c)a[e]=null;else{var g=f.match(Ob(c));if(!g)return!1;var h=g.index+
g[0].length;a[e]=f.slice(0,g.index)+(g.index&&h!=f.length?" ":"")+f.slice(h)||null}else return!1;return!0})}),addLineWidget:T(function(a,b,c){return Zf(this,a,b,c)}),removeLineWidget:function(a){a.clear()},markText:function(a,b,c){return gb(this,B(this,a),B(this,b),c,"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared,handleMouseEvents:b&&b.handleMouseEvents};a=B(this,a);return gb(this,a,a,c,"bookmark")},
findMarksAt:function(a){a=B(this,a);var b=[],c=r(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},findMarks:function(a,b,c){a=B(this,a);b=B(this,b);var d=[],e=a.line;this.iter(a.line,b.line+1,function(f){if(f=f.markedSpans)for(var g=0;g<f.length;g++){var h=f[g];e==a.line&&a.ch>h.to||null==h.from&&e!=a.line||e==b.line&&h.from>b.ch||c&&!c(h.marker)||d.push(h.marker.parent||h.marker)}++e});
return d},getAllMarks:function(){var a=[];this.iter(function(b){if(b=b.markedSpans)for(var c=0;c<b.length;++c)null!=b[c].from&&a.push(b[c].marker)});return a},posFromIndex:function(a){var b,c=this.first;this.iter(function(d){d=d.text.length+1;if(d>a)return b=a,!0;a-=d;++c});return B(this,q(c,b))},indexFromPos:function(a){a=B(this,a);var b=a.ch;if(a.line<this.first||0>a.ch)return 0;this.iter(this.first,a.line,function(a){b+=a.text.length+1});return b},copy:function(a){var b=new V(zd(this,this.first,
this.first+this.size),this.modeOption,this.first,this.lineSep);b.scrollTop=this.scrollTop;b.scrollLeft=this.scrollLeft;b.sel=this.sel;b.extend=!1;a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory()));return b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new V(zd(this,b,c),a.mode||this.modeOption,b,this.lineSep);a.sharedHist&&(b.history=this.history);(this.linked||(this.linked=[])).push({doc:b,
sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}];a=Re(this);for(c=0;c<a.length;c++){var d=a[c],e=d.find(),f=b.clipPos(e.from),e=b.clipPos(e.to);z(f,e)&&(f=gb(b,f,e,d.primary,d.primary.type),d.markers.push(f),f.parent=d)}return b},unlinkDoc:function(a){a instanceof l&&(a=a.doc);if(this.linked)for(var b=0;b<this.linked.length;++b)if(this.linked[b].doc==a){this.linked.splice(b,1);a.unlinkDoc(this);Xf(Re(this));break}if(a.history==this.history){var c=[a.id];Pa(a,function(a){c.push(a.id)},
!0);a.history=new Ec(null);a.history.done=hb(this.history.done,c);a.history.undone=hb(this.history.undone,c)}},iterLinkedDocs:function(a){Pa(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(a){return this.lineSep?a.split(this.lineSep):og(a)},lineSeparator:function(){return this.lineSep||"\n"}});V.prototype.eachLine=V.prototype.iter;var pg="iter insert remove copy getEditor constructor".split(" "),Sb;for(Sb in V.prototype)V.prototype.hasOwnProperty(Sb)&&
0>R(pg,Sb)&&(l.prototype[Sb]=function(a){return function(){return a.apply(this.doc,arguments)}}(V.prototype[Sb]));ib(V);var U=l.e_preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},qg=l.e_stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},ld=l.e_stop=function(a){U(a);qg(a)},y=l.on=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),(a[b]||(a[b]=[])).push(c))},
ta=l.off=function(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else if(a=a._handlers&&a._handlers[b])for(b=0;b<a.length;++b)if(a[b]==c){a.splice(b,1);break}},M=l.signal=function(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)},Mb=null,Gd=30,Ae=l.Pass={toString:function(){return"CodeMirror.Pass"}},qa={scroll:!1},md={origin:"*mouse"},Pb={origin:"+move"};
mb.prototype.set=function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)};var ia=l.countColumn=function(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));d=d||0;for(e=e||0;;){var f=a.indexOf("\t",d);if(0>f||f>=b)return e+(b-d);e+=f-d;e+=c-e%c;d=f+1}},Fc=[""],jb=function(a){a.select()};$a?jb=function(a){a.selectionStart=0;a.selectionEnd=a.value.length}:E&&(jb=function(a){try{a.select()}catch(b){}});var rg=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,
gf=l.isWordChar=function(a){return/\w/.test(a)||"\u0080"<a&&(a.toUpperCase()!=a.toLowerCase()||rg.test(a))},hg=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,
Ma;Ma=document.createRange?function(a,b,c,d){var e=document.createRange();e.setEnd(d||a,c);e.setStart(a,b);return e}:function(a,b,c){var d=document.body.createTextRange();try{d.moveToElementText(a.parentNode)}catch(e){return d}d.collapse(!0);d.moveEnd("character",c);d.moveStart("character",b);return d};var Yc=l.contains=function(a,b){3==b.nodeType&&(b=b.parentNode);if(a.contains)return a.contains(b);do if(11==b.nodeType&&(b=b.host),b==a)return!0;while(b=b.parentNode)};E&&11>J&&(oa=function(){try{return document.activeElement}catch(a){return document.body}});
var ub=l.rmClass=function(a,b){var c=a.className,d=Ob(b).exec(c);if(d){var e=c.slice(d.index+d[0].length);a.className=c.slice(0,d.index)+(e?d[1]+e:"")}},wb=l.addClass=function(a,b){var c=a.className;Ob(b).test(c)||(a.className+=(c?" ":"")+b)},Cd=!1,Kf=function(){if(E&&9>J)return!1;var a=t("div");return"draggable"in a||"dragDrop"in a}(),Ad,xd,og=l.splitLines=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==
a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},mg=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},Ce=function(){var a=t("div");if("oncopy"in a)return!0;a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),
dd=null,Da={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",
63276:"PageUp",63277:"PageDown",63302:"Insert"};l.keyNames=Da;(function(){for(var a=0;10>a;a++)Da[a+48]=Da[a+96]=String(a);for(a=65;90>=a;a++)Da[a]=String.fromCharCode(a);for(a=1;12>=a;a++)Da[a+111]=Da[a+63235]="F"+a})();var Fb,fg=function(){function a(a){return 247>=a?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(a):
1424<=a&&1524>=a?"R":1536<=a&&1773>=a?"rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm".charAt(a-1536):1774<=a&&2220>=a?"r":8192<=a&&8203>=a?"w":8204==a?"b":"L"}function b(a,b,c){this.level=a;this.from=b;this.to=c}var c=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,d=/[stwN]/,e=/[LRr]/,f=/[Lb1n]/,g=/[1n]/;return function(h){if(!c.test(h))return!1;
for(var k=h.length,m=[],n=0,l;n<k;++n)m.push(a(h.charCodeAt(n)));for(var n=0,p="L";n<k;++n)l=m[n],"m"==l?m[n]=p:p=l;n=0;for(p="L";n<k;++n)l=m[n],"1"==l&&"r"==p?m[n]="n":e.test(l)&&(p=l,"r"==l&&(m[n]="R"));n=1;for(p=m[0];n<k-1;++n)l=m[n],"+"==l&&"1"==p&&"1"==m[n+1]?m[n]="1":","!=l||p!=m[n+1]||"1"!=p&&"n"!=p||(m[n]=p),p=l;for(n=0;n<k;++n)if(l=m[n],","==l)m[n]="N";else if("%"==l){for(p=n+1;p<k&&"%"==m[p];++p);var q=n&&"!"==m[n-1]||p<k&&"1"==m[p]?"1":"N";for(l=n;l<p;++l)m[l]=q;n=p-1}n=0;for(p="L";n<k;++n)l=
m[n],"L"==p&&"1"==l?m[n]="L":e.test(l)&&(p=l);for(n=0;n<k;++n)if(d.test(m[n])){for(p=n+1;p<k&&d.test(m[p]);++p);l="L"==(p<k?m[p]:"L");q="L"==(n?m[n-1]:"L")||l?"L":"R";for(l=n;l<p;++l)m[l]=q;n=p-1}for(var p=[],r,n=0;n<k;)if(f.test(m[n])){l=n;for(++n;n<k&&f.test(m[n]);++n);p.push(new b(0,l,n))}else{var t=n,q=p.length;for(++n;n<k&&"L"!=m[n];++n);for(l=t;l<n;)if(g.test(m[l])){t<l&&p.splice(q,0,new b(1,t,l));t=l;for(++l;l<n&&g.test(m[l]);++l);p.splice(q,0,new b(2,t,l));t=l}else++l;t<n&&p.splice(q,0,new b(1,
t,n))}1==p[0].level&&(r=h.match(/^\s+/))&&(p[0].from=r[0].length,p.unshift(new b(0,0,r[0].length)));1==A(p).level&&(r=h.match(/\s+$/))&&(A(p).to-=r[0].length,p.push(new b(0,k-r[0].length,k)));2==p[0].level&&p.unshift(new b(1,p[0].to,p[0].to));p[0].level!=A(p).level&&p.push(new b(p[0].level,k,k));return p}}();l.version="5.5.0";return l});
(function(l){"object"==typeof exports&&"object"==typeof module?l(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],l):l(CodeMirror)})(function(l){l.defineMode("sql",function(ka,G){function L(l,D){var w=l.next();if(ya[w]){var G=ya[w](l,D);if(!1!==G)return G}if(1==P.hexNumber&&("0"==w&&l.match(/^[xX][0-9a-fA-F]+/)||("x"==w||"X"==w)&&l.match(/^'[0-9a-fA-F]+'/))||1==P.binaryNumber&&(("b"==w||"B"==w)&&l.match(/^'[01]+'/)||"0"==w&&l.match(/^b[01]+/)))return"number";
if(47<w.charCodeAt(0)&&58>w.charCodeAt(0))return l.match(/^[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/),1==P.decimallessFloat&&l.eat("."),"number";if("?"==w&&(l.eatSpace()||l.eol()||l.eat(";")))return"variable-3";if("'"==w||'"'==w&&P.doubleQuote)return D.tokenize=u(w),D.tokenize(l,D);if(!(1==P.nCharCast&&("n"==w||"N"==w)||1==P.charsetCast&&"_"==w&&l.match(/[a-z][a-z0-9]*/i))||"'"!=l.peek()&&'"'!=l.peek()){if(/^[\(\),\;\[\]]/.test(w))return null;if(P.commentSlashSlash&&"/"==w&&l.eat("/")||P.commentHash&&"#"==
w||"-"==w&&l.eat("-")&&(!P.commentSpaceRequired||l.eat(" ")))return l.skipToEnd(),"comment";if("/"==w&&l.eat("*"))return D.tokenize=F,D.tokenize(l,D);if("."==w){if(1==P.zerolessFloat&&l.match(/^(?:\d+(?:e[+-]?\d+)?)/i))return"number";if(1==P.ODBCdotTable&&l.match(/^[a-zA-Z_]+/))return"variable-2"}else{if(Wa.test(w))return l.eatWhile(Wa),null;if("{"==w&&(l.match(/^( )*(d|D|t|T|ts|TS)( )*'[^']*'( )*}/)||l.match(/^( )*(d|D|t|T|ts|TS)( )*"[^"]*"( )*}/)))return"number";l.eatWhile(/^[_\w\d]/);w=l.current().toLowerCase();
return tb.hasOwnProperty(w)&&(l.match(/^( )+'[^']*'/)||l.match(/^( )+"[^"]*"/))?"number":Tb.hasOwnProperty(w)?"atom":sb.hasOwnProperty(w)?"builtin":Va.hasOwnProperty(w)?"keyword":ea.hasOwnProperty(w)?"string-2":null}}else return"keyword"}function u(l){return function(D,w){for(var u=!1,F;null!=(F=D.next());){if(F==l&&!u){w.tokenize=L;break}u=!u&&"\\"==F}return"string"}}function F(l,D){for(;;)if(l.skipTo("*")){if(l.next(),l.eat("/")){D.tokenize=L;break}}else{l.skipToEnd();break}return"comment"}function D(l,
D,w){D.context={prev:D.context,indent:l.indentation(),col:l.column(),type:w}}var ea=G.client||{},Tb=G.atoms||{"false":!0,"true":!0,"null":!0},sb=G.builtin||{},Va=G.keywords||{},Wa=G.operatorChars||/^[*+\-%<>!=&|~^]/,P=G.support||{},ya=G.hooks||{},tb=G.dateSQL||{date:!0,time:!0,timestamp:!0};return{startState:function(){return{tokenize:L,context:null}},token:function(l,u){l.sol()&&u.context&&null==u.context.align&&(u.context.align=!1);if(l.eatSpace())return null;var w=u.tokenize(l,u);if("comment"==
w)return w;u.context&&null==u.context.align&&(u.context.align=!0);var F=l.current();"("==F?D(l,u,")"):"["==F?D(l,u,"]"):u.context&&u.context.type==F&&(u.indent=u.context.indent,u.context=u.context.prev);return w},indent:function(u,D){var w=u.context;if(!w)return l.Pass;var F=D.charAt(0)==w.type;return w.align?w.col+(F?0:1):w.indent+(F?0:ka.indentUnit)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:P.commentSlashSlash?"//":P.commentHash?"#":null}});(function(){function ka(l){for(var u;null!=
(u=l.next());)if("`"==u&&!l.eat("`"))return"variable-2";l.backUp(l.current().length-1);return l.eatWhile(/\w/)?"variable-2":null}function G(l){l.eat("@")&&(l.match(/^session\./),l.match(/^local\./),l.match(/^global\./));return l.eat("'")?(l.match(/^.*'/),"variable-2"):l.eat('"')?(l.match(/^.*"/),"variable-2"):l.eat("`")?(l.match(/^.*`/),"variable-2"):l.match(/^[0-9a-zA-Z$\.\_]+/)?"variable-2":null}function L(l){return l.eat("N")?"atom":l.match(/^[a-zA-Z.#!?]/)?"variable-2":null}function u(l){var u=
{};l=l.split(" ");for(var ea=0;ea<l.length;++ea)u[l[ea]]=!0;return u}l.defineMIME("text/x-sql",{name:"sql",keywords:u("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where begin"),builtin:u("bool boolean bit blob enum long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision real date datetime year unsigned signed decimal numeric"),
atoms:u("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:u("date time timestamp"),support:u("ODBCdotTable doubleQuote binaryNumber hexNumber")});l.defineMIME("text/x-mssql",{name:"sql",client:u("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:u("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where begin trigger proc view index for add constraint key primary foreign collate clustered nonclustered declare"),
builtin:u("bigint numeric bit smallint decimal smallmoney int tinyint money float real char varchar text nchar nvarchar ntext binary varbinary image cursor timestamp hierarchyid uniqueidentifier sql_variant xml table "),atoms:u("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:u("date datetimeoffset datetime2 smalldatetime datetime time"),hooks:{"@":G}});l.defineMIME("text/x-mysql",{name:"sql",client:u("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),
keywords:u("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where accessible action add after algorithm all analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general get global grant grants group group_concat handler hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show signal slave slow smallint snapshot soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),
builtin:u("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:u("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:u("date time timestamp"),support:u("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),
hooks:{"@":G,"`":ka,"\\":L}});l.defineMIME("text/x-mariadb",{name:"sql",client:u("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:u("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where accessible action add after algorithm all always analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general generated get global grant grants group groupby_concat handler hard hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password persistent phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show shutdown signal slave slow smallint snapshot soft soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views virtual warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),
builtin:u("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:u("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:u("date time timestamp"),support:u("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),
hooks:{"@":G,"`":ka,"\\":L}});l.defineMIME("text/x-cassandra",{name:"sql",client:{},keywords:u("add all allow alter and any apply as asc authorize batch begin by clustering columnfamily compact consistency count create custom delete desc distinct drop each_quorum exists filtering from grant if in index insert into key keyspace keyspaces level limit local_one local_quorum modify nan norecursive nosuperuser not of on one order password permission permissions primary quorum rename revoke schema select set storage superuser table three to token truncate ttl two type unlogged update use user users using values where with writetime"),
builtin:u("ascii bigint blob boolean counter decimal double float frozen inet int list map static text timestamp timeuuid tuple uuid varchar varint"),atoms:u("false true infinity NaN"),operatorChars:/^[<>=]/,dateSQL:{},support:u("commentSlashSlash decimallessFloat"),hooks:{}});l.defineMIME("text/x-plsql",{name:"sql",client:u("appinfo arraysize autocommit autoprint autorecovery autotrace blockterminator break btitle cmdsep colsep compatibility compute concat copycommit copytypecheck define describe echo editfile embedded escape exec execute feedback flagger flush heading headsep instance linesize lno loboffset logsource long longchunksize markup native newpage numformat numwidth pagesize pause pno recsep recsepchar release repfooter repheader serveroutput shiftinout show showmode size spool sqlblanklines sqlcase sqlcode sqlcontinue sqlnumber sqlpluscompatibility sqlprefix sqlprompt sqlterminator suffix tab term termout time timing trimout trimspool ttitle underline verify version wrap"),
keywords:u("abort accept access add all alter and any array arraylen as asc assert assign at attributes audit authorization avg base_table begin between binary_integer body boolean by case cast char char_base check close cluster clusters colauth column comment commit compress connect connected constant constraint crash create current currval cursor data_base database date dba deallocate debugoff debugon decimal declare default definition delay delete desc digits dispose distinct do drop else elseif elsif enable end entry escape exception exception_init exchange exclusive exists exit external fast fetch file for force form from function generic goto grant group having identified if immediate in increment index indexes indicator initial initrans insert interface intersect into is key level library like limited local lock log logging long loop master maxextents maxtrans member minextents minus mislabel mode modify multiset new next no noaudit nocompress nologging noparallel not nowait number_base object of off offline on online only open option or order out package parallel partition pctfree pctincrease pctused pls_integer positive positiven pragma primary prior private privileges procedure public raise range raw read rebuild record ref references refresh release rename replace resource restrict return returning returns reverse revoke rollback row rowid rowlabel rownum rows run savepoint schema segment select separate session set share snapshot some space split sql start statement storage subtype successful synonym tabauth table tables tablespace task terminate then to trigger truncate type union unique unlimited unrecoverable unusable update use using validate value values variable view views when whenever where while with work"),
builtin:u("abs acos add_months ascii asin atan atan2 average bfile bfilename bigserial bit blob ceil character chartorowid chr clob concat convert cos cosh count dec decode deref dual dump dup_val_on_index empty error exp false float floor found glb greatest hextoraw initcap instr instrb int integer isopen last_day least lenght lenghtb ln lower lpad ltrim lub make_ref max min mlslabel mod months_between natural naturaln nchar nclob new_time next_day nextval nls_charset_decl_len nls_charset_id nls_charset_name nls_initcap nls_lower nls_sort nls_upper nlssort no_data_found notfound null number numeric nvarchar2 nvl others power rawtohex real reftohex round rowcount rowidtochar rowtype rpad rtrim serial sign signtype sin sinh smallint soundex sqlcode sqlerrm sqrt stddev string substr substrb sum sysdate tan tanh to_char text to_date to_label to_multi_byte to_number to_single_byte translate true trunc uid unlogged upper user userenv varchar varchar2 variance varying vsize xml"),
operatorChars:/^[*+\-%<>!=~]/,dateSQL:u("date time timestamp"),support:u("doubleQuote nCharCast zerolessFloat binaryNumber hexNumber")});l.defineMIME("text/x-hive",{name:"sql",keywords:u("select alter $elem$ $key$ $value$ add after all analyze and archive as asc before between binary both bucket buckets by cascade case cast change cluster clustered clusterstatus collection column columns comment compute concatenate continue create cross cursor data database databases dbproperties deferred delete delimited desc describe directory disable distinct distribute drop else enable end escaped exclusive exists explain export extended external false fetch fields fileformat first format formatted from full function functions grant group having hold_ddltime idxproperties if import in index indexes inpath inputdriver inputformat insert intersect into is items join keys lateral left like limit lines load local location lock locks mapjoin materialized minus msck no_drop nocompress not of offline on option or order out outer outputdriver outputformat overwrite partition partitioned partitions percent plus preserve procedure purge range rcfile read readonly reads rebuild recordreader recordwriter recover reduce regexp rename repair replace restrict revoke right rlike row schema schemas semi sequencefile serde serdeproperties set shared show show_database sort sorted ssl statistics stored streamtable table tables tablesample tblproperties temporary terminated textfile then tmp to touch transform trigger true unarchive undo union uniquejoin unlock update use using utc utc_tmestamp view when where while with"),
builtin:u("bool boolean long timestamp tinyint smallint bigint int float double date datetime unsigned string array struct map uniontype"),atoms:u("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:u("date timestamp"),support:u("ODBCdotTable doubleQuote binaryNumber hexNumber")})})()});
(function(l){"object"==typeof exports&&"object"==typeof module?l(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],l):l(CodeMirror)})(function(l){function ka(l){l.state.placeholder&&(l.state.placeholder.parentNode.removeChild(l.state.placeholder),l.state.placeholder=null)}function G(l){ka(l);var u=l.state.placeholder=document.createElement("pre");u.style.cssText="height: 0; overflow: visible";u.className="CodeMirror-placeholder";u.appendChild(document.createTextNode(l.getOption("placeholder")));
l.display.lineSpace.insertBefore(u,l.display.lineSpace.firstChild)}function L(l){F(l)&&G(l)}function u(l){var u=l.getWrapperElement(),L=F(l);u.className=u.className.replace(" CodeMirror-empty","")+(L?" CodeMirror-empty":"");L?G(l):ka(l)}function F(l){return 1===l.lineCount()&&""===l.getLine(0)}l.defineOption("placeholder","",function(D,F,G){G=G&&G!=l.Init;F&&!G?(D.on("blur",L),D.on("change",u),u(D)):!F&&G&&(D.off("blur",L),D.off("change",u),ka(D),G=D.getWrapperElement(),G.className=G.className.replace(" CodeMirror-empty",
""));F&&!D.hasFocus()&&L(D)})});
